require.config({"config": {
        "jsbuild":{"Magento_Catalog/js/product/list/toolbar.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * ProductListToolbarForm Widget - this widget is setting cookie and submitting form according to toolbar controls\r\n     */\r\n    $.widget('mage.productListToolbarForm', {\r\n\r\n        options: {\r\n            modeControl: '[data-role=\"mode-switcher\"]',\r\n            directionControl: '[data-role=\"direction-switcher\"]',\r\n            orderControl: '[data-role=\"sorter\"]',\r\n            limitControl: '[data-role=\"limiter\"]',\r\n            mode: 'product_list_mode',\r\n            direction: 'product_list_dir',\r\n            order: 'product_list_order',\r\n            limit: 'product_list_limit',\r\n            page: 'p',\r\n            modeDefault: 'grid',\r\n            directionDefault: 'asc',\r\n            orderDefault: 'position',\r\n            limitDefault: '9',\r\n            url: '',\r\n            formKey: '',\r\n            post: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            this._bind(\r\n                $(this.options.modeControl, this.element),\r\n                this.options.mode,\r\n                this.options.modeDefault\r\n            );\r\n            this._bind(\r\n                $(this.options.directionControl, this.element),\r\n                this.options.direction,\r\n                this.options.directionDefault\r\n            );\r\n            this._bind(\r\n                $(this.options.orderControl, this.element),\r\n                this.options.order,\r\n                this.options.orderDefault\r\n            );\r\n            this._bind(\r\n                $(this.options.limitControl, this.element),\r\n                this.options.limit,\r\n                this.options.limitDefault\r\n            );\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _bind: function (element, paramName, defaultValue) {\r\n            if (element.is('select')) {\r\n                element.on('change', {\r\n                    paramName: paramName,\r\n                    'default': defaultValue\r\n                }, $.proxy(this._processSelect, this));\r\n            } else {\r\n                element.on('click', {\r\n                    paramName: paramName,\r\n                    'default': defaultValue\r\n                }, $.proxy(this._processLink, this));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _processLink: function (event) {\r\n            event.preventDefault();\r\n            this.changeUrl(\r\n                event.data.paramName,\r\n                $(event.currentTarget).data('value'),\r\n                event.data.default\r\n            );\r\n        },\r\n\r\n        /**\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _processSelect: function (event) {\r\n            this.changeUrl(\r\n                event.data.paramName,\r\n                event.currentTarget.options[event.currentTarget.selectedIndex].value,\r\n                event.data.default\r\n            );\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        getUrlParams: function () {\r\n            var decode = window.decodeURIComponent,\r\n                urlPaths = this.options.url.split('?'),\r\n                urlParams = urlPaths[1] ? urlPaths[1].split('&') : [],\r\n                params = {},\r\n                parameters, i;\r\n\r\n            for (i = 0; i < urlParams.length; i++) {\r\n                parameters = urlParams[i].split('=');\r\n                params[decode(parameters[0])] = parameters[1] !== undefined ?\r\n                    decode(parameters[1].replace(/\\+/g, '%20')) :\r\n                    '';\r\n            }\r\n\r\n            return params;\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        getCurrentLimit: function () {\r\n            return this.getUrlParams()[this.options.limit] || this.options.limitDefault;\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        getCurrentPage: function () {\r\n            return this.getUrlParams()[this.options.page] || 1;\r\n        },\r\n\r\n        /**\r\n         * @param {String} paramName\r\n         * @param {*} paramValue\r\n         * @param {*} defaultValue\r\n         */\r\n        changeUrl: function (paramName, paramValue, defaultValue) {\r\n            var urlPaths = this.options.url.split('?'),\r\n                baseUrl = urlPaths[0],\r\n                paramData = this.getUrlParams(),\r\n                currentPage = this.getCurrentPage(),\r\n                form, params, key, input, formKey, newPage;\r\n\r\n            if (currentPage > 1 && paramName === this.options.limit) {\r\n                newPage = Math.floor(this.getCurrentLimit() * (currentPage - 1) / paramValue) + 1;\r\n\r\n                if (newPage > 1) {\r\n                    paramData[this.options.page] = newPage;\r\n                } else {\r\n                    delete paramData[this.options.page];\r\n                }\r\n            }\r\n\r\n            paramData[paramName] = paramValue;\r\n\r\n            if (this.options.post) {\r\n                form = document.createElement('form');\r\n                params = [this.options.mode, this.options.direction, this.options.order, this.options.limit];\r\n\r\n                for (key in paramData) {\r\n                    if (params.indexOf(key) !== -1) { //eslint-disable-line max-depth\r\n                        input = document.createElement('input');\r\n                        input.name = key;\r\n                        input.value = paramData[key];\r\n                        form.appendChild(input);\r\n                        delete paramData[key];\r\n                    }\r\n                }\r\n                formKey = document.createElement('input');\r\n                formKey.name = 'form_key';\r\n                formKey.value = this.options.formKey;\r\n                form.appendChild(formKey);\r\n\r\n                paramData = $.param(paramData);\r\n                baseUrl += paramData.length ? '?' + paramData : '';\r\n\r\n                form.action = baseUrl;\r\n                form.method = 'POST';\r\n                document.body.appendChild(form);\r\n                form.submit();\r\n            } else {\r\n                if (paramValue == defaultValue) { //eslint-disable-line eqeqeq\r\n                    delete paramData[paramName];\r\n                }\r\n\r\n                paramData = $.param(paramData);\r\n                location.href = baseUrl + (paramData.length ? '?' + paramData : '');\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.productListToolbarForm;\r\n});\r\n","Magento_Catalog/js/product/list/columns/final-price.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'mageUtils',\r\n    'uiCollection'\r\n], function (_, registry, utils, Collection) {\r\n    'use strict';\r\n\r\n    return Collection.extend({\r\n        defaults: {\r\n            label: false,\r\n            headerTmpl: 'ui/grid/columns/text',\r\n            showMinimalPrice: false,\r\n            showMaximumPrice: false,\r\n            useLinkForAsLowAs: false,\r\n            bodyTmpl: 'Magento_Catalog/product/final_price',\r\n            priceWrapperCssClasses: '',\r\n            priceWrapperAttr: {}\r\n        },\r\n\r\n        /**\r\n         * Get product final price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} final price html\r\n         */\r\n        getPrice: function (row) {\r\n            return row['price_info']['formatted_prices']['final_price'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} final price html\r\n         */\r\n        getPriceUnsanitizedHtml: function (row) {\r\n            return this.getPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Get product regular price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} regular price html\r\n         */\r\n        getRegularPrice: function (row) {\r\n            return row['price_info']['formatted_prices']['regular_price'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getRegularPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} regular price html\r\n         */\r\n        getRegularPriceUnsanitizedHtml: function (row) {\r\n            return this.getRegularPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Check if product has a price range.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Boolean}\r\n         */\r\n        hasPriceRange: function (row) {\r\n            return row['price_info']['max_regular_price'] !== row['price_info']['min_regular_price'];\r\n        },\r\n\r\n        /**\r\n         * Check if product has special price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} special price html\r\n         */\r\n        hasSpecialPrice: function (row) {\r\n            return row['price_info']['regular_price'] > row['price_info']['final_price'];\r\n        },\r\n\r\n        /**\r\n         * Check if product has minimal price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} minimal price html\r\n         */\r\n        isMinimalPrice: function (row) {\r\n            return row['price_info']['minimal_price'] < row['price_info']['final_price'];\r\n        },\r\n\r\n        /**\r\n         * Get product minimal price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} minimal price html\r\n         */\r\n        getMinimalPrice: function (row) {\r\n            return row['price_info']['formatted_prices']['minimal_price'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getMinimalPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} minimal price html\r\n         */\r\n        getMinimalPriceUnsanitizedHtml: function (row) {\r\n            return this.getMinimalPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Check if product is salable.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Boolean}\r\n         */\r\n        isSalable: function (row) {\r\n            return row['is_salable'];\r\n        },\r\n\r\n        /**\r\n         * Get product maximum price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} maximum price html\r\n         */\r\n        getMaxPrice: function (row) {\r\n            return row['price_info']['formatted_prices']['max_price'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getMaxPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} maximum price html\r\n         */\r\n        getMaxPriceUnsanitizedHtml: function (row) {\r\n            return this.getMaxPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Get product maximum regular price in case of price range and special price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} maximum regular price html\r\n         */\r\n        getMaxRegularPrice: function (row) {\r\n            return row['price_info']['formatted_prices']['max_regular_price'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getMaxRegularPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} maximum regular price html\r\n         */\r\n        getMaxRegularPriceUnsanitizedHtml: function (row) {\r\n            return this.getMaxRegularPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Get product minimal regular price in case of price range and special price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} minimal regular price html\r\n         */\r\n        getMinRegularPrice: function (row) {\r\n            return row['price_info']['formatted_prices']['min_regular_price'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getMinRegularPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} minimal regular price html\r\n         */\r\n        getMinRegularPriceUnsanitizedHtml: function (row) {\r\n            return this.getMinRegularPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Get adjustments names and return as string.\r\n         *\r\n         * @return {String} adjustments classes\r\n         */\r\n        getAdjustmentCssClasses: function () {\r\n            return _.pluck(this.getAdjustments(), 'index').join(' ');\r\n        },\r\n\r\n        /**\r\n         * Get product minimal price as number.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number} minimal price amount\r\n         */\r\n        getMinimalPriceAmount: function (row) {\r\n            return row['price_info']['minimal_price'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getMinimalPriceAmount\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number} minimal price amount\r\n         */\r\n        getMinimalPriceAmountUnsanitizedHtml: function (row) {\r\n            return this.getMinimalPriceAmount(row);\r\n        },\r\n\r\n        /**\r\n         * Get product minimal regular price as number in case of special price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number} minimal regular price amount\r\n         */\r\n        getMinimalRegularPriceAmount: function (row) {\r\n            return row['price_info']['min_regular_price'];\r\n        },\r\n\r\n        /**\r\n         * Get product maximum price as number.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number} maximum price amount\r\n         */\r\n        getMaximumPriceAmount: function (row) {\r\n            return row['price_info']['max_price'];\r\n        },\r\n\r\n        /**\r\n         * Get product maximum regular price as number in case of special price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number} maximum regular price amount\r\n         */\r\n        getMaximumRegularPriceAmount: function (row) {\r\n            return row['price_info']['max_regular_price'];\r\n        },\r\n\r\n        /**\r\n         * Check if minimal regular price exist for product.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Boolean}\r\n         */\r\n        showMinRegularPrice: function (row) {\r\n            return this.getMinimalPriceAmount(row) < this.getMinimalRegularPriceAmount(row);\r\n        },\r\n\r\n        /**\r\n         * Check if maximum regular price exist for product.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Boolean}\r\n         */\r\n        showMaxRegularPrice: function (row) {\r\n            return this.getMaximumPriceAmount(row) < this.getMaximumRegularPriceAmount(row);\r\n        },\r\n\r\n        /**\r\n         * Get path to the columns' body template.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getBody: function () {\r\n            return this.bodyTmpl;\r\n        },\r\n\r\n        /**\r\n         * Get all price adjustments.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        getAdjustments: function () {\r\n            var adjustments = this.elems();\r\n\r\n            _.each(adjustments, function (adjustment) {\r\n                adjustment.setPriceType(this.priceType);\r\n                adjustment.source = this.source;\r\n            }, this);\r\n\r\n            return adjustments;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/list/columns/image.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/grid/columns/column',\r\n    'Magento_Catalog/js/product/list/column-status-validator'\r\n], function (_, Element, columnStatusValidator) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            bodyTmpl: 'Magento_Catalog/product/list/columns/image',\r\n            imageCode: 'default',\r\n            image: {}\r\n        },\r\n\r\n        /**\r\n         * Find image by code in scope of images\r\n         *\r\n         * @param {Object} images\r\n         * @returns {*|T}\r\n         */\r\n        getImage: function (images) {\r\n            return _.filter(images, function (image) {\r\n                return this.imageCode === image.code;\r\n            }, this).pop();\r\n        },\r\n\r\n        /**\r\n         * Get image path.\r\n         *\r\n         * @param {Object} row\r\n         * @return {String}\r\n         */\r\n        getImageUrl: function (row) {\r\n            return this.getImage(row.images).url;\r\n        },\r\n\r\n        /**\r\n         * Get image box width.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number}\r\n         */\r\n        getWidth: function (row) {\r\n            return this.getImage(row.images).width;\r\n        },\r\n\r\n        /**\r\n         * Get image box height.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number}\r\n         */\r\n        getHeight: function (row) {\r\n            return this.getImage(row.images).height;\r\n        },\r\n\r\n        /**\r\n         * Get resized image width.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number}\r\n         */\r\n        getResizedImageWidth: function (row) {\r\n            return this.getImage(row.images)['resized_width'];\r\n        },\r\n\r\n        /**\r\n         * Get resized image height.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Number}\r\n         */\r\n        getResizedImageHeight: function (row) {\r\n            return this.getImage(row.images)['resized_height'];\r\n        },\r\n\r\n        /**\r\n         * Get image alt text.\r\n         *\r\n         * @param {Object} row\r\n         * @return {String}\r\n         */\r\n        getLabel: function (row) {\r\n            if (!this.imageExists(row)) {\r\n                return this._super();\r\n            }\r\n\r\n            return this.getImage(row.images).label;\r\n        },\r\n\r\n        /**\r\n         * Check if image exist.\r\n         *\r\n         * @param {Object} row\r\n         * @return {Boolean}\r\n         */\r\n        imageExists: function (row) {\r\n            return this.getImage(row.images) !== 'undefined';\r\n        },\r\n\r\n        /**\r\n         * Check if component must be shown.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        isAllowed: function () {\r\n            return columnStatusValidator.isValid(this.source(), 'image', 'show_attributes');\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/list/columns/price-box.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'uiRegistry',\r\n    'mageUtils',\r\n    'uiCollection',\r\n    'Magento_Catalog/js/product/list/column-status-validator',\r\n    'uiLayout'\r\n], function (ko, _, registry, utils, Collection, columnStatusValidator, layout) {\r\n    'use strict';\r\n\r\n    return Collection.extend({\r\n        defaults: {\r\n            label: '',\r\n            hasSpecialPrice: false,\r\n            showMinimalPrice: false,\r\n            useLinkForAsLowAs: false,\r\n            visible: true,\r\n            headerTmpl: 'ui/grid/columns/text',\r\n            bodyTmpl: 'Magento_Catalog/product/price/price_box',\r\n            disableAction: false,\r\n            controlVisibility: true,\r\n            sortable: false,\r\n            sorting: false,\r\n            draggable: true,\r\n            fieldClass: {},\r\n            renders: {\r\n                default: {}\r\n            },\r\n            ignoreTmpls: {\r\n                fieldAction: true\r\n            },\r\n            statefull: {\r\n                visible: true,\r\n                sorting: true\r\n            },\r\n            imports: {\r\n                exportSorting: 'sorting'\r\n            },\r\n            listens: {\r\n                elems: ''\r\n            },\r\n            modules: {\r\n                source: '${ $.provider }'\r\n            },\r\n            pricesInit: {}\r\n        },\r\n\r\n        /**\r\n         * Sort prices api\r\n         *\r\n         * @returns {exports}\r\n         */\r\n        sort: function () {\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Check whether is allowed to render price or not\r\n         *\r\n         * @returns {*}\r\n         */\r\n        isAllowed: function () {\r\n            return columnStatusValidator.isValid(this.source(), 'price', 'show_attributes');\r\n        },\r\n\r\n        /**\r\n         * Retrieve array of prices, that should be rendered for specific product\r\n         *\r\n         * @param {Array} row\r\n         * @return {Array}\r\n         */\r\n        getPrices: function (row) {\r\n            var elems = this.elems() ? this.elems() : ko.getObservable(this, 'elems'),\r\n                result;\r\n\r\n            //we cant take type of product from row\r\n            this.initPrices(row);\r\n            result = _.filter(elems, function (elem) {\r\n                return elem.productType === row.type;\r\n            });\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Recursive Merging of objects\r\n         *\r\n         * @param {Array} target\r\n         * @param {Array} source\r\n         * @returns {Array}\r\n         * @private\r\n         */\r\n        _deepObjectExtend: function (target, source) {\r\n            var _target = utils.copy(target);\r\n\r\n            _.each(source, function (value, key) {\r\n                if (_.keys(value).length && typeof _target[key] !== 'undefined') {\r\n                    _target[key] = this._deepObjectExtend(_target[key], value);\r\n                } else {\r\n                    _target[key] = value;\r\n                }\r\n            }, this);\r\n\r\n            return _target;\r\n        },\r\n\r\n        /**\r\n         * Init price type box, in cases when product type has custom component or bodyTmpl\r\n         *\r\n         * @param {String} productType\r\n         * @private\r\n         */\r\n        _initPriceWithCustomMetaData: function (productType) {\r\n            var price = this._deepObjectExtend(\r\n                this.renders.prices['default'],\r\n                this.renders.prices[productType]\r\n            );\r\n\r\n            price.name = productType + '.default';\r\n            price.parent = this.name;\r\n            price.source = this.source;\r\n            price.productType = productType;\r\n            layout([price]);\r\n        },\r\n\r\n        /**\r\n         * Init Prices by product type and add them to layout\r\n         *\r\n         * @param {Array} _priceData\r\n         * @param {String} productType\r\n         * @private\r\n         */\r\n        _initPricesForProductType: function (_priceData, productType) {\r\n            var prices = [];\r\n\r\n            this._setPriceNamesToPrices(_priceData, productType);\r\n            _.sortBy(_priceData, this._comparePrices);\r\n\r\n            _.each(_priceData, function (priceData) {\r\n                if (!priceData.component) {\r\n                    return;\r\n                }\r\n\r\n                priceData.parent = this.name;\r\n                priceData.provider = this.provider;\r\n                priceData.productType = productType;\r\n                priceData = utils.template(priceData, this);\r\n                prices.push(priceData);\r\n            }, this);\r\n\r\n            layout(prices);\r\n        },\r\n\r\n        /**\r\n         * Init dynamic price components\r\n         *\r\n         * @param {Array} row\r\n         * @returns {void}\r\n         */\r\n        initPrices: function (row) {\r\n            var _priceData = [],\r\n                productType = row.type,\r\n                defaultPrice = this.renders.prices['default'];\r\n\r\n            if (this.pricesInit[productType]) {\r\n                return true;\r\n            }\r\n\r\n            this.pricesInit[productType] = true;\r\n\r\n            if (this.renders.prices[productType] && this._needToApplyCustomTemplate(this.renders.prices[productType])) {\r\n                return this._initPriceWithCustomMetaData(productType);\r\n            }\r\n\r\n            if (this.renders.prices[productType] && this.renders.prices[productType].children) {\r\n                _priceData = this._deepObjectExtend(defaultPrice.children, this.renders.prices[productType].children);\r\n            } else {\r\n                _priceData = defaultPrice.children;\r\n            }\r\n\r\n            return this._initPricesForProductType(_priceData, productType);\r\n        },\r\n\r\n        /**\r\n         * Set name to all price components\r\n         *\r\n         * @param {Array} prices\r\n         * @param {String} productType\r\n         * @private\r\n         */\r\n        _setPriceNamesToPrices: function (prices, productType) {\r\n            _.each(prices, function (price, name) {\r\n                price.priceType = name;\r\n                price.name = name + '.' + productType;\r\n            });\r\n\r\n            return prices;\r\n        },\r\n\r\n        /**\r\n         * Sort callback to compare prices by sort order\r\n         *\r\n         * @param {Number} firstPrice\r\n         * @param {Number} secondPrice\r\n         * @returns {Number}\r\n         * @private\r\n         */\r\n        _comparePrices: function (firstPrice, secondPrice) {\r\n            if (firstPrice.sortOrder < secondPrice.sortOrder) {\r\n                return -1;\r\n            }\r\n\r\n            if (firstPrice.sortOrder > secondPrice.sortOrder) {\r\n                return 1;\r\n            }\r\n\r\n            return 0;\r\n        },\r\n\r\n        /**\r\n         * Check whether metadata of product type prices was changed, and we should\r\n         * to apply custom template or custom component\r\n         *\r\n         * @param {Array} productData\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _needToApplyCustomTemplate: function (productData) {\r\n            return productData.bodyTmpl || productData.component;\r\n        },\r\n\r\n        /**\r\n         * Returns path to the columns' body template.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getBody: function () {\r\n            return this.bodyTmpl;\r\n        },\r\n\r\n        /**\r\n         * Get price label.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getLabel: function () {\r\n            return this.label;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/list/columns/pricetype-box.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'uiCollection'\r\n], function (ko, _, Collection) {\r\n    'use strict';\r\n\r\n    return Collection.extend({\r\n        /**\r\n         * Find from all price ui components, price with specific code, init source on it and set priceType\r\n         *\r\n         * @param {String} code\r\n         * @returns {*|T}\r\n         */\r\n        getPriceByCode: function (code) {\r\n            var elems = this.elems() ? this.elems() : ko.getObservable(this, 'elems'),\r\n                price;\r\n\r\n            price = _.filter(elems, function (elem) {\r\n                return elem.index.split('.').shift() === code;\r\n            }, this).pop();\r\n\r\n            price.source = this.source();\r\n            price.priceType = code;\r\n\r\n            return price;\r\n        },\r\n\r\n        /**\r\n         * Retrieve body template\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getBody: function () {\r\n            return this.bodyTmpl;\r\n        },\r\n\r\n        /**\r\n         * Check whether price has price range, depends on different options, that can be choose\r\n         *\r\n         * @param {Object} row\r\n         * @returns {Boolean}\r\n         */\r\n        hasPriceRange: function (row) {\r\n            return row['price_info']['max_regular_price'] !== row['price_info']['min_regular_price'];\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/storage/data-storage.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'ko',\r\n    'mageUtils',\r\n    'Magento_Catalog/js/product/query-builder',\r\n    'Magento_Customer/js/customer-data',\r\n    'jquery/jquery-storageapi'\r\n], function ($, _, ko, utils, queryBuilder, customerData) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Process data from API request\r\n     *\r\n     * @param {Object} data\r\n     * @returns {Object}\r\n     */\r\n    function getParsedDataFromServer(data) {\r\n        var result = {};\r\n\r\n        _.each(data.items, function (item) {\r\n                if (item.id) {\r\n                    result[item.id] = item;\r\n                }\r\n            }\r\n        );\r\n\r\n        return {\r\n            items: result\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Set data to localStorage with support check.\r\n     *\r\n     * @param {String} namespace\r\n     * @param {Object} data\r\n     */\r\n    function setLocalStorageItem(namespace, data) {\r\n        try {\r\n            window.localStorage.setItem(namespace, JSON.stringify(data));\r\n        } catch (e) {\r\n            console.warn('localStorage is unavailable - skipping local caching of product data');\r\n            console.error(e);\r\n        }\r\n    }\r\n\r\n    return {\r\n\r\n        /**\r\n         * Class name\r\n         */\r\n        name: 'DataStorage',\r\n        request: {},\r\n        customerDataProvider: 'product_data_storage',\r\n\r\n        /**\r\n         * Initialize class\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initialize: function () {\r\n            if (!this.data) {\r\n                this.data = ko.observable({});\r\n            }\r\n\r\n            this.initLocalStorage()\r\n                .initCustomerDataReloadListener()\r\n                .cachesDataFromLocalStorage()\r\n                .initDataListener()\r\n                .initProvideStorage()\r\n                .initProviderListener();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize listener to customer data reload\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initCustomerDataReloadListener: function () {\r\n            $(document).on('customer-data-invalidate', this._flushProductStorage.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Flush product storage\r\n         *\r\n         * @private\r\n         * @return void\r\n         */\r\n        _flushProductStorage: function (event, sections) {\r\n            if (_.isEmpty(sections) || _.contains(sections, 'product_data_storage')) {\r\n                this.localStorage.removeAll();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize listener to data property\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initDataListener: function () {\r\n            this.data.subscribe(this.dataHandler.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize provider storage\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initProvideStorage: function () {\r\n            this.providerHandler(customerData.get(this.customerDataProvider)());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handler to update \"data\" property.\r\n         * Sets data to localStorage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        dataHandler: function (data) {\r\n            if (_.isEmpty(data)) {\r\n                this.localStorage.removeAll();\r\n            } else {\r\n                setLocalStorageItem(this.namespace, data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handler to update data in provider.\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        providerHandler: function (data) {\r\n            var currentData = utils.copy(this.data()),\r\n                ids = _.keys(data.items);\r\n\r\n            if (data.items && ids.length) {\r\n                //we can extend only items\r\n                data = data.items;\r\n                this.data(_.extend(data, currentData));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sets data ids\r\n         *\r\n         * @param {String} currency\r\n         * @param {String} store\r\n         * @param {Object} ids\r\n         */\r\n        setIds: function (currency, store, ids) {\r\n            if (!this.hasInCache(currency, store, ids)) {\r\n                this.loadDataFromServer(currency, store, ids);\r\n            } else {\r\n                this.data.valueHasMutated();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Gets data from \"data\" property by identifiers\r\n         *\r\n         * @param {String} currency\r\n         * @param {String} store\r\n         * @param {Object} productIdentifiers\r\n         *\r\n         * @return {Object} data.\r\n         */\r\n        getDataByIdentifiers: function (currency, store, productIdentifiers) {\r\n            var data = {},\r\n                dataCollection = this.data(),\r\n                id;\r\n\r\n            for (id in productIdentifiers) {\r\n                if (productIdentifiers.hasOwnProperty(id)) {\r\n                    data[id] = dataCollection[id];\r\n                }\r\n            }\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Checks has cached data or not\r\n         *\r\n         * @param {String} currency\r\n         * @param {String} store\r\n         * @param {Object} ids\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        hasInCache: function (currency, store, ids) {\r\n            var data = this.data(),\r\n                id;\r\n\r\n            for (id in ids) {\r\n                if (!data.hasOwnProperty(id) ||\r\n                    data[id]['currency_code'] !== currency ||\r\n                    ~~data[id]['store_id'] !== ~~store\r\n                ) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Load data from server by ids\r\n         *\r\n         * @param {String} currency\r\n         * @param {String} store\r\n         * @param {Object} ids\r\n         *\r\n         * @return void\r\n         */\r\n        loadDataFromServer: function (currency, store, ids) {\r\n            var idsArray = _.keys(ids),\r\n                prepareAjaxParams = {\r\n                    'entity_id': idsArray.join(',')\r\n                };\r\n\r\n            if (this.request.sent && this.hasIdsInSentRequest(ids)) {\r\n                return;\r\n            }\r\n\r\n            this.request = {\r\n                sent: true,\r\n                data: ids\r\n            };\r\n\r\n            this.updateRequestConfig.data = queryBuilder.buildQuery(prepareAjaxParams);\r\n            this.updateRequestConfig.data['store_id'] = store;\r\n            this.updateRequestConfig.data['currency_code'] = currency;\r\n            $.ajax(this.updateRequestConfig).done(function (data) {\r\n                this.request = {};\r\n                this.providerHandler(getParsedDataFromServer(data));\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Each product page consist product cache data,\r\n         * this function prepare those data to appropriate view, and save it\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        addDataFromPageCache: function (data) {\r\n            this.providerHandler(getParsedDataFromServer(data));\r\n        },\r\n\r\n        /**\r\n         * @param {Object} ids\r\n         * @returns {Boolean}\r\n         */\r\n        hasIdsInSentRequest: function (ids) {\r\n            var sentDataIds,\r\n                currentDataIds;\r\n\r\n            if (this.request.data) {\r\n                sentDataIds = _.keys(this.request.data);\r\n                currentDataIds = _.keys(ids);\r\n\r\n                _.each(currentDataIds, function (id) {\r\n                    if (_.lastIndexOf(sentDataIds, id) === -1) {\r\n                        return false;\r\n                    }\r\n                });\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Initialize provider listener\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initProviderListener: function () {\r\n            customerData.get(this.customerDataProvider).subscribe(this.providerHandler.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Caches data from local storage to local scope\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        cachesDataFromLocalStorage: function () {\r\n            this.data(this.getDataFromLocalStorage());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Gets data from local storage by current namespace\r\n         *\r\n         * @return {Object}.\r\n         */\r\n        getDataFromLocalStorage: function () {\r\n            return this.localStorage.get();\r\n        },\r\n\r\n        /**\r\n         * Initialize localStorage\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initLocalStorage: function () {\r\n            this.localStorage = $.initNamespaceStorage(this.namespace).localStorage;\r\n\r\n            return this;\r\n        }\r\n    };\r\n});\r\n","Magento_Catalog/js/product/storage/ids-storage-compare.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'ko',\r\n    'mageUtils',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Catalog/js/product/storage/ids-storage'\r\n], function (_, ko, utils, customerData, idsStorage) {\r\n    'use strict';\r\n\r\n    return _.extend(utils.copy(idsStorage), {\r\n\r\n        /**\r\n         * Class name\r\n         */\r\n        name: 'IdsStorageCompare',\r\n\r\n        /**\r\n         * Initializes class\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initialize: function () {\r\n            if (!this.data) {\r\n                this.data = ko.observable({});\r\n            }\r\n\r\n            if (this.provider && window.checkout && window.checkout.baseUrl) {\r\n                this.providerDataHandler(customerData.get(this.provider)());\r\n                this.initProviderListener();\r\n            }\r\n\r\n            this.initLocalStorage()\r\n                .cachesDataFromLocalStorage()\r\n                .initDataListener();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes listener for external data provider\r\n         */\r\n        initProviderListener: function () {\r\n            customerData.get(this.provider).subscribe(this.providerDataHandler.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Initializes handler for external data provider update\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        providerDataHandler: function (data) {\r\n            data = data.items || data;\r\n            data = this.prepareData(data);\r\n\r\n            this.add(data);\r\n        },\r\n\r\n        /**\r\n         * Prepares data to correct interface\r\n         *\r\n         * @param {Object} data\r\n         *\r\n         * @returns {Object} data\r\n         */\r\n        prepareData: function (data) {\r\n            var result = {},\r\n                scopeId;\r\n\r\n            _.each(data, function (item) {\r\n                if (typeof item.productScope !== 'undefined') {\r\n                    scopeId = item.productScope === 'store' ? window.checkout.storeId :\r\n                        item.productScope === 'group' ? window.checkout.storeGroupId :\r\n                            window.checkout.websiteId;\r\n\r\n                    result[item.productScope + '-' + scopeId + '-' + item.id] = {\r\n                        'added_at': new Date().getTime() / 1000,\r\n                        'product_id': item.id,\r\n                        'scope_id': scopeId\r\n                    };\r\n                } else {\r\n                    result[item.id] = {\r\n                        'added_at': new Date().getTime() / 1000,\r\n                        'product_id': item.id\r\n                    };\r\n                }\r\n            });\r\n\r\n            return result;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/product/storage/ids-storage.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'ko',\r\n    'mageUtils',\r\n    'jquery/jquery-storageapi'\r\n], function ($, _, ko, utils) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Set data to localStorage with support check.\r\n     *\r\n     * @param {String} namespace\r\n     * @param {Object} data\r\n     */\r\n    function setLocalStorageItem(namespace, data) {\r\n        try {\r\n            window.localStorage.setItem(namespace, JSON.stringify(data));\r\n        } catch (e) {\r\n            console.warn('localStorage is unavailable - skipping local caching of product data');\r\n            console.error(e);\r\n        }\r\n    }\r\n\r\n    return {\r\n\r\n        /**\r\n         * Class name\r\n         */\r\n        name: 'IdsStorage',\r\n\r\n        /**\r\n         * Initializes class\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initialize: function () {\r\n            if (!this.data) {\r\n                this.data = ko.observable({});\r\n            }\r\n\r\n            this.initCustomerDataReloadListener()\r\n                .initLocalStorage()\r\n                .cachesDataFromLocalStorage()\r\n                .initDataListener();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Gets data from local storage by current namespace\r\n         *\r\n         * @return {Object}.\r\n         */\r\n        getDataFromLocalStorage: function () {\r\n            return this.localStorage.get();\r\n        },\r\n\r\n        /**\r\n         * Caches data from local storage to local scope\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        cachesDataFromLocalStorage: function () {\r\n            this.data(this.getDataFromLocalStorage());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize localStorage\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initLocalStorage: function () {\r\n            this.localStorage = $.initNamespaceStorage(this.namespace).localStorage;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes listener to \"data\" property\r\n         */\r\n        initDataListener: function () {\r\n            this.data.subscribe(this.internalDataHandler.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Initialize listener to customer data reload\r\n         *\r\n         * @return Chainable.\r\n         */\r\n        initCustomerDataReloadListener: function () {\r\n            $(document).on('customer-data-reload', function (event, sections) {\r\n                if ((_.isEmpty(sections) || _.contains(sections, this.namespace)) && ~~this.allowToSendRequest) {\r\n                    this.localStorage.removeAll();\r\n                    this.data();\r\n                }\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes handler to \"data\" property update\r\n         */\r\n        internalDataHandler: function (data) {\r\n            setLocalStorageItem(this.namespace, data);\r\n        },\r\n\r\n        /**\r\n         * Initializes handler to storage update\r\n         */\r\n        externalDataHandler: function (data) {\r\n            data = data.items ? data.items : data;\r\n\r\n            this.set(_.extend(utils.copy(this.data()), data));\r\n        }\r\n    };\r\n});\r\n\r\n","Magento_Catalog/js/product/storage/storage-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mageUtils',\r\n    'mage/translate',\r\n    'Magento_Catalog/js/product/storage/ids-storage',\r\n    'Magento_Catalog/js/product/storage/data-storage',\r\n    'Magento_Catalog/js/product/storage/ids-storage-compare'\r\n], function ($, _, utils, $t, IdsStorage, DataStore, IdsStorageCompare) {\r\n    'use strict';\r\n\r\n    return (function () {\r\n\r\n        var /**\r\n             * {Object} storages - list of storages\r\n             */\r\n            storages = {},\r\n\r\n            /**\r\n             * {Object} classes - list of classes\r\n             */\r\n            classes = {},\r\n\r\n            /**\r\n             * {Object} prototype - methods that will be added to all storage classes to prototype property.\r\n             */\r\n            prototype = {\r\n\r\n                /**\r\n                 * Sets data to storage\r\n                 *\r\n                 * @param {*} data\r\n                 */\r\n                set: function (data) {\r\n                    if (!utils.compare(data, this.data()).equal) {\r\n                        this.data(data);\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * Adds some data to current storage data\r\n                 *\r\n                 * @param {*} data\r\n                 */\r\n                add: function (data) {\r\n                    if (!_.isEmpty(data)) {\r\n                        this.data(_.extend(utils.copy(this.data()), data));\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * Gets current storage data\r\n                 *\r\n                 * @returns {*} data\r\n                 */\r\n                get: function () {\r\n                    return this.data();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Required properties to storage\r\n             */\r\n            storagesInterface =  {\r\n                data: 'function',\r\n                initialize: 'function',\r\n                namespace: 'string'\r\n            },\r\n\r\n            /**\r\n             * Private service methods\r\n             */\r\n            _private = {\r\n\r\n                /**\r\n                 * Overrides class method and add ability use _super to call parent method\r\n                 *\r\n                 * @param {Object} extensionMethods\r\n                 * @param {Object} originInstance\r\n                 */\r\n                overrideClassMethods: function (extensionMethods, originInstance) {\r\n                    var methodsName = _.keys(extensionMethods),\r\n                        i = 0,\r\n                        length = methodsName.length;\r\n\r\n                    for (i; i < length; i++) {\r\n                        if (_.isFunction(originInstance[methodsName[i]])) {\r\n                            originInstance[methodsName[i]] = extensionMethods[methodsName[i]];\r\n                        }\r\n                    }\r\n\r\n                    return originInstance;\r\n                },\r\n\r\n                /**\r\n                 * Checks is storage implement interface\r\n                 *\r\n                 * @param {Object} classInstance\r\n                 *\r\n                 * @returns {Boolean}\r\n                 */\r\n                isImplementInterface: function (classInstance) {\r\n                    _.each(storagesInterface, function (key, value) {\r\n                        if (typeof classInstance[key] !== value) {\r\n                            return false;\r\n                        }\r\n                    });\r\n\r\n                    return true;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Subscribers list\r\n             */\r\n            subsctibers = {};\r\n\r\n        (function () {\r\n            /**\r\n             * @param {Object} config\r\n             * @return void\r\n             */\r\n            classes[IdsStorage.name] = function (config) {\r\n                _.extend(this, IdsStorage, config);\r\n            };\r\n\r\n            /**\r\n             * @param {Object} config\r\n             * @return void\r\n             */\r\n            classes[IdsStorageCompare.name] = function (config) {\r\n                _.extend(this, IdsStorageCompare, config);\r\n            };\r\n\r\n            /**\r\n             * @param {Object} config\r\n             * @return void\r\n             */\r\n            classes[DataStore.name] = function (config) {\r\n                _.extend(this, DataStore, config);\r\n            };\r\n\r\n            _.each(classes, function (classItem) {\r\n                classItem.prototype = prototype;\r\n            });\r\n        })();\r\n\r\n        return {\r\n\r\n            /**\r\n             * Creates new storage or returns if storage with declared namespace exist\r\n             *\r\n             * @param {Object} config - storage config\r\n             * @throws {Error}\r\n             * @returns {Object} storage instance\r\n             */\r\n            createStorage: function (config) {\r\n                var instance,\r\n                    initialized;\r\n\r\n                if (storages[config.namespace]) {\r\n                    return storages[config.namespace];\r\n                }\r\n\r\n                instance = new classes[config.className](config);\r\n\r\n                if (_private.isImplementInterface(instance)) {\r\n                    initialized = storages[config.namespace] = instance.initialize();\r\n                    this.processSubscribers(initialized, config);\r\n\r\n                    return initialized;\r\n                }\r\n\r\n                throw new Error('Class ' + config.className + $t('does not implement Storage Interface'));\r\n            },\r\n\r\n            /**\r\n             * Process subscribers\r\n             *\r\n             * Differentiate subscribers by their namespaces: recently_viewed or recently_compared\r\n             * and process callbacks. Callbacks can be add through onStorageInit function\r\n             *\r\n             * @param {Object} initialized\r\n             * @param {Object} config\r\n             * @return void\r\n             */\r\n            processSubscribers: function (initialized, config) {\r\n                if (subsctibers[config.namespace]) {\r\n                    _.each(subsctibers[config.namespace], function (callback) {\r\n                        callback(initialized);\r\n                    });\r\n\r\n                    delete subsctibers[config.namespace];\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Listens storage creating by namespace\r\n             *\r\n             * @param {String} namespace\r\n             * @param {Function} callback\r\n             * @return void\r\n             */\r\n            onStorageInit: function (namespace, callback) {\r\n                if (storages[namespace]) {\r\n                    callback(storages[namespace]);\r\n                } else {\r\n                    subsctibers[namespace] ?\r\n                        subsctibers[namespace].push(callback) :\r\n                        subsctibers[namespace] = [callback];\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Gets storage by namespace\r\n             *\r\n             * @param {String} namespace\r\n             *\r\n             * @returns {Object} storage insance\r\n             */\r\n            getStorage: function (namespace) {\r\n                return storages[namespace];\r\n            }\r\n        };\r\n    })();\r\n});\r\n\r\n","Magento_Catalog/js/product/view/product-ids-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Catalog/js/product/view/product-ids'\r\n], function (_, productIds) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Returns id's of products in form.\r\n     *\r\n     * @param {jQuery} $form\r\n     * @return {Array}\r\n     */\r\n    return function ($form) {\r\n        var idSet = productIds(),\r\n            product = _.findWhere($form.serializeArray(), {\r\n            name: 'product'\r\n        });\r\n\r\n        if (!_.isUndefined(product)) {\r\n            idSet.push(product.value);\r\n        }\r\n\r\n        return _.uniq(idSet);\r\n    };\r\n});\r\n","Magento_Catalog/js/product/view/product-ids.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    return ko.observableArray([]);\r\n});\r\n","Magento_Catalog/js/product/view/product-info-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Catalog/js/product/view/product-info'\r\n], function (_, productInfo) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Returns info about products in form.\r\n     *\r\n     * @param {jQuery} $form\r\n     * @return {Array}\r\n     */\r\n    return function ($form) {\r\n        var product = _.findWhere($form.serializeArray(), {\r\n                name: 'product'\r\n            });\r\n\r\n        if (!_.isUndefined(product)) {\r\n            productInfo().push(\r\n                {\r\n                    'id': product.value\r\n                }\r\n            );\r\n        }\r\n\r\n        return _.uniq(productInfo(), function (item) {\r\n            return item.id;\r\n        });\r\n    };\r\n});\r\n\r\n","Magento_Catalog/js/product/view/product-info.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    return ko.observableArray([]);\r\n});\r\n","Magento_Catalog/js/product/view/provider.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiElement',\r\n    'Magento_Catalog/js/product/storage/storage-service'\r\n], function (_, Element, storage) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            identifiersConfig: {\r\n                namespace: 'recently_viewed_product'\r\n            },\r\n            productStorageConfig: {\r\n                namespace: 'product_data_storage',\r\n                updateRequestConfig: {\r\n                    method: 'GET',\r\n                    dataType: 'json'\r\n                },\r\n                className: 'DataStorage'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            if (window.checkout && window.checkout.baseUrl) {\r\n                this.initIdsStorage();\r\n            }\r\n\r\n            this.initDataStorage();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init ids storage\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initIdsStorage: function () {\r\n            storage.onStorageInit(this.identifiersConfig.namespace, this.idsStorageHandler.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init data storage\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initDataStorage: function () {\r\n            storage.onStorageInit(this.productStorageConfig.namespace, this.dataStorageHandler.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init data storage handler\r\n         *\r\n         * @param {Object} dataStorage - storage instance\r\n         */\r\n        dataStorageHandler: function (dataStorage) {\r\n            this.productStorage = dataStorage;\r\n            this.productStorage.add(this.data.items);\r\n        },\r\n\r\n        /**\r\n         * Init ids storage handler\r\n         *\r\n         * @param {Object} idsStorage - storage instance\r\n         */\r\n        idsStorageHandler: function (idsStorage) {\r\n            this.idsStorage = idsStorage;\r\n            this.idsStorage.add(this.getIdentifiers());\r\n        },\r\n\r\n        /**\r\n         * Gets ids from items\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        getIdentifiers: function () {\r\n            var result = {},\r\n                productCurrentScope = this.data.productCurrentScope,\r\n                scopeId = productCurrentScope === 'store' ? window.checkout.storeId :\r\n                    productCurrentScope === 'group' ? window.checkout.storeGroupId :\r\n                        window.checkout.websiteId;\r\n\r\n            _.each(this.data.items, function (item, key) {\r\n                result[productCurrentScope + '-' + scopeId + '-' + key] = {\r\n                    'added_at': new Date().getTime() / 1000,\r\n                    'product_id': key,\r\n                    'scope_id': scopeId\r\n                };\r\n            }, this);\r\n\r\n            return result;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/view/compare-products.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'jquery',\r\n    'mage/mage',\r\n    'mage/decorate'\r\n], function (Component, customerData, $) {\r\n    'use strict';\r\n\r\n    var sidebarInitialized = false;\r\n\r\n    /**\r\n     * Initialize sidebar\r\n     */\r\n    function initSidebar() {\r\n        if (sidebarInitialized) {\r\n            return;\r\n        }\r\n\r\n        sidebarInitialized = true;\r\n        $('[data-role=compare-products-sidebar]').decorate('list', true);\r\n    }\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n            this.compareProducts = customerData.get('compare-products');\r\n\r\n            initSidebar();\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/js/view/image.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.template = window.checkout.imageTemplate || this.template;\r\n        }\r\n    });\r\n});\r\n","Magento_Catalog/product/view/validation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'mage/validation/validation'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.validation', $.mage.validation, {\r\n        options: {\r\n            radioCheckboxClosest: 'ul, ol',\r\n\r\n            /**\r\n             * @param {*} error\r\n             * @param {HTMLElement} element\r\n             */\r\n            errorPlacement: function (error, element) {\r\n                var messageBox,\r\n                    dataValidate;\r\n\r\n                if ($(element).hasClass('datetime-picker')) {\r\n                    element = $(element).parent();\r\n\r\n                    if (element.parent().find('.mage-error').length) {\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                if (element.attr('data-errors-message-box')) {\r\n                    messageBox = $(element.attr('data-errors-message-box'));\r\n                    messageBox.html(error);\r\n\r\n                    return;\r\n                }\r\n\r\n                dataValidate = element.attr('data-validate');\r\n\r\n                if (dataValidate && dataValidate.indexOf('validate-one-checkbox-required-by-name') > 0) {\r\n                    error.appendTo('#links-advice-container');\r\n                } else if (element.is(':radio, :checkbox')) {\r\n                    element.closest(this.radioCheckboxClosest).after(error);\r\n                } else {\r\n                    element.after(error);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @param {HTMLElement} element\r\n             * @param {String} errorClass\r\n             */\r\n            highlight: function (element, errorClass) {\r\n                var dataValidate = $(element).attr('data-validate');\r\n\r\n                if (dataValidate && dataValidate.indexOf('validate-required-datetime') > 0) {\r\n                    $(element).parent().find('.datetime-picker').each(function () {\r\n                        $(this).removeClass(errorClass);\r\n\r\n                        if ($(this).val().length === 0) {\r\n                            $(this).addClass(errorClass);\r\n                        }\r\n                    });\r\n                } else if ($(element).is(':radio, :checkbox')) {\r\n                    $(element).closest(this.radioCheckboxClosest).addClass(errorClass);\r\n                } else {\r\n                    $(element).addClass(errorClass);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @param {HTMLElement} element\r\n             * @param {String} errorClass\r\n             */\r\n            unhighlight: function (element, errorClass) {\r\n                var dataValidate = $(element).attr('data-validate');\r\n\r\n                if (dataValidate && dataValidate.indexOf('validate-required-datetime') > 0) {\r\n                    $(element).parent().find('.datetime-picker').removeClass(errorClass);\r\n                } else if ($(element).is(':radio, :checkbox')) {\r\n                    $(element).closest(this.radioCheckboxClosest).removeClass(errorClass);\r\n                } else {\r\n                    $(element).removeClass(errorClass);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.validation;\r\n});\r\n","Magento_CatalogSearch/js/search-terms-log.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils'\r\n], function ($, utils) {\r\n    'use strict';\r\n\r\n    return function (data) {\r\n        $.ajax({\r\n            method: 'GET',\r\n            url: data.url,\r\n            data: {\r\n                'q': utils.getUrlParameters(window.location.href).q\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_Checkout/js/checkout-data.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Checkout adapter for customer data storage\r\n *\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/customer-data',\r\n    'mageUtils',\r\n    'jquery/jquery-storageapi'\r\n], function ($, storage, utils) {\r\n    'use strict';\r\n\r\n    var cacheKey = 'checkout-data',\r\n\r\n        /**\r\n         * @param {Object} data\r\n         */\r\n        saveData = function (data) {\r\n            storage.set(cacheKey, data);\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        initData = function () {\r\n            return {\r\n                'selectedShippingAddress': null, //Selected shipping address pulled from persistence storage\r\n                'shippingAddressFromData': null, //Shipping address pulled from persistence storage\r\n                'newCustomerShippingAddress': null, //Shipping address pulled from persistence storage for customer\r\n                'selectedShippingRate': null, //Shipping rate pulled from persistence storage\r\n                'selectedPaymentMethod': null, //Payment method pulled from persistence storage\r\n                'selectedBillingAddress': null, //Selected billing address pulled from persistence storage\r\n                'billingAddressFromData': null, //Billing address pulled from persistence storage\r\n                'newCustomerBillingAddress': null //Billing address pulled from persistence storage for new customer\r\n            };\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getData = function () {\r\n            var data = storage.get(cacheKey)();\r\n\r\n            if ($.isEmptyObject(data)) {\r\n                data = $.initNamespaceStorage('mage-cache-storage').localStorage.get(cacheKey);\r\n\r\n                if ($.isEmptyObject(data)) {\r\n                    data = initData();\r\n                    saveData(data);\r\n                }\r\n            }\r\n\r\n            return data;\r\n        };\r\n\r\n    return {\r\n        /**\r\n         * Setting the selected shipping address pulled from persistence storage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setSelectedShippingAddress: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.selectedShippingAddress = data;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the selected shipping address from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getSelectedShippingAddress: function () {\r\n            return getData().selectedShippingAddress;\r\n        },\r\n\r\n        /**\r\n         * Setting the shipping address pulled from persistence storage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setShippingAddressFromData: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.shippingAddressFromData = utils.filterFormData(data);\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the shipping address from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getShippingAddressFromData: function () {\r\n            return getData().shippingAddressFromData;\r\n        },\r\n\r\n        /**\r\n         * Setting the shipping address pulled from persistence storage for new customer\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setNewCustomerShippingAddress: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.newCustomerShippingAddress = data;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the shipping address from persistence storage for new customer\r\n         *\r\n         * @return {*}\r\n         */\r\n        getNewCustomerShippingAddress: function () {\r\n            return getData().newCustomerShippingAddress;\r\n        },\r\n\r\n        /**\r\n         * Setting the selected shipping rate pulled from persistence storage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setSelectedShippingRate: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.selectedShippingRate = data;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the selected shipping rate from local storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getSelectedShippingRate: function () {\r\n            return getData().selectedShippingRate;\r\n        },\r\n\r\n        /**\r\n         * Setting the selected payment method pulled from persistence storage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setSelectedPaymentMethod: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.selectedPaymentMethod = data;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the payment method from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getSelectedPaymentMethod: function () {\r\n            return getData().selectedPaymentMethod;\r\n        },\r\n\r\n        /**\r\n         * Setting the selected billing address pulled from persistence storage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setSelectedBillingAddress: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.selectedBillingAddress = data;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the selected billing address from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getSelectedBillingAddress: function () {\r\n            return getData().selectedBillingAddress;\r\n        },\r\n\r\n        /**\r\n         * Setting the billing address pulled from persistence storage\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setBillingAddressFromData: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.billingAddressFromData = utils.filterFormData(data);\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the billing address from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getBillingAddressFromData: function () {\r\n            return getData().billingAddressFromData;\r\n        },\r\n\r\n        /**\r\n         * Setting the billing address pulled from persistence storage for new customer\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setNewCustomerBillingAddress: function (data) {\r\n            var obj = getData();\r\n\r\n            obj.newCustomerBillingAddress = data;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the billing address from persistence storage for new customer\r\n         *\r\n         * @return {*}\r\n         */\r\n        getNewCustomerBillingAddress: function () {\r\n            return getData().newCustomerBillingAddress;\r\n        },\r\n\r\n        /**\r\n         * Pulling the email address from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getValidatedEmailValue: function () {\r\n            var obj = getData();\r\n\r\n            return obj.validatedEmailValue ? obj.validatedEmailValue : '';\r\n        },\r\n\r\n        /**\r\n         * Setting the email address pulled from persistence storage\r\n         *\r\n         * @param {String} email\r\n         */\r\n        setValidatedEmailValue: function (email) {\r\n            var obj = getData();\r\n\r\n            obj.validatedEmailValue = email;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the email input field value from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getInputFieldEmailValue: function () {\r\n            var obj = getData();\r\n\r\n            return obj.inputFieldEmailValue ? obj.inputFieldEmailValue : '';\r\n        },\r\n\r\n        /**\r\n         * Setting the email input field value pulled from persistence storage\r\n         *\r\n         * @param {String} email\r\n         */\r\n        setInputFieldEmailValue: function (email) {\r\n            var obj = getData();\r\n\r\n            obj.inputFieldEmailValue = email;\r\n            saveData(obj);\r\n        },\r\n\r\n        /**\r\n         * Pulling the checked email value from persistence storage\r\n         *\r\n         * @return {*}\r\n         */\r\n        getCheckedEmailValue: function () {\r\n            var obj = getData();\r\n\r\n            return obj.checkedEmailValue ? obj.checkedEmailValue : '';\r\n        },\r\n\r\n        /**\r\n         * Setting the checked email value pulled from persistence storage\r\n         *\r\n         * @param {String} email\r\n         */\r\n        setCheckedEmailValue: function (email) {\r\n            var obj = getData();\r\n\r\n            obj.checkedEmailValue = email;\r\n            saveData(obj);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/checkout-loader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'rjsResolver'\r\n], function (resolver) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Removes provided loader element from DOM.\r\n     *\r\n     * @param {HTMLElement} $loader - Loader DOM element.\r\n     */\r\n    function hideLoader($loader) {\r\n        $loader.parentNode.removeChild($loader);\r\n    }\r\n\r\n    /**\r\n     * Initializes assets loading process listener.\r\n     *\r\n     * @param {Object} config - Optional configuration\r\n     * @param {HTMLElement} $loader - Loader DOM element.\r\n     */\r\n    function init(config, $loader) {\r\n        resolver(hideLoader.bind(null, $loader));\r\n    }\r\n\r\n    return init;\r\n});\r\n","Magento_Checkout/js/discount-codes.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.discountCode', {\r\n        options: {\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            this.couponCode = $(this.options.couponCodeSelector);\r\n            this.removeCoupon = $(this.options.removeCouponSelector);\r\n\r\n            $(this.options.applyButton).on('click', $.proxy(function () {\r\n                this.couponCode.attr('data-validate', '{required:true}');\r\n                this.removeCoupon.attr('value', '0');\r\n                $(this.element).validation().trigger('submit');\r\n            }, this));\r\n\r\n            $(this.options.cancelButton).on('click', $.proxy(function () {\r\n                this.couponCode.removeAttr('data-validate');\r\n                this.removeCoupon.attr('value', '1');\r\n                this.element.trigger('submit');\r\n            }, this));\r\n        }\r\n    });\r\n\r\n    return $.mage.discountCode;\r\n});\r\n","Magento_Checkout/js/empty-cart.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['Magento_Customer/js/customer-data'], function (customerData) {\r\n    'use strict';\r\n\r\n    return function () {\r\n        var cartData = customerData.get('cart');\r\n\r\n        customerData.getInitCustomerData().done(function () {\r\n            if (cartData().items && cartData().items.length !== 0) {\r\n                customerData.reload(['cart'], false);\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_Checkout/js/proceed-to-checkout.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/model/authentication-popup',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, authenticationPopup, customerData) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).on('click', function (event) {\r\n            var cart = customerData.get('cart'),\r\n                customer = customerData.get('customer');\r\n\r\n            event.preventDefault();\r\n\r\n            if (!customer().firstname && cart().isGuestCheckoutAllowed === false) {\r\n                authenticationPopup.showModal();\r\n\r\n                return false;\r\n            }\r\n            $(element).attr('disabled', true);\r\n            location.href = config.checkoutUrl;\r\n        });\r\n\r\n    };\r\n});\r\n","Magento_Checkout/js/region-updater.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'underscore',\r\n    'jquery-ui-modules/widget',\r\n    'mage/validation'\r\n], function ($, mageTemplate, _) {\r\n    'use strict';\r\n\r\n    $.widget('mage.regionUpdater', {\r\n        options: {\r\n            regionTemplate:\r\n                '<option value=\"<%- data.value %>\" <% if (data.isSelected) { %>selected=\"selected\"<% } %>>' +\r\n                    '<%- data.title %>' +\r\n                '</option>',\r\n            isRegionRequired: true,\r\n            isZipRequired: true,\r\n            isCountryRequired: true,\r\n            currentRegion: null,\r\n            isMultipleCountriesAllowed: true\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._initCountryElement();\r\n\r\n            this.currentRegionOption = this.options.currentRegion;\r\n            this.regionTmpl = mageTemplate(this.options.regionTemplate);\r\n\r\n            this._updateRegion(this.element.find('option:selected').val());\r\n\r\n            $(this.options.regionListId).on('change', $.proxy(function (e) {\r\n                this.setOption = false;\r\n                this.currentRegionOption = $(e.target).val();\r\n            }, this));\r\n\r\n            $(this.options.regionInputId).on('focusout', $.proxy(function () {\r\n                this.setOption = true;\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _initCountryElement: function () {\r\n\r\n            if (this.options.isMultipleCountriesAllowed) {\r\n                this.element.parents('div.field').show();\r\n                this.element.on('change', $.proxy(function (e) {\r\n                    // clear region inputs on country change\r\n                    $(this.options.regionListId).val('');\r\n                    $(this.options.regionInputId).val('');\r\n                    this._updateRegion($(e.target).val());\r\n                }, this));\r\n\r\n                if (this.options.isCountryRequired) {\r\n                    this.element.addClass('required-entry');\r\n                    this.element.parents('div.field').addClass('required');\r\n                }\r\n            } else {\r\n                this.element.parents('div.field').hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Remove options from dropdown list\r\n         *\r\n         * @param {Object} selectElement - jQuery object for dropdown list\r\n         * @private\r\n         */\r\n        _removeSelectOptions: function (selectElement) {\r\n            selectElement.find('option').each(function (index) {\r\n                if (index) {\r\n                    $(this).remove();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Render dropdown list\r\n         * @param {Object} selectElement - jQuery object for dropdown list\r\n         * @param {String} key - region code\r\n         * @param {Object} value - region object\r\n         * @private\r\n         */\r\n        _renderSelectOption: function (selectElement, key, value) {\r\n            selectElement.append($.proxy(function () {\r\n                var name = value.name.replace(/[!\"#$%&'()*+,.\\/:;<=>?@[\\\\\\]^`{|}~]/g, '\\\\$&'),\r\n                    tmplData,\r\n                    tmpl;\r\n\r\n                if (value.code && $(name).is('span')) {\r\n                    key = value.code;\r\n                    value.name = $(name).text();\r\n                }\r\n\r\n                tmplData = {\r\n                    value: key,\r\n                    title: value.name,\r\n                    isSelected: false\r\n                };\r\n\r\n                if (this.options.defaultRegion === key) {\r\n                    tmplData.isSelected = true;\r\n                }\r\n\r\n                tmpl = this.regionTmpl({\r\n                    data: tmplData\r\n                });\r\n\r\n                return $(tmpl);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Takes clearError callback function as first option\r\n         * If no form is passed as option, look up the closest form and call clearError method.\r\n         * @private\r\n         */\r\n        _clearError: function () {\r\n            var args = ['clearError', this.options.regionListId, this.options.regionInputId, this.options.postcodeId];\r\n\r\n            if (this.options.clearError && typeof this.options.clearError === 'function') {\r\n                this.options.clearError.call(this);\r\n            } else {\r\n                if (!this.options.form) {\r\n                    this.options.form = this.element.closest('form').length ? $(this.element.closest('form')[0]) : null;\r\n                }\r\n\r\n                this.options.form = $(this.options.form);\r\n\r\n                this.options.form && this.options.form.data('validator') &&\r\n                    this.options.form.validation.apply(this.options.form, _.compact(args));\r\n\r\n                // Clean up errors on region & zip fix\r\n                $(this.options.regionInputId).removeClass('mage-error').parent().find('.mage-error').remove();\r\n                $(this.options.regionListId).removeClass('mage-error').parent().find('.mage-error').remove();\r\n                $(this.options.postcodeId).removeClass('mage-error').parent().find('.mage-error').remove();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update dropdown list based on the country selected\r\n         *\r\n         * @param {String} country - 2 uppercase letter for country code\r\n         * @private\r\n         */\r\n        _updateRegion: function (country) {\r\n            // Clear validation error messages\r\n            var regionList = $(this.options.regionListId),\r\n                regionInput = $(this.options.regionInputId),\r\n                postcode = $(this.options.postcodeId),\r\n                label = regionList.parent().siblings('label'),\r\n                container = regionList.parents('div.field'),\r\n                regionsEntries,\r\n                regionId,\r\n                regionData;\r\n\r\n            this._clearError();\r\n            this._checkRegionRequired(country);\r\n\r\n            // Populate state/province dropdown list if available or use input box\r\n            if (this.options.regionJson[country]) {\r\n                this._removeSelectOptions(regionList);\r\n                regionsEntries = _.pairs(this.options.regionJson[country]);\r\n                regionsEntries.sort(function (a, b) {\r\n                    return a[1].name > b[1].name ? 1 : -1;\r\n                });\r\n                $.each(regionsEntries, $.proxy(function (key, value) {\r\n                    regionId = value[0];\r\n                    regionData = value[1];\r\n                    this._renderSelectOption(regionList, regionId, regionData);\r\n                }, this));\r\n\r\n                if (this.currentRegionOption) {\r\n                    regionList.val(this.currentRegionOption);\r\n                }\r\n\r\n                if (this.setOption) {\r\n                    regionList.find('option').filter(function () {\r\n                        return this.text === regionInput.val();\r\n                    }).attr('selected', true);\r\n                }\r\n\r\n                if (this.options.isRegionRequired) {\r\n                    regionList.addClass('required-entry').prop('disabled', false);\r\n                    container.addClass('required').show();\r\n                } else {\r\n                    regionList.removeClass('required-entry validate-select').removeAttr('data-validate');\r\n                    container.removeClass('required');\r\n\r\n                    if (!this.options.optionalRegionAllowed) { //eslint-disable-line max-depth\r\n                        regionList.hide();\r\n                        container.hide();\r\n                    } else {\r\n                        regionList.prop('disabled', false).show();\r\n                    }\r\n                }\r\n\r\n                regionList.show();\r\n                regionInput.hide();\r\n                label.attr('for', regionList.attr('id'));\r\n            } else {\r\n                this._removeSelectOptions(regionList);\r\n\r\n                if (this.options.isRegionRequired) {\r\n                    regionInput.addClass('required-entry').prop('disabled', false);\r\n                    container.addClass('required').show();\r\n                } else {\r\n                    if (!this.options.optionalRegionAllowed) { //eslint-disable-line max-depth\r\n                        regionInput.attr('disabled', 'disabled');\r\n                        container.hide();\r\n                    }\r\n                    container.removeClass('required');\r\n                    regionInput.removeClass('required-entry');\r\n                }\r\n\r\n                regionList.removeClass('required-entry').prop('disabled', 'disabled').hide();\r\n                regionInput.show();\r\n                label.attr('for', regionInput.attr('id'));\r\n            }\r\n\r\n            // If country is in optionalzip list, make postcode input not required\r\n            if (this.options.isZipRequired) {\r\n                $.inArray(country, this.options.countriesWithOptionalZip) >= 0 ?\r\n                    postcode.removeClass('required-entry').closest('.field').removeClass('required') :\r\n                    postcode.addClass('required-entry').closest('.field').addClass('required');\r\n            }\r\n\r\n            // Add defaultvalue attribute to state/province select element\r\n            regionList.attr('defaultvalue', this.options.defaultRegion);\r\n            this.options.form.find('[type=\"submit\"]').prop('disabled', false).show();\r\n        },\r\n\r\n        /**\r\n         * Check if the selected country has a mandatory region selection\r\n         *\r\n         * @param {String} country - Code of the country - 2 uppercase letter for country code\r\n         * @private\r\n         */\r\n        _checkRegionRequired: function (country) {\r\n            var self = this;\r\n\r\n            this.options.isRegionRequired = false;\r\n            $.each(this.options.regionJson.config['regions_required'], function (index, elem) {\r\n                if (elem === country) {\r\n                    self.options.isRegionRequired = true;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return $.mage.regionUpdater;\r\n});\r\n","Magento_Checkout/js/shopping-cart.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate'\r\n], function ($, confirm) {\r\n    'use strict';\r\n\r\n    $.widget('mage.shoppingCart', {\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            var items, i, reload;\r\n\r\n            $(this.options.emptyCartButton).on('click', $.proxy(function () {\r\n                this._confirmClearCart();\r\n            }, this));\r\n            items = $.find('[data-role=\"cart-item-qty\"]');\r\n\r\n            for (i = 0; i < items.length; i++) {\r\n                $(items[i]).on('keypress', $.proxy(function (event) { //eslint-disable-line no-loop-func\r\n                    var keyCode = event.keyCode ? event.keyCode : event.which;\r\n\r\n                    if (keyCode == 13) { //eslint-disable-line eqeqeq\r\n                        $(this.options.emptyCartButton).attr('name', 'update_cart_action_temp');\r\n                        $(this.options.updateCartActionContainer)\r\n                            .attr('name', 'update_cart_action').attr('value', 'update_qty');\r\n\r\n                    }\r\n                }, this));\r\n            }\r\n            $(this.options.continueShoppingButton).on('click', $.proxy(function () {\r\n                location.href = this.options.continueShoppingUrl;\r\n            }, this));\r\n\r\n            $(document).on('ajax:removeFromCart', $.proxy(function () {\r\n                reload = true;\r\n                $('div.block.block-minicart').on('dropdowndialogclose', $.proxy(function () {\r\n                    if (reload === true) {\r\n                        location.reload();\r\n                        reload = false;\r\n                    }\r\n                    $('div.block.block-minicart').off('dropdowndialogclose');\r\n                }));\r\n            }, this));\r\n            $(document).on('ajax:updateItemQty', $.proxy(function () {\r\n                reload = true;\r\n                $('div.block.block-minicart').on('dropdowndialogclose', $.proxy(function () {\r\n                    if (reload === true) {\r\n                        location.reload();\r\n                        reload = false;\r\n                    }\r\n                    $('div.block.block-minicart').off('dropdowndialogclose');\r\n                }));\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Display confirmation modal for clearing the cart\r\n         * @private\r\n         */\r\n        _confirmClearCart: function () {\r\n            var self = this;\r\n\r\n            confirm({\r\n                content: $.mage.__('Are you sure you want to remove all items from your shopping cart?'),\r\n                actions: {\r\n                    /**\r\n                     * Confirmation modal handler to execute clear cart action\r\n                     */\r\n                    confirm: function () {\r\n                        self.clearCart();\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Prepares the form and submit to clear the cart\r\n         * @public\r\n         */\r\n        clearCart: function () {\r\n            $(this.options.emptyCartButton).attr('name', 'update_cart_action_temp');\r\n            $(this.options.updateCartActionContainer)\r\n                .attr('name', 'update_cart_action').attr('value', 'empty_cart');\r\n\r\n            if ($(this.options.emptyCartButton).parents('form').length > 0) {\r\n                $(this.options.emptyCartButton).parents('form').trigger('submit');\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.shoppingCart;\r\n});\r\n","Magento_Checkout/js/sidebar.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/model/authentication-popup',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Ui/js/modal/alert',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'underscore',\r\n    'jquery-ui-modules/widget',\r\n    'mage/decorate',\r\n    'mage/collapsible',\r\n    'mage/cookies',\r\n    'jquery-ui-modules/effect-fade'\r\n], function ($, authenticationPopup, customerData, alert, confirm, _) {\r\n    'use strict';\r\n\r\n    $.widget('mage.sidebar', {\r\n        options: {\r\n            isRecursive: true,\r\n            minicart: {\r\n                maxItemsVisible: 3\r\n            }\r\n        },\r\n        scrollHeight: 0,\r\n        shoppingCartUrl: window.checkout.shoppingCartUrl,\r\n\r\n        /**\r\n         * Create sidebar.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._initContent();\r\n        },\r\n\r\n        /**\r\n         * Update sidebar block.\r\n         */\r\n        update: function () {\r\n            $(this.options.targetElement).trigger('contentUpdated');\r\n            this._calcHeight();\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _initContent: function () {\r\n            var self = this,\r\n                events = {};\r\n\r\n            this.element.decorate('list', this.options.isRecursive);\r\n\r\n            /**\r\n             * @param {jQuery.Event} event\r\n             */\r\n            events['click ' + this.options.button.close] = function (event) {\r\n                event.stopPropagation();\r\n                $(self.options.targetElement).dropdownDialog('close');\r\n            };\r\n            events['click ' + this.options.button.checkout] = $.proxy(function () {\r\n                var cart = customerData.get('cart'),\r\n                    customer = customerData.get('customer'),\r\n                    element = $(this.options.button.checkout);\r\n\r\n                if (!customer().firstname && cart().isGuestCheckoutAllowed === false) {\r\n                    // set URL for redirect on successful login/registration. It's postprocessed on backend.\r\n                    $.cookie('login_redirect', this.options.url.checkout);\r\n\r\n                    if (this.options.url.isRedirectRequired) {\r\n                        element.prop('disabled', true);\r\n                        location.href = this.options.url.loginUrl;\r\n                    } else {\r\n                        authenticationPopup.showModal();\r\n                    }\r\n\r\n                    return false;\r\n                }\r\n                element.prop('disabled', true);\r\n                location.href = this.options.url.checkout;\r\n            }, this);\r\n\r\n            /**\r\n             * @param {jQuery.Event} event\r\n             */\r\n            events['click ' + this.options.button.remove] =  function (event) {\r\n                event.stopPropagation();\r\n                confirm({\r\n                    content: self.options.confirmMessage,\r\n                    actions: {\r\n                        /** @inheritdoc */\r\n                        confirm: function () {\r\n                            self._removeItem($(event.currentTarget));\r\n                        },\r\n\r\n                        /** @inheritdoc */\r\n                        always: function (e) {\r\n                            e.stopImmediatePropagation();\r\n                        }\r\n                    }\r\n                });\r\n            };\r\n\r\n            /**\r\n             * @param {jQuery.Event} event\r\n             */\r\n            events['keyup ' + this.options.item.qty] = function (event) {\r\n                self._showItemButton($(event.target));\r\n            };\r\n\r\n            /**\r\n             * @param {jQuery.Event} event\r\n             */\r\n            events['change ' + this.options.item.qty] = function (event) {\r\n                self._showItemButton($(event.target));\r\n            };\r\n\r\n            /**\r\n             * @param {jQuery.Event} event\r\n             */\r\n            events['click ' + this.options.item.button] = function (event) {\r\n                event.stopPropagation();\r\n                self._updateItemQty($(event.currentTarget));\r\n            };\r\n\r\n            /**\r\n             * @param {jQuery.Event} event\r\n             */\r\n            events['focusout ' + this.options.item.qty] = function (event) {\r\n                self._validateQty($(event.currentTarget));\r\n            };\r\n\r\n            this._on(this.element, events);\r\n            this._calcHeight();\r\n        },\r\n\r\n        /**\r\n         * @param {HTMLElement} elem\r\n         * @private\r\n         */\r\n        _showItemButton: function (elem) {\r\n            var itemId = elem.data('cart-item'),\r\n                itemQty = elem.data('item-qty');\r\n\r\n            if (this._isValidQty(itemQty, elem.val())) {\r\n                $('#update-cart-item-' + itemId).show('fade', 300);\r\n            } else if (elem.val() == 0) { //eslint-disable-line eqeqeq\r\n                this._hideItemButton(elem);\r\n            } else {\r\n                this._hideItemButton(elem);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} origin - origin qty. 'data-item-qty' attribute.\r\n         * @param {*} changed - new qty.\r\n         * @returns {Boolean}\r\n         * @private\r\n         */\r\n        _isValidQty: function (origin, changed) {\r\n            return origin != changed && //eslint-disable-line eqeqeq\r\n                changed.length > 0 &&\r\n                changed - 0 == changed && //eslint-disable-line eqeqeq\r\n                changed - 0 > 0;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} elem\r\n         * @private\r\n         */\r\n        _validateQty: function (elem) {\r\n            var itemQty = elem.data('item-qty');\r\n\r\n            if (!this._isValidQty(itemQty, elem.val())) {\r\n                elem.val(itemQty);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {HTMLElement} elem\r\n         * @private\r\n         */\r\n        _hideItemButton: function (elem) {\r\n            var itemId = elem.data('cart-item');\r\n\r\n            $('#update-cart-item-' + itemId).hide('fade', 300);\r\n        },\r\n\r\n        /**\r\n         * @param {HTMLElement} elem\r\n         * @private\r\n         */\r\n        _updateItemQty: function (elem) {\r\n            var itemId = elem.data('cart-item');\r\n\r\n            this._ajax(this.options.url.update, {\r\n                'item_id': itemId,\r\n                'item_qty': $('#cart-item-' + itemId + '-qty').val()\r\n            }, elem, this._updateItemQtyAfter);\r\n        },\r\n\r\n        /**\r\n         * Update content after update qty\r\n         *\r\n         * @param {HTMLElement} elem\r\n         */\r\n        _updateItemQtyAfter: function (elem) {\r\n            var productData = this._getProductById(Number(elem.data('cart-item')));\r\n\r\n            if (!_.isUndefined(productData)) {\r\n                $(document).trigger('ajax:updateCartItemQty');\r\n\r\n                if (window.location.href === this.shoppingCartUrl) {\r\n                    window.location.reload(false);\r\n                }\r\n            }\r\n            this._hideItemButton(elem);\r\n        },\r\n\r\n        /**\r\n         * @param {HTMLElement} elem\r\n         * @private\r\n         */\r\n        _removeItem: function (elem) {\r\n            var itemId = elem.data('cart-item');\r\n\r\n            this._ajax(this.options.url.remove, {\r\n                'item_id': itemId\r\n            }, elem, this._removeItemAfter);\r\n        },\r\n\r\n        /**\r\n         * Update content after item remove\r\n         *\r\n         * @param {Object} elem\r\n         * @private\r\n         */\r\n        _removeItemAfter: function (elem) {\r\n            var productData = this._getProductById(Number(elem.data('cart-item')));\r\n\r\n            if (!_.isUndefined(productData)) {\r\n                $(document).trigger('ajax:removeFromCart', {\r\n                    productIds: [productData['product_id']],\r\n                    productInfo: [\r\n                        {\r\n                            'id': productData['product_id']\r\n                        }\r\n                    ]\r\n                });\r\n\r\n                if (window.location.href.indexOf(this.shoppingCartUrl) === 0) {\r\n                    window.location.reload();\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Retrieves product data by Id.\r\n         *\r\n         * @param {Number} productId - product Id\r\n         * @returns {Object|undefined}\r\n         * @private\r\n         */\r\n        _getProductById: function (productId) {\r\n            return _.find(customerData.get('cart')().items, function (item) {\r\n                return productId === Number(item['item_id']);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {String} url - ajax url\r\n         * @param {Object} data - post data for ajax call\r\n         * @param {Object} elem - element that initiated the event\r\n         * @param {Function} callback - callback method to execute after AJAX success\r\n         */\r\n        _ajax: function (url, data, elem, callback) {\r\n            $.extend(data, {\r\n                'form_key': $.mage.cookies.get('form_key')\r\n            });\r\n\r\n            $.ajax({\r\n                url: url,\r\n                data: data,\r\n                type: 'post',\r\n                dataType: 'json',\r\n                context: this,\r\n\r\n                /** @inheritdoc */\r\n                beforeSend: function () {\r\n                    elem.attr('disabled', 'disabled');\r\n                },\r\n\r\n                /** @inheritdoc */\r\n                complete: function () {\r\n                    elem.attr('disabled', null);\r\n                }\r\n            })\r\n                .done(function (response) {\r\n                    var msg;\r\n\r\n                    if (response.success) {\r\n                        callback.call(this, elem, response);\r\n                    } else {\r\n                        msg = response['error_message'];\r\n\r\n                        if (msg) {\r\n                            alert({\r\n                                content: msg\r\n                            });\r\n                        }\r\n                    }\r\n                })\r\n                .fail(function (error) {\r\n                    console.log(JSON.stringify(error));\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Calculate height of minicart list\r\n         *\r\n         * @private\r\n         */\r\n        _calcHeight: function () {\r\n            var self = this,\r\n                height = 0,\r\n                counter = this.options.minicart.maxItemsVisible,\r\n                target = $(this.options.minicart.list),\r\n                outerHeight;\r\n\r\n            self.scrollHeight = 0;\r\n            target.children().each(function () {\r\n\r\n                if ($(this).find('.options').length > 0) {\r\n                    $(this).collapsible();\r\n                }\r\n                outerHeight = $(this).outerHeight(true);\r\n\r\n                if (counter-- > 0) {\r\n                    height += outerHeight;\r\n                }\r\n                self.scrollHeight += outerHeight;\r\n            });\r\n\r\n            target.parent().height(height);\r\n        }\r\n    });\r\n\r\n    return $.mage.sidebar;\r\n});\r\n","Magento_Checkout/js/action/create-billing-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/address-converter'\r\n], function (addressConverter) {\r\n    'use strict';\r\n\r\n    return function (addressData) {\r\n        var address = addressConverter.formAddressDataToQuoteAddress(addressData);\r\n\r\n        /**\r\n         * Returns new customer billing address type.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        address.getType = function () {\r\n            return 'new-customer-billing-address';\r\n        };\r\n\r\n        return address;\r\n    };\r\n});\r\n","Magento_Checkout/js/action/create-shipping-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Customer/js/model/address-list',\r\n    'Magento_Checkout/js/model/address-converter'\r\n], function (addressList, addressConverter) {\r\n    'use strict';\r\n\r\n    return function (addressData) {\r\n        var address = addressConverter.formAddressDataToQuoteAddress(addressData),\r\n            isAddressUpdated = addressList().some(function (currentAddress, index, addresses) {\r\n                if (currentAddress.getKey() == address.getKey()) { //eslint-disable-line eqeqeq\r\n                    addresses[index] = address;\r\n\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n            });\r\n\r\n        if (!isAddressUpdated) {\r\n            addressList.push(address);\r\n        } else {\r\n            addressList.valueHasMutated();\r\n        }\r\n\r\n        return address;\r\n    };\r\n});\r\n","Magento_Checkout/js/action/get-payment-information.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/url-builder',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Checkout/js/model/payment/method-converter',\r\n    'Magento_Checkout/js/model/payment-service'\r\n], function ($, quote, urlBuilder, storage, errorProcessor, customer, methodConverter, paymentService) {\r\n    'use strict';\r\n\r\n    return function (deferred, messageContainer) {\r\n        var serviceUrl;\r\n\r\n        deferred = deferred || $.Deferred();\r\n\r\n        /**\r\n         * Checkout for guest and registered customer.\r\n         */\r\n        if (!customer.isLoggedIn()) {\r\n            serviceUrl = urlBuilder.createUrl('/guest-carts/:cartId/payment-information', {\r\n                cartId: quote.getQuoteId()\r\n            });\r\n        } else {\r\n            serviceUrl = urlBuilder.createUrl('/carts/mine/payment-information', {});\r\n        }\r\n\r\n        return storage.get(\r\n            serviceUrl, false\r\n        ).done(function (response) {\r\n            quote.setTotals(response.totals);\r\n            paymentService.setPaymentMethods(methodConverter(response['payment_methods']));\r\n            deferred.resolve();\r\n        }).fail(function (response) {\r\n            errorProcessor.process(response, messageContainer);\r\n            deferred.reject();\r\n        });\r\n    };\r\n});\r\n","Magento_Checkout/js/action/get-totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    '../model/quote',\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/totals'\r\n], function ($, quote, resourceUrlManager, errorProcessor, storage, totals) {\r\n    'use strict';\r\n\r\n    return function (callbacks, deferred) {\r\n        deferred = deferred || $.Deferred();\r\n        totals.isLoading(true);\r\n\r\n        return storage.get(\r\n            resourceUrlManager.getUrlForCartTotals(quote),\r\n            false\r\n        ).done(function (response) {\r\n            var proceed = true;\r\n\r\n            totals.isLoading(false);\r\n\r\n            if (callbacks.length > 0) {\r\n                $.each(callbacks, function (index, callback) {\r\n                    proceed = proceed && callback();\r\n                });\r\n            }\r\n\r\n            if (proceed) {\r\n                quote.setTotals(response);\r\n                deferred.resolve();\r\n            }\r\n        }).fail(function (response) {\r\n            totals.isLoading(false);\r\n            deferred.reject();\r\n            errorProcessor.process(response);\r\n        }).always(function () {\r\n            totals.isLoading(false);\r\n        });\r\n    };\r\n});\r\n","Magento_Checkout/js/action/place-order.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/url-builder',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Checkout/js/model/place-order'\r\n], function (quote, urlBuilder, customer, placeOrderService) {\r\n    'use strict';\r\n\r\n    return function (paymentData, messageContainer) {\r\n        var serviceUrl, payload;\r\n\r\n        payload = {\r\n            cartId: quote.getQuoteId(),\r\n            billingAddress: quote.billingAddress(),\r\n            paymentMethod: paymentData\r\n        };\r\n\r\n        if (customer.isLoggedIn()) {\r\n            serviceUrl = urlBuilder.createUrl('/carts/mine/payment-information', {});\r\n        } else {\r\n            serviceUrl = urlBuilder.createUrl('/guest-carts/:quoteId/payment-information', {\r\n                quoteId: quote.getQuoteId()\r\n            });\r\n            payload.email = quote.guestEmail;\r\n        }\r\n\r\n        return placeOrderService(serviceUrl, payload, messageContainer);\r\n    };\r\n});\r\n","Magento_Checkout/js/action/recollect-shipping-rates.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'Magento_Checkout/js/model/shipping-rate-registry'\r\n], function (quote, selectShippingAddress, rateRegistry) {\r\n    'use strict';\r\n\r\n    return function () {\r\n        var shippingAddress = null;\r\n\r\n        if (!quote.isVirtual()) {\r\n            shippingAddress = quote.shippingAddress();\r\n\r\n            rateRegistry.set(shippingAddress.getCacheKey(), null);\r\n            selectShippingAddress(shippingAddress);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/action/redirect-on-success.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine(\r\n    [\r\n        'mage/url',\r\n        'Magento_Checkout/js/model/full-screen-loader'\r\n    ],\r\n    function (url, fullScreenLoader) {\r\n        'use strict';\r\n\r\n        return {\r\n            redirectUrl: window.checkoutConfig.defaultSuccessPageUrl,\r\n\r\n            /**\r\n             * Provide redirect to page\r\n             */\r\n            execute: function () {\r\n                fullScreenLoader.startLoader();\r\n                window.location.replace(url.build(this.redirectUrl));\r\n            }\r\n        };\r\n    }\r\n);\r\n","Magento_Checkout/js/action/select-billing-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    '../model/quote'\r\n], function ($, quote) {\r\n    'use strict';\r\n\r\n    return function (billingAddress) {\r\n        var address = null;\r\n\r\n        if (quote.shippingAddress() && billingAddress.getCacheKey() == //eslint-disable-line eqeqeq\r\n            quote.shippingAddress().getCacheKey()\r\n        ) {\r\n            address = $.extend(true, {}, billingAddress);\r\n            address.saveInAddressBook = null;\r\n        } else {\r\n            address = billingAddress;\r\n        }\r\n        quote.billingAddress(address);\r\n    };\r\n});\r\n","Magento_Checkout/js/action/select-payment-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/quote'\r\n], function (quote) {\r\n    'use strict';\r\n\r\n    return function (paymentMethod) {\r\n        if (paymentMethod) {\r\n            paymentMethod.__disableTmpl = {\r\n                title: true\r\n            };\r\n        }\r\n        quote.paymentMethod(paymentMethod);\r\n    };\r\n});\r\n","Magento_Checkout/js/action/select-shipping-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/quote'\r\n], function (quote) {\r\n    'use strict';\r\n\r\n    return function (shippingAddress) {\r\n        quote.shippingAddress(shippingAddress);\r\n    };\r\n});\r\n","Magento_Checkout/js/action/select-shipping-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    '../model/quote'\r\n], function (quote) {\r\n    'use strict';\r\n\r\n    return function (shippingMethod) {\r\n        quote.shippingMethod(shippingMethod);\r\n    };\r\n});\r\n","Magento_Checkout/js/action/set-billing-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Checkout/js/model/url-builder',\r\n        'mage/storage',\r\n        'Magento_Checkout/js/model/error-processor',\r\n        'Magento_Customer/js/model/customer',\r\n        'Magento_Checkout/js/model/full-screen-loader',\r\n        'Magento_Checkout/js/action/get-payment-information'\r\n    ],\r\n    function ($,\r\n              quote,\r\n              urlBuilder,\r\n              storage,\r\n              errorProcessor,\r\n              customer,\r\n              fullScreenLoader,\r\n              getPaymentInformationAction\r\n    ) {\r\n        'use strict';\r\n\r\n        return function (messageContainer) {\r\n            var serviceUrl,\r\n                payload;\r\n\r\n            /**\r\n             * Checkout for guest and registered customer.\r\n             */\r\n            if (!customer.isLoggedIn()) {\r\n                serviceUrl = urlBuilder.createUrl('/guest-carts/:cartId/billing-address', {\r\n                    cartId: quote.getQuoteId()\r\n                });\r\n                payload = {\r\n                    cartId: quote.getQuoteId(),\r\n                    address: quote.billingAddress()\r\n                };\r\n            } else {\r\n                serviceUrl = urlBuilder.createUrl('/carts/mine/billing-address', {});\r\n                payload = {\r\n                    cartId: quote.getQuoteId(),\r\n                    address: quote.billingAddress()\r\n                };\r\n            }\r\n\r\n            fullScreenLoader.startLoader();\r\n\r\n            return storage.post(\r\n                serviceUrl, JSON.stringify(payload)\r\n            ).done(\r\n                function () {\r\n                    var deferred = $.Deferred();\r\n\r\n                    getPaymentInformationAction(deferred);\r\n                    $.when(deferred).done(function () {\r\n                        fullScreenLoader.stopLoader();\r\n                    });\r\n                }\r\n            ).fail(\r\n                function (response) {\r\n                    errorProcessor.process(response, messageContainer);\r\n                    fullScreenLoader.stopLoader();\r\n                }\r\n            );\r\n        };\r\n    }\r\n);\r\n","Magento_Checkout/js/action/set-payment-information-extended.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/url-builder',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Checkout/js/action/get-totals',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'underscore',\r\n    'Magento_Checkout/js/model/payment/place-order-hooks'\r\n], function (quote, urlBuilder, storage, errorProcessor, customer, getTotalsAction, fullScreenLoader, _, hooks) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Filter template data.\r\n     *\r\n     * @param {Object|Array} data\r\n     */\r\n    var filterTemplateData = function (data) {\r\n        return _.each(data, function (value, key, list) {\r\n            if (_.isArray(value) || _.isObject(value)) {\r\n                list[key] = filterTemplateData(value);\r\n            }\r\n\r\n            if (key === '__disableTmpl' || key === 'title') {\r\n                delete list[key];\r\n            }\r\n        });\r\n    };\r\n\r\n    return function (messageContainer, paymentData, skipBilling) {\r\n        var serviceUrl,\r\n            payload,\r\n            headers = {};\r\n\r\n        paymentData = filterTemplateData(paymentData);\r\n        skipBilling = skipBilling || false;\r\n        payload = {\r\n            cartId: quote.getQuoteId(),\r\n            paymentMethod: paymentData\r\n        };\r\n\r\n        /**\r\n         * Checkout for guest and registered customer.\r\n         */\r\n        if (!customer.isLoggedIn()) {\r\n            serviceUrl = urlBuilder.createUrl('/guest-carts/:cartId/set-payment-information', {\r\n                cartId: quote.getQuoteId()\r\n            });\r\n            payload.email = quote.guestEmail;\r\n        } else {\r\n            serviceUrl = urlBuilder.createUrl('/carts/mine/set-payment-information', {});\r\n        }\r\n\r\n        if (skipBilling === false) {\r\n            payload.billingAddress = quote.billingAddress();\r\n        }\r\n\r\n        fullScreenLoader.startLoader();\r\n\r\n        _.each(hooks.requestModifiers, function (modifier) {\r\n            modifier(headers, payload);\r\n        });\r\n\r\n        return storage.post(\r\n            serviceUrl, JSON.stringify(payload), true, 'application/json', headers\r\n        ).fail(\r\n            function (response) {\r\n                errorProcessor.process(response, messageContainer);\r\n            }\r\n        ).always(\r\n            function () {\r\n                fullScreenLoader.stopLoader();\r\n                _.each(hooks.afterRequestListeners, function (listener) {\r\n                    listener();\r\n                });\r\n            }\r\n        );\r\n    };\r\n});\r\n","Magento_Checkout/js/action/set-payment-information.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/action/set-payment-information-extended'\r\n\r\n], function (setPaymentInformationExtended) {\r\n    'use strict';\r\n\r\n    return function (messageContainer, paymentData) {\r\n\r\n        return setPaymentInformationExtended(messageContainer, paymentData, false);\r\n    };\r\n});\r\n","Magento_Checkout/js/action/set-shipping-information.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    '../model/quote',\r\n    'Magento_Checkout/js/model/shipping-save-processor'\r\n], function (quote, shippingSaveProcessor) {\r\n    'use strict';\r\n\r\n    return function () {\r\n        return shippingSaveProcessor.saveShippingInformation(quote.shippingAddress().getType());\r\n    };\r\n});\r\n","Magento_Checkout/js/action/update-shopping-cart.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'mage/validation'\r\n], function (alert, $) {\r\n    'use strict';\r\n\r\n    $.widget('mage.updateShoppingCart', {\r\n        options: {\r\n            validationURL: '',\r\n            eventName: 'updateCartItemQty',\r\n            updateCartActionContainer: ''\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            this._on(this.element, {\r\n                'submit': this.onSubmit\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Prevents default submit action and calls form validator.\r\n         *\r\n         * @param {Event} event\r\n         * @return {Boolean}\r\n         */\r\n        onSubmit: function (event) {\r\n            var action = this.element.find(this.options.updateCartActionContainer).val();\r\n\r\n            if (!this.options.validationURL || action === 'empty_cart') {\r\n                return true;\r\n            }\r\n\r\n            if (this.isValid()) {\r\n                event.preventDefault();\r\n                this.validateItems(this.options.validationURL, this.element.serialize());\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Validates requested form.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        isValid: function () {\r\n            return this.element.validation() && this.element.validation('isValid');\r\n        },\r\n\r\n        /**\r\n         * Validates updated shopping cart data.\r\n         *\r\n         * @param {String} url - request url\r\n         * @param {Object} data - post data for ajax call\r\n         */\r\n        validateItems: function (url, data) {\r\n            $.extend(data, {\r\n                'form_key': $.mage.cookies.get('form_key')\r\n            });\r\n\r\n            $.ajax({\r\n                url: url,\r\n                data: data,\r\n                type: 'post',\r\n                dataType: 'json',\r\n                context: this,\r\n\r\n                /** @inheritdoc */\r\n                beforeSend: function () {\r\n                    $(document.body).trigger('processStart');\r\n                },\r\n\r\n                /** @inheritdoc */\r\n                complete: function () {\r\n                    $(document.body).trigger('processStop');\r\n                }\r\n            })\r\n            .done(function (response) {\r\n                if (response.success) {\r\n                    this.onSuccess();\r\n                } else {\r\n                    this.onError(response);\r\n                }\r\n            })\r\n            .fail(function () {\r\n                this.submitForm();\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Form validation succeed.\r\n         */\r\n        onSuccess: function () {\r\n            $(document).trigger('ajax:' + this.options.eventName);\r\n            this.submitForm();\r\n        },\r\n\r\n        /**\r\n         * Form validation failed.\r\n         */\r\n        onError: function (response) {\r\n            var that = this,\r\n                elm,\r\n                responseData = JSON.parse(response['error_message']);\r\n\r\n            if (response['error_message']) {\r\n                try {\r\n                    $.each(responseData, function (index, data) {\r\n\r\n                        if (data.itemId !== undefined) {\r\n                            elm = $('#cart-' + data.itemId + '-qty');\r\n                            elm.val(elm.attr('data-item-qty'));\r\n                        }\r\n                        response['error_message'] = data.error;\r\n                    });\r\n                } catch (e) {}\r\n                alert({\r\n                    content: response['error_message'],\r\n                    actions: {\r\n                        /** @inheritdoc */\r\n                        always: function () {\r\n                            that.submitForm();\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n                this.submitForm();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Real submit of validated form.\r\n         */\r\n        submitForm: function () {\r\n            this.element\r\n                .off('submit', this.onSubmit)\r\n                .on('submit', function () {\r\n                    $(document.body).trigger('processStart');\r\n                })\r\n                .trigger('submit');\r\n        }\r\n    });\r\n\r\n    return $.mage.updateShoppingCart;\r\n});\r\n","Magento_Checkout/js/model/address-converter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/model/new-customer-address',\r\n    'Magento_Customer/js/customer-data',\r\n    'mage/utils/objects',\r\n    'underscore'\r\n], function ($, address, customerData, mageUtils, _) {\r\n    'use strict';\r\n\r\n    var countryData = customerData.get('directory-data');\r\n\r\n    return {\r\n        /**\r\n         * Convert address form data to Address object\r\n         *\r\n         * @param {Object} formData\r\n         * @returns {Object}\r\n         */\r\n        formAddressDataToQuoteAddress: function (formData) {\r\n            // clone address form data to new object\r\n            var addressData = $.extend(true, {}, formData),\r\n                region,\r\n                regionName = addressData.region,\r\n                customAttributes;\r\n\r\n            if (mageUtils.isObject(addressData.street)) {\r\n                addressData.street = this.objectToArray(addressData.street);\r\n            }\r\n\r\n            addressData.region = {\r\n                'region_id': addressData['region_id'],\r\n                'region_code': addressData['region_code'],\r\n                region: regionName\r\n            };\r\n\r\n            if (addressData['region_id'] &&\r\n                countryData()[addressData['country_id']] &&\r\n                countryData()[addressData['country_id']].regions\r\n            ) {\r\n                region = countryData()[addressData['country_id']].regions[addressData['region_id']];\r\n\r\n                if (region) {\r\n                    addressData.region['region_id'] = addressData['region_id'];\r\n                    addressData.region['region_code'] = region.code;\r\n                    addressData.region.region = region.name;\r\n                }\r\n            } else if (\r\n                !addressData['region_id'] &&\r\n                countryData()[addressData['country_id']] &&\r\n                countryData()[addressData['country_id']].regions\r\n            ) {\r\n                addressData.region['region_code'] = '';\r\n                addressData.region.region = '';\r\n            }\r\n            delete addressData['region_id'];\r\n\r\n            if (addressData['custom_attributes']) {\r\n                addressData['custom_attributes'] = _.map(\r\n                    addressData['custom_attributes'],\r\n                    function (value, key) {\r\n                        customAttributes = {\r\n                            'attribute_code': key,\r\n                            'value': value\r\n                        };\r\n\r\n                        if (typeof value === 'boolean') {\r\n                            customAttributes = {\r\n                                'attribute_code': key,\r\n                                'value': value,\r\n                                'label': value === true ? 'Yes' : 'No'\r\n                            };\r\n                        }\r\n\r\n                        return customAttributes;\r\n                    }\r\n                );\r\n            }\r\n\r\n            return address(addressData);\r\n        },\r\n\r\n        /**\r\n         * Convert Address object to address form data.\r\n         *\r\n         * @param {Object} addrs\r\n         * @returns {Object}\r\n         */\r\n        quoteAddressToFormAddressData: function (addrs) {\r\n            var self = this,\r\n                output = {},\r\n                streetObject,\r\n                customAttributesObject;\r\n\r\n            $.each(addrs, function (key) {\r\n                if (addrs.hasOwnProperty(key) && typeof addrs[key] !== 'function') {\r\n                    output[self.toUnderscore(key)] = addrs[key];\r\n                }\r\n            });\r\n\r\n            if (Array.isArray(addrs.street)) {\r\n                streetObject = {};\r\n                addrs.street.forEach(function (value, index) {\r\n                    streetObject[index] = value;\r\n                });\r\n                output.street = streetObject;\r\n            }\r\n\r\n            //jscs:disable requireCamelCaseOrUpperCaseIdentifiers\r\n            if (Array.isArray(addrs.customAttributes)) {\r\n                customAttributesObject = {};\r\n                addrs.customAttributes.forEach(function (value) {\r\n                    customAttributesObject[value.attribute_code] = value.value;\r\n                });\r\n                output.custom_attributes = customAttributesObject;\r\n            }\r\n            //jscs:enable requireCamelCaseOrUpperCaseIdentifiers\r\n\r\n            return output;\r\n        },\r\n\r\n        /**\r\n         * @param {String} string\r\n         */\r\n        toUnderscore: function (string) {\r\n            return string.replace(/([A-Z])/g, function ($1) {\r\n                return '_' + $1.toLowerCase();\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {Object} formProviderData\r\n         * @param {String} formIndex\r\n         * @return {Object}\r\n         */\r\n        formDataProviderToFlatData: function (formProviderData, formIndex) {\r\n            var addressData = {};\r\n\r\n            $.each(formProviderData, function (path, value) {\r\n                var pathComponents = path.split('.'),\r\n                    dataObject = {};\r\n\r\n                pathComponents.splice(pathComponents.indexOf(formIndex), 1);\r\n                pathComponents.reverse();\r\n                $.each(pathComponents, function (index, pathPart) {\r\n                    var parent = {};\r\n\r\n                    if (index == 0) { //eslint-disable-line eqeqeq\r\n                        dataObject[pathPart] = value;\r\n                    } else {\r\n                        parent[pathPart] = dataObject;\r\n                        dataObject = parent;\r\n                    }\r\n                });\r\n                $.extend(true, addressData, dataObject);\r\n            });\r\n\r\n            return addressData;\r\n        },\r\n\r\n        /**\r\n         * Convert object to array\r\n         * @param {Object} object\r\n         * @returns {Array}\r\n         */\r\n        objectToArray: function (object) {\r\n            var convertedArray = [];\r\n\r\n            $.each(object, function (key) {\r\n                return typeof object[key] === 'string' ? convertedArray.push(object[key]) : false;\r\n            });\r\n\r\n            return convertedArray.slice(0);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} addrs\r\n         * @return {*|Object}\r\n         */\r\n        addressToEstimationAddress: function (addrs) {\r\n            var self = this,\r\n                estimatedAddressData = {};\r\n\r\n            $.each(addrs, function (key) {\r\n                estimatedAddressData[self.toUnderscore(key)] = addrs[key];\r\n            });\r\n\r\n            return this.formAddressDataToQuoteAddress(estimatedAddressData);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/authentication-messages.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Ui/js/model/messages'\r\n], function (ko, Messages) {\r\n    'use strict';\r\n\r\n    return new Messages();\r\n});\r\n","Magento_Checkout/js/model/billing-address-postcode-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n           'jquery',\r\n           'Magento_Checkout/js/model/postcode-validator',\r\n           'mage/translate',\r\n           'uiRegistry'\r\n       ], function (\r\n    $,\r\n    postcodeValidator,\r\n    $t,\r\n    uiRegistry\r\n) {\r\n    'use strict';\r\n\r\n    var postcodeElementName = 'postcode';\r\n\r\n    return {\r\n        validateZipCodeTimeout: 0,\r\n        validateDelay: 2000,\r\n\r\n        /**\r\n         * Perform postponed binding for fieldset elements\r\n         *\r\n         * @param {String} formPath\r\n         */\r\n        initFields: function (formPath) {\r\n            var self = this;\r\n\r\n            uiRegistry.async(formPath + '.' + postcodeElementName)(self.bindHandler.bind(self));\r\n        },\r\n\r\n        /**\r\n         * @param {Object} element\r\n         * @param {Number} delay\r\n         */\r\n        bindHandler: function (element, delay) {\r\n            var self = this;\r\n\r\n            delay = typeof delay === 'undefined' ? self.validateDelay : delay;\r\n\r\n            element.on('value', function () {\r\n                clearTimeout(self.validateZipCodeTimeout);\r\n                self.validateZipCodeTimeout = setTimeout(function () {\r\n                    self.postcodeValidation(element);\r\n                }, delay);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {Object} postcodeElement\r\n         * @return {*}\r\n         */\r\n        postcodeValidation: function (postcodeElement) {\r\n            var countryId = $('select[name=\"country_id\"]:visible').val(),\r\n                validationResult,\r\n                warnMessage;\r\n\r\n            if (postcodeElement == null || postcodeElement.value() == null) {\r\n                return true;\r\n            }\r\n\r\n            postcodeElement.warn(null);\r\n            validationResult = postcodeValidator.validate(postcodeElement.value(), countryId);\r\n\r\n            if (!validationResult) {\r\n                warnMessage = $t('Provided Zip/Postal Code seems to be invalid.');\r\n\r\n                if (postcodeValidator.validatedPostCodeExample.length) {\r\n                    warnMessage += $t(' Example: ') + postcodeValidator.validatedPostCodeExample.join('; ') + '. ';\r\n                }\r\n                warnMessage += $t('If you believe it is the right one you can ignore this notice.');\r\n                postcodeElement.warn(warnMessage);\r\n            }\r\n\r\n            return validationResult;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/checkout-data-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Checkout adapter for customer data storage\r\n */\r\ndefine([\r\n    'Magento_Customer/js/model/address-list',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/action/create-shipping-address',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'Magento_Checkout/js/action/select-shipping-method',\r\n    'Magento_Checkout/js/model/payment-service',\r\n    'Magento_Checkout/js/action/select-payment-method',\r\n    'Magento_Checkout/js/model/address-converter',\r\n    'Magento_Checkout/js/action/select-billing-address',\r\n    'Magento_Checkout/js/action/create-billing-address',\r\n    'underscore'\r\n], function (\r\n    addressList,\r\n    quote,\r\n    checkoutData,\r\n    createShippingAddress,\r\n    selectShippingAddress,\r\n    selectShippingMethodAction,\r\n    paymentService,\r\n    selectPaymentMethodAction,\r\n    addressConverter,\r\n    selectBillingAddress,\r\n    createBillingAddress,\r\n    _\r\n) {\r\n    'use strict';\r\n\r\n    var isBillingAddressResolvedFromBackend = false;\r\n\r\n    return {\r\n\r\n        /**\r\n         * Resolve estimation address. Used local storage\r\n         */\r\n        resolveEstimationAddress: function () {\r\n            var address;\r\n\r\n            if (quote.isVirtual()) {\r\n                if (checkoutData.getBillingAddressFromData()) {\r\n                    address = addressConverter.formAddressDataToQuoteAddress(\r\n                        checkoutData.getBillingAddressFromData()\r\n                    );\r\n                    selectBillingAddress(address);\r\n                } else {\r\n                    this.resolveBillingAddress();\r\n                }\r\n            } else if (checkoutData.getShippingAddressFromData()) {\r\n                address = addressConverter.formAddressDataToQuoteAddress(checkoutData.getShippingAddressFromData());\r\n                selectShippingAddress(address);\r\n            } else {\r\n                this.resolveShippingAddress();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Resolve shipping address. Used local storage\r\n         */\r\n        resolveShippingAddress: function () {\r\n            var newCustomerShippingAddress;\r\n\r\n            if (!checkoutData.getShippingAddressFromData() &&\r\n                window.checkoutConfig.shippingAddressFromData\r\n            ) {\r\n                checkoutData.setShippingAddressFromData(window.checkoutConfig.shippingAddressFromData);\r\n            }\r\n\r\n            newCustomerShippingAddress = checkoutData.getNewCustomerShippingAddress();\r\n\r\n            if (newCustomerShippingAddress) {\r\n                createShippingAddress(newCustomerShippingAddress);\r\n            }\r\n            this.applyShippingAddress();\r\n        },\r\n\r\n        /**\r\n         * Apply resolved estimated address to quote\r\n         *\r\n         * @param {Object} isEstimatedAddress\r\n         */\r\n        applyShippingAddress: function (isEstimatedAddress) {\r\n            var address,\r\n                shippingAddress,\r\n                isConvertAddress;\r\n\r\n            if (addressList().length === 0) {\r\n                address = addressConverter.formAddressDataToQuoteAddress(\r\n                    checkoutData.getShippingAddressFromData()\r\n                );\r\n                selectShippingAddress(address);\r\n            }\r\n            shippingAddress = quote.shippingAddress();\r\n            isConvertAddress = isEstimatedAddress || false;\r\n\r\n            if (!shippingAddress) {\r\n                shippingAddress = this.getShippingAddressFromCustomerAddressList();\r\n\r\n                if (shippingAddress) {\r\n                    selectShippingAddress(\r\n                        isConvertAddress ?\r\n                            addressConverter.addressToEstimationAddress(shippingAddress)\r\n                            : shippingAddress\r\n                    );\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Object} ratesData\r\n         */\r\n        resolveShippingRates: function (ratesData) {\r\n            var selectedShippingRate = checkoutData.getSelectedShippingRate(),\r\n                availableRate = false;\r\n\r\n            if (ratesData.length === 1 && !quote.shippingMethod()) {\r\n                //set shipping rate if we have only one available shipping rate\r\n                selectShippingMethodAction(ratesData[0]);\r\n\r\n                return;\r\n            }\r\n\r\n            if (quote.shippingMethod()) {\r\n                availableRate = _.find(ratesData, function (rate) {\r\n                    return rate['carrier_code'] == quote.shippingMethod()['carrier_code'] && //eslint-disable-line\r\n                        rate['method_code'] == quote.shippingMethod()['method_code']; //eslint-disable-line eqeqeq\r\n                });\r\n            }\r\n\r\n            if (!availableRate && selectedShippingRate) {\r\n                availableRate = _.find(ratesData, function (rate) {\r\n                    return rate['carrier_code'] + '_' + rate['method_code'] === selectedShippingRate;\r\n                });\r\n            }\r\n\r\n            if (!availableRate && window.checkoutConfig.selectedShippingMethod) {\r\n                availableRate = _.find(ratesData, function (rate) {\r\n                    var selectedShippingMethod = window.checkoutConfig.selectedShippingMethod;\r\n\r\n                    return rate['carrier_code'] == selectedShippingMethod['carrier_code'] && //eslint-disable-line\r\n                        rate['method_code'] == selectedShippingMethod['method_code']; //eslint-disable-line eqeqeq\r\n                });\r\n            }\r\n\r\n            //Unset selected shipping method if not available\r\n            if (!availableRate) {\r\n                selectShippingMethodAction(null);\r\n            } else {\r\n                selectShippingMethodAction(availableRate);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Resolve payment method. Used local storage\r\n         */\r\n        resolvePaymentMethod: function () {\r\n            var availablePaymentMethods = paymentService.getAvailablePaymentMethods(),\r\n                selectedPaymentMethod = checkoutData.getSelectedPaymentMethod();\r\n\r\n            if (selectedPaymentMethod) {\r\n                availablePaymentMethods.some(function (payment) {\r\n                    if (payment.method == selectedPaymentMethod) { //eslint-disable-line eqeqeq\r\n                        selectPaymentMethodAction(payment);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Resolve billing address. Used local storage\r\n         */\r\n        resolveBillingAddress: function () {\r\n            var selectedBillingAddress,\r\n                newCustomerBillingAddressData;\r\n\r\n            selectedBillingAddress = checkoutData.getSelectedBillingAddress();\r\n            newCustomerBillingAddressData = checkoutData.getNewCustomerBillingAddress();\r\n\r\n            if (selectedBillingAddress) {\r\n                if (selectedBillingAddress === 'new-customer-billing-address' && newCustomerBillingAddressData) {\r\n                    selectBillingAddress(createBillingAddress(newCustomerBillingAddressData));\r\n                } else {\r\n                    addressList.some(function (address) {\r\n                        if (selectedBillingAddress === address.getKey()) {\r\n                            selectBillingAddress(address);\r\n                        }\r\n                    });\r\n                }\r\n            } else {\r\n                this.applyBillingAddress();\r\n            }\r\n\r\n            if (!isBillingAddressResolvedFromBackend &&\r\n                !checkoutData.getBillingAddressFromData() &&\r\n                !_.isEmpty(window.checkoutConfig.billingAddressFromData) &&\r\n                !quote.billingAddress()\r\n            ) {\r\n                if (window.checkoutConfig.isBillingAddressFromDataValid === true) {\r\n                    selectBillingAddress(createBillingAddress(window.checkoutConfig.billingAddressFromData));\r\n                } else {\r\n                    checkoutData.setBillingAddressFromData(window.checkoutConfig.billingAddressFromData);\r\n                }\r\n                isBillingAddressResolvedFromBackend = true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Apply resolved billing address to quote\r\n         */\r\n        applyBillingAddress: function () {\r\n            var shippingAddress,\r\n                isBillingAddressInitialized;\r\n\r\n            if (quote.billingAddress()) {\r\n                selectBillingAddress(quote.billingAddress());\r\n\r\n                return;\r\n            }\r\n\r\n            if (quote.isVirtual() || !quote.billingAddress()) {\r\n                isBillingAddressInitialized = addressList.some(function (addrs) {\r\n                    if (addrs.isDefaultBilling()) {\r\n                        selectBillingAddress(addrs);\r\n\r\n                        return true;\r\n                    }\r\n\r\n                    return false;\r\n                });\r\n            }\r\n\r\n            shippingAddress = quote.shippingAddress();\r\n\r\n            if (!isBillingAddressInitialized &&\r\n                shippingAddress &&\r\n                shippingAddress.canUseForBilling() &&\r\n                (shippingAddress.isDefaultShipping() || !quote.isVirtual())\r\n            ) {\r\n                //set billing address same as shipping by default if it is not empty\r\n                selectBillingAddress(quote.shippingAddress());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get shipping address from address list\r\n         *\r\n         * @return {Object|null}\r\n         */\r\n        getShippingAddressFromCustomerAddressList: function () {\r\n            var shippingAddress = _.find(\r\n                    addressList(),\r\n                    function (address) {\r\n                        return checkoutData.getSelectedShippingAddress() == address.getKey() //eslint-disable-line\r\n                    }\r\n                );\r\n\r\n            if (!shippingAddress) {\r\n                shippingAddress = _.find(\r\n                    addressList(),\r\n                    function (address) {\r\n                        return address.isDefaultShipping();\r\n                    }\r\n                );\r\n            }\r\n\r\n            if (!shippingAddress && addressList().length === 1) {\r\n                shippingAddress = addressList()[0];\r\n            }\r\n\r\n            return shippingAddress;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/customer-email-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/model/customer',\r\n    'mage/validation'\r\n], function ($, customer) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Validate checkout agreements\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function () {\r\n            var emailValidationResult = customer.isLoggedIn(),\r\n                loginFormSelector = 'form[data-role=email-with-possible-login]';\r\n\r\n            if (!customer.isLoggedIn()) {\r\n                $(loginFormSelector).validation();\r\n                emailValidationResult = Boolean($(loginFormSelector + ' input[name=username]').valid());\r\n            }\r\n\r\n            return emailValidationResult;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/default-post-code-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * Define necessity of using default post code value\r\n     */\r\n    var useDefaultPostCode;\r\n\r\n    return {\r\n        /**\r\n         * Resolve default post code\r\n         *\r\n         * @returns {String|null}\r\n         */\r\n        resolve: function () {\r\n            return useDefaultPostCode ?  window.checkoutConfig.defaultPostcode : null;\r\n        },\r\n\r\n        /**\r\n         * Set state to useDefaultPostCode variable\r\n         *\r\n         * @param {Boolean} shouldUseDefaultPostCode\r\n         * @returns {underscore}\r\n         */\r\n        setUseDefaultPostCode: function (shouldUseDefaultPostCode) {\r\n            useDefaultPostCode = shouldUseDefaultPostCode;\r\n\r\n            return this;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/default-validation-rules.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'country_id': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/default-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    './default-validation-rules',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/error-processor.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'mage/url',\r\n    'Magento_Ui/js/model/messageList',\r\n    'mage/translate'\r\n], function (url, globalMessageList, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @param {Object} response\r\n         * @param {Object} messageContainer\r\n         */\r\n        process: function (response, messageContainer) {\r\n            var error;\r\n\r\n            messageContainer = messageContainer || globalMessageList;\r\n\r\n            if (response.status == 401) { //eslint-disable-line eqeqeq\r\n                window.location.replace(url.build('customer/account/login/'));\r\n            } else {\r\n                try {\r\n                    error = JSON.parse(response.responseText);\r\n                } catch (exception) {\r\n                    error = {\r\n                        message: $t('Something went wrong with your request. Please try again later.')\r\n                    };\r\n                }\r\n                messageContainer.addErrorMessage(error);\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/full-screen-loader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'rjsResolver'\r\n], function ($, resolver) {\r\n    'use strict';\r\n\r\n    var containerId = '#checkout';\r\n\r\n    return {\r\n\r\n        /**\r\n         * Start full page loader action\r\n         */\r\n        startLoader: function () {\r\n            $(containerId).trigger('processStart');\r\n        },\r\n\r\n        /**\r\n         * Stop full page loader action\r\n         *\r\n         * @param {Boolean} [forceStop]\r\n         */\r\n        stopLoader: function (forceStop) {\r\n            var $elem = $(containerId),\r\n                stop = $elem.trigger.bind($elem, 'processStop'); //eslint-disable-line jquery-no-bind-unbind\r\n\r\n            forceStop ? stop() : resolver(stop);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/new-customer-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Checkout/js/model/default-post-code-resolver'\r\n], function (_, DefaultPostCodeResolver) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {Object} addressData\r\n     * Returns new address object\r\n     */\r\n    return function (addressData) {\r\n        var identifier = Date.now(),\r\n            countryId = addressData['country_id'] || addressData.countryId || window.checkoutConfig.defaultCountryId,\r\n            regionId;\r\n\r\n        if (addressData.region && addressData.region['region_id']) {\r\n            regionId = addressData.region['region_id'];\r\n        } else if (!addressData['region_id']) {\r\n            regionId = undefined;\r\n        } else if (\r\n            /* eslint-disable */\r\n            addressData['country_id'] && addressData['country_id'] == window.checkoutConfig.defaultCountryId ||\r\n            !addressData['country_id'] && countryId == window.checkoutConfig.defaultCountryId\r\n            /* eslint-enable */\r\n        ) {\r\n            regionId = window.checkoutConfig.defaultRegionId || undefined;\r\n        }\r\n\r\n        return {\r\n            email: addressData.email,\r\n            countryId: countryId,\r\n            regionId: regionId || addressData.regionId,\r\n            regionCode: addressData.region ? addressData.region['region_code'] : null,\r\n            region: addressData.region ? addressData.region.region : null,\r\n            customerId: addressData['customer_id'] || addressData.customerId,\r\n            street: addressData.street ? _.compact(addressData.street) : addressData.street,\r\n            company: addressData.company,\r\n            telephone: addressData.telephone,\r\n            fax: addressData.fax,\r\n            postcode: addressData.postcode ? addressData.postcode : DefaultPostCodeResolver.resolve(),\r\n            city: addressData.city,\r\n            firstname: addressData.firstname,\r\n            lastname: addressData.lastname,\r\n            middlename: addressData.middlename,\r\n            prefix: addressData.prefix,\r\n            suffix: addressData.suffix,\r\n            vatId: addressData['vat_id'],\r\n            saveInAddressBook: addressData['save_in_address_book'],\r\n            customAttributes: addressData['custom_attributes'],\r\n            extensionAttributes: addressData['extension_attributes'],\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            isDefaultShipping: function () {\r\n                return addressData['default_shipping'];\r\n            },\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            isDefaultBilling: function () {\r\n                return addressData['default_billing'];\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getType: function () {\r\n                return 'new-customer-address';\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getKey: function () {\r\n                return this.getType();\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getCacheKey: function () {\r\n                return this.getType() + identifier;\r\n            },\r\n\r\n            /**\r\n             * @return {Boolean}\r\n             */\r\n            isEditable: function () {\r\n                return true;\r\n            },\r\n\r\n            /**\r\n             * @return {Boolean}\r\n             */\r\n            canUseForBilling: function () {\r\n                return true;\r\n            }\r\n        };\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/payment/method-list',\r\n    'Magento_Checkout/js/action/select-payment-method'\r\n], function (_, quote, methodList, selectPaymentMethod) {\r\n    'use strict';\r\n\r\n    /**\r\n    * Free method filter\r\n    * @param {Object} paymentMethod\r\n    * @return {Boolean}\r\n    */\r\n    var isFreePaymentMethod = function (paymentMethod) {\r\n            return paymentMethod.method === 'free';\r\n        },\r\n\r\n        /**\r\n         * Grabs the grand total from quote\r\n         * @return {Number}\r\n         */\r\n        getGrandTotal = function () {\r\n            return quote.totals()['grand_total'];\r\n        };\r\n\r\n    return {\r\n        isFreeAvailable: false,\r\n\r\n        /**\r\n         * Populate the list of payment methods\r\n         * @param {Array} methods\r\n         */\r\n        setPaymentMethods: function (methods) {\r\n            var freeMethod,\r\n                filteredMethods,\r\n                methodIsAvailable,\r\n                methodNames;\r\n\r\n            freeMethod = _.find(methods, isFreePaymentMethod);\r\n            this.isFreeAvailable = !!freeMethod;\r\n\r\n            if (freeMethod && getGrandTotal() <= 0) {\r\n                methods.splice(0, methods.length, freeMethod);\r\n                selectPaymentMethod(freeMethod);\r\n            }\r\n\r\n            filteredMethods = _.without(methods, freeMethod);\r\n\r\n            if (filteredMethods.length === 1) {\r\n                selectPaymentMethod(filteredMethods[0]);\r\n            } else if (quote.paymentMethod()) {\r\n                methodIsAvailable = methods.some(function (item) {\r\n                    return item.method === quote.paymentMethod().method;\r\n                });\r\n                //Unset selected payment method if not available\r\n                if (!methodIsAvailable) {\r\n                    selectPaymentMethod(null);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Overwrite methods with existing methods to preserve ko array references.\r\n             * This prevent ko from re-rendering those methods.\r\n             */\r\n            methodNames = _.pluck(methods, 'method');\r\n            _.map(methodList(), function (existingMethod) {\r\n                var existingMethodIndex = methodNames.indexOf(existingMethod.method);\r\n\r\n                if (existingMethodIndex !== -1) {\r\n                    methods[existingMethodIndex] = existingMethod;\r\n                }\r\n            });\r\n\r\n            methodList(methods);\r\n        },\r\n\r\n        /**\r\n         * Get the list of available payment methods.\r\n         * @return {Array}\r\n         */\r\n        getAvailablePaymentMethods: function () {\r\n            var allMethods = methodList().slice(),\r\n                grandTotalOverZero = getGrandTotal() > 0;\r\n\r\n            if (!this.isFreeAvailable) {\r\n                return allMethods;\r\n            }\r\n\r\n            if (grandTotalOverZero) {\r\n                return _.reject(allMethods, isFreePaymentMethod);\r\n            }\r\n\r\n            return _.filter(allMethods, isFreePaymentMethod);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/place-order.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine(\r\n    [\r\n        'mage/storage',\r\n        'Magento_Checkout/js/model/error-processor',\r\n        'Magento_Checkout/js/model/full-screen-loader',\r\n        'Magento_Customer/js/customer-data',\r\n        'Magento_Checkout/js/model/payment/place-order-hooks',\r\n        'underscore'\r\n    ],\r\n    function (storage, errorProcessor, fullScreenLoader, customerData, hooks, _) {\r\n        'use strict';\r\n\r\n        return function (serviceUrl, payload, messageContainer) {\r\n            var headers = {};\r\n\r\n            fullScreenLoader.startLoader();\r\n            _.each(hooks.requestModifiers, function (modifier) {\r\n                modifier(headers, payload);\r\n            });\r\n\r\n            return storage.post(\r\n                serviceUrl, JSON.stringify(payload), true, 'application/json', headers\r\n            ).fail(\r\n                function (response) {\r\n                    errorProcessor.process(response, messageContainer);\r\n                }\r\n            ).done(\r\n                function (response) {\r\n                    var clearData = {\r\n                        'selectedShippingAddress': null,\r\n                        'shippingAddressFromData': null,\r\n                        'newCustomerShippingAddress': null,\r\n                        'selectedShippingRate': null,\r\n                        'selectedPaymentMethod': null,\r\n                        'selectedBillingAddress': null,\r\n                        'billingAddressFromData': null,\r\n                        'newCustomerBillingAddress': null\r\n                    };\r\n\r\n                    if (response.responseType !== 'error') {\r\n                        customerData.set('checkout-data', clearData);\r\n                    }\r\n                }\r\n            ).always(\r\n                function () {\r\n                    fullScreenLoader.stopLoader();\r\n                    _.each(hooks.afterRequestListeners, function (listener) {\r\n                        listener();\r\n                    });\r\n                }\r\n            );\r\n        };\r\n    }\r\n);\r\n","Magento_Checkout/js/model/postcode-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'mageUtils'\r\n], function (utils) {\r\n    'use strict';\r\n\r\n    return {\r\n        validatedPostCodeExample: [],\r\n\r\n        /**\r\n         * @param {*} postCode\r\n         * @param {*} countryId\r\n         * @param {Array} postCodesPatterns\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (postCode, countryId, postCodesPatterns) {\r\n            var pattern, regex,\r\n                patterns = postCodesPatterns ? postCodesPatterns[countryId] :\r\n                    window.checkoutConfig.postCodes[countryId];\r\n\r\n            this.validatedPostCodeExample = [];\r\n\r\n            if (!utils.isEmpty(postCode) && !utils.isEmpty(patterns)) {\r\n                for (pattern in patterns) {\r\n                    if (patterns.hasOwnProperty(pattern)) { //eslint-disable-line max-depth\r\n                        this.validatedPostCodeExample.push(patterns[pattern].example);\r\n                        regex = new RegExp(patterns[pattern].pattern);\r\n\r\n                        if (regex.test(postCode)) { //eslint-disable-line max-depth\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/quote.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'domReady!'\r\n], function (ko, _) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Get totals data from the extension attributes.\r\n     * @param {*} data\r\n     * @returns {*}\r\n     */\r\n    var proceedTotalsData = function (data) {\r\n            if (_.isObject(data) && _.isObject(data['extension_attributes'])) {\r\n                _.each(data['extension_attributes'], function (element, index) {\r\n                    data[index] = element;\r\n                });\r\n            }\r\n\r\n            return data;\r\n        },\r\n        billingAddress = ko.observable(null),\r\n        shippingAddress = ko.observable(null),\r\n        shippingMethod = ko.observable(null),\r\n        paymentMethod = ko.observable(null),\r\n        quoteData = window.checkoutConfig.quoteData,\r\n        basePriceFormat = window.checkoutConfig.basePriceFormat,\r\n        priceFormat = window.checkoutConfig.priceFormat,\r\n        storeCode = window.checkoutConfig.storeCode,\r\n        totalsData = proceedTotalsData(window.checkoutConfig.totalsData),\r\n        totals = ko.observable(totalsData),\r\n        collectedTotals = ko.observable({});\r\n\r\n    return {\r\n        totals: totals,\r\n        shippingAddress: shippingAddress,\r\n        shippingMethod: shippingMethod,\r\n        billingAddress: billingAddress,\r\n        paymentMethod: paymentMethod,\r\n        guestEmail: null,\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getQuoteId: function () {\r\n            return quoteData['entity_id'];\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isVirtual: function () {\r\n            return !!Number(quoteData['is_virtual']);\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPriceFormat: function () {\r\n            return priceFormat;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getBasePriceFormat: function () {\r\n            return basePriceFormat;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getItems: function () {\r\n            return window.checkoutConfig.quoteItemData;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @return {*}\r\n         */\r\n        getTotals: function () {\r\n            return totals;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} data\r\n         */\r\n        setTotals: function (data) {\r\n            data = proceedTotalsData(data);\r\n            totals(data);\r\n            this.setCollectedTotals('subtotal_with_discount', parseFloat(data['subtotal_with_discount']));\r\n        },\r\n\r\n        /**\r\n         * @param {*} paymentMethodCode\r\n         */\r\n        setPaymentMethod: function (paymentMethodCode) {\r\n            paymentMethod(paymentMethodCode);\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPaymentMethod: function () {\r\n            return paymentMethod;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getStoreCode: function () {\r\n            return storeCode;\r\n        },\r\n\r\n        /**\r\n         * @param {String} code\r\n         * @param {*} value\r\n         */\r\n        setCollectedTotals: function (code, value) {\r\n            var colTotals = collectedTotals();\r\n\r\n            colTotals[code] = value;\r\n            collectedTotals(colTotals);\r\n        },\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getCalculatedTotal: function () {\r\n            var total = 0.; //eslint-disable-line no-floating-decimal\r\n\r\n            _.each(collectedTotals(), function (value) {\r\n                total += value;\r\n            });\r\n\r\n            return total;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/resource-url-manager.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Checkout/js/model/url-builder',\r\n    'mageUtils'\r\n], function (customer, urlBuilder, utils) {\r\n        'use strict';\r\n\r\n        return {\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForTotalsEstimationForNewAddress: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            cartId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/:cartId/totals-information',\r\n                        'customer': '/carts/mine/totals-information'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForEstimationShippingMethodsForNewAddress: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/:quoteId/estimate-shipping-methods',\r\n                        'customer': '/carts/mine/estimate-shipping-methods'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForEstimationShippingMethodsByAddressId: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'default': '/carts/mine/estimate-shipping-methods-by-address-id'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {String} couponCode\r\n             * @param {String} quoteId\r\n             * @return {*}\r\n             */\r\n            getApplyCouponUrl: function (couponCode, quoteId) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quoteId\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/' + quoteId + '/coupons/' + encodeURIComponent(couponCode),\r\n                        'customer': '/carts/mine/coupons/' + encodeURIComponent(couponCode)\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {String} quoteId\r\n             * @return {*}\r\n             */\r\n            getCancelCouponUrl: function (quoteId) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quoteId\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/' + quoteId + '/coupons/',\r\n                        'customer': '/carts/mine/coupons/'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForCartTotals: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            quoteId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/:quoteId/totals',\r\n                        'customer': '/carts/mine/totals'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * @param {Object} quote\r\n             * @return {*}\r\n             */\r\n            getUrlForSetShippingInformation: function (quote) {\r\n                var params = this.getCheckoutMethod() == 'guest' ? //eslint-disable-line eqeqeq\r\n                        {\r\n                            cartId: quote.getQuoteId()\r\n                        } : {},\r\n                    urls = {\r\n                        'guest': '/guest-carts/:cartId/shipping-information',\r\n                        'customer': '/carts/mine/shipping-information'\r\n                    };\r\n\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /**\r\n             * Get url for service.\r\n             *\r\n             * @param {*} urls\r\n             * @param {*} urlParams\r\n             * @return {String|*}\r\n             */\r\n            getUrl: function (urls, urlParams) {\r\n                var url;\r\n\r\n                if (utils.isEmpty(urls)) {\r\n                    return 'Provided service call does not exist.';\r\n                }\r\n\r\n                if (!utils.isEmpty(urls['default'])) {\r\n                    url = urls['default'];\r\n                } else {\r\n                    url = urls[this.getCheckoutMethod()];\r\n                }\r\n\r\n                return urlBuilder.createUrl(url, urlParams);\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getCheckoutMethod: function () {\r\n                return customer.isLoggedIn() ? 'customer' : 'guest';\r\n            }\r\n        };\r\n    }\r\n);\r\n","Magento_Checkout/js/model/shipping-rate-registry.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    var cache = [];\r\n\r\n    return {\r\n        /**\r\n         * @param {String} addressKey\r\n         * @return {*}\r\n         */\r\n        get: function (addressKey) {\r\n            if (cache[addressKey]) {\r\n                return cache[addressKey];\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @param {String} addressKey\r\n         * @param {*} data\r\n         */\r\n        set: function (addressKey, data) {\r\n            cache[addressKey] = data;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rate-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/shipping-rate-processor/new-address',\r\n    'Magento_Checkout/js/model/shipping-rate-processor/customer-address'\r\n], function (quote, defaultProcessor, customerAddressProcessor) {\r\n    'use strict';\r\n\r\n    var processors = {};\r\n\r\n    processors.default =  defaultProcessor;\r\n    processors['customer-address'] = customerAddressProcessor;\r\n\r\n    quote.shippingAddress.subscribe(function () {\r\n        var type = quote.shippingAddress().getType();\r\n\r\n        if (processors[type]) {\r\n            processors[type].getRates(quote.shippingAddress());\r\n        } else {\r\n            processors.default.getRates(quote.shippingAddress());\r\n        }\r\n    });\r\n\r\n    return {\r\n        /**\r\n         * @param {String} type\r\n         * @param {*} processor\r\n         */\r\n        registerProcessor: function (type, processor) {\r\n            processors[type] = processor;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rates-validation-rules.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine(['jquery'], function ($) {\r\n    'use strict';\r\n\r\n    var ratesRules = {},\r\n        checkoutConfig = window.checkoutConfig;\r\n\r\n    return {\r\n        /**\r\n         * @param {String} carrier\r\n         * @param {Object} rules\r\n         */\r\n        registerRules: function (carrier, rules) {\r\n            if (checkoutConfig.activeCarriers.indexOf(carrier) !== -1) {\r\n                ratesRules[carrier] = rules.getRules();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return ratesRules;\r\n        },\r\n\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        getObservableFields: function () {\r\n            var self = this,\r\n                observableFields = [];\r\n\r\n            $.each(self.getRules(), function (carrier, fields) {\r\n                $.each(fields, function (field) {\r\n                    if (observableFields.indexOf(field) === -1) {\r\n                        observableFields.push(field);\r\n                    }\r\n                });\r\n            });\r\n\r\n            return observableFields;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rates-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    './shipping-rates-validation-rules',\r\n    '../model/address-converter',\r\n    '../action/select-shipping-address',\r\n    './postcode-validator',\r\n    './default-validator',\r\n    'mage/translate',\r\n    'uiRegistry',\r\n    'Magento_Checkout/js/model/shipping-address/form-popup-state',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (\r\n    $,\r\n    ko,\r\n    shippingRatesValidationRules,\r\n    addressConverter,\r\n    selectShippingAddress,\r\n    postcodeValidator,\r\n    defaultValidator,\r\n    $t,\r\n    uiRegistry,\r\n    formPopUpState\r\n) {\r\n    'use strict';\r\n\r\n    var checkoutConfig = window.checkoutConfig,\r\n        validators = [],\r\n        observedElements = [],\r\n        postcodeElements = [],\r\n        postcodeElementName = 'postcode';\r\n\r\n    validators.push(defaultValidator);\r\n\r\n    return {\r\n        validateAddressTimeout: 0,\r\n        validateZipCodeTimeout: 0,\r\n        validateDelay: 2000,\r\n\r\n        /**\r\n         * @param {String} carrier\r\n         * @param {Object} validator\r\n         */\r\n        registerValidator: function (carrier, validator) {\r\n            if (checkoutConfig.activeCarriers.indexOf(carrier) !== -1) {\r\n                validators.push(validator);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validateAddressData: function (address) {\r\n            return validators.some(function (validator) {\r\n                return validator.validate(address);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Perform postponed binding for fieldset elements\r\n         *\r\n         * @param {String} formPath\r\n         */\r\n        initFields: function (formPath) {\r\n            var self = this,\r\n                elements = shippingRatesValidationRules.getObservableFields();\r\n\r\n            if ($.inArray(postcodeElementName, elements) === -1) {\r\n                // Add postcode field to observables if not exist for zip code validation support\r\n                elements.push(postcodeElementName);\r\n            }\r\n\r\n            $.each(elements, function (index, field) {\r\n                uiRegistry.async(formPath + '.' + field)(self.doElementBinding.bind(self));\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Bind shipping rates request to form element\r\n         *\r\n         * @param {Object} element\r\n         * @param {Boolean} force\r\n         * @param {Number} delay\r\n         */\r\n        doElementBinding: function (element, force, delay) {\r\n            var observableFields = shippingRatesValidationRules.getObservableFields();\r\n\r\n            if (element && (observableFields.indexOf(element.index) !== -1 || force)) {\r\n                if (element.index !== postcodeElementName) {\r\n                    this.bindHandler(element, delay);\r\n                }\r\n            }\r\n\r\n            if (element.index === postcodeElementName) {\r\n                this.bindHandler(element, delay);\r\n                postcodeElements.push(element);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} elements\r\n         * @param {Boolean} force\r\n         * @param {Number} delay\r\n         */\r\n        bindChangeHandlers: function (elements, force, delay) {\r\n            var self = this;\r\n\r\n            $.each(elements, function (index, elem) {\r\n                self.doElementBinding(elem, force, delay);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {Object} element\r\n         * @param {Number} delay\r\n         */\r\n        bindHandler: function (element, delay) {\r\n            var self = this;\r\n\r\n            delay = typeof delay === 'undefined' ? self.validateDelay : delay;\r\n\r\n            if (element.component.indexOf('/group') !== -1) {\r\n                $.each(element.elems(), function (index, elem) {\r\n                    self.bindHandler(elem);\r\n                });\r\n            } else {\r\n                element.on('value', function () {\r\n                    clearTimeout(self.validateZipCodeTimeout);\r\n                    self.validateZipCodeTimeout = setTimeout(function () {\r\n                        if (element.index === postcodeElementName) {\r\n                            self.postcodeValidation(element);\r\n                        } else {\r\n                            $.each(postcodeElements, function (index, elem) {\r\n                                self.postcodeValidation(elem);\r\n                            });\r\n                        }\r\n                    }, delay);\r\n\r\n                    if (!formPopUpState.isVisible()) {\r\n                        clearTimeout(self.validateAddressTimeout);\r\n                        self.validateAddressTimeout = setTimeout(function () {\r\n                            self.validateFields();\r\n                        }, delay);\r\n                    }\r\n                });\r\n                observedElements.push(element);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        postcodeValidation: function (postcodeElement) {\r\n            var countryId = $('select[name=\"country_id\"]:visible').val(),\r\n                validationResult,\r\n                warnMessage;\r\n\r\n            if (postcodeElement == null || postcodeElement.value() == null) {\r\n                return true;\r\n            }\r\n\r\n            postcodeElement.warn(null);\r\n            validationResult = postcodeValidator.validate(postcodeElement.value(), countryId);\r\n\r\n            if (!validationResult) {\r\n                warnMessage = $t('Provided Zip/Postal Code seems to be invalid.');\r\n\r\n                if (postcodeValidator.validatedPostCodeExample.length) {\r\n                    warnMessage += $t(' Example: ') + postcodeValidator.validatedPostCodeExample.join('; ') + '. ';\r\n                }\r\n                warnMessage += $t('If you believe it is the right one you can ignore this notice.');\r\n                postcodeElement.warn(warnMessage);\r\n            }\r\n\r\n            return validationResult;\r\n        },\r\n\r\n        /**\r\n         * Convert form data to quote address and validate fields for shipping rates\r\n         */\r\n        validateFields: function () {\r\n            var addressFlat = addressConverter.formDataProviderToFlatData(\r\n                this.collectObservedData(),\r\n                'shippingAddress'\r\n                ),\r\n                address;\r\n\r\n            if (this.validateAddressData(addressFlat)) {\r\n                addressFlat = uiRegistry.get('checkoutProvider').shippingAddress;\r\n                address = addressConverter.formAddressDataToQuoteAddress(addressFlat);\r\n                selectShippingAddress(address);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Collect observed fields data to object\r\n         *\r\n         * @returns {*}\r\n         */\r\n        collectObservedData: function () {\r\n            var observedValues = {};\r\n\r\n            $.each(observedElements, function (index, field) {\r\n                observedValues[field.dataScope] = field.value();\r\n            });\r\n\r\n            return observedValues;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-save-processor.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/shipping-save-processor/default'\r\n], function (defaultProcessor) {\r\n    'use strict';\r\n\r\n    var processors = {};\r\n\r\n    processors['default'] =  defaultProcessor;\r\n\r\n    return {\r\n        /**\r\n         * @param {String} type\r\n         * @param {*} processor\r\n         */\r\n        registerProcessor: function (type, processor) {\r\n            processors[type] = processor;\r\n        },\r\n\r\n        /**\r\n         * @param {String} type\r\n         * @return {Array}\r\n         */\r\n        saveShippingInformation: function (type) {\r\n            var rates = [];\r\n\r\n            if (processors[type]) {\r\n                rates = processors[type].saveShippingInformation();\r\n            } else {\r\n                rates = processors['default'].saveShippingInformation();\r\n            }\r\n\r\n            return rates;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/model/checkout-data-resolver'\r\n], function (ko, checkoutDataResolver) {\r\n    'use strict';\r\n\r\n    var shippingRates = ko.observableArray([]);\r\n\r\n    return {\r\n        isLoading: ko.observable(false),\r\n\r\n        /**\r\n         * Set shipping rates\r\n         *\r\n         * @param {*} ratesData\r\n         */\r\n        setShippingRates: function (ratesData) {\r\n            shippingRates(ratesData);\r\n            shippingRates.valueHasMutated();\r\n            checkoutDataResolver.resolveShippingRates(ratesData);\r\n        },\r\n\r\n        /**\r\n         * Get shipping rates\r\n         *\r\n         * @returns {*}\r\n         */\r\n        getShippingRates: function () {\r\n            return shippingRates;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/sidebar.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        popUp: false,\r\n\r\n        /**\r\n         * @param {Object} popUp\r\n         */\r\n        setPopup: function (popUp) {\r\n            this.popUp = popUp;\r\n        },\r\n\r\n        /**\r\n         * Show popup.\r\n         */\r\n        show: function () {\r\n            if (this.popUp) {\r\n                this.popUp.modal('openModal');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Hide popup.\r\n         */\r\n        hide: function () {\r\n            if (this.popUp) {\r\n                this.popUp.modal('closeModal');\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/step-navigator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'ko'\r\n], function ($, ko) {\r\n    'use strict';\r\n\r\n    var steps = ko.observableArray();\r\n\r\n    return {\r\n        steps: steps,\r\n        stepCodes: [],\r\n        validCodes: [],\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        handleHash: function () {\r\n            var hashString = window.location.hash.replace('#', ''),\r\n                isRequestedStepVisible;\r\n\r\n            if (hashString === '') {\r\n                return false;\r\n            }\r\n\r\n            if ($.inArray(hashString, this.validCodes) === -1) {\r\n                window.location.href = window.checkoutConfig.pageNotFoundUrl;\r\n\r\n                return false;\r\n            }\r\n\r\n            isRequestedStepVisible = steps.sort(this.sortItems).some(function (element) {\r\n                return (element.code == hashString || element.alias == hashString) && element.isVisible(); //eslint-disable-line\r\n            });\r\n\r\n            //if requested step is visible, then we don't need to load step data from server\r\n            if (isRequestedStepVisible) {\r\n                return false;\r\n            }\r\n\r\n            steps().sort(this.sortItems).forEach(function (element) {\r\n                if (element.code == hashString || element.alias == hashString) { //eslint-disable-line eqeqeq\r\n                    element.navigate(element);\r\n                } else {\r\n                    element.isVisible(false);\r\n                }\r\n\r\n            });\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @param {String} code\r\n         * @param {*} alias\r\n         * @param {*} title\r\n         * @param {Function} isVisible\r\n         * @param {*} navigate\r\n         * @param {*} sortOrder\r\n         */\r\n        registerStep: function (code, alias, title, isVisible, navigate, sortOrder) {\r\n            var hash, active;\r\n\r\n            if ($.inArray(code, this.validCodes) !== -1) {\r\n                throw new DOMException('Step code [' + code + '] already registered in step navigator');\r\n            }\r\n\r\n            if (alias != null) {\r\n                if ($.inArray(alias, this.validCodes) !== -1) {\r\n                    throw new DOMException('Step code [' + alias + '] already registered in step navigator');\r\n                }\r\n                this.validCodes.push(alias);\r\n            }\r\n            this.validCodes.push(code);\r\n            steps.push({\r\n                code: code,\r\n                alias: alias != null ? alias : code,\r\n                title: title,\r\n                isVisible: isVisible,\r\n                navigate: navigate,\r\n                sortOrder: sortOrder\r\n            });\r\n            active = this.getActiveItemIndex();\r\n            steps.each(function (elem, index) {\r\n                if (active !== index) {\r\n                    elem.isVisible(false);\r\n                }\r\n            });\r\n            this.stepCodes.push(code);\r\n            hash = window.location.hash.replace('#', '');\r\n\r\n            if (hash != '' && hash != code) { //eslint-disable-line eqeqeq\r\n                //Force hiding of not active step\r\n                isVisible(false);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Object} itemOne\r\n         * @param {Object} itemTwo\r\n         * @return {Number}\r\n         */\r\n        sortItems: function (itemOne, itemTwo) {\r\n            return itemOne.sortOrder > itemTwo.sortOrder ? 1 : -1;\r\n        },\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getActiveItemIndex: function () {\r\n            var activeIndex = 0;\r\n\r\n            steps().sort(this.sortItems).some(function (element, index) {\r\n                if (element.isVisible()) {\r\n                    activeIndex = index;\r\n\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n            });\r\n\r\n            return activeIndex;\r\n        },\r\n\r\n        /**\r\n         * @param {*} code\r\n         * @return {Boolean}\r\n         */\r\n        isProcessed: function (code) {\r\n            var activeItemIndex = this.getActiveItemIndex(),\r\n                sortedItems = steps().sort(this.sortItems),\r\n                requestedItemIndex = -1;\r\n\r\n            sortedItems.forEach(function (element, index) {\r\n                if (element.code == code) { //eslint-disable-line eqeqeq\r\n                    requestedItemIndex = index;\r\n                }\r\n            });\r\n\r\n            return activeItemIndex > requestedItemIndex;\r\n        },\r\n\r\n        /**\r\n         * @param {*} code\r\n         * @param {*} scrollToElementId\r\n         */\r\n        navigateTo: function (code, scrollToElementId) {\r\n            var sortedItems = steps().sort(this.sortItems),\r\n                bodyElem = $('body');\r\n\r\n            scrollToElementId = scrollToElementId || null;\r\n\r\n            if (!this.isProcessed(code)) {\r\n                return;\r\n            }\r\n            sortedItems.forEach(function (element) {\r\n                if (element.code == code) { //eslint-disable-line eqeqeq\r\n                    element.isVisible(true);\r\n                    bodyElem.animate({\r\n                        scrollTop: $('#' + code).offset().top\r\n                    }, 0, function () {\r\n                        window.location = window.checkoutConfig.checkoutUrl + '#' + code;\r\n                    });\r\n\r\n                    if (scrollToElementId && $('#' + scrollToElementId).length) {\r\n                        bodyElem.animate({\r\n                            scrollTop: $('#' + scrollToElementId).offset().top\r\n                        }, 0);\r\n                    }\r\n                } else {\r\n                    element.isVisible(false);\r\n                }\r\n\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Sets window location hash.\r\n         *\r\n         * @param {String} hash\r\n         */\r\n        setHash: function (hash) {\r\n            window.location.hash = hash;\r\n        },\r\n\r\n        /**\r\n         * Next step.\r\n         */\r\n        next: function () {\r\n            var activeIndex = 0,\r\n                code;\r\n\r\n            steps().sort(this.sortItems).forEach(function (element, index) {\r\n                if (element.isVisible()) {\r\n                    element.isVisible(false);\r\n                    activeIndex = index;\r\n                }\r\n            });\r\n\r\n            if (steps().length > activeIndex + 1) {\r\n                code = steps()[activeIndex + 1].code;\r\n                steps()[activeIndex + 1].isVisible(true);\r\n                this.setHash(code);\r\n                document.body.scrollTop = document.documentElement.scrollTop = 0;\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Customer/js/customer-data'\r\n], function (ko, quote, customerData) {\r\n    'use strict';\r\n\r\n    var quoteItems = ko.observable(quote.totals().items),\r\n        cartData = customerData.get('cart'),\r\n        quoteSubtotal = parseFloat(quote.totals().subtotal),\r\n        subtotalAmount = parseFloat(cartData().subtotalAmount);\r\n\r\n    quote.totals.subscribe(function (newValue) {\r\n        quoteItems(newValue.items);\r\n    });\r\n\r\n    if (!isNaN(subtotalAmount) && quoteSubtotal !== subtotalAmount) {\r\n        customerData.reload(['cart'], false);\r\n    }\r\n\r\n    return {\r\n        totals: quote.totals,\r\n        isLoading: ko.observable(false),\r\n\r\n        /**\r\n         * @return {Function}\r\n         */\r\n        getItems: function () {\r\n            return quoteItems;\r\n        },\r\n\r\n        /**\r\n         * @param {*} code\r\n         * @return {*}\r\n         */\r\n        getSegment: function (code) {\r\n            var i, total;\r\n\r\n            if (!this.totals()) {\r\n                return null;\r\n            }\r\n\r\n            for (i in this.totals()['total_segments']) { //eslint-disable-line guard-for-in\r\n                total = this.totals()['total_segments'][i];\r\n\r\n                if (total.code == code) { //eslint-disable-line eqeqeq\r\n                    return total;\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/url-builder.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['jquery'], function ($) {\r\n    'use strict';\r\n\r\n    return {\r\n        method: 'rest',\r\n        storeCode: window.checkoutConfig.storeCode,\r\n        version: 'V1',\r\n        serviceUrl: ':method/:storeCode/:version',\r\n\r\n        /**\r\n         * @param {String} url\r\n         * @param {Object} params\r\n         * @return {*}\r\n         */\r\n        createUrl: function (url, params) {\r\n            var completeUrl = this.serviceUrl + url;\r\n\r\n            return this.bindParams(completeUrl, params);\r\n        },\r\n\r\n        /**\r\n         * @param {String} url\r\n         * @param {Object} params\r\n         * @return {*}\r\n         */\r\n        bindParams: function (url, params) {\r\n            var urlParts;\r\n\r\n            params.method = this.method;\r\n            params.storeCode = this.storeCode;\r\n            params.version = this.version;\r\n\r\n            urlParts = url.split('/');\r\n            urlParts = urlParts.filter(Boolean);\r\n\r\n            $.each(urlParts, function (key, part) {\r\n                part = part.replace(':', '');\r\n\r\n                if (params[part] != undefined) { //eslint-disable-line eqeqeq\r\n                    urlParts[key] = params[part];\r\n                }\r\n            });\r\n\r\n            return urlParts.join('/');\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/cart/cache.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Cart adapter for customer data storage.\r\n * It stores cart data in customer data(localStorage) without saving on server.\r\n * Adapter is created for shipping rates and totals data caching. It eliminates unneeded calculations requests.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Customer/js/customer-data',\r\n    'mageUtils'\r\n], function (_, storage, utils) {\r\n    'use strict';\r\n\r\n    var cacheKey = 'cart-data',\r\n        cartData = {\r\n            totals: null,\r\n            address: null,\r\n            cartVersion: null,\r\n            shippingMethodCode: null,\r\n            shippingCarrierCode: null,\r\n            rates: null\r\n        },\r\n\r\n        /**\r\n         * Set data to local storage.\r\n         *\r\n         * @param {Object} checkoutData\r\n         */\r\n        setData = function (checkoutData) {\r\n            storage.set(cacheKey, checkoutData);\r\n        },\r\n\r\n        /**\r\n         * Get data from local storage.\r\n         *\r\n         * @param {String} [key]\r\n         * @returns {*}\r\n         */\r\n        getData = function (key) {\r\n            var data = key ? storage.get(cacheKey)()[key] : storage.get(cacheKey)();\r\n\r\n            if (_.isEmpty(storage.get(cacheKey)())) {\r\n                setData(utils.copy(cartData));\r\n            }\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Build method name base on name, prefix and suffix.\r\n         *\r\n         * @param {String} name\r\n         * @param {String} prefix\r\n         * @param {String} suffix\r\n         * @return {String}\r\n         */\r\n        getMethodName = function (name, prefix, suffix) {\r\n            prefix = prefix || '';\r\n            suffix = suffix || '';\r\n\r\n            return prefix + name.charAt(0).toUpperCase() + name.slice(1) + suffix;\r\n        };\r\n\r\n    /**\r\n     * Provides get/set/isChanged/clear methods for work with cart data.\r\n     * Can be customized via mixin functionality.\r\n     */\r\n    return {\r\n        cartData: cartData,\r\n\r\n        /**\r\n         * Array of required address fields\r\n         */\r\n        requiredFields: ['countryId', 'region', 'regionId', 'postcode'],\r\n\r\n        /**\r\n         * Get data from customer data.\r\n         * Concatenate provided key with method name and call method if it exist or makes get by key.\r\n         *\r\n         * @param {String} key\r\n         * @return {*}\r\n         */\r\n        get: function (key) {\r\n            var methodName = getMethodName(key, '_get');\r\n\r\n            if (key === cacheKey) {\r\n                return getData();\r\n            }\r\n\r\n            if (this[methodName]) {\r\n                return this[methodName]();\r\n            }\r\n\r\n            return getData(key);\r\n        },\r\n\r\n        /**\r\n         * Set data to customer data.\r\n         * Concatenate provided key with method name and call method if it exist or makes set by key.\r\n         * @example _setCustomAddress method will be called, if it exists.\r\n         *  set('address', customAddressValue)\r\n         * @example Will set value by provided key.\r\n         *  set('rates', ratesToCompare)\r\n         *\r\n         * @param {String} key\r\n         * @param {*} value\r\n         */\r\n        set: function (key, value) {\r\n            var methodName = getMethodName(key, '_set'),\r\n                obj;\r\n\r\n            if (key === cacheKey) {\r\n                _.each(value, function (val, k) {\r\n                    this.set(k, val);\r\n                }, this);\r\n\r\n                return;\r\n            }\r\n\r\n            if (this[methodName]) {\r\n                this[methodName](value);\r\n            } else {\r\n                obj = getData();\r\n                obj[key] = value;\r\n                setData(obj);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Clear data in cache.\r\n         * Concatenate provided key with method name and call method if it exist or clear by key.\r\n         * @example _clearCustomAddress method will be called, if it exist.\r\n         *  clear('customAddress')\r\n         * @example Will clear data by provided key.\r\n         *  clear('rates')\r\n         *\r\n         * @param {String} key\r\n         */\r\n        clear: function (key) {\r\n            var methodName = getMethodName(key, '_clear');\r\n\r\n            if (key === cacheKey) {\r\n                setData(this.cartData);\r\n\r\n                return;\r\n            }\r\n\r\n            if (this[methodName]) {\r\n                this[methodName]();\r\n            } else {\r\n                this.set(key, null);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check if provided data has difference with cached data.\r\n         * Concatenate provided key with method name and call method if it exist or makes strict equality.\r\n         * @example Will call existing _isAddressChanged.\r\n         *  isChanged('address', addressToCompare)\r\n         * @example Will get data by provided key and make strict equality with provided value.\r\n         *  isChanged('rates', ratesToCompare)\r\n         *\r\n         * @param {String} key\r\n         * @param {*} value\r\n         * @return {Boolean}\r\n         */\r\n        isChanged: function (key, value) {\r\n            var methodName = getMethodName(key, '_is', 'Changed');\r\n\r\n            if (this[methodName]) {\r\n                return this[methodName](value);\r\n            }\r\n\r\n            return this.get(key) !== value;\r\n        },\r\n\r\n        /**\r\n         * Compare cached address with provided.\r\n         * Custom method for check object equality.\r\n         *\r\n         * @param {Object} address\r\n         * @returns {Boolean}\r\n         */\r\n        _isAddressChanged: function (address) {\r\n            return JSON.stringify(_.pick(this.get('address'), this.requiredFields)) !==\r\n                JSON.stringify(_.pick(address, this.requiredFields));\r\n        },\r\n\r\n        /**\r\n         * Compare cached subtotal with provided.\r\n         * Custom method for check object equality.\r\n         *\r\n         * @param {float} subtotal\r\n         * @returns {Boolean}\r\n         */\r\n        _isSubtotalChanged: function (subtotal) {\r\n            var cached = parseFloat(this.get('totals').subtotal);\r\n\r\n            return subtotal !== cached;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/cart/estimate-service.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/shipping-rate-processor/new-address',\r\n    'Magento_Checkout/js/model/cart/totals-processor/default',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Checkout/js/model/cart/cache',\r\n    'Magento_Customer/js/customer-data'\r\n], function (quote, defaultProcessor, totalsDefaultProvider, shippingService, cartCache, customerData) {\r\n    'use strict';\r\n\r\n    var rateProcessors = {},\r\n        totalsProcessors = {},\r\n\r\n        /**\r\n         * Estimate totals for shipping address and update shipping rates.\r\n         */\r\n        estimateTotalsAndUpdateRates = function () {\r\n            var type = quote.shippingAddress().getType();\r\n\r\n            if (\r\n                quote.isVirtual() ||\r\n                window.checkoutConfig.activeCarriers && window.checkoutConfig.activeCarriers.length === 0\r\n            ) {\r\n                // update totals block when estimated address was set\r\n                totalsProcessors['default'] = totalsDefaultProvider;\r\n                totalsProcessors[type] ?\r\n                    totalsProcessors[type].estimateTotals(quote.shippingAddress()) :\r\n                    totalsProcessors['default'].estimateTotals(quote.shippingAddress());\r\n            } else {\r\n                // check if user data not changed -> load rates from cache\r\n                if (!cartCache.isChanged('address', quote.shippingAddress()) &&\r\n                    !cartCache.isChanged('cartVersion', customerData.get('cart')()['data_id']) &&\r\n                    cartCache.get('rates')\r\n                ) {\r\n                    shippingService.setShippingRates(cartCache.get('rates'));\r\n\r\n                    return;\r\n                }\r\n\r\n                // update rates list when estimated address was set\r\n                rateProcessors['default'] = defaultProcessor;\r\n                rateProcessors[type] ?\r\n                    rateProcessors[type].getRates(quote.shippingAddress()) :\r\n                    rateProcessors['default'].getRates(quote.shippingAddress());\r\n\r\n                // save rates to cache after load\r\n                shippingService.getShippingRates().subscribe(function (rates) {\r\n                    cartCache.set('rates', rates);\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Estimate totals for shipping address.\r\n         */\r\n        estimateTotalsShipping = function () {\r\n            totalsDefaultProvider.estimateTotals(quote.shippingAddress());\r\n        },\r\n\r\n        /**\r\n         * Estimate totals for billing address.\r\n         */\r\n        estimateTotalsBilling = function () {\r\n            var type = quote.billingAddress().getType();\r\n\r\n            if (quote.isVirtual()) {\r\n                // update totals block when estimated address was set\r\n                totalsProcessors['default'] = totalsDefaultProvider;\r\n                totalsProcessors[type] ?\r\n                    totalsProcessors[type].estimateTotals(quote.billingAddress()) :\r\n                    totalsProcessors['default'].estimateTotals(quote.billingAddress());\r\n            }\r\n        };\r\n\r\n    quote.shippingAddress.subscribe(estimateTotalsAndUpdateRates);\r\n    quote.shippingMethod.subscribe(estimateTotalsShipping);\r\n    quote.billingAddress.subscribe(estimateTotalsBilling);\r\n});\r\n","Magento_Checkout/js/model/cart/totals-processor/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/quote',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_Checkout/js/model/cart/cache',\r\n    'Magento_Customer/js/customer-data'\r\n], function (_, resourceUrlManager, quote, storage, totalsService, errorProcessor, cartCache, customerData) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Load data from server.\r\n     *\r\n     * @param {Object} address\r\n     */\r\n    var loadFromServer = function (address) {\r\n        var serviceUrl,\r\n            payload;\r\n\r\n        // Start loader for totals block\r\n        totalsService.isLoading(true);\r\n        serviceUrl = resourceUrlManager.getUrlForTotalsEstimationForNewAddress(quote);\r\n        payload = {\r\n            addressInformation: {\r\n                address: _.pick(address, cartCache.requiredFields)\r\n            }\r\n        };\r\n\r\n        if (quote.shippingMethod() && quote.shippingMethod()['method_code']) {\r\n            payload.addressInformation['shipping_method_code'] = quote.shippingMethod()['method_code'];\r\n            payload.addressInformation['shipping_carrier_code'] = quote.shippingMethod()['carrier_code'];\r\n        }\r\n\r\n        return storage.post(\r\n            serviceUrl, JSON.stringify(payload), false\r\n        ).done(function (result) {\r\n            var data = {\r\n                totals: result,\r\n                address: address,\r\n                cartVersion: customerData.get('cart')()['data_id'],\r\n                shippingMethodCode: null,\r\n                shippingCarrierCode: null\r\n            };\r\n\r\n            if (quote.shippingMethod() && quote.shippingMethod()['method_code']) {\r\n                data.shippingMethodCode = quote.shippingMethod()['method_code'];\r\n                data.shippingCarrierCode = quote.shippingMethod()['carrier_code'];\r\n            }\r\n\r\n            quote.setTotals(result);\r\n            cartCache.set('cart-data', data);\r\n        }).fail(function (response) {\r\n            errorProcessor.process(response);\r\n        }).always(function () {\r\n            // Stop loader for totals block\r\n            totalsService.isLoading(false);\r\n        });\r\n    };\r\n\r\n    return {\r\n        /**\r\n         * Array of required address fields.\r\n         * @property {Array.String} requiredFields\r\n         * @deprecated Use cart cache.\r\n         */\r\n        requiredFields: cartCache.requiredFields,\r\n\r\n        /**\r\n         * Get shipping rates for specified address.\r\n         * @param {Object} address\r\n         */\r\n        estimateTotals: function (address) {\r\n            var data = {\r\n                shippingMethodCode: null,\r\n                shippingCarrierCode: null\r\n            };\r\n\r\n            if (quote.shippingMethod() && quote.shippingMethod()['method_code']) {\r\n                data.shippingMethodCode = quote.shippingMethod()['method_code'];\r\n                data.shippingCarrierCode = quote.shippingMethod()['carrier_code'];\r\n            }\r\n\r\n            return loadFromServer(address);\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment/additional-validators.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    var validators = [];\r\n\r\n    return {\r\n        /**\r\n         * Register unique validator\r\n         *\r\n         * @param {*} validator\r\n         */\r\n        registerValidator: function (validator) {\r\n            validators.push(validator);\r\n        },\r\n\r\n        /**\r\n         * Returns array of registered validators\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        getValidators: function () {\r\n            return validators;\r\n        },\r\n\r\n        /**\r\n         * Process validators\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function (hideError) {\r\n            var validationResult = true;\r\n\r\n            hideError = hideError || false;\r\n\r\n            if (validators.length <= 0) {\r\n                return validationResult;\r\n            }\r\n\r\n            validators.forEach(function (item) {\r\n                if (item.validate(hideError) == false) { //eslint-disable-line eqeqeq\r\n                    validationResult = false;\r\n\r\n                    return false;\r\n                }\r\n            });\r\n\r\n            return validationResult;\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment/method-converter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore'\r\n], function (_) {\r\n    'use strict';\r\n\r\n    return function (methods) {\r\n        _.each(methods, function (method) {\r\n            if (method.hasOwnProperty('code')) {\r\n                method.method = method.code;\r\n                delete method.code;\r\n            }\r\n        });\r\n\r\n        return methods;\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment/method-group.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n        'uiElement',\r\n        'mage/translate'\r\n], function (Element, $t) {\r\n    'use strict';\r\n\r\n    var DEFAULT_GROUP_ALIAS = 'default';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            alias: DEFAULT_GROUP_ALIAS,\r\n            title: $t('Payment Method'),\r\n            sortOrder: 100,\r\n            displayArea: 'payment-methods-items-${ $.alias }'\r\n        },\r\n\r\n        /**\r\n         * Checks if group instance is default\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isDefault: function () {\r\n            return this.alias === DEFAULT_GROUP_ALIAS;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/model/payment/method-list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    return ko.observableArray([]);\r\n});\r\n","Magento_Checkout/js/model/payment/place-order-hooks.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        requestModifiers: [],\r\n        afterRequestListeners: []\r\n    };\r\n});\r\n","Magento_Checkout/js/model/payment/renderer-list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    return ko.observableArray([]);\r\n});\r\n","Magento_Checkout/js/model/shipping-address/form-popup-state.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    return {\r\n        isVisible: ko.observable(false)\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rate-processor/customer-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/quote',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Checkout/js/model/shipping-rate-registry',\r\n    'Magento_Checkout/js/model/error-processor'\r\n], function (resourceUrlManager, quote, storage, shippingService, rateRegistry, errorProcessor) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @param {Object} address\r\n         */\r\n        getRates: function (address) {\r\n            var cache;\r\n\r\n            shippingService.isLoading(true);\r\n            cache = rateRegistry.get(address.getKey());\r\n\r\n            if (cache) {\r\n                shippingService.setShippingRates(cache);\r\n                shippingService.isLoading(false);\r\n            } else {\r\n                storage.post(\r\n                    resourceUrlManager.getUrlForEstimationShippingMethodsByAddressId(),\r\n                    JSON.stringify({\r\n                        addressId: address.customerAddressId\r\n                    }),\r\n                    false\r\n                ).done(function (result) {\r\n                    rateRegistry.set(address.getKey(), result);\r\n                    shippingService.setShippingRates(result);\r\n                }).fail(function (response) {\r\n                    shippingService.setShippingRates([]);\r\n                    errorProcessor.process(response);\r\n                }).always(function () {\r\n                    shippingService.isLoading(false);\r\n                }\r\n                );\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-rate-processor/new-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/quote',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Checkout/js/model/shipping-rate-registry',\r\n    'Magento_Checkout/js/model/error-processor'\r\n], function (resourceUrlManager, quote, storage, shippingService, rateRegistry, errorProcessor) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Get shipping rates for specified address.\r\n         * @param {Object} address\r\n         */\r\n        getRates: function (address) {\r\n            var cache, serviceUrl, payload;\r\n\r\n            shippingService.isLoading(true);\r\n            cache = rateRegistry.get(address.getCacheKey());\r\n            serviceUrl = resourceUrlManager.getUrlForEstimationShippingMethodsForNewAddress(quote);\r\n            payload = JSON.stringify({\r\n                    address: {\r\n                        'street': address.street,\r\n                        'city': address.city,\r\n                        'region_id': address.regionId,\r\n                        'region': address.region,\r\n                        'country_id': address.countryId,\r\n                        'postcode': address.postcode,\r\n                        'email': address.email,\r\n                        'customer_id': address.customerId,\r\n                        'firstname': address.firstname,\r\n                        'lastname': address.lastname,\r\n                        'middlename': address.middlename,\r\n                        'prefix': address.prefix,\r\n                        'suffix': address.suffix,\r\n                        'vat_id': address.vatId,\r\n                        'company': address.company,\r\n                        'telephone': address.telephone,\r\n                        'fax': address.fax,\r\n                        'custom_attributes': address.customAttributes,\r\n                        'save_in_address_book': address.saveInAddressBook\r\n                    }\r\n                }\r\n            );\r\n\r\n            if (cache) {\r\n                shippingService.setShippingRates(cache);\r\n                shippingService.isLoading(false);\r\n            } else {\r\n                storage.post(\r\n                    serviceUrl, payload, false\r\n                ).done(function (result) {\r\n                    rateRegistry.set(address.getCacheKey(), result);\r\n                    shippingService.setShippingRates(result);\r\n                }).fail(function (response) {\r\n                    shippingService.setShippingRates([]);\r\n                    errorProcessor.process(response);\r\n                }).always(function () {\r\n                    shippingService.isLoading(false);\r\n                });\r\n            }\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-save-processor/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/payment-service',\r\n    'Magento_Checkout/js/model/payment/method-converter',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Checkout/js/action/select-billing-address',\r\n    'Magento_Checkout/js/model/shipping-save-processor/payload-extender'\r\n], function (\r\n    ko,\r\n    quote,\r\n    resourceUrlManager,\r\n    storage,\r\n    paymentService,\r\n    methodConverter,\r\n    errorProcessor,\r\n    fullScreenLoader,\r\n    selectBillingAddressAction,\r\n    payloadExtender\r\n) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {jQuery.Deferred}\r\n         */\r\n        saveShippingInformation: function () {\r\n            var payload;\r\n\r\n            if (!quote.billingAddress() && quote.shippingAddress().canUseForBilling()) {\r\n                selectBillingAddressAction(quote.shippingAddress());\r\n            }\r\n\r\n            payload = {\r\n                addressInformation: {\r\n                    'shipping_address': quote.shippingAddress(),\r\n                    'billing_address': quote.billingAddress(),\r\n                    'shipping_method_code': quote.shippingMethod()['method_code'],\r\n                    'shipping_carrier_code': quote.shippingMethod()['carrier_code']\r\n                }\r\n            };\r\n\r\n            payloadExtender(payload);\r\n\r\n            fullScreenLoader.startLoader();\r\n\r\n            return storage.post(\r\n                resourceUrlManager.getUrlForSetShippingInformation(quote),\r\n                JSON.stringify(payload)\r\n            ).done(\r\n                function (response) {\r\n                    quote.setTotals(response.totals);\r\n                    paymentService.setPaymentMethods(methodConverter(response['payment_methods']));\r\n                    fullScreenLoader.stopLoader();\r\n                }\r\n            ).fail(\r\n                function (response) {\r\n                    errorProcessor.process(response);\r\n                    fullScreenLoader.stopLoader();\r\n                }\r\n            );\r\n        }\r\n    };\r\n});\r\n","Magento_Checkout/js/model/shipping-save-processor/payload-extender.js":"define([], function () {\r\n    'use strict';\r\n\r\n    return function (payload) {\r\n        payload.addressInformation['extension_attributes'] = {};\r\n\r\n        return payload;\r\n    };\r\n});\r\n","Magento_Checkout/js/view/authentication-messages.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/view/messages',\r\n    'Magento_Checkout/js/model/authentication-messages'\r\n], function (Component, messageContainer) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function (config) {\r\n            return this._super(config, messageContainer);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/authentication.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/form/form',\r\n    'Magento_Customer/js/action/login',\r\n    'Magento_Customer/js/model/customer',\r\n    'mage/validation',\r\n    'Magento_Checkout/js/model/authentication-messages',\r\n    'Magento_Checkout/js/model/full-screen-loader'\r\n], function ($, Component, loginAction, customer, validation, messageContainer, fullScreenLoader) {\r\n    'use strict';\r\n\r\n    var checkoutConfig = window.checkoutConfig;\r\n\r\n    return Component.extend({\r\n        isGuestCheckoutAllowed: checkoutConfig.isGuestCheckoutAllowed,\r\n        isCustomerLoginRequired: checkoutConfig.isCustomerLoginRequired,\r\n        registerUrl: checkoutConfig.registerUrl,\r\n        forgotPasswordUrl: checkoutConfig.forgotPasswordUrl,\r\n        autocomplete: checkoutConfig.autocomplete,\r\n        defaults: {\r\n            template: 'Magento_Checkout/authentication'\r\n        },\r\n\r\n        /**\r\n         * Is login form enabled for current customer.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        isActive: function () {\r\n            return !customer.isLoggedIn();\r\n        },\r\n\r\n        /**\r\n         * Provide login action.\r\n         *\r\n         * @param {HTMLElement} loginForm\r\n         */\r\n        login: function (loginForm) {\r\n            var loginData = {},\r\n                formDataArray = $(loginForm).serializeArray();\r\n\r\n            formDataArray.forEach(function (entry) {\r\n                loginData[entry.name] = entry.value;\r\n            });\r\n\r\n            if ($(loginForm).validation() &&\r\n                $(loginForm).validation('isValid')\r\n            ) {\r\n                fullScreenLoader.startLoader();\r\n                loginAction(loginData, checkoutConfig.checkoutUrl, undefined, messageContainer).always(function () {\r\n                    fullScreenLoader.stopLoader();\r\n                });\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/billing-address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'Magento_Ui/js/form/form',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Customer/js/model/address-list',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/create-billing-address',\r\n    'Magento_Checkout/js/action/select-billing-address',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Checkout/js/action/set-billing-address',\r\n    'Magento_Ui/js/model/messageList',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/billing-address-postcode-validator',\r\n    'Magento_Checkout/js/model/address-converter'\r\n],\r\nfunction (\r\n    ko,\r\n    _,\r\n    Component,\r\n    customer,\r\n    addressList,\r\n    quote,\r\n    createBillingAddress,\r\n    selectBillingAddress,\r\n    checkoutData,\r\n    checkoutDataResolver,\r\n    customerData,\r\n    setBillingAddressAction,\r\n    globalMessageList,\r\n    $t,\r\n    billingAddressPostcodeValidator,\r\n    addressConverter\r\n) {\r\n    'use strict';\r\n\r\n    var lastSelectedBillingAddress = null,\r\n        addressUpadated = false,\r\n        addressEdited = false,\r\n        countryData = customerData.get('directory-data'),\r\n        addressOptions = addressList().filter(function (address) {\r\n            return address.getType() === 'customer-address';\r\n        });\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/billing-address',\r\n            actionsTemplate: 'Magento_Checkout/billing-address/actions',\r\n            formTemplate: 'Magento_Checkout/billing-address/form',\r\n            detailsTemplate: 'Magento_Checkout/billing-address/details',\r\n            links: {\r\n                isAddressFormVisible: '${$.billingAddressListProvider}:isNewAddressSelected'\r\n            }\r\n        },\r\n        currentBillingAddress: quote.billingAddress,\r\n        customerHasAddresses: addressOptions.length > 0,\r\n\r\n        /**\r\n         * Init component\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            quote.paymentMethod.subscribe(function () {\r\n                checkoutDataResolver.resolveBillingAddress();\r\n            }, this);\r\n            billingAddressPostcodeValidator.initFields(this.get('name') + '.form-fields');\r\n        },\r\n\r\n        /**\r\n         * @return {exports.initObservable}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe({\r\n                    selectedAddress: null,\r\n                    isAddressDetailsVisible: quote.billingAddress() != null,\r\n                    isAddressFormVisible: !customer.isLoggedIn() || !addressOptions.length,\r\n                    isAddressSameAsShipping: false,\r\n                    saveInAddressBook: 1\r\n                });\r\n\r\n            quote.billingAddress.subscribe(function (newAddress) {\r\n                if (quote.isVirtual()) {\r\n                    this.isAddressSameAsShipping(false);\r\n                } else {\r\n                    this.isAddressSameAsShipping(\r\n                        newAddress != null &&\r\n                        newAddress.getCacheKey() == quote.shippingAddress().getCacheKey() //eslint-disable-line eqeqeq\r\n                    );\r\n                }\r\n\r\n                if (newAddress != null && newAddress.saveInAddressBook !== undefined) {\r\n                    this.saveInAddressBook(newAddress.saveInAddressBook);\r\n                } else {\r\n                    this.saveInAddressBook(1);\r\n                }\r\n                this.isAddressDetailsVisible(true);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        canUseShippingAddress: ko.computed(function () {\r\n            return !quote.isVirtual() && quote.shippingAddress() && quote.shippingAddress().canUseForBilling();\r\n        }),\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {*}\r\n         */\r\n        addressOptionsText: function (address) {\r\n            return address.getAddressInline();\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        useShippingAddress: function () {\r\n            if (this.isAddressSameAsShipping()) {\r\n                selectBillingAddress(quote.shippingAddress());\r\n\r\n                this.updateAddresses();\r\n                this.isAddressDetailsVisible(true);\r\n            } else {\r\n                lastSelectedBillingAddress = quote.billingAddress();\r\n                quote.billingAddress(null);\r\n                this.isAddressDetailsVisible(false);\r\n            }\r\n            checkoutData.setSelectedBillingAddress(null);\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Update address action\r\n         */\r\n        updateAddress: function () {\r\n            var addressData, newBillingAddress;\r\n\r\n            addressUpadated = true;\r\n\r\n            if (this.selectedAddress() && !this.isAddressFormVisible()) {\r\n                selectBillingAddress(this.selectedAddress());\r\n                checkoutData.setSelectedBillingAddress(this.selectedAddress().getKey());\r\n            } else {\r\n                this.source.set('params.invalid', false);\r\n                this.source.trigger(this.dataScopePrefix + '.data.validate');\r\n\r\n                if (this.source.get(this.dataScopePrefix + '.custom_attributes')) {\r\n                    this.source.trigger(this.dataScopePrefix + '.custom_attributes.data.validate');\r\n                }\r\n\r\n                if (!this.source.get('params.invalid')) {\r\n                    addressData = this.source.get(this.dataScopePrefix);\r\n\r\n                    if (customer.isLoggedIn() && !this.customerHasAddresses) { //eslint-disable-line max-depth\r\n                        this.saveInAddressBook(1);\r\n                    }\r\n                    addressData['save_in_address_book'] = this.saveInAddressBook() ? 1 : 0;\r\n                    newBillingAddress = createBillingAddress(addressData);\r\n                    // New address must be selected as a billing address\r\n                    selectBillingAddress(newBillingAddress);\r\n                    checkoutData.setSelectedBillingAddress(newBillingAddress.getKey());\r\n                    checkoutData.setNewCustomerBillingAddress(addressData);\r\n                }\r\n            }\r\n            setBillingAddressAction(globalMessageList);\r\n            this.updateAddresses();\r\n        },\r\n\r\n        /**\r\n         * Edit address action\r\n         */\r\n        editAddress: function () {\r\n            addressUpadated = false;\r\n            addressEdited = true;\r\n            lastSelectedBillingAddress = quote.billingAddress();\r\n            quote.billingAddress(null);\r\n            this.isAddressDetailsVisible(false);\r\n        },\r\n\r\n        /**\r\n         * Cancel address edit action\r\n         */\r\n        cancelAddressEdit: function () {\r\n            addressUpadated = true;\r\n            this.restoreBillingAddress();\r\n\r\n            if (quote.billingAddress()) {\r\n                // restore 'Same As Shipping' checkbox state\r\n                this.isAddressSameAsShipping(\r\n                    quote.billingAddress() != null &&\r\n                        quote.billingAddress().getCacheKey() == quote.shippingAddress().getCacheKey() && //eslint-disable-line\r\n                        !quote.isVirtual()\r\n                );\r\n                this.isAddressDetailsVisible(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Manage cancel button visibility\r\n         */\r\n        canUseCancelBillingAddress: ko.computed(function () {\r\n            return quote.billingAddress() || lastSelectedBillingAddress;\r\n        }),\r\n\r\n        /**\r\n         * Check if Billing Address Changes should be canceled\r\n         */\r\n        needCancelBillingAddressChanges: function () {\r\n            if (addressEdited && !addressUpadated) {\r\n                this.cancelAddressEdit();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Restore billing address\r\n         */\r\n        restoreBillingAddress: function () {\r\n            var lastBillingAddress;\r\n\r\n            if (lastSelectedBillingAddress != null) {\r\n                selectBillingAddress(lastSelectedBillingAddress);\r\n                lastBillingAddress = addressConverter.quoteAddressToFormAddressData(lastSelectedBillingAddress);\r\n\r\n                checkoutData.setNewCustomerBillingAddress(lastBillingAddress);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Number} countryId\r\n         * @return {*}\r\n         */\r\n        getCountryName: function (countryId) {\r\n            return countryData()[countryId] != undefined ? countryData()[countryId].name : ''; //eslint-disable-line\r\n        },\r\n\r\n        /**\r\n         * Trigger action to update shipping and billing addresses\r\n         */\r\n        updateAddresses: function () {\r\n            if (window.checkoutConfig.reloadOnBillingAddress ||\r\n                !window.checkoutConfig.displayBillingOnPaymentMethod\r\n            ) {\r\n                setBillingAddressAction(globalMessageList);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get code\r\n         * @param {Object} parent\r\n         * @returns {String}\r\n         */\r\n        getCode: function (parent) {\r\n            return _.isFunction(parent.getCode) ? parent.getCode() : 'shared';\r\n        },\r\n\r\n        /**\r\n         * Get customer attribute label\r\n         *\r\n         * @param {*} attribute\r\n         * @returns {*}\r\n         */\r\n        getCustomAttributeLabel: function (attribute) {\r\n            var label;\r\n\r\n            if (typeof attribute === 'string') {\r\n                return attribute;\r\n            }\r\n\r\n            if (attribute.label) {\r\n                return attribute.label;\r\n            }\r\n\r\n            if (_.isArray(attribute.value)) {\r\n                label = _.map(attribute.value, function (value) {\r\n                    return this.getCustomAttributeOptionLabel(attribute['attribute_code'], value) || value;\r\n                }, this).join(', ');\r\n            } else if (typeof attribute.value === 'object') {\r\n                label = _.map(Object.values(attribute.value)).join(', ');\r\n            } else {\r\n                label = this.getCustomAttributeOptionLabel(attribute['attribute_code'], attribute.value);\r\n            }\r\n\r\n            return label || attribute.value;\r\n        },\r\n\r\n        /**\r\n         * Get option label for given attribute code and option ID\r\n         *\r\n         * @param {String} attributeCode\r\n         * @param {String} value\r\n         * @returns {String|null}\r\n         */\r\n        getCustomAttributeOptionLabel: function (attributeCode, value) {\r\n            var option,\r\n                label,\r\n                options = this.source.get('customAttributes') || {};\r\n\r\n            if (options[attributeCode]) {\r\n                option = _.findWhere(options[attributeCode], {\r\n                    value: value\r\n                });\r\n\r\n                if (option) {\r\n                    label = option.label;\r\n                }\r\n            } else if (value.file !== null) {\r\n                label = value.file;\r\n            }\r\n\r\n            return label;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/cart-item-renderer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * Prepare the product name value to be rendered as HTML\r\n         *\r\n         * @param {String} productName\r\n         * @return {String}\r\n         */\r\n        getProductNameUnsanitizedHtml: function (productName) {\r\n            // product name has already escaped on backend\r\n            return productName;\r\n        },\r\n\r\n        /**\r\n         * Prepare the given option value to be rendered as HTML\r\n         *\r\n         * @param {String} optionValue\r\n         * @return {String}\r\n         */\r\n        getOptionValueUnsanitizedHtml: function (optionValue) {\r\n            // option value has already escaped on backend\r\n            return optionValue;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/estimation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Catalog/js/price-utils',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/sidebar'\r\n], function (Component, quote, priceUtils, totals, sidebarModel) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        isLoading: totals.isLoading,\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getQuantity: function () {\r\n            if (totals.totals()) {\r\n                return parseFloat(totals.totals()['items_qty']);\r\n            }\r\n\r\n            return 0;\r\n        },\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getPureValue: function () {\r\n            if (totals.totals()) {\r\n                return parseFloat(totals.getSegment('grand_total').value);\r\n            }\r\n\r\n            return 0;\r\n        },\r\n\r\n        /**\r\n         * Show sidebar.\r\n         */\r\n        showSidebar: function () {\r\n            sidebarModel.show();\r\n        },\r\n\r\n        /**\r\n         * @param {*} price\r\n         * @return {*|String}\r\n         */\r\n        getFormattedPrice: function (price) {\r\n            return priceUtils.formatPrice(price, quote.getPriceFormat());\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            return this.getFormattedPrice(this.getPureValue());\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/minicart.js":"/**\n * Copyright \u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'uiComponent',\n    'Magento_Customer/js/customer-data',\n    'jquery',\n    'ko',\n    'underscore',\n    'sidebar'\n], function (Component, customerData, $, ko, _) {\n    'use strict';\n\n    var sidebarInitialized = false,\n        addToCartCalls = 0,\n        miniCart;\n\n    miniCart = $('[data-block=\\'minicart\\']');\n    miniCart.on('dropdowndialogopen', function () {\n        initSidebar();\n    });\n\n    /**\n     * @return {Boolean}\n     */\n    function initSidebar() {\n        if (miniCart.data('mageSidebar')) {\n            miniCart.sidebar('update');\n        }\n\n        if (!$('[data-role=product-item]').length) {\n            return false;\n        }\n        miniCart.trigger('contentUpdated');\n\n        if (sidebarInitialized) {\n            return false;\n        }\n        sidebarInitialized = true;\n        miniCart.sidebar({\n            'targetElement': 'div.block.block-minicart',\n            'url': {\n                'checkout': window.checkout.checkoutUrl,\n                'update': window.checkout.updateItemQtyUrl,\n                'remove': window.checkout.removeItemUrl,\n                'loginUrl': window.checkout.customerLoginUrl,\n                'isRedirectRequired': window.checkout.isRedirectRequired\n            },\n            'button': {\n                'checkout': '#top-cart-btn-checkout',\n                'remove': '#mini-cart a.action.delete',\n                'close': '#btn-minicart-close'\n            },\n            'showcart': {\n                'parent': 'span.counter',\n                'qty': 'span.counter-number',\n                'label': 'span.counter-label'\n            },\n            'minicart': {\n                'list': '#mini-cart',\n                'content': '#minicart-content-wrapper',\n                'qty': 'div.items-total',\n                'subtotal': 'div.subtotal span.price',\n                'maxItemsVisible': window.checkout.minicartMaxItemsVisible\n            },\n            'item': {\n                'qty': ':input.cart-item-qty',\n                'button': ':button.update-cart-item'\n            },\n            'confirmMessage': $.mage.__(\n                'Are you sure you would like to remove this item from the shopping cart?'\n            )\n        });\n    }\n\n    return Component.extend({\n        shoppingCartUrl: window.checkout.shoppingCartUrl,\n        cart: {},\n\n        /**\n         * @override\n         */\n        initialize: function () {\n            var self = this,\n                cartData = customerData.get('cart');\n\n            this.update(cartData());\n            cartData.subscribe(function (updatedCart) {\n                addToCartCalls--;\n                this.isLoading(addToCartCalls > 0);\n                sidebarInitialized = false;\n                this.update(updatedCart);\n                initSidebar();\n            }, this);\n            $('[data-block=\"minicart\"]').on('contentLoading', function (event) {\n                addToCartCalls++;\n                self.isLoading(true);\n            });\n\n            return this._super();\n        },\n        isLoading: ko.observable(false),\n        initSidebar: initSidebar,\n\n        /**\n         * @return {Boolean}\n         */\n        closeSidebar: function () {\n            var minicart = $('[data-block=\"minicart\"]');\n            minicart.on('click', '[data-action=\"close\"]', function (event) {\n                event.stopPropagation();\n                minicart.find('[data-role=\"dropdownDialog\"]').dropdownDialog('close');\n            });\n\n            return true;\n        },\n\n        /**\n         * @param {String} productType\n         * @return {*|String}\n         */\n        getItemRenderer: function (productType) {\n            return this.itemRenderer[productType] || 'defaultRenderer';\n        },\n\n        /**\n         * Update mini shopping cart content.\n         *\n         * @param {Object} updatedCart\n         * @returns void\n         */\n        update: function (updatedCart) {\n            _.each(updatedCart, function (value, key) {\n                if (!this.cart.hasOwnProperty(key)) {\n                    this.cart[key] = ko.observable();\n                }\n                this.cart[key](value);\n            }, this);\n        },\n\n        /**\n         * Get cart param by name.\n         * @param {String} name\n         * @returns {*}\n         */\n        getCartParam: function (name) {\n            if (!_.isUndefined(name)) {\n                if (!this.cart.hasOwnProperty(name)) {\n                    this.cart[name] = ko.observable();\n                }\n            }\n\n            return this.cart[name]();\n        }\n    });\n});\n","Magento_Checkout/js/view/payment.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent',\r\n    'ko',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/model/payment-service',\r\n    'Magento_Checkout/js/model/payment/method-converter',\r\n    'Magento_Checkout/js/action/get-payment-information',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'mage/translate'\r\n], function (\r\n    $,\r\n    _,\r\n    Component,\r\n    ko,\r\n    quote,\r\n    stepNavigator,\r\n    paymentService,\r\n    methodConverter,\r\n    getPaymentInformation,\r\n    checkoutDataResolver,\r\n    $t\r\n) {\r\n    'use strict';\r\n\r\n    /** Set payment methods to collection */\r\n    paymentService.setPaymentMethods(methodConverter(window.checkoutConfig.paymentMethods));\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/payment',\r\n            activeMethod: ''\r\n        },\r\n        isVisible: ko.observable(quote.isVirtual()),\r\n        quoteIsVirtual: quote.isVirtual(),\r\n        isPaymentMethodsAvailable: ko.computed(function () {\r\n            return paymentService.getAvailablePaymentMethods().length > 0;\r\n        }),\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n            checkoutDataResolver.resolvePaymentMethod();\r\n            stepNavigator.registerStep(\r\n                'payment',\r\n                null,\r\n                $t('Review & Payments'),\r\n                this.isVisible,\r\n                _.bind(this.navigate, this),\r\n                this.sortOrder\r\n            );\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Navigate method.\r\n         */\r\n        navigate: function () {\r\n            var self = this;\r\n\r\n            if (!self.hasShippingMethod()) {\r\n                this.isVisible(false);\r\n                stepNavigator.setHash('shipping');\r\n            } else {\r\n                getPaymentInformation().done(function () {\r\n                    self.isVisible(true);\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        hasShippingMethod: function () {\r\n            return window.checkoutConfig.selectedShippingMethod !== null;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getFormKey: function () {\r\n            return window.checkoutConfig.formKey;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/progress-bar.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'ko',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/view/billing-address'\r\n], function ($, _, ko, Component, stepNavigator, billingAddress) {\r\n    'use strict';\r\n\r\n    var steps = stepNavigator.steps;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/progress-bar',\r\n            visible: true\r\n        },\r\n        steps: steps,\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var stepsValue;\r\n\r\n            this._super();\r\n            window.addEventListener('hashchange', _.bind(stepNavigator.handleHash, stepNavigator));\r\n\r\n            if (!window.location.hash) {\r\n                stepsValue = stepNavigator.steps();\r\n\r\n                if (stepsValue.length) {\r\n                    stepNavigator.setHash(stepsValue.sort(stepNavigator.sortItems)[0].code);\r\n                }\r\n            }\r\n\r\n            stepNavigator.handleHash();\r\n        },\r\n\r\n        /**\r\n         * @param {*} itemOne\r\n         * @param {*} itemTwo\r\n         * @return {*|Number}\r\n         */\r\n        sortItems: function (itemOne, itemTwo) {\r\n            return stepNavigator.sortItems(itemOne, itemTwo);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} step\r\n         */\r\n        navigateTo: function (step) {\r\n            if (step.code === 'shipping') {\r\n                billingAddress().needCancelBillingAddressChanges();\r\n            }\r\n            stepNavigator.navigateTo(step.code);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {*|Boolean}\r\n         */\r\n        isProcessed: function (item) {\r\n            return stepNavigator.isProcessed(item.code);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/registration.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Ui/js/model/messageList'\r\n], function ($, Component, messageList) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/registration',\r\n            accountCreated: false,\r\n            creationStarted: false,\r\n            isFormVisible: true\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('accountCreated')\r\n                .observe('isFormVisible')\r\n                .observe('creationStarted');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getEmailAddress: function () {\r\n            return this.email;\r\n        },\r\n\r\n        /**\r\n         * @return String\r\n         */\r\n        getUrl: function () {\r\n            return this.registrationUrl;\r\n        },\r\n\r\n        /**\r\n         * Create new user account.\r\n         *\r\n         * @deprecated\r\n         */\r\n        createAccount: function () {\r\n            this.creationStarted(true);\r\n            $.post(\r\n                this.registrationUrl\r\n            ).done(\r\n                function (response) {\r\n\r\n                    if (response.errors == false) { //eslint-disable-line eqeqeq\r\n                        this.accountCreated(true);\r\n                    } else {\r\n                        messageList.addErrorMessage(response);\r\n                    }\r\n                    this.isFormVisible(false);\r\n                }.bind(this)\r\n            ).fail(\r\n                function (response) {\r\n                    this.accountCreated(false);\r\n                    this.isFormVisible(false);\r\n                    messageList.addErrorMessage(response);\r\n                }.bind(this)\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-information.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/model/sidebar'\r\n], function ($, Component, quote, stepNavigator, sidebarModel) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-information'\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isVisible: function () {\r\n            return !quote.isVirtual() && stepNavigator.isProcessed('shipping');\r\n        },\r\n\r\n        /**\r\n         * @return {String}\r\n         */\r\n        getShippingMethodTitle: function () {\r\n            var shippingMethod = quote.shippingMethod(),\r\n                shippingMethodTitle = '';\r\n\r\n            if (!shippingMethod) {\r\n                return '';\r\n            }\r\n\r\n            shippingMethodTitle = shippingMethod['carrier_title'];\r\n\r\n            if (typeof shippingMethod['method_title'] !== 'undefined') {\r\n                shippingMethodTitle += ' - ' + shippingMethod['method_title'];\r\n            }\r\n\r\n            return shippingMethodTitle;\r\n        },\r\n\r\n        /**\r\n         * Back step.\r\n         */\r\n        back: function () {\r\n            sidebarModel.hide();\r\n            stepNavigator.navigateTo('shipping');\r\n        },\r\n\r\n        /**\r\n         * Back to shipping method.\r\n         */\r\n        backToShippingMethod: function () {\r\n            sidebarModel.hide();\r\n            stepNavigator.navigateTo('shipping', 'opc-shipping_method');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Ui/js/form/form',\r\n    'ko',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Customer/js/model/address-list',\r\n    'Magento_Checkout/js/model/address-converter',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/create-shipping-address',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-address/form-popup-state',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Checkout/js/action/select-shipping-method',\r\n    'Magento_Checkout/js/model/shipping-rate-registry',\r\n    'Magento_Checkout/js/action/set-shipping-information',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Ui/js/modal/modal',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'uiRegistry',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/shipping-rate-service'\r\n], function (\r\n    $,\r\n    _,\r\n    Component,\r\n    ko,\r\n    customer,\r\n    addressList,\r\n    addressConverter,\r\n    quote,\r\n    createShippingAddress,\r\n    selectShippingAddress,\r\n    shippingRatesValidator,\r\n    formPopUpState,\r\n    shippingService,\r\n    selectShippingMethodAction,\r\n    rateRegistry,\r\n    setShippingInformationAction,\r\n    stepNavigator,\r\n    modal,\r\n    checkoutDataResolver,\r\n    checkoutData,\r\n    registry,\r\n    $t\r\n) {\r\n    'use strict';\r\n\r\n    var popUp = null;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping',\r\n            shippingFormTemplate: 'Magento_Checkout/shipping-address/form',\r\n            shippingMethodListTemplate: 'Magento_Checkout/shipping-address/shipping-method-list',\r\n            shippingMethodItemTemplate: 'Magento_Checkout/shipping-address/shipping-method-item',\r\n            imports: {\r\n                countryOptions: '${ $.parentName }.shippingAddress.shipping-address-fieldset.country_id:indexedOptions'\r\n            }\r\n        },\r\n        visible: ko.observable(!quote.isVirtual()),\r\n        errorValidationMessage: ko.observable(false),\r\n        isCustomerLoggedIn: customer.isLoggedIn,\r\n        isFormPopUpVisible: formPopUpState.isVisible,\r\n        isFormInline: addressList().length === 0,\r\n        isNewAddressAdded: ko.observable(false),\r\n        saveInAddressBook: 1,\r\n        quoteIsVirtual: quote.isVirtual(),\r\n\r\n        /**\r\n         * @return {exports}\r\n         */\r\n        initialize: function () {\r\n            var self = this,\r\n                hasNewAddress,\r\n                fieldsetName = 'checkout.steps.shipping-step.shippingAddress.shipping-address-fieldset';\r\n\r\n            this._super();\r\n\r\n            if (!quote.isVirtual()) {\r\n                stepNavigator.registerStep(\r\n                    'shipping',\r\n                    '',\r\n                    $t('Shipping'),\r\n                    this.visible, _.bind(this.navigate, this),\r\n                    this.sortOrder\r\n                );\r\n            }\r\n            checkoutDataResolver.resolveShippingAddress();\r\n\r\n            hasNewAddress = addressList.some(function (address) {\r\n                return address.getType() == 'new-customer-address'; //eslint-disable-line eqeqeq\r\n            });\r\n\r\n            this.isNewAddressAdded(hasNewAddress);\r\n\r\n            this.isFormPopUpVisible.subscribe(function (value) {\r\n                if (value) {\r\n                    self.getPopUp().openModal();\r\n                }\r\n            });\r\n\r\n            quote.shippingMethod.subscribe(function () {\r\n                self.errorValidationMessage(false);\r\n            });\r\n\r\n            registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                var shippingAddressData = checkoutData.getShippingAddressFromData();\r\n\r\n                if (shippingAddressData) {\r\n                    checkoutProvider.set(\r\n                        'shippingAddress',\r\n                        $.extend(true, {}, checkoutProvider.get('shippingAddress'), shippingAddressData)\r\n                    );\r\n                }\r\n                checkoutProvider.on('shippingAddress', function (shippingAddrsData, changes) {\r\n                    var isStreetAddressDeleted, isStreetAddressNotEmpty;\r\n\r\n                    /**\r\n                     * In last modifying operation street address was deleted.\r\n                     * @return {Boolean}\r\n                     */\r\n                    isStreetAddressDeleted = function () {\r\n                        var change;\r\n\r\n                        if (!changes || changes.length === 0) {\r\n                            return false;\r\n                        }\r\n\r\n                        change = changes.pop();\r\n\r\n                        if (_.isUndefined(change.value) || _.isUndefined(change.oldValue)) {\r\n                            return false;\r\n                        }\r\n\r\n                        if (!change.path.startsWith('shippingAddress.street')) {\r\n                            return false;\r\n                        }\r\n\r\n                        return change.value.length === 0 && change.oldValue.length > 0;\r\n                    };\r\n\r\n                    isStreetAddressNotEmpty = shippingAddrsData.street && !_.isEmpty(shippingAddrsData.street[0]);\r\n\r\n                    if (isStreetAddressNotEmpty || isStreetAddressDeleted()) {\r\n                        checkoutData.setShippingAddressFromData(shippingAddrsData);\r\n                    }\r\n                });\r\n                shippingRatesValidator.initFields(fieldsetName);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Navigator change hash handler.\r\n         *\r\n         * @param {Object} step - navigation step\r\n         */\r\n        navigate: function (step) {\r\n            step && step.isVisible(true);\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPopUp: function () {\r\n            var self = this,\r\n                buttons;\r\n\r\n            if (!popUp) {\r\n                buttons = this.popUpForm.options.buttons;\r\n                this.popUpForm.options.buttons = [\r\n                    {\r\n                        text: buttons.save.text ? buttons.save.text : $t('Save Address'),\r\n                        class: buttons.save.class ? buttons.save.class : 'action primary action-save-address',\r\n                        click: self.saveNewAddress.bind(self)\r\n                    },\r\n                    {\r\n                        text: buttons.cancel.text ? buttons.cancel.text : $t('Cancel'),\r\n                        class: buttons.cancel.class ? buttons.cancel.class : 'action secondary action-hide-popup',\r\n\r\n                        /** @inheritdoc */\r\n                        click: this.onClosePopUp.bind(this)\r\n                    }\r\n                ];\r\n\r\n                /** @inheritdoc */\r\n                this.popUpForm.options.closed = function () {\r\n                    self.isFormPopUpVisible(false);\r\n                };\r\n\r\n                this.popUpForm.options.modalCloseBtnHandler = this.onClosePopUp.bind(this);\r\n                this.popUpForm.options.keyEventHandlers = {\r\n                    escapeKey: this.onClosePopUp.bind(this)\r\n                };\r\n\r\n                /** @inheritdoc */\r\n                this.popUpForm.options.opened = function () {\r\n                    // Store temporary address for revert action in case when user click cancel action\r\n                    self.temporaryAddress = $.extend(true, {}, checkoutData.getShippingAddressFromData());\r\n                };\r\n                popUp = modal(this.popUpForm.options, $(this.popUpForm.element));\r\n            }\r\n\r\n            return popUp;\r\n        },\r\n\r\n        /**\r\n         * Revert address and close modal.\r\n         */\r\n        onClosePopUp: function () {\r\n            checkoutData.setShippingAddressFromData($.extend(true, {}, this.temporaryAddress));\r\n            this.getPopUp().closeModal();\r\n        },\r\n\r\n        /**\r\n         * Show address form popup\r\n         */\r\n        showFormPopUp: function () {\r\n            this.isFormPopUpVisible(true);\r\n        },\r\n\r\n        /**\r\n         * Save new shipping address\r\n         */\r\n        saveNewAddress: function () {\r\n            var addressData,\r\n                newShippingAddress;\r\n\r\n            this.source.set('params.invalid', false);\r\n            this.triggerShippingDataValidateEvent();\r\n\r\n            if (!this.source.get('params.invalid')) {\r\n                addressData = this.source.get('shippingAddress');\r\n                // if user clicked the checkbox, its value is true or false. Need to convert.\r\n                addressData['save_in_address_book'] = this.saveInAddressBook ? 1 : 0;\r\n\r\n                // New address must be selected as a shipping address\r\n                newShippingAddress = createShippingAddress(addressData);\r\n                selectShippingAddress(newShippingAddress);\r\n                checkoutData.setSelectedShippingAddress(newShippingAddress.getKey());\r\n                checkoutData.setNewCustomerShippingAddress($.extend(true, {}, addressData));\r\n                this.getPopUp().closeModal();\r\n                this.isNewAddressAdded(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Shipping Method View\r\n         */\r\n        rates: shippingService.getShippingRates(),\r\n        isLoading: shippingService.isLoading,\r\n        isSelected: ko.computed(function () {\r\n            return quote.shippingMethod() ?\r\n                quote.shippingMethod()['carrier_code'] + '_' + quote.shippingMethod()['method_code'] :\r\n                null;\r\n        }),\r\n\r\n        /**\r\n         * @param {Object} shippingMethod\r\n         * @return {Boolean}\r\n         */\r\n        selectShippingMethod: function (shippingMethod) {\r\n            selectShippingMethodAction(shippingMethod);\r\n            checkoutData.setSelectedShippingRate(shippingMethod['carrier_code'] + '_' + shippingMethod['method_code']);\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Set shipping information handler\r\n         */\r\n        setShippingInformation: function () {\r\n            if (this.validateShippingInformation()) {\r\n                quote.billingAddress(null);\r\n                checkoutDataResolver.resolveBillingAddress();\r\n                registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                    var shippingAddressData = checkoutData.getShippingAddressFromData();\r\n\r\n                    if (shippingAddressData) {\r\n                        checkoutProvider.set(\r\n                            'shippingAddress',\r\n                            $.extend(true, {}, checkoutProvider.get('shippingAddress'), shippingAddressData)\r\n                        );\r\n                    }\r\n                });\r\n                setShippingInformationAction().done(\r\n                    function () {\r\n                        stepNavigator.next();\r\n                    }\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        validateShippingInformation: function () {\r\n            var shippingAddress,\r\n                addressData,\r\n                loginFormSelector = 'form[data-role=email-with-possible-login]',\r\n                emailValidationResult = customer.isLoggedIn(),\r\n                field,\r\n                option = _.isObject(this.countryOptions) && this.countryOptions[quote.shippingAddress().countryId],\r\n                messageContainer = registry.get('checkout.errors').messageContainer;\r\n\r\n            if (!quote.shippingMethod()) {\r\n                this.errorValidationMessage(\r\n                    $t('The shipping method is missing. Select the shipping method and try again.')\r\n                );\r\n\r\n                return false;\r\n            }\r\n\r\n            if (!customer.isLoggedIn()) {\r\n                $(loginFormSelector).validation();\r\n                emailValidationResult = Boolean($(loginFormSelector + ' input[name=username]').valid());\r\n            }\r\n\r\n            if (this.isFormInline) {\r\n                this.source.set('params.invalid', false);\r\n                this.triggerShippingDataValidateEvent();\r\n\r\n                if (!quote.shippingMethod()['method_code']) {\r\n                    this.errorValidationMessage(\r\n                        $t('The shipping method is missing. Select the shipping method and try again.')\r\n                    );\r\n                }\r\n\r\n                if (emailValidationResult &&\r\n                    this.source.get('params.invalid') ||\r\n                    !quote.shippingMethod()['method_code'] ||\r\n                    !quote.shippingMethod()['carrier_code']\r\n                ) {\r\n                    this.focusInvalid();\r\n\r\n                    return false;\r\n                }\r\n\r\n                shippingAddress = quote.shippingAddress();\r\n                addressData = addressConverter.formAddressDataToQuoteAddress(\r\n                    this.source.get('shippingAddress')\r\n                );\r\n\r\n                //Copy form data to quote shipping address object\r\n                for (field in addressData) {\r\n                    if (addressData.hasOwnProperty(field) &&  //eslint-disable-line max-depth\r\n                        shippingAddress.hasOwnProperty(field) &&\r\n                        typeof addressData[field] != 'function' &&\r\n                        _.isEqual(shippingAddress[field], addressData[field])\r\n                    ) {\r\n                        shippingAddress[field] = addressData[field];\r\n                    } else if (typeof addressData[field] != 'function' &&\r\n                        !_.isEqual(shippingAddress[field], addressData[field])) {\r\n                        shippingAddress = addressData;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (customer.isLoggedIn()) {\r\n                    shippingAddress['save_in_address_book'] = 1;\r\n                }\r\n                selectShippingAddress(shippingAddress);\r\n            } else if (customer.isLoggedIn() &&\r\n                option &&\r\n                option['is_region_required'] &&\r\n                !quote.shippingAddress().region\r\n            ) {\r\n                messageContainer.addErrorMessage({\r\n                    message: $t('Please specify a regionId in shipping address.')\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            if (!emailValidationResult) {\r\n                $(loginFormSelector + ' input[name=username]').trigger('focus');\r\n\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Trigger Shipping data Validate Event.\r\n         */\r\n        triggerShippingDataValidateEvent: function () {\r\n            this.source.trigger('shippingAddress.data.validate');\r\n\r\n            if (this.source.get('shippingAddress.custom_attributes')) {\r\n                this.source.trigger('shippingAddress.custom_attributes.data.validate');\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/sidebar.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'ko',\r\n    'jquery',\r\n    'Magento_Checkout/js/model/sidebar'\r\n], function (Component, ko, $, sidebarModel) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @param {HTMLElement} element\r\n         */\r\n        setModalElement: function (element) {\r\n            sidebarModel.setPopup($(element));\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/totals'\r\n], function (Component, totals) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        isLoading: totals.isLoading\r\n    });\r\n});\r\n","Magento_Checkout/js/view/billing-address/list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/model/address-list',\r\n    'mage/translate',\r\n    'Magento_Customer/js/model/customer'\r\n], function (Component, addressList, $t, customer) {\r\n    'use strict';\r\n\r\n    var newAddressOption = {\r\n            /**\r\n             * Get new address label\r\n             * @returns {String}\r\n             */\r\n            getAddressInline: function () {\r\n                return $t('New Address');\r\n            },\r\n            customerAddressId: null\r\n        },\r\n        addressOptions = addressList().filter(function (address) {\r\n            return address.getType() === 'customer-address';\r\n        }),\r\n        addressDefaultIndex = addressOptions.findIndex(function (address) {\r\n            return address.isDefaultBilling();\r\n        });\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/billing-address',\r\n            selectedAddress: null,\r\n            isNewAddressSelected: false,\r\n            addressOptions: addressOptions,\r\n            exports: {\r\n                selectedAddress: '${ $.parentName }:selectedAddress'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n            this.addressOptions.push(newAddressOption);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {exports.initObservable}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('selectedAddress isNewAddressSelected')\r\n                .observe({\r\n                    isNewAddressSelected: !customer.isLoggedIn() || !addressOptions.length,\r\n                    selectedAddress: this.addressOptions[addressDefaultIndex]\r\n                });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {*}\r\n         */\r\n        addressOptionsText: function (address) {\r\n            return address.getAddressInline();\r\n        },\r\n\r\n        /**\r\n         * @param {Object} address\r\n         */\r\n        onAddressChange: function (address) {\r\n            this.isNewAddressSelected(address === newAddressOption);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/cart/shipping-estimation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'Magento_Ui/js/form/form',\r\n        'Magento_Checkout/js/action/select-shipping-address',\r\n        'Magento_Checkout/js/model/address-converter',\r\n        'Magento_Checkout/js/model/cart/estimate-service',\r\n        'Magento_Checkout/js/checkout-data',\r\n        'Magento_Checkout/js/model/shipping-rates-validator',\r\n        'uiRegistry',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Checkout/js/model/checkout-data-resolver',\r\n        'Magento_Checkout/js/model/shipping-service',\r\n        'mage/validation'\r\n    ],\r\n    function (\r\n        $,\r\n        Component,\r\n        selectShippingAddress,\r\n        addressConverter,\r\n        estimateService,\r\n        checkoutData,\r\n        shippingRatesValidator,\r\n        registry,\r\n        quote,\r\n        checkoutDataResolver,\r\n        shippingService\r\n    ) {\r\n        'use strict';\r\n\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'Magento_Checkout/cart/shipping-estimation'\r\n            },\r\n            isVirtual: quote.isVirtual(),\r\n\r\n            /**\r\n             * @override\r\n             */\r\n            initialize: function () {\r\n                this._super();\r\n\r\n                // Prevent shipping methods showing none available whilst we resolve\r\n                shippingService.isLoading(true);\r\n\r\n                registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                    var address, estimatedAddress;\r\n\r\n                    shippingService.isLoading(false);\r\n\r\n                    checkoutDataResolver.resolveEstimationAddress();\r\n                    address = quote.isVirtual() ? quote.billingAddress() : quote.shippingAddress();\r\n\r\n                    if (!address && quote.isVirtual()) {\r\n                        address = addressConverter.formAddressDataToQuoteAddress(\r\n                            checkoutData.getSelectedBillingAddress()\r\n                        );\r\n                    }\r\n\r\n                    if (address) {\r\n                        estimatedAddress = address.isEditable() ?\r\n                            addressConverter.quoteAddressToFormAddressData(address) :\r\n                            {\r\n                                // only the following fields must be used by estimation form data provider\r\n                                'country_id': address.countryId,\r\n                                region: address.region,\r\n                                'region_id': address.regionId,\r\n                                postcode: address.postcode\r\n                            };\r\n                        checkoutProvider.set(\r\n                            'shippingAddress',\r\n                            $.extend({}, checkoutProvider.get('shippingAddress'), estimatedAddress)\r\n                        );\r\n                    }\r\n\r\n                    if (!quote.isVirtual()) {\r\n                        checkoutProvider.on('shippingAddress', function (shippingAddressData) {\r\n                            //jscs:disable requireCamelCaseOrUpperCaseIdentifiers\r\n                            if (quote.shippingAddress().countryId !== shippingAddressData.country_id ||\r\n                                (shippingAddressData.postcode || shippingAddressData.region_id)\r\n                            ) {\r\n                                checkoutData.setShippingAddressFromData(shippingAddressData);\r\n                            }\r\n                            //jscs:enable requireCamelCaseOrUpperCaseIdentifiers\r\n                        });\r\n                    } else {\r\n                        checkoutProvider.on('shippingAddress', function (shippingAddressData) {\r\n                            checkoutData.setBillingAddressFromData(shippingAddressData);\r\n                        });\r\n                    }\r\n                });\r\n\r\n                return this;\r\n            },\r\n\r\n            /**\r\n             * @override\r\n             */\r\n            initElement: function (element) {\r\n                this._super();\r\n\r\n                if (element.index === 'address-fieldsets') {\r\n                    shippingRatesValidator.bindChangeHandlers(element.elems(), true, 500);\r\n                    element.elems.subscribe(function (elems) {\r\n                        shippingRatesValidator.doElementBinding(elems[elems.length - 1], true, 500);\r\n                    });\r\n                }\r\n\r\n                return this;\r\n            },\r\n\r\n            /**\r\n             * Returns shipping rates for address\r\n             * @returns void\r\n             */\r\n            getEstimationInfo: function () {\r\n                var addressData = null;\r\n\r\n                this.source.set('params.invalid', false);\r\n                this.source.trigger('shippingAddress.data.validate');\r\n\r\n                if (!this.source.get('params.invalid')) {\r\n                    addressData = this.source.get('shippingAddress');\r\n                    selectShippingAddress(addressConverter.formAddressDataToQuoteAddress(addressData));\r\n                }\r\n            }\r\n        });\r\n    }\r\n);\r\n","Magento_Checkout/js/view/cart/shipping-rates.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'underscore',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-service',\r\n    'Magento_Catalog/js/price-utils',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/select-shipping-method',\r\n    'Magento_Checkout/js/checkout-data'\r\n], function (ko, _, Component, shippingService, priceUtils, quote, selectShippingMethodAction, checkoutData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/cart/shipping-rates'\r\n        },\r\n        isVisible: ko.observable(!quote.isVirtual()),\r\n        isLoading: shippingService.isLoading,\r\n        shippingRates: shippingService.getShippingRates(),\r\n        shippingRateGroups: ko.observableArray([]),\r\n        selectedShippingMethod: ko.computed(function () {\r\n            return quote.shippingMethod() ?\r\n                quote.shippingMethod()['carrier_code'] + '_' + quote.shippingMethod()['method_code'] :\r\n                null;\r\n        }),\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initObservable: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n\r\n            this.shippingRates.subscribe(function (rates) {\r\n                self.shippingRateGroups([]);\r\n                _.each(rates, function (rate) {\r\n                    var carrierTitle = rate['carrier_title'];\r\n\r\n                    if (self.shippingRateGroups.indexOf(carrierTitle) === -1) {\r\n                        self.shippingRateGroups.push(carrierTitle);\r\n                    }\r\n                });\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get shipping rates for specific group based on title.\r\n         * @returns Array\r\n         */\r\n        getRatesForGroup: function (shippingRateGroupTitle) {\r\n            return _.filter(this.shippingRates(), function (rate) {\r\n                return shippingRateGroupTitle === rate['carrier_title'];\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Format shipping price.\r\n         * @returns {String}\r\n         */\r\n        getFormattedPrice: function (price) {\r\n            return priceUtils.formatPrice(price, quote.getPriceFormat());\r\n        },\r\n\r\n        /**\r\n         * Set shipping method.\r\n         * @param {String} methodData\r\n         * @returns bool\r\n         */\r\n        selectShippingMethod: function (methodData) {\r\n            selectShippingMethodAction(methodData);\r\n            checkoutData.setSelectedShippingRate(methodData['carrier_code'] + '_' + methodData['method_code']);\r\n\r\n            return true;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/cart/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/shipping-service'\r\n], function ($, Component, totalsService, shippingService) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        isLoading: totalsService.isLoading,\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            totalsService.totals.subscribe(function () {\r\n                $(window).trigger('resize');\r\n            });\r\n            shippingService.getShippingRates().subscribe(function () {\r\n                $(window).trigger('resize');\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/cart/totals/shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/shipping',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        isCalculated: function () {\r\n            return !!quote.shippingMethod();\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/checkout/placeOrderCaptcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Captcha/js/view/checkout/defaultCaptcha',\r\n    'Magento_Captcha/js/model/captchaList',\r\n    'underscore',\r\n    'Magento_Checkout/js/model/payment/place-order-hooks'\r\n],\r\nfunction (defaultCaptcha, captchaList, _, placeOrderHooks) {\r\n    'use strict';\r\n\r\n    return defaultCaptcha.extend({\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var self = this,\r\n                currentCaptcha;\r\n\r\n            this._super();\r\n            currentCaptcha = captchaList.getCaptchaByFormId(this.formId);\r\n\r\n            if (currentCaptcha != null) {\r\n                currentCaptcha.setIsVisible(true);\r\n                this.setCurrentCaptcha(currentCaptcha);\r\n                placeOrderHooks.requestModifiers.push(function (headers) {\r\n                    if (self.isRequired()) {\r\n                        headers['X-Captcha'] = self.captchaValue()();\r\n                    }\r\n                });\r\n                placeOrderHooks.afterRequestListeners.push(function () {\r\n                    self.refresh();\r\n                });\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/checkout/minicart/subtotal/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'ko',\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data'\r\n], function (ko, Component, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        displaySubtotal: ko.observable(true),\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.cart = customerData.get('cart');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/configure/product-customer-data.js":"require([\r\n    'jquery',\r\n    'Magento_Customer/js/customer-data',\r\n    'underscore',\r\n    'domReady!'\r\n], function ($, customerData, _) {\r\n    'use strict';\r\n\r\n    var selectors = {\r\n        qtySelector: '#product_addtocart_form [name=\"qty\"]',\r\n        productIdSelector: '#product_addtocart_form [name=\"product\"]',\r\n        itemIdSelector: '#product_addtocart_form [name=\"item\"]'\r\n    },\r\n    cartData = customerData.get('cart'),\r\n    productId = $(selectors.productIdSelector).val(),\r\n    itemId = $(selectors.itemIdSelector).val(),\r\n    productQty,\r\n    productQtyInput,\r\n\r\n    /**\r\n    * Updates product's qty input value according to actual data\r\n    */\r\n    updateQty = function () {\r\n\r\n        if (productQty || productQty === 0) {\r\n            productQtyInput = productQtyInput || $(selectors.qtySelector);\r\n\r\n            if (productQtyInput && productQty.toString() !== productQtyInput.val()) {\r\n                productQtyInput.val(productQty);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n    * Sets productQty according to cart data from customer-data\r\n    *\r\n    * @param {Object} data - cart data from customer-data\r\n    */\r\n    setProductQty = function (data) {\r\n        var product;\r\n\r\n        if (!(data && data.items && data.items.length && productId)) {\r\n            return;\r\n        }\r\n        product = _.find(data.items, function (item) {\r\n            if (item['item_id'] === itemId) {\r\n                return item['product_id'] === productId ||\r\n                    item['item_id'] === productId;\r\n            }\r\n        });\r\n\r\n        if (!product) {\r\n            return;\r\n        }\r\n        productQty = product.qty;\r\n    };\r\n\r\n    cartData.subscribe(function (updateCartData) {\r\n        setProductQty(updateCartData);\r\n        updateQty();\r\n    });\r\n\r\n    setProductQty(cartData());\r\n    updateQty();\r\n});\r\n","Magento_Checkout/js/view/form/element/email.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'ko',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Customer/js/action/check-email-availability',\r\n    'Magento_Customer/js/action/login',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'mage/validation'\r\n], function ($, Component, ko, customer, checkEmailAvailability, loginAction, quote, checkoutData, fullScreenLoader) {\r\n    'use strict';\r\n\r\n    var validatedEmail;\r\n\r\n    if (!checkoutData.getValidatedEmailValue() &&\r\n        window.checkoutConfig.validatedEmailValue\r\n    ) {\r\n        checkoutData.setInputFieldEmailValue(window.checkoutConfig.validatedEmailValue);\r\n        checkoutData.setValidatedEmailValue(window.checkoutConfig.validatedEmailValue);\r\n    }\r\n\r\n    validatedEmail = checkoutData.getValidatedEmailValue();\r\n\r\n    if (validatedEmail && !customer.isLoggedIn()) {\r\n        quote.guestEmail = validatedEmail;\r\n    }\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/form/element/email',\r\n            email: checkoutData.getInputFieldEmailValue(),\r\n            emailFocused: false,\r\n            isLoading: false,\r\n            isPasswordVisible: false,\r\n            listens: {\r\n                email: 'emailHasChanged',\r\n                emailFocused: 'validateEmail'\r\n            },\r\n            ignoreTmpls: {\r\n                email: true\r\n            }\r\n        },\r\n        checkDelay: 2000,\r\n        checkRequest: null,\r\n        isEmailCheckComplete: null,\r\n        isCustomerLoggedIn: customer.isLoggedIn,\r\n        forgotPasswordUrl: window.checkoutConfig.forgotPasswordUrl,\r\n        emailCheckTimeout: 0,\r\n\r\n        /**\r\n         * Initializes regular properties of instance.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            this.isPasswordVisible = this.resolveInitialPasswordVisibility();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes observable properties of instance\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe(['email', 'emailFocused', 'isLoading', 'isPasswordVisible']);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Callback on changing email property\r\n         */\r\n        emailHasChanged: function () {\r\n            var self = this;\r\n\r\n            clearTimeout(this.emailCheckTimeout);\r\n\r\n            if (self.validateEmail()) {\r\n                quote.guestEmail = self.email();\r\n                checkoutData.setValidatedEmailValue(self.email());\r\n            }\r\n            this.emailCheckTimeout = setTimeout(function () {\r\n                if (self.validateEmail()) {\r\n                    self.checkEmailAvailability();\r\n                } else {\r\n                    self.isPasswordVisible(false);\r\n                }\r\n            }, self.checkDelay);\r\n\r\n            checkoutData.setInputFieldEmailValue(self.email());\r\n        },\r\n\r\n        /**\r\n         * Check email existing.\r\n         */\r\n        checkEmailAvailability: function () {\r\n            this.validateRequest();\r\n            this.isEmailCheckComplete = $.Deferred();\r\n            this.isLoading(true);\r\n            this.checkRequest = checkEmailAvailability(this.isEmailCheckComplete, this.email());\r\n\r\n            $.when(this.isEmailCheckComplete).done(function () {\r\n                this.isPasswordVisible(false);\r\n                checkoutData.setCheckedEmailValue('');\r\n            }.bind(this)).fail(function () {\r\n                this.isPasswordVisible(true);\r\n                checkoutData.setCheckedEmailValue(this.email());\r\n            }.bind(this)).always(function () {\r\n                this.isLoading(false);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * If request has been sent -> abort it.\r\n         * ReadyStates for request aborting:\r\n         * 1 - The request has been set up\r\n         * 2 - The request has been sent\r\n         * 3 - The request is in process\r\n         */\r\n        validateRequest: function () {\r\n            if (this.checkRequest != null && $.inArray(this.checkRequest.readyState, [1, 2, 3])) {\r\n                this.checkRequest.abort();\r\n                this.checkRequest = null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Local email validation.\r\n         *\r\n         * @param {Boolean} focused - input focus.\r\n         * @returns {Boolean} - validation result.\r\n         */\r\n        validateEmail: function (focused) {\r\n            var loginFormSelector = 'form[data-role=email-with-possible-login]',\r\n                usernameSelector = loginFormSelector + ' input[name=username]',\r\n                loginForm = $(loginFormSelector),\r\n                validator,\r\n                valid;\r\n\r\n            loginForm.validation();\r\n\r\n            if (focused === false && !!this.email()) {\r\n                valid = !!$(usernameSelector).valid();\r\n\r\n                if (valid) {\r\n                    $(usernameSelector).removeAttr('aria-invalid aria-describedby');\r\n                }\r\n\r\n                return valid;\r\n            }\r\n\r\n            if (loginForm.is(':visible')) {\r\n                validator = loginForm.validate();\r\n\r\n                return validator.check(usernameSelector);\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Log in form submitting callback.\r\n         *\r\n         * @param {HTMLElement} loginForm - form element.\r\n         */\r\n        login: function (loginForm) {\r\n            var loginData = {},\r\n                formDataArray = $(loginForm).serializeArray();\r\n\r\n            formDataArray.forEach(function (entry) {\r\n                loginData[entry.name] = entry.value;\r\n            });\r\n\r\n            if (this.isPasswordVisible() && $(loginForm).validation() && $(loginForm).validation('isValid')) {\r\n                fullScreenLoader.startLoader();\r\n                loginAction(loginData).always(function () {\r\n                    fullScreenLoader.stopLoader();\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Resolves an initial state of a login form.\r\n         *\r\n         * @returns {Boolean} - initial visibility state.\r\n         */\r\n        resolveInitialPasswordVisibility: function () {\r\n            if (checkoutData.getInputFieldEmailValue() !== '' && checkoutData.getCheckedEmailValue() !== '') {\r\n                return true;\r\n            }\r\n\r\n            if (checkoutData.getInputFieldEmailValue() !== '') {\r\n                return checkoutData.getInputFieldEmailValue() === checkoutData.getCheckedEmailValue();\r\n            }\r\n\r\n            return false;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/payment/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/action/place-order',\r\n    'Magento_Checkout/js/action/select-payment-method',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Customer/js/model/customer',\r\n    'Magento_Checkout/js/model/payment-service',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'uiRegistry',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Ui/js/model/messages',\r\n    'uiLayout',\r\n    'Magento_Checkout/js/action/redirect-on-success'\r\n], function (\r\n    ko,\r\n    $,\r\n    Component,\r\n    placeOrderAction,\r\n    selectPaymentMethodAction,\r\n    quote,\r\n    customer,\r\n    paymentService,\r\n    checkoutData,\r\n    checkoutDataResolver,\r\n    registry,\r\n    additionalValidators,\r\n    Messages,\r\n    layout,\r\n    redirectOnSuccessAction\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        redirectAfterPlaceOrder: true,\r\n        isPlaceOrderActionAllowed: ko.observable(quote.billingAddress() != null),\r\n\r\n        /**\r\n         * After place order callback\r\n         */\r\n        afterPlaceOrder: function () {\r\n            // Override this function and put after place order logic here\r\n        },\r\n\r\n        /**\r\n         * Initialize view.\r\n         *\r\n         * @return {exports}\r\n         */\r\n        initialize: function () {\r\n            var billingAddressCode,\r\n                billingAddressData,\r\n                defaultAddressData;\r\n\r\n            this._super().initChildren();\r\n            quote.billingAddress.subscribe(function (address) {\r\n                this.isPlaceOrderActionAllowed(address !== null);\r\n            }, this);\r\n            checkoutDataResolver.resolveBillingAddress();\r\n\r\n            billingAddressCode = 'billingAddress' + this.getCode();\r\n            registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                defaultAddressData = checkoutProvider.get(billingAddressCode);\r\n\r\n                if (defaultAddressData === undefined) {\r\n                    // Skip if payment does not have a billing address form\r\n                    return;\r\n                }\r\n                billingAddressData = checkoutData.getBillingAddressFromData();\r\n\r\n                if (billingAddressData) {\r\n                    checkoutProvider.set(\r\n                        billingAddressCode,\r\n                        $.extend(true, {}, defaultAddressData, billingAddressData)\r\n                    );\r\n                }\r\n                checkoutProvider.on(billingAddressCode, function (providerBillingAddressData) {\r\n                    checkoutData.setBillingAddressFromData(providerBillingAddressData);\r\n                }, billingAddressCode);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize child elements\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            this.messageContainer = new Messages();\r\n            this.createMessagesComponent();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create child message renderer component\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        createMessagesComponent: function () {\r\n\r\n            var messagesComponent = {\r\n                parent: this.name,\r\n                name: this.name + '.messages',\r\n                displayArea: 'messages',\r\n                component: 'Magento_Ui/js/view/messages',\r\n                config: {\r\n                    messageContainer: this.messageContainer\r\n                }\r\n            };\r\n\r\n            layout([messagesComponent]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Place order.\r\n         */\r\n        placeOrder: function (data, event) {\r\n            var self = this;\r\n\r\n            if (event) {\r\n                event.preventDefault();\r\n            }\r\n\r\n            if (this.validate() &&\r\n                additionalValidators.validate() &&\r\n                this.isPlaceOrderActionAllowed() === true\r\n            ) {\r\n                this.isPlaceOrderActionAllowed(false);\r\n\r\n                this.getPlaceOrderDeferredObject()\r\n                    .done(\r\n                        function () {\r\n                            self.afterPlaceOrder();\r\n\r\n                            if (self.redirectAfterPlaceOrder) {\r\n                                redirectOnSuccessAction.execute();\r\n                            }\r\n                        }\r\n                    ).always(\r\n                        function () {\r\n                            self.isPlaceOrderActionAllowed(true);\r\n                        }\r\n                    );\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPlaceOrderDeferredObject: function () {\r\n            return $.when(\r\n                placeOrderAction(this.getData(), this.messageContainer)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        selectPaymentMethod: function () {\r\n            selectPaymentMethodAction(this.getData());\r\n            checkoutData.setSelectedPaymentMethod(this.item.method);\r\n\r\n            return true;\r\n        },\r\n\r\n        isChecked: ko.computed(function () {\r\n            return quote.paymentMethod() ? quote.paymentMethod().method : null;\r\n        }),\r\n\r\n        isRadioButtonVisible: ko.computed(function () {\r\n            return paymentService.getAvailablePaymentMethods().length !== 1;\r\n        }),\r\n\r\n        /**\r\n         * Get payment method data\r\n         */\r\n        getData: function () {\r\n            return {\r\n                'method': this.item.method,\r\n                'po_number': null,\r\n                'additional_data': null\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get payment method type.\r\n         */\r\n        getTitle: function () {\r\n            return this.item.title;\r\n        },\r\n\r\n        /**\r\n         * Get payment method code.\r\n         */\r\n        getCode: function () {\r\n            return this.item.method;\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        validate: function () {\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * @return {String}\r\n         */\r\n        getBillingAddressFormName: function () {\r\n            return 'billing-address-form-' + this.item.method;\r\n        },\r\n\r\n        /**\r\n         * Dispose billing address subscriptions\r\n         */\r\n        disposeSubscriptions: function () {\r\n            // dispose all active subscriptions\r\n            var billingAddressCode = 'billingAddress' + this.getCode();\r\n\r\n            registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                checkoutProvider.off(billingAddressCode);\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/payment/email-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(\r\n    [\r\n        'uiComponent',\r\n        'Magento_Checkout/js/model/payment/additional-validators',\r\n        'Magento_Checkout/js/model/customer-email-validator'\r\n    ],\r\n    function (Component, additionalValidators, agreementValidator) {\r\n        'use strict';\r\n\r\n        additionalValidators.registerValidator(agreementValidator);\r\n\r\n        return Component.extend({});\r\n    }\r\n);\r\n","Magento_Checkout/js/view/payment/list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'ko',\r\n    'mageUtils',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/method-list',\r\n    'Magento_Checkout/js/model/payment/renderer-list',\r\n    'uiLayout',\r\n    'Magento_Checkout/js/model/checkout-data-resolver',\r\n    'mage/translate',\r\n    'uiRegistry'\r\n], function (_, ko, utils, Component, paymentMethods, rendererList, layout, checkoutDataResolver, $t, registry) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/payment-methods/list',\r\n            visible: paymentMethods().length > 0,\r\n            configDefaultGroup: {\r\n                name: 'methodGroup',\r\n                component: 'Magento_Checkout/js/model/payment/method-group'\r\n            },\r\n            paymentGroupsList: [],\r\n            defaultGroupTitle: $t('Select a new payment method')\r\n        },\r\n\r\n        /**\r\n         * Initialize view.\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super().initDefaulGroup().initChildren();\r\n            paymentMethods.subscribe(\r\n                function (changes) {\r\n                    checkoutDataResolver.resolvePaymentMethod();\r\n                    //remove renderer for \"deleted\" payment methods\r\n                    _.each(changes, function (change) {\r\n                        if (change.status === 'deleted') {\r\n                            this.removeRenderer(change.value.method);\r\n                        }\r\n                    }, this);\r\n                    //add renderer for \"added\" payment methods\r\n                    _.each(changes, function (change) {\r\n                        if (change.status === 'added') {\r\n                            this.createRenderer(change.value);\r\n                        }\r\n                    }, this);\r\n                }, this, 'arrayChange');\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super().\r\n                observe(['paymentGroupsList']);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Creates default group\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        initDefaulGroup: function () {\r\n            layout([\r\n                this.configDefaultGroup\r\n            ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create renders for child payment methods.\r\n         *\r\n         * @returns {Component} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            var self = this;\r\n\r\n            _.each(paymentMethods(), function (paymentMethodData) {\r\n                self.createRenderer(paymentMethodData);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @returns\r\n         */\r\n        createComponent: function (payment) {\r\n            var rendererTemplate,\r\n                rendererComponent,\r\n                templateData;\r\n\r\n            templateData = {\r\n                parentName: this.name,\r\n                name: payment.name\r\n            };\r\n            rendererTemplate = {\r\n                parent: '${ $.$data.parentName }',\r\n                name: '${ $.$data.name }',\r\n                displayArea: payment.displayArea,\r\n                component: payment.component\r\n            };\r\n            rendererComponent = utils.template(rendererTemplate, templateData);\r\n            utils.extend(rendererComponent, {\r\n                item: payment.item,\r\n                config: payment.config\r\n            });\r\n\r\n            return rendererComponent;\r\n        },\r\n\r\n        /**\r\n         * Create renderer.\r\n         *\r\n         * @param {Object} paymentMethodData\r\n         */\r\n        createRenderer: function (paymentMethodData) {\r\n            var isRendererForMethod = false,\r\n                currentGroup;\r\n\r\n            registry.get(this.configDefaultGroup.name, function (defaultGroup) {\r\n                _.each(rendererList(), function (renderer) {\r\n\r\n                    if (renderer.hasOwnProperty('typeComparatorCallback') &&\r\n                        typeof renderer.typeComparatorCallback == 'function'\r\n                    ) {\r\n                        isRendererForMethod = renderer.typeComparatorCallback(renderer.type, paymentMethodData.method);\r\n                    } else {\r\n                        isRendererForMethod = renderer.type === paymentMethodData.method;\r\n                    }\r\n\r\n                    if (isRendererForMethod) {\r\n                        currentGroup = renderer.group ? renderer.group : defaultGroup;\r\n\r\n                        this.collectPaymentGroups(currentGroup);\r\n\r\n                        layout([\r\n                            this.createComponent(\r\n                                {\r\n                                    config: renderer.config,\r\n                                    component: renderer.component,\r\n                                    name: renderer.type,\r\n                                    method: paymentMethodData.method,\r\n                                    item: paymentMethodData,\r\n                                    displayArea: currentGroup.displayArea\r\n                                }\r\n                            )]);\r\n                    }\r\n                }.bind(this));\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Collects unique groups of available payment methods\r\n         *\r\n         * @param {Object} group\r\n         */\r\n        collectPaymentGroups: function (group) {\r\n            var groupsList = this.paymentGroupsList(),\r\n                isGroupExists = _.some(groupsList, function (existsGroup) {\r\n                    return existsGroup.alias === group.alias;\r\n                });\r\n\r\n            if (!isGroupExists) {\r\n                groupsList.push(group);\r\n                groupsList = _.sortBy(groupsList, function (existsGroup) {\r\n                    return existsGroup.sortOrder;\r\n                });\r\n                this.paymentGroupsList(groupsList);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns payment group title\r\n         *\r\n         * @param {Object} group\r\n         * @returns {String}\r\n         */\r\n        getGroupTitle: function (group) {\r\n            var title = group().title;\r\n\r\n            if (group().isDefault() && this.paymentGroupsList().length > 1) {\r\n                title = this.defaultGroupTitle;\r\n            }\r\n\r\n            return title;\r\n        },\r\n\r\n        /**\r\n         * Checks if at least one payment method available\r\n         *\r\n         * @returns {String}\r\n         */\r\n        isPaymentMethodsAvailable: function () {\r\n            return _.some(this.paymentGroupsList(), function (group) {\r\n                return this.regionHasElements(group.displayArea);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Remove view renderer.\r\n         *\r\n         * @param {String} paymentMethodCode\r\n         */\r\n        removeRenderer: function (paymentMethodCode) {\r\n            var items;\r\n\r\n            _.each(this.paymentGroupsList(), function (group) {\r\n                items = this.getRegion(group.displayArea);\r\n\r\n                _.find(items(), function (value) {\r\n                    if (value.item.method.indexOf(paymentMethodCode) === 0) {\r\n                        value.disposeSubscriptions();\r\n                        value.destroy();\r\n                    }\r\n                });\r\n            }, this);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-address/list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'ko',\r\n    'mageUtils',\r\n    'uiComponent',\r\n    'uiLayout',\r\n    'Magento_Customer/js/model/address-list'\r\n], function (_, ko, utils, Component, layout, addressList) {\r\n    'use strict';\r\n\r\n    var defaultRendererTemplate = {\r\n        parent: '${ $.$data.parentName }',\r\n        name: '${ $.$data.name }',\r\n        component: 'Magento_Checkout/js/view/shipping-address/address-renderer/default',\r\n        provider: 'checkoutProvider'\r\n    };\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-address/list',\r\n            visible: addressList().length > 0,\r\n            rendererTemplates: []\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super()\r\n                .initChildren();\r\n\r\n            addressList.subscribe(function (changes) {\r\n                    var self = this;\r\n\r\n                    changes.forEach(function (change) {\r\n                        if (change.status === 'added') {\r\n                            self.createRendererComponent(change.value, change.index);\r\n                        }\r\n                    });\r\n                },\r\n                this,\r\n                'arrayChange'\r\n            );\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function () {\r\n            this._super();\r\n            // the list of child components that are responsible for address rendering\r\n            this.rendererComponents = [];\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initChildren: function () {\r\n            _.each(addressList(), this.createRendererComponent, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create new component that will render given address in the address list\r\n         *\r\n         * @param {Object} address\r\n         * @param {*} index\r\n         */\r\n        createRendererComponent: function (address, index) {\r\n            var rendererTemplate, templateData, rendererComponent;\r\n\r\n            if (index in this.rendererComponents) {\r\n                this.rendererComponents[index].address(address);\r\n            } else {\r\n                // rendererTemplates are provided via layout\r\n                rendererTemplate = address.getType() != undefined && this.rendererTemplates[address.getType()] != undefined ? //eslint-disable-line\r\n                    utils.extend({}, defaultRendererTemplate, this.rendererTemplates[address.getType()]) :\r\n                    defaultRendererTemplate;\r\n                templateData = {\r\n                    parentName: this.name,\r\n                    name: index\r\n                };\r\n                rendererComponent = utils.template(rendererTemplate, templateData);\r\n                utils.extend(rendererComponent, {\r\n                    address: ko.observable(address)\r\n                });\r\n                layout([rendererComponent]);\r\n                this.rendererComponents[index] = rendererComponent;\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-address/address-renderer/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'uiComponent',\r\n    'underscore',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/shipping-address/form-popup-state',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, ko, Component, _, selectShippingAddressAction, quote, formPopUpState, checkoutData, customerData) {\r\n    'use strict';\r\n\r\n    var countryData = customerData.get('directory-data');\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-address/address-renderer/default'\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super();\r\n            this.isSelected = ko.computed(function () {\r\n                var isSelected = false,\r\n                    shippingAddress = quote.shippingAddress();\r\n\r\n                if (shippingAddress) {\r\n                    isSelected = shippingAddress.getKey() == this.address().getKey(); //eslint-disable-line eqeqeq\r\n                }\r\n\r\n                return isSelected;\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @param {String} countryId\r\n         * @return {String}\r\n         */\r\n        getCountryName: function (countryId) {\r\n            return countryData()[countryId] != undefined ? countryData()[countryId].name : ''; //eslint-disable-line\r\n        },\r\n\r\n        /**\r\n         * Get customer attribute label\r\n         *\r\n         * @param {*} attribute\r\n         * @returns {*}\r\n         */\r\n        getCustomAttributeLabel: function (attribute) {\r\n            var label;\r\n\r\n            if (typeof attribute === 'string') {\r\n                return attribute;\r\n            }\r\n\r\n            if (attribute.label) {\r\n                return attribute.label;\r\n            }\r\n\r\n            if (_.isArray(attribute.value)) {\r\n                label = _.map(attribute.value, function (value) {\r\n                    return this.getCustomAttributeOptionLabel(attribute['attribute_code'], value) || value;\r\n                }, this).join(', ');\r\n            } else if (typeof attribute.value === 'object') {\r\n                label = _.map(Object.values(attribute.value)).join(', ');\r\n            } else {\r\n                label = this.getCustomAttributeOptionLabel(attribute['attribute_code'], attribute.value);\r\n            }\r\n\r\n            return label || attribute.value;\r\n        },\r\n\r\n        /**\r\n         * Get option label for given attribute code and option ID\r\n         *\r\n         * @param {String} attributeCode\r\n         * @param {String} value\r\n         * @returns {String|null}\r\n         */\r\n        getCustomAttributeOptionLabel: function (attributeCode, value) {\r\n            var option,\r\n                label,\r\n                options = this.source.get('customAttributes') || {};\r\n\r\n            if (options[attributeCode]) {\r\n                option = _.findWhere(options[attributeCode], {\r\n                    value: value\r\n                });\r\n\r\n                if (option) {\r\n                    label = option.label;\r\n                }\r\n            } else if (value.file !== null) {\r\n                label = value.file;\r\n            }\r\n\r\n            return label;\r\n        },\r\n\r\n        /** Set selected customer shipping address  */\r\n        selectAddress: function () {\r\n            selectShippingAddressAction(this.address());\r\n            checkoutData.setSelectedShippingAddress(this.address().getKey());\r\n        },\r\n\r\n        /**\r\n         * Edit address.\r\n         */\r\n        editAddress: function () {\r\n            formPopUpState.isVisible(true);\r\n            this.showPopup();\r\n\r\n        },\r\n\r\n        /**\r\n         * Show popup.\r\n         */\r\n        showPopup: function () {\r\n            $('[data-open-modal=\"opc-new-shipping-address\"]').trigger('click');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-information/list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'mageUtils',\r\n    'uiComponent',\r\n    'uiLayout',\r\n    'Magento_Checkout/js/model/quote'\r\n], function ($, ko, utils, Component, layout, quote) {\r\n    'use strict';\r\n\r\n    var defaultRendererTemplate = {\r\n        parent: '${ $.$data.parentName }',\r\n        name: '${ $.$data.name }',\r\n        component: 'Magento_Checkout/js/view/shipping-information/address-renderer/default',\r\n        provider: 'checkoutProvider'\r\n    };\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-information/list',\r\n            rendererTemplates: {}\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super()\r\n                .initChildren();\r\n\r\n            quote.shippingAddress.subscribe(function (address) {\r\n                self.createRendererComponent(address);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function () {\r\n            this._super();\r\n            // the list of child components that are responsible for address rendering\r\n            this.rendererComponents = {};\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initChildren: function () {\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create new component that will render given address in the address list\r\n         *\r\n         * @param {Object} address\r\n         */\r\n        createRendererComponent: function (address) {\r\n            var rendererTemplate, templateData, rendererComponent;\r\n\r\n            $.each(this.rendererComponents, function (index, component) {\r\n                component.visible(false);\r\n            });\r\n\r\n            if (this.rendererComponents[address.getType()]) {\r\n                this.rendererComponents[address.getType()].address(address);\r\n                this.rendererComponents[address.getType()].visible(true);\r\n            } else {\r\n                // rendererTemplates are provided via layout\r\n                rendererTemplate = address.getType() != undefined && this.rendererTemplates[address.getType()] != undefined ? //eslint-disable-line\r\n                    utils.extend({}, defaultRendererTemplate, this.rendererTemplates[address.getType()]) :\r\n                    defaultRendererTemplate;\r\n                templateData = {\r\n                    parentName: this.name,\r\n                    name: address.getType()\r\n                };\r\n\r\n                rendererComponent = utils.template(rendererTemplate, templateData);\r\n                utils.extend(\r\n                    rendererComponent,\r\n                    {\r\n                        address: ko.observable(address),\r\n                        visible: ko.observable(true)\r\n                    }\r\n                );\r\n                layout([rendererComponent]);\r\n                this.rendererComponents[address.getType()] = rendererComponent;\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/shipping-information/address-renderer/default.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'underscore',\r\n    'Magento_Customer/js/customer-data'\r\n], function (Component, _, customerData) {\r\n    'use strict';\r\n\r\n    var countryData = customerData.get('directory-data');\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/shipping-information/address-renderer/default'\r\n        },\r\n\r\n        /**\r\n         * @param {*} countryId\r\n         * @return {String}\r\n         */\r\n        getCountryName: function (countryId) {\r\n            return countryData()[countryId] != undefined ? countryData()[countryId].name : ''; //eslint-disable-line\r\n        },\r\n\r\n        /**\r\n         * Get customer attribute label\r\n         *\r\n         * @param {*} attribute\r\n         * @returns {*}\r\n         */\r\n        getCustomAttributeLabel: function (attribute) {\r\n            var label;\r\n\r\n            if (typeof attribute === 'string') {\r\n                return attribute;\r\n            }\r\n\r\n            if (attribute.label) {\r\n                return attribute.label;\r\n            }\r\n\r\n            if (_.isArray(attribute.value)) {\r\n                label = _.map(attribute.value, function (value) {\r\n                    return this.getCustomAttributeOptionLabel(attribute['attribute_code'], value) || value;\r\n                }, this).join(', ');\r\n            } else if (typeof attribute.value === 'object') {\r\n                label = _.map(Object.values(attribute.value)).join(', ');\r\n            } else {\r\n                label = this.getCustomAttributeOptionLabel(attribute['attribute_code'], attribute.value);\r\n            }\r\n\r\n            return label || attribute.value;\r\n        },\r\n\r\n        /**\r\n         * Get option label for given attribute code and option ID\r\n         *\r\n         * @param {String} attributeCode\r\n         * @param {String} value\r\n         * @returns {String|null}\r\n         */\r\n        getCustomAttributeOptionLabel: function (attributeCode, value) {\r\n            var option,\r\n                label,\r\n                options = this.source.get('customAttributes') || {};\r\n\r\n            if (options[attributeCode]) {\r\n                option = _.findWhere(options[attributeCode], {\r\n                    value: value\r\n                });\r\n\r\n                if (option) {\r\n                    label = option.label;\r\n                }\r\n            } else if (value.file !== null) {\r\n                label = value.file;\r\n            }\r\n\r\n            return label;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/abstract-total.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Catalog/js/price-utils',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/step-navigator'\r\n], function (Component, quote, priceUtils, totals, stepNavigator) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @param {*} price\r\n         * @return {*|String}\r\n         */\r\n        getFormattedPrice: function (price) {\r\n            return priceUtils.formatPrice(price, quote.getPriceFormat());\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getTotals: function () {\r\n            return totals.totals();\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        isFullMode: function () {\r\n            if (!this.getTotals()) {\r\n                return false;\r\n            }\r\n\r\n            return stepNavigator.isProcessed('shipping');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/cart-items.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/model/totals',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/step-navigator',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (ko, totals, Component, stepNavigator, quote) {\r\n    'use strict';\r\n\r\n    var useQty = window.checkoutConfig.useQty;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/cart-items'\r\n        },\r\n        totals: totals.totals(),\r\n        items: ko.observable([]),\r\n        maxCartItemsToDisplay: window.checkoutConfig.maxCartItemsToDisplay,\r\n        cartUrl: window.checkoutConfig.cartUrl,\r\n\r\n        /**\r\n         * @deprecated Please use observable property (this.items())\r\n         */\r\n        getItems: totals.getItems(),\r\n\r\n        /**\r\n         * Returns cart items qty\r\n         *\r\n         * @returns {Number}\r\n         */\r\n        getItemsQty: function () {\r\n            return parseFloat(this.totals['items_qty']);\r\n        },\r\n\r\n        /**\r\n         * Returns count of cart line items\r\n         *\r\n         * @returns {Number}\r\n         */\r\n        getCartLineItemsCount: function () {\r\n            return parseInt(totals.getItems()().length, 10);\r\n        },\r\n\r\n        /**\r\n         * Returns shopping cart items summary (includes config settings)\r\n         *\r\n         * @returns {Number}\r\n         */\r\n        getCartSummaryItemsCount: function () {\r\n            return useQty ? this.getItemsQty() : this.getCartLineItemsCount();\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            // Set initial items to observable field\r\n            this.setItems(totals.getItems()());\r\n            // Subscribe for items data changes and refresh items in view\r\n            totals.getItems().subscribe(function (items) {\r\n                this.setItems(items);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Set items to observable field\r\n         *\r\n         * @param {Object} items\r\n         */\r\n        setItems: function (items) {\r\n            if (items && items.length > 0) {\r\n                items = items.slice(parseInt(-this.maxCartItemsToDisplay, 10));\r\n            }\r\n            this.items(items);\r\n        },\r\n\r\n        /**\r\n         * Returns bool value for items block state (expanded or not)\r\n         *\r\n         * @returns {*|Boolean}\r\n         */\r\n        isItemsBlockExpanded: function () {\r\n            return quote.isVirtual() || stepNavigator.isProcessed('shipping');\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/grand-total.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/grand-total'\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        isDisplayed: function () {\r\n            return this.isFullMode();\r\n        },\r\n\r\n        /**\r\n         * Get pure value.\r\n         */\r\n        getPureValue: function () {\r\n            var totals = quote.getTotals()();\r\n\r\n            if (totals) {\r\n                return totals['grand_total'];\r\n            }\r\n\r\n            return quote['grand_total'];\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            return this.getFormattedPrice(this.getPureValue());\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/view/summary/discount'\r\n], function ($, _, Component, quote, discountView) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/shipping'\r\n        },\r\n        quoteIsVirtual: quote.isVirtual(),\r\n        totals: quote.getTotals(),\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getShippingMethodTitle: function () {\r\n            var shippingMethod,\r\n                shippingMethodTitle = '';\r\n\r\n            if (!this.isCalculated()) {\r\n                return '';\r\n            }\r\n            shippingMethod = quote.shippingMethod();\r\n\r\n            if (!_.isArray(shippingMethod) && !_.isObject(shippingMethod)) {\r\n                return '';\r\n            }\r\n\r\n            if (typeof shippingMethod['method_title'] !== 'undefined') {\r\n                shippingMethodTitle = ' - ' + shippingMethod['method_title'];\r\n            }\r\n\r\n            return shippingMethodTitle ?\r\n                shippingMethod['carrier_title'] + shippingMethodTitle :\r\n                shippingMethod['carrier_title'];\r\n        },\r\n\r\n        /**\r\n         * @return {*|Boolean}\r\n         */\r\n        isCalculated: function () {\r\n            return this.totals() && this.isFullMode() && quote.shippingMethod() != null; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getValue: function () {\r\n            var price;\r\n\r\n            if (!this.isCalculated()) {\r\n                return this.notCalculatedMessage;\r\n            }\r\n            price =  this.totals()['shipping_amount'];\r\n\r\n            return this.getFormattedPrice(price);\r\n        },\r\n\r\n        /**\r\n         * If is set coupon code, but there wasn't displayed discount view.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        haveToShowCoupon: function () {\r\n            var couponCode = this.totals()['coupon_code'];\r\n\r\n            if (typeof couponCode === 'undefined') {\r\n                couponCode = false;\r\n            }\r\n\r\n            return couponCode && !discountView().isDisplayed();\r\n        },\r\n\r\n        /**\r\n         * Returns coupon code description.\r\n         *\r\n         * @return {String}\r\n         */\r\n        getCouponDescription: function () {\r\n            if (!this.haveToShowCoupon()) {\r\n                return '';\r\n            }\r\n\r\n            return '(' + this.totals()['coupon_code'] + ')';\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/subtotal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/subtotal'\r\n        },\r\n\r\n        /**\r\n         * Get pure value.\r\n         *\r\n         * @return {*}\r\n         */\r\n        getPureValue: function () {\r\n            var totals = quote.getTotals()();\r\n\r\n            if (totals) {\r\n                return totals.subtotal;\r\n            }\r\n\r\n            return quote.subtotal;\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            return this.getFormattedPrice(this.getPureValue());\r\n        }\r\n\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @return {*}\r\n         */\r\n        isDisplayed: function () {\r\n            return this.isFullMode();\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/item/details.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'escaper'\r\n], function (Component, escaper) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/item/details',\r\n            allowedTags: ['b', 'strong', 'i', 'em', 'u']\r\n        },\r\n\r\n        /**\r\n         * @param {Object} quoteItem\r\n         * @return {String}\r\n         */\r\n        getNameUnsanitizedHtml: function (quoteItem) {\r\n            var txt = document.createElement('textarea');\r\n\r\n            txt.innerHTML = quoteItem.name;\r\n\r\n            return escaper.escapeHtml(txt.value, this.allowedTags);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} quoteItem\r\n         * @return {String}Magento_Checkout/js/region-updater\r\n         */\r\n        getValue: function (quoteItem) {\r\n            return quoteItem.name;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/item/details/message.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['uiComponent'], function (Component) {\r\n    'use strict';\r\n\r\n    var quoteMessages = window.checkoutConfig.quoteMessages;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/item/details/message'\r\n        },\r\n        displayArea: 'item_message',\r\n        quoteMessages: quoteMessages,\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getMessage: function (item) {\r\n            if (this.quoteMessages[item['item_id']]) {\r\n                return this.quoteMessages[item['item_id']];\r\n            }\r\n\r\n            return null;\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/item/details/subtotal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total'\r\n], function (viewModel) {\r\n    'use strict';\r\n\r\n    return viewModel.extend({\r\n        defaults: {\r\n            displayArea: 'after_details',\r\n            template: 'Magento_Checkout/summary/item/details/subtotal'\r\n        },\r\n\r\n        /**\r\n         * @param {Object} quoteItem\r\n         * @return {*|String}\r\n         */\r\n        getValue: function (quoteItem) {\r\n            return this.getFormattedPrice(quoteItem['row_total']);\r\n        }\r\n    });\r\n});\r\n","Magento_Checkout/js/view/summary/item/details/thumbnail.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['uiComponent'], function (Component) {\r\n    'use strict';\r\n\r\n    var imageData = window.checkoutConfig.imageData;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Checkout/summary/item/details/thumbnail'\r\n        },\r\n        displayArea: 'before_details',\r\n        imageData: imageData,\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {Array}\r\n         */\r\n        getImageItem: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']];\r\n            }\r\n\r\n            return [];\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getSrc: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']].src;\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getWidth: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']].width;\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getHeight: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']].height;\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {null}\r\n         */\r\n        getAlt: function (item) {\r\n            if (this.imageData[item['item_id']]) {\r\n                return this.imageData[item['item_id']].alt;\r\n            }\r\n\r\n            return null;\r\n        }\r\n    });\r\n});\r\n","Magento_CheckoutAgreements/js/model/agreement-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/validation'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var checkoutConfig = window.checkoutConfig,\r\n        agreementsConfig = checkoutConfig ? checkoutConfig.checkoutAgreements : {},\r\n        agreementsInputPath = '.payment-method._active div.checkout-agreements input';\r\n\r\n    return {\r\n        /**\r\n         * Validate checkout agreements\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function (hideError) {\r\n            var isValid = true;\r\n\r\n            if (!agreementsConfig.isEnabled || $(agreementsInputPath).length === 0) {\r\n                return true;\r\n            }\r\n\r\n            $(agreementsInputPath).each(function (index, element) {\r\n                if (!$.validator.validateSingleElement(element, {\r\n                    errorElement: 'div',\r\n                    hideError: hideError || false\r\n                })) {\r\n                    isValid = false;\r\n                }\r\n            });\r\n\r\n            return isValid;\r\n        }\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/model/agreements-assigner.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/*global alert*/\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var agreementsConfig = window.checkoutConfig.checkoutAgreements;\r\n\r\n    /** Override default place order action and add agreement_ids to request */\r\n    return function (paymentData) {\r\n        var agreementForm,\r\n            agreementData,\r\n            agreementIds;\r\n\r\n        if (!agreementsConfig.isEnabled) {\r\n            return;\r\n        }\r\n\r\n        agreementForm = $('.payment-method._active div[data-role=checkout-agreements] input');\r\n        agreementData = agreementForm.serializeArray();\r\n        agreementIds = [];\r\n\r\n        agreementData.forEach(function (item) {\r\n            agreementIds.push(item.value);\r\n        });\r\n\r\n        if (paymentData['extension_attributes'] === undefined) {\r\n            paymentData['extension_attributes'] = {};\r\n        }\r\n\r\n        paymentData['extension_attributes']['agreement_ids'] = agreementIds;\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/model/agreements-modal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate'\r\n], function ($, modal, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        modalWindow: null,\r\n\r\n        /**\r\n         * Create popUp window for provided element.\r\n         *\r\n         * @param {HTMLElement} element\r\n         */\r\n        createModal: function (element) {\r\n            var options;\r\n\r\n            this.modalWindow = element;\r\n            options = {\r\n                'type': 'popup',\r\n                'modalClass': 'agreements-modal',\r\n                'responsive': true,\r\n                'innerScroll': true,\r\n                'trigger': '.show-modal',\r\n                'buttons': [\r\n                    {\r\n                        text: $t('Close'),\r\n                        class: 'action secondary action-hide-popup',\r\n\r\n                        /** @inheritdoc */\r\n                        click: function () {\r\n                            this.closeModal();\r\n                        }\r\n                    }\r\n                ]\r\n            };\r\n            modal(options, $(this.modalWindow));\r\n        },\r\n\r\n        /** Show login popup window */\r\n        showModal: function () {\r\n            $(this.modalWindow).modal('openModal');\r\n        }\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/model/place-order-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper',\r\n    'Magento_CheckoutAgreements/js/model/agreements-assigner'\r\n], function ($, wrapper, agreementsAssigner) {\r\n    'use strict';\r\n\r\n    return function (placeOrderAction) {\r\n\r\n        /** Override default place order action and add agreement_ids to request */\r\n        return wrapper.wrap(placeOrderAction, function (originalAction, paymentData, messageContainer) {\r\n            agreementsAssigner(paymentData);\r\n\r\n            return originalAction(paymentData, messageContainer);\r\n        });\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/model/set-payment-information-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*global alert*/\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper',\r\n    'Magento_CheckoutAgreements/js/model/agreements-assigner'\r\n], function ($, wrapper, agreementsAssigner) {\r\n    'use strict';\r\n\r\n    return function (placeOrderAction) {\r\n\r\n        /** Override place-order-mixin for set-payment-information action as they differs only by method signature */\r\n        return wrapper.wrap(placeOrderAction, function (originalAction, messageContainer, paymentData) {\r\n            agreementsAssigner(paymentData);\r\n\r\n            return originalAction(messageContainer, paymentData);\r\n        });\r\n    };\r\n});\r\n","Magento_CheckoutAgreements/js/view/agreement-validation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_CheckoutAgreements/js/model/agreement-validator'\r\n], function (Component, additionalValidators, agreementValidator) {\r\n    'use strict';\r\n\r\n    additionalValidators.registerValidator(agreementValidator);\r\n\r\n    return Component.extend({});\r\n});\r\n","Magento_CheckoutAgreements/js/view/checkout-agreements.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_CheckoutAgreements/js/model/agreements-modal'\r\n], function (ko, $, Component, agreementsModal) {\r\n    'use strict';\r\n\r\n    var checkoutConfig = window.checkoutConfig,\r\n        agreementManualMode = 1,\r\n        agreementsConfig = checkoutConfig ? checkoutConfig.checkoutAgreements : {};\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_CheckoutAgreements/checkout/checkout-agreements'\r\n        },\r\n        isVisible: agreementsConfig.isEnabled,\r\n        agreements: agreementsConfig.agreements,\r\n        modalTitle: ko.observable(null),\r\n        modalContent: ko.observable(null),\r\n        contentHeight: ko.observable(null),\r\n        modalWindow: null,\r\n\r\n        /**\r\n         * Checks if agreement required\r\n         *\r\n         * @param {Object} element\r\n         */\r\n        isAgreementRequired: function (element) {\r\n            return element.mode == agreementManualMode; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * Show agreement content in modal\r\n         *\r\n         * @param {Object} element\r\n         */\r\n        showContent: function (element) {\r\n            this.modalTitle(element.checkboxText);\r\n            this.modalContent(element.content);\r\n            this.contentHeight(element.contentHeight ? element.contentHeight : 'auto');\r\n            agreementsModal.showModal();\r\n        },\r\n\r\n        /**\r\n         * build a unique id for the term checkbox\r\n         *\r\n         * @param {Object} context - the ko context\r\n         * @param {Number} agreementId\r\n         */\r\n        getCheckboxId: function (context, agreementId) {\r\n            var paymentMethodName = '',\r\n                paymentMethodRenderer = context.$parents[1];\r\n\r\n            // corresponding payment method fetched from parent context\r\n            if (paymentMethodRenderer) {\r\n                // item looks like this: {title: \"Check / Money order\", method: \"checkmo\"}\r\n                paymentMethodName = paymentMethodRenderer.item ?\r\n                  paymentMethodRenderer.item.method : '';\r\n            }\r\n\r\n            return 'agreement_' + paymentMethodName + '_' + agreementId;\r\n        },\r\n\r\n        /**\r\n         * Init modal window for rendered element\r\n         *\r\n         * @param {Object} element\r\n         */\r\n        initModal: function (element) {\r\n            agreementsModal.createModal(element);\r\n        }\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/catalog-add-to-cart-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'Magento_ConfigurableProduct/js/product/view/product-info-resolver'\r\n], function (_, $, productInfoResolver) {\r\n    'use strict';\r\n\r\n    return function (widget) {\r\n\r\n        $.widget('mage.catalogAddToCart', widget, {\r\n            /**\r\n             * @param {jQuery} form\r\n             */\r\n            ajaxSubmit: function (form) {\r\n                var isConfigurable = !!_.find(form.serializeArray(), function (item) {\r\n                    return item.name.indexOf('super_attribute') !== -1;\r\n                });\r\n\r\n                if (isConfigurable) {\r\n                    this.options.productInfoResolver = productInfoResolver;\r\n                }\r\n\r\n                return this._super(form);\r\n            }\r\n        });\r\n\r\n        return $.mage.catalogAddToCart;\r\n    };\r\n});\r\n","Magento_ConfigurableProduct/js/catalog-add-to-cart.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\nrequire([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Add selected configurable attributes to redirect url\r\n     *\r\n     * @see Magento_Catalog/js/catalog-add-to-cart\r\n     */\r\n    $('body').on('catalogCategoryAddToCartRedirect', function (event, data) {\r\n        $(data.form).find('select[name*=\"super\"]').each(function (index, item) {\r\n            data.redirectParameters.push(item.config.id + '=' + $(item).val());\r\n        });\r\n    });\r\n});\r\n","Magento_ConfigurableProduct/js/configurable-customer-data.js":"require([\r\n    'jquery',\r\n    'Magento_ConfigurableProduct/js/options-updater'\r\n], function ($, Updater) {\r\n    'use strict';\r\n\r\n    var selectors = {\r\n            formSelector: '#product_addtocart_form'\r\n        },\r\n        configurableWidgetName = 'mageConfigurable',\r\n        widgetInitEvent = 'configurable.initialized',\r\n\r\n    /**\r\n    * Sets all configurable attribute's selected values\r\n    */\r\n    updateConfigurableOptions = function () {\r\n        var configurableWidget = $(selectors.formSelector).data(configurableWidgetName);\r\n\r\n        if (!configurableWidget) {\r\n            return;\r\n        }\r\n        configurableWidget.options.values = this.productOptions || {};\r\n        configurableWidget._configureForValues();\r\n    },\r\n    updater = new Updater(widgetInitEvent, updateConfigurableOptions);\r\n\r\n    updater.listen();\r\n});\r\n","Magento_ConfigurableProduct/js/configurable.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/template',\r\n    'mage/translate',\r\n    'priceUtils',\r\n    'priceBox',\r\n    'jquery-ui-modules/widget',\r\n    'jquery/jquery.parsequery',\r\n    'fotoramaVideoEvents'\r\n], function ($, _, mageTemplate, $t, priceUtils) {\r\n    'use strict';\r\n\r\n    $.widget('mage.configurable', {\r\n        options: {\r\n            superSelector: '.super-attribute-select',\r\n            selectSimpleProduct: '[name=\"selected_configurable_option\"]',\r\n            priceHolderSelector: '.price-box',\r\n            spConfig: {},\r\n            state: {},\r\n            priceFormat: {},\r\n            optionTemplate: '<%- data.label %>' +\r\n            '<% if (typeof data.finalPrice.value !== \"undefined\") { %>' +\r\n            ' <%- data.finalPrice.formatted %>' +\r\n            '<% } %>',\r\n            mediaGallerySelector: '[data-gallery-role=gallery-placeholder]',\r\n            mediaGalleryInitial: null,\r\n            slyOldPriceSelector: '.sly-old-price',\r\n            normalPriceLabelSelector: '.product-info-main .normal-price .price-label',\r\n\r\n            /**\r\n             * Defines the mechanism of how images of a gallery should be\r\n             * updated when user switches between configurations of a product.\r\n             *\r\n             * As for now value of this option can be either 'replace' or 'prepend'.\r\n             *\r\n             * @type {String}\r\n             */\r\n            gallerySwitchStrategy: 'replace',\r\n            tierPriceTemplateSelector: '#tier-prices-template',\r\n            tierPriceBlockSelector: '[data-role=\"tier-price-block\"]',\r\n            tierPriceTemplate: '',\r\n            selectorProduct: '.product-info-main',\r\n            selectorProductPrice: '[data-role=priceBox]'\r\n        },\r\n\r\n        /**\r\n         * Creates widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            // Initial setting of various option values\r\n            this._initializeOptions();\r\n\r\n            // Override defaults with URL query parameters and/or inputs values\r\n            this._overrideDefaults();\r\n\r\n            // Change events to check select reloads\r\n            this._setupChangeEvents();\r\n\r\n            // Fill state\r\n            this._fillState();\r\n\r\n            // Setup child and prev/next settings\r\n            this._setChildSettings();\r\n\r\n            // Setup/configure values to inputs\r\n            this._configureForValues();\r\n\r\n            $(this.element).trigger('configurable.initialized');\r\n        },\r\n\r\n        /**\r\n         * Initialize tax configuration, initial settings, and options values.\r\n         * @private\r\n         */\r\n        _initializeOptions: function () {\r\n            var options = this.options,\r\n                gallery = $(options.mediaGallerySelector),\r\n                priceBoxOptions = $(this.options.priceHolderSelector).priceBox('option').priceConfig || null;\r\n\r\n            if (priceBoxOptions && priceBoxOptions.optionTemplate) {\r\n                options.optionTemplate = priceBoxOptions.optionTemplate;\r\n            }\r\n\r\n            if (priceBoxOptions && priceBoxOptions.priceFormat) {\r\n                options.priceFormat = priceBoxOptions.priceFormat;\r\n            }\r\n            options.optionTemplate = mageTemplate(options.optionTemplate);\r\n            options.tierPriceTemplate = $(this.options.tierPriceTemplateSelector).html();\r\n\r\n            options.settings = options.spConfig.containerId ?\r\n                $(options.spConfig.containerId).find(options.superSelector) :\r\n                $(options.superSelector);\r\n\r\n            options.values = options.spConfig.defaultValues || {};\r\n            options.parentImage = $('[data-role=base-image-container] img').attr('src');\r\n\r\n            this.inputSimpleProduct = this.element.find(options.selectSimpleProduct);\r\n\r\n            gallery.data('gallery') ?\r\n                this._onGalleryLoaded(gallery) :\r\n                gallery.on('gallery:loaded', this._onGalleryLoaded.bind(this, gallery));\r\n\r\n        },\r\n\r\n        /**\r\n         * Override default options values settings with either URL query parameters or\r\n         * initialized inputs values.\r\n         * @private\r\n         */\r\n        _overrideDefaults: function () {\r\n            var hashIndex = window.location.href.indexOf('#');\r\n\r\n            if (hashIndex !== -1) {\r\n                this._parseQueryParams(window.location.href.substr(hashIndex + 1));\r\n            }\r\n\r\n            if (this.options.spConfig.inputsInitialized) {\r\n                this._setValuesByAttribute();\r\n            }\r\n\r\n            this._setInitialOptionsLabels();\r\n        },\r\n\r\n        /**\r\n         * Parse query parameters from a query string and set options values based on the\r\n         * key value pairs of the parameters.\r\n         * @param {*} queryString - URL query string containing query parameters.\r\n         * @private\r\n         */\r\n        _parseQueryParams: function (queryString) {\r\n            var queryParams = $.parseQuery({\r\n                query: queryString\r\n            });\r\n\r\n            $.each(queryParams, $.proxy(function (key, value) {\r\n                if (this.options.spConfig.attributes[key] !== undefined &&\r\n                    _.find(this.options.spConfig.attributes[key].options, function (element) {\r\n                        return element.id === value;\r\n                    })) {\r\n                    this.options.values[key] = value;\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Override default options values with values based on each element's attribute\r\n         * identifier.\r\n         * @private\r\n         */\r\n        _setValuesByAttribute: function () {\r\n            this.options.values = {};\r\n            $.each(this.options.settings, $.proxy(function (index, element) {\r\n                var attributeId;\r\n\r\n                if (element.value) {\r\n                    attributeId = element.id.replace(/[a-z]*/, '');\r\n\r\n                    if (this.options.spConfig.attributes[attributeId] !== undefined &&\r\n                        _.find(this.options.spConfig.attributes[attributeId].options, function (optionElement) {\r\n                            return optionElement.id === element.value;\r\n                        })) {\r\n                        this.options.values[attributeId] = element.value;\r\n                    }\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Set additional field with initial label to be used when switching between options with different prices.\r\n         * @private\r\n         */\r\n        _setInitialOptionsLabels: function () {\r\n            $.each(this.options.spConfig.attributes, $.proxy(function (index, element) {\r\n                $.each(element.options, $.proxy(function (optIndex, optElement) {\r\n                    this.options.spConfig.attributes[index].options[optIndex].initialLabel = optElement.label;\r\n                }, this));\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Set up .on('change') events for each option element to configure the option.\r\n         * @private\r\n         */\r\n        _setupChangeEvents: function () {\r\n            $.each(this.options.settings, $.proxy(function (index, element) {\r\n                $(element).on('change', this, this._configure);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Iterate through the option settings and set each option's element configuration,\r\n         * attribute identifier. Set the state based on the attribute identifier.\r\n         * @private\r\n         */\r\n        _fillState: function () {\r\n            $.each(this.options.settings, $.proxy(function (index, element) {\r\n                var attributeId = element.id.replace(/[a-z]*/, '');\r\n\r\n                if (attributeId && this.options.spConfig.attributes[attributeId]) {\r\n                    element.config = this.options.spConfig.attributes[attributeId];\r\n                    element.attributeId = attributeId;\r\n                    this.options.state[attributeId] = false;\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Set each option's child settings, and next/prev option setting. Fill (initialize)\r\n         * an option's list of selections as needed or disable an option's setting.\r\n         * @private\r\n         */\r\n        _setChildSettings: function () {\r\n            var childSettings = [],\r\n                settings = this.options.settings,\r\n                index = settings.length,\r\n                option;\r\n\r\n            while (index--) {\r\n                option = settings[index];\r\n\r\n                if (index) {\r\n                    option.disabled = true;\r\n                } else {\r\n                    this._fillSelect(option);\r\n                }\r\n\r\n                _.extend(option, {\r\n                    childSettings: childSettings.slice(),\r\n                    prevSetting: settings[index - 1],\r\n                    nextSetting: settings[index + 1]\r\n                });\r\n\r\n                childSettings.push(option);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Setup for all configurable option settings. Set the value of the option and configure\r\n         * the option, which sets its state, and initializes the option's choices, etc.\r\n         * @private\r\n         */\r\n        _configureForValues: function () {\r\n            if (this.options.values) {\r\n                this.options.settings.each($.proxy(function (index, element) {\r\n                    var attributeId = element.attributeId;\r\n\r\n                    element.value = this.options.values[attributeId] || '';\r\n                    this._configureElement(element);\r\n                }, this));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Event handler for configuring an option.\r\n         * @private\r\n         * @param {Object} event - Event triggered to configure an option.\r\n         */\r\n        _configure: function (event) {\r\n            event.data._configureElement(this);\r\n        },\r\n\r\n        /**\r\n         * Configure an option, initializing it's state and enabling related options, which\r\n         * populates the related option's selection and resets child option selections.\r\n         * @private\r\n         * @param {*} element - The element associated with a configurable option.\r\n         */\r\n        _configureElement: function (element) {\r\n            this.simpleProduct = this._getSimpleProductId(element);\r\n\r\n            if (element.value) {\r\n                this.options.state[element.config.id] = element.value;\r\n\r\n                if (element.nextSetting) {\r\n                    element.nextSetting.disabled = false;\r\n                    this._fillSelect(element.nextSetting);\r\n                    this._resetChildren(element.nextSetting);\r\n                } else {\r\n                    if (!!document.documentMode) { //eslint-disable-line\r\n                        this.inputSimpleProduct.val(element.options[element.selectedIndex].config.allowedProducts[0]);\r\n                    } else {\r\n                        this.inputSimpleProduct.val(element.selectedOptions[0].config.allowedProducts[0]);\r\n                    }\r\n                }\r\n            } else {\r\n                this._resetChildren(element);\r\n            }\r\n\r\n            this._reloadPrice();\r\n            this._displayRegularPriceBlock(this.simpleProduct);\r\n            this._displayTierPriceBlock(this.simpleProduct);\r\n            this._displayNormalPriceLabel();\r\n            this._changeProductImage();\r\n        },\r\n\r\n        /**\r\n         * Change displayed product image according to chosen options of configurable product\r\n         *\r\n         * @private\r\n         */\r\n        _changeProductImage: function () {\r\n            var images,\r\n                initialImages = this.options.mediaGalleryInitial,\r\n                gallery = $(this.options.mediaGallerySelector).data('gallery');\r\n\r\n            if (_.isUndefined(gallery)) {\r\n                $(this.options.mediaGallerySelector).on('gallery:loaded', function () {\r\n                    this._changeProductImage();\r\n                }.bind(this));\r\n\r\n                return;\r\n            }\r\n\r\n            images = this.options.spConfig.images[this.simpleProduct];\r\n\r\n            if (images) {\r\n                images = this._sortImages(images);\r\n\r\n                if (this.options.gallerySwitchStrategy === 'prepend') {\r\n                    images = images.concat(initialImages);\r\n                }\r\n\r\n                images = $.extend(true, [], images);\r\n                images = this._setImageIndex(images);\r\n\r\n                gallery.updateData(images);\r\n                this._addFotoramaVideoEvents(false);\r\n            } else {\r\n                gallery.updateData(initialImages);\r\n                this._addFotoramaVideoEvents(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add video events\r\n         *\r\n         * @param {Boolean} isInitial\r\n         * @private\r\n         */\r\n        _addFotoramaVideoEvents: function (isInitial) {\r\n            if (_.isUndefined($.mage.AddFotoramaVideoEvents)) {\r\n                return;\r\n            }\r\n\r\n            if (isInitial) {\r\n                $(this.options.mediaGallerySelector).AddFotoramaVideoEvents();\r\n\r\n                return;\r\n            }\r\n\r\n            $(this.options.mediaGallerySelector).AddFotoramaVideoEvents({\r\n                selectedOption: this.simpleProduct,\r\n                dataMergeStrategy: this.options.gallerySwitchStrategy\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Sorting images array\r\n         *\r\n         * @private\r\n         */\r\n        _sortImages: function (images) {\r\n            return _.sortBy(images, function (image) {\r\n                return image.position;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set correct indexes for image set.\r\n         *\r\n         * @param {Array} images\r\n         * @private\r\n         */\r\n        _setImageIndex: function (images) {\r\n            var length = images.length,\r\n                i;\r\n\r\n            for (i = 0; length > i; i++) {\r\n                images[i].i = i + 1;\r\n            }\r\n\r\n            return images;\r\n        },\r\n\r\n        /**\r\n         * For a given option element, reset all of its selectable options. Clear any selected\r\n         * index, disable the option choice, and reset the option's state if necessary.\r\n         * @private\r\n         * @param {*} element - The element associated with a configurable option.\r\n         */\r\n        _resetChildren: function (element) {\r\n            if (element.childSettings) {\r\n                _.each(element.childSettings, function (set) {\r\n                    set.selectedIndex = 0;\r\n                    set.disabled = true;\r\n                });\r\n\r\n                if (element.config) {\r\n                    this.options.state[element.config.id] = false;\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Populates an option's selectable choices.\r\n         * @private\r\n         * @param {*} element - Element associated with a configurable option.\r\n         */\r\n        _fillSelect: function (element) {\r\n            var attributeId = element.id.replace(/[a-z]*/, ''),\r\n                options = this._getAttributeOptions(attributeId),\r\n                prevConfig,\r\n                index = 1,\r\n                allowedProducts,\r\n                allowedProductsByOption,\r\n                allowedProductsAll,\r\n                i,\r\n                j,\r\n                finalPrice = parseFloat(this.options.spConfig.prices.finalPrice.amount),\r\n                optionFinalPrice,\r\n                optionPriceDiff,\r\n                optionPrices = this.options.spConfig.optionPrices,\r\n                allowedOptions = [],\r\n                indexKey,\r\n                allowedProductMinPrice,\r\n                allowedProductsAllMinPrice,\r\n                canDisplayOutOfStockProducts = false,\r\n                filteredSalableProducts;\r\n\r\n            this._clearSelect(element);\r\n            element.options[0] = new Option('', '');\r\n            element.options[0].innerHTML = this.options.spConfig.chooseText;\r\n            prevConfig = false;\r\n\r\n            if (element.prevSetting) {\r\n                prevConfig = element.prevSetting.options[element.prevSetting.selectedIndex];\r\n            }\r\n\r\n            if (options) {\r\n                for (indexKey in this.options.spConfig.index) {\r\n                    /* eslint-disable max-depth */\r\n                    if (this.options.spConfig.index.hasOwnProperty(indexKey)) {\r\n                        allowedOptions = allowedOptions.concat(_.values(this.options.spConfig.index[indexKey]));\r\n                    }\r\n                }\r\n\r\n                if (prevConfig) {\r\n                    allowedProductsByOption = {};\r\n                    allowedProductsAll = [];\r\n\r\n                    for (i = 0; i < options.length; i++) {\r\n                        /* eslint-disable max-depth */\r\n                        for (j = 0; j < options[i].products.length; j++) {\r\n                            // prevConfig.config can be undefined\r\n                            if (prevConfig.config &&\r\n                                prevConfig.config.allowedProducts &&\r\n                                prevConfig.config.allowedProducts.indexOf(options[i].products[j]) > -1) {\r\n                                if (!allowedProductsByOption[i]) {\r\n                                    allowedProductsByOption[i] = [];\r\n                                }\r\n                                allowedProductsByOption[i].push(options[i].products[j]);\r\n                                allowedProductsAll.push(options[i].products[j]);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (typeof allowedProductsAll[0] !== 'undefined' &&\r\n                        typeof optionPrices[allowedProductsAll[0]] !== 'undefined') {\r\n                        allowedProductsAllMinPrice = this._getAllowedProductWithMinPrice(allowedProductsAll);\r\n                        finalPrice = parseFloat(optionPrices[allowedProductsAllMinPrice].finalPrice.amount);\r\n                    }\r\n                }\r\n\r\n                for (i = 0; i < options.length; i++) {\r\n                    if (prevConfig && typeof allowedProductsByOption[i] === 'undefined') {\r\n                        continue; //jscs:ignore disallowKeywords\r\n                    }\r\n\r\n                    allowedProducts = prevConfig ? allowedProductsByOption[i] : options[i].products.slice(0);\r\n                    optionPriceDiff = 0;\r\n\r\n                    if (typeof allowedProducts[0] !== 'undefined' &&\r\n                        typeof optionPrices[allowedProducts[0]] !== 'undefined') {\r\n                        allowedProductMinPrice = this._getAllowedProductWithMinPrice(allowedProducts);\r\n                        optionFinalPrice = parseFloat(optionPrices[allowedProductMinPrice].finalPrice.amount);\r\n                        optionPriceDiff = optionFinalPrice - finalPrice;\r\n                        options[i].label = options[i].initialLabel;\r\n\r\n                        if (optionPriceDiff !== 0) {\r\n                            options[i].label += ' ' + priceUtils.formatPrice(\r\n                                optionPriceDiff,\r\n                                this.options.priceFormat,\r\n                                true\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    if (allowedProducts.length > 0 || _.include(allowedOptions, options[i].id)) {\r\n                        options[i].allowedProducts = allowedProducts;\r\n                        element.options[index] = new Option(this._getOptionLabel(options[i]), options[i].id);\r\n\r\n                        if (this.options.spConfig.canDisplayShowOutOfStockStatus) {\r\n                            filteredSalableProducts = $(this.options.spConfig.salable[attributeId][options[i].id]).\r\n                            filter(options[i].allowedProducts);\r\n                            canDisplayOutOfStockProducts = filteredSalableProducts.length === 0;\r\n                        }\r\n\r\n                        if (typeof options[i].price !== 'undefined') {\r\n                            element.options[index].setAttribute('price', options[i].price);\r\n                        }\r\n\r\n                        if (allowedProducts.length === 0 || canDisplayOutOfStockProducts) {\r\n                            element.options[index].disabled = true;\r\n                        }\r\n\r\n                        element.options[index].config = options[i];\r\n                        index++;\r\n                    }\r\n\r\n                    /* eslint-enable max-depth */\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Generate the label associated with a configurable option. This includes the option's\r\n         * label or value and the option's price.\r\n         * @private\r\n         * @param {*} option - A single choice among a group of choices for a configurable option.\r\n         * @return {String} The option label with option value and price (e.g. Black +1.99)\r\n         */\r\n        _getOptionLabel: function (option) {\r\n            return option.label;\r\n        },\r\n\r\n        /**\r\n         * Removes an option's selections.\r\n         * @private\r\n         * @param {*} element - The element associated with a configurable option.\r\n         */\r\n        _clearSelect: function (element) {\r\n            var i;\r\n\r\n            for (i = element.options.length - 1; i >= 0; i--) {\r\n                element.remove(i);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Retrieve the attribute options associated with a specific attribute Id.\r\n         * @private\r\n         * @param {Number} attributeId - The id of the attribute whose configurable options are sought.\r\n         * @return {Object} Object containing the attribute options.\r\n         */\r\n        _getAttributeOptions: function (attributeId) {\r\n            if (this.options.spConfig.attributes[attributeId]) {\r\n                return this.options.spConfig.attributes[attributeId].options;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reload the price of the configurable product incorporating the prices of all of the\r\n         * configurable product's option selections.\r\n         */\r\n        _reloadPrice: function () {\r\n            $(this.options.priceHolderSelector).trigger('updatePrice', this._getPrices());\r\n        },\r\n\r\n        /**\r\n         * Get product various prices\r\n         * @returns {{}}\r\n         * @private\r\n         */\r\n        _getPrices: function () {\r\n            var prices = {},\r\n                elements = _.toArray(this.options.settings),\r\n                allowedProduct;\r\n\r\n            _.each(elements, function (element) {\r\n                var selected = element.options[element.selectedIndex],\r\n                    config = selected && selected.config,\r\n                    priceValue = this._calculatePrice({});\r\n\r\n                if (config && config.allowedProducts.length === 1) {\r\n                    priceValue = this._calculatePrice(config);\r\n                } else if (element.value) {\r\n                    allowedProduct = this._getAllowedProductWithMinPrice(config.allowedProducts);\r\n                    priceValue = this._calculatePrice({\r\n                        'allowedProducts': [\r\n                            allowedProduct\r\n                        ]\r\n                    });\r\n                }\r\n\r\n                if (!_.isEmpty(priceValue)) {\r\n                    prices.prices = priceValue;\r\n                }\r\n            }, this);\r\n\r\n            return prices;\r\n        },\r\n\r\n        /**\r\n         * Get product with minimum price from selected options.\r\n         *\r\n         * @param {Array} allowedProducts\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _getAllowedProductWithMinPrice: function (allowedProducts) {\r\n            var optionPrices = this.options.spConfig.optionPrices,\r\n                product = {},\r\n                optionMinPrice, optionFinalPrice;\r\n\r\n            _.each(allowedProducts, function (allowedProduct) {\r\n                optionFinalPrice = parseFloat(optionPrices[allowedProduct].finalPrice.amount);\r\n\r\n                if (_.isEmpty(product) || optionFinalPrice < optionMinPrice) {\r\n                    optionMinPrice = optionFinalPrice;\r\n                    product = allowedProduct;\r\n                }\r\n            }, this);\r\n\r\n            return product;\r\n        },\r\n\r\n        /**\r\n         * Returns prices for configured products\r\n         *\r\n         * @param {*} config - Products configuration\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _calculatePrice: function (config) {\r\n            var displayPrices = $(this.options.priceHolderSelector).priceBox('option').prices,\r\n                newPrices = this.options.spConfig.optionPrices[_.first(config.allowedProducts)] || {};\r\n\r\n            _.each(displayPrices, function (price, code) {\r\n                displayPrices[code].amount = newPrices[code] ? newPrices[code].amount - displayPrices[code].amount : 0;\r\n            });\r\n\r\n            return displayPrices;\r\n        },\r\n\r\n        /**\r\n         * Returns Simple product Id\r\n         *  depending on current selected option.\r\n         *\r\n         * @private\r\n         * @param {HTMLElement} element\r\n         * @returns {String|undefined}\r\n         */\r\n        _getSimpleProductId: function (element) {\r\n            // TODO: Rewrite algorithm. It should return ID of\r\n            //        simple product based on selected options.\r\n            var allOptions = element.config.options,\r\n                value = element.value,\r\n                config;\r\n\r\n            config = _.filter(allOptions, function (option) {\r\n                return option.id === value;\r\n            });\r\n            config = _.first(config);\r\n\r\n            return _.isEmpty(config) ?\r\n                undefined :\r\n                _.first(config.allowedProducts);\r\n\r\n        },\r\n\r\n        /**\r\n         * Show or hide regular price block\r\n         *\r\n         * @param {*} optionId\r\n         * @private\r\n         */\r\n        _displayRegularPriceBlock: function (optionId) {\r\n            var shouldBeShown = true,\r\n                $priceBox = this.element.parents(this.options.selectorProduct)\r\n                    .find(this.options.selectorProductPrice);\r\n\r\n            _.each(this.options.settings, function (element) {\r\n                if (element.value === '') {\r\n                    shouldBeShown = false;\r\n                }\r\n            });\r\n\r\n            if (shouldBeShown &&\r\n                this.options.spConfig.optionPrices[optionId].oldPrice.amount !==\r\n                this.options.spConfig.optionPrices[optionId].finalPrice.amount\r\n            ) {\r\n                $(this.options.slyOldPriceSelector).show();\r\n            } else {\r\n                $(this.options.slyOldPriceSelector).hide();\r\n            }\r\n\r\n            $(document).trigger('updateMsrpPriceBlock',\r\n                [\r\n                    optionId,\r\n                    this.options.spConfig.optionPrices,\r\n                    $priceBox\r\n                ]\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Show or hide normal price label\r\n         *\r\n         * @private\r\n         */\r\n        _displayNormalPriceLabel: function () {\r\n            var shouldBeShown = false;\r\n\r\n            _.each(this.options.settings, function (element) {\r\n                if (element.value === '') {\r\n                    shouldBeShown = true;\r\n                }\r\n            });\r\n\r\n            if (shouldBeShown) {\r\n                $(this.options.normalPriceLabelSelector).show();\r\n            } else {\r\n                $(this.options.normalPriceLabelSelector).hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Callback which fired after gallery gets initialized.\r\n         *\r\n         * @param {HTMLElement} element - DOM element associated with gallery.\r\n         */\r\n        _onGalleryLoaded: function (element) {\r\n            var galleryObject = element.data('gallery');\r\n\r\n            this.options.mediaGalleryInitial = galleryObject.returnCurrentImages();\r\n        },\r\n\r\n        /**\r\n         * Show or hide tier price block\r\n         *\r\n         * @param {*} optionId\r\n         * @private\r\n         */\r\n        _displayTierPriceBlock: function (optionId) {\r\n            var tierPrices = typeof optionId != 'undefined' && this.options.spConfig.optionPrices[optionId].tierPrices;\r\n\r\n            if (_.isArray(tierPrices) && tierPrices.length > 0) {\r\n\r\n                if (this.options.tierPriceTemplate) {\r\n                    $(this.options.tierPriceBlockSelector).html(\r\n                        mageTemplate(this.options.tierPriceTemplate, {\r\n                            'tierPrices': tierPrices,\r\n                            '$t': $t,\r\n                            'currencyFormat': this.options.spConfig.currencyFormat,\r\n                            'priceUtils': priceUtils\r\n                        })\r\n                    ).show();\r\n                }\r\n            } else {\r\n                $(this.options.tierPriceBlockSelector).hide();\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.configurable;\r\n});\r\n","Magento_ConfigurableProduct/js/options-updater.js":"define([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, _, customerData) {\r\n    'use strict';\r\n\r\n    var selectors = {\r\n        formSelector: '#product_addtocart_form',\r\n        productIdSelector: '#product_addtocart_form [name=\"product\"]',\r\n        itemIdSelector: '#product_addtocart_form [name=\"item\"]'\r\n    },\r\n    cartData = customerData.get('cart'),\r\n    productId = $(selectors.productIdSelector).val(),\r\n    itemId = $(selectors.itemIdSelector).val(),\r\n\r\n    /**\r\n    * set productOptions according to cart data from customer-data\r\n    *\r\n    * @param {Object} data - cart data from customer-data\r\n    * @returns {Boolean} - whether the new options differ from previous\r\n    */\r\n    setProductOptions = function (data) {\r\n        var changedProductOptions;\r\n\r\n        if (!(data && data.items && data.items.length && productId)) {\r\n            return false;\r\n        }\r\n        changedProductOptions = _.find(data.items, function (item) {\r\n            if (item['item_id'] === itemId) {\r\n                return item['product_id'] === productId;\r\n            }\r\n        });\r\n        changedProductOptions = changedProductOptions && changedProductOptions.options &&\r\n            changedProductOptions.options.reduce(function (obj, val) {\r\n                obj[val['option_id']] = val['option_value'];\r\n\r\n                return obj;\r\n            }, {});\r\n\r\n        if (JSON.stringify(this.productOptions || {}) === JSON.stringify(changedProductOptions || {})) {\r\n            return false;\r\n        }\r\n\r\n        this.productOptions = changedProductOptions;\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n    * Listens to update of cart data or options initialization and update selected option according to customer data\r\n    *\r\n    */\r\n    listen = function () {\r\n        cartData.subscribe(function (updateCartData) {\r\n            if (this.setProductOptions(updateCartData)) {\r\n                this.updateOptions();\r\n            }\r\n        }.bind(this));\r\n        $(selectors.formSelector).on(this.eventName, function () {\r\n            this.setProductOptions(cartData());\r\n            this.updateOptions();\r\n        }.bind(this));\r\n    },\r\n\r\n    /**\r\n    * Updater constructor function\r\n    *\r\n    */\r\n    Updater = function (eventName, updateOptionsCallback) {\r\n        if (this instanceof Updater) {\r\n            this.eventName = eventName;\r\n            this.updateOptions = updateOptionsCallback;\r\n            this.productOptions = {};\r\n        }\r\n    };\r\n\r\n    Updater.prototype.setProductOptions = setProductOptions;\r\n    Updater.prototype.listen = listen;\r\n\r\n    return Updater;\r\n});\r\n","Magento_ConfigurableProduct/js/product/view/product-info-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Catalog/js/product/view/product-info'\r\n], function (_, productInfo) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Returns info about configurable products in form.\r\n     *\r\n     * @param {jQuery} $form\r\n     * @return {Array}\r\n     */\r\n    return function ($form) {\r\n        var optionValues = [],\r\n            product = _.findWhere($form.serializeArray(), {\r\n                name: 'product'\r\n            }),\r\n            productId;\r\n\r\n        if (!_.isUndefined(product)) {\r\n            productId = product.value;\r\n            _.each($form.serializeArray(), function (item) {\r\n                if (item.name.indexOf('super_attribute') !== -1) {\r\n                    optionValues.push(item.value);\r\n                }\r\n            });\r\n            optionValues.sort();\r\n            productInfo().push(\r\n                {\r\n                    'id': productId,\r\n                    'optionValues': optionValues\r\n                }\r\n            );\r\n        }\r\n\r\n        return _.uniq(productInfo(), function (item) {\r\n            var optionValuesStr = item.optionValues ? item.optionValues.join() : '';\r\n\r\n            return item.id + optionValuesStr;\r\n        });\r\n    };\r\n});\r\n\r\n","Magento_Cookie/js/jquery.storageapi.extended.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery/jquery.cookie',\r\n    'jquery/jquery.storageapi.min'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     *\r\n     * @param {Object} storage\r\n     * @private\r\n     */\r\n    function _extend(storage) {\r\n        var cookiesConfig = window.cookiesConfig || {};\r\n\r\n        $.extend(storage, {\r\n            _secure: !!cookiesConfig.secure,\r\n            _samesite: cookiesConfig.samesite ? cookiesConfig.samesite : 'lax',\r\n\r\n            /**\r\n             * Set value under name\r\n             * @param {String} name\r\n             * @param {String} value\r\n             * @param {Object} [options]\r\n             */\r\n            setItem: function (name, value, options) {\r\n                var _default = {\r\n                    expires: this._expires,\r\n                    path: this._path,\r\n                    domain: this._domain,\r\n                    secure: this._secure,\r\n                    samesite: this._samesite\r\n                };\r\n\r\n                $.cookie(this._prefix + name, value, $.extend(_default, options || {}));\r\n            },\r\n\r\n            /**\r\n             * Set default options\r\n             * @param {Object} c\r\n             * @returns {storage}\r\n             */\r\n            setConf: function (c) {\r\n                if (c.path) {\r\n                    this._path = c.path;\r\n                }\r\n\r\n                if (c.domain) {\r\n                    this._domain = c.domain;\r\n                }\r\n\r\n                if (c.expires) {\r\n                    this._expires = c.expires;\r\n                }\r\n\r\n                if (typeof c.secure !== 'undefined') {\r\n                    this._secure = c.secure;\r\n                }\r\n\r\n                if (typeof c.samesite !== 'undefined') {\r\n                    this._samesite = c.samesite;\r\n                }\r\n\r\n                return this;\r\n            }\r\n        });\r\n    }\r\n\r\n    if (window.cookieStorage) {\r\n        _extend(window.cookieStorage);\r\n    }\r\n});\r\n","Magento_Cookie/js/notices.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'mage/cookies'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.cookieNotices', {\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            if ($.mage.cookies.get(this.options.cookieName)) {\r\n                this.element.hide();\r\n            } else {\r\n                this.element.show();\r\n            }\r\n            $(this.options.cookieAllowButtonSelector).on('click', $.proxy(function () {\r\n                var cookieExpires = new Date(new Date().getTime() + this.options.cookieLifetime * 1000);\r\n\r\n                $.mage.cookies.set(this.options.cookieName, JSON.stringify(this.options.cookieValue), {\r\n                    expires: cookieExpires\r\n                });\r\n\r\n                if ($.mage.cookies.get(this.options.cookieName)) {\r\n                    this.element.hide();\r\n                    $(document).trigger('user:allowed:save:cookie');\r\n                } else {\r\n                    window.location.href = this.options.noCookiesUrl;\r\n                }\r\n            }, this));\r\n        }\r\n    });\r\n\r\n    return $.mage.cookieNotices;\r\n});\r\n","Magento_Cookie/js/require-cookie.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery-ui-modules/widget',\r\n    'mage/mage',\r\n    'mage/translate'\r\n], function ($, alert) {\r\n    'use strict';\r\n\r\n    $.widget('mage.requireCookie', {\r\n        options: {\r\n            event: 'click',\r\n            noCookieUrl: 'enable-cookies',\r\n            triggers: ['.action.login', '.action.submit'],\r\n            isRedirectCmsPage: true\r\n        },\r\n\r\n        /**\r\n         * Constructor\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._bind();\r\n        },\r\n\r\n        /**\r\n         * This method binds elements found in this widget.\r\n         * @private\r\n         */\r\n        _bind: function () {\r\n            var events = {};\r\n\r\n            $.each(this.options.triggers, function (index, value) {\r\n                events['click ' + value] = '_checkCookie';\r\n            });\r\n            this._on(events);\r\n        },\r\n\r\n        /**\r\n         * This method set the url for the redirect.\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _checkCookie: function (event) {\r\n            if (navigator.cookieEnabled) {\r\n                return;\r\n            }\r\n\r\n            event.preventDefault();\r\n\r\n            if (this.options.isRedirectCmsPage) {\r\n                window.location = this.options.noCookieUrl;\r\n            } else {\r\n                alert({\r\n                    content: $.mage.__('Cookies are disabled in your browser.')\r\n                });\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.requireCookie;\r\n});\r\n","Magento_Customer/js/address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate'\r\n], function ($, confirm) {\r\n    'use strict';\r\n\r\n    $.widget('mage.address', {\r\n        /**\r\n         * Options common to all instances of this widget.\r\n         * @type {Object}\r\n         */\r\n        options: {\r\n            deleteConfirmMessage: $.mage.__('Are you sure you want to delete this address?')\r\n        },\r\n\r\n        /**\r\n         * Bind event handlers for adding and deleting addresses.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var options         = this.options,\r\n                addAddress      = options.addAddress,\r\n                deleteAddress   = options.deleteAddress;\r\n\r\n            if (addAddress) {\r\n                $(document).on('click', addAddress, this._addAddress.bind(this));\r\n            }\r\n\r\n            if (deleteAddress) {\r\n                $(document).on('click', deleteAddress, this._deleteAddress.bind(this));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add a new address.\r\n         * @private\r\n         */\r\n        _addAddress: function () {\r\n            window.location = this.options.addAddressLocation;\r\n        },\r\n\r\n        /**\r\n         * Delete the address whose id is specified in a data attribute after confirmation from the user.\r\n         * @private\r\n         * @param {jQuery.Event} e\r\n         * @return {Boolean}\r\n         */\r\n        _deleteAddress: function (e) {\r\n            var self = this;\r\n\r\n            confirm({\r\n                content: this.options.deleteConfirmMessage,\r\n                actions: {\r\n\r\n                    /** @inheritdoc */\r\n                    confirm: function () {\r\n                        if (typeof $(e.target).parent().data('address') !== 'undefined') {\r\n                            window.location = self.options.deleteUrlPrefix + $(e.target).parent().data('address') +\r\n                                '/form_key/' + $.mage.cookies.get('form_key');\r\n                        } else {\r\n                            window.location = self.options.deleteUrlPrefix + $(e.target).data('address') +\r\n                                '/form_key/' + $.mage.cookies.get('form_key');\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            return false;\r\n        }\r\n    });\r\n\r\n    return $.mage.address;\r\n});\r\n","Magento_Customer/js/addressValidation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mageUtils',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/postcode-validator',\r\n    'jquery-ui-modules/widget',\r\n    'validation'\r\n], function ($, __, utils, $t, postCodeValidator) {\r\n    'use strict';\r\n\r\n    $.widget('mage.addressValidation', {\r\n        options: {\r\n            selectors: {\r\n                button: '[data-action=save-address]',\r\n                zip: '#zip',\r\n                country: 'select[name=\"country_id\"]:visible'\r\n            }\r\n        },\r\n\r\n        zipInput: null,\r\n        countrySelect: null,\r\n\r\n        /**\r\n         * Validation creation\r\n         *\r\n         * @protected\r\n         */\r\n        _create: function () {\r\n            var button = $(this.options.selectors.button, this.element);\r\n\r\n            this.zipInput = $(this.options.selectors.zip, this.element);\r\n            this.countrySelect = $(this.options.selectors.country, this.element);\r\n\r\n            this.element.validation({\r\n\r\n                /**\r\n                 * Submit Handler\r\n                 * @param {Element} form - address form\r\n                 */\r\n                submitHandler: function (form) {\r\n\r\n                    button.attr('disabled', true);\r\n                    form.submit();\r\n                }\r\n            });\r\n\r\n            this._addPostCodeValidation();\r\n        },\r\n\r\n        /**\r\n         * Add postcode validation\r\n         *\r\n         * @protected\r\n         */\r\n        _addPostCodeValidation: function () {\r\n            var self = this;\r\n\r\n            this.zipInput.on('keyup', __.debounce(function (event) {\r\n                    var valid = self._validatePostCode(event.target.value);\r\n\r\n                    self._renderValidationResult(valid);\r\n                }, 500)\r\n            );\r\n\r\n            this.countrySelect.on('change', function () {\r\n                var valid = self._validatePostCode(self.zipInput.val());\r\n\r\n                self._renderValidationResult(valid);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Validate post code value.\r\n         *\r\n         * @protected\r\n         * @param {String} postCode - post code\r\n         * @return {Boolean} Whether is post code valid\r\n         */\r\n        _validatePostCode: function (postCode) {\r\n            var countryId = this.countrySelect.val();\r\n\r\n            if (postCode === null) {\r\n                return true;\r\n            }\r\n\r\n            return postCodeValidator.validate(postCode, countryId, this.options.postCodes);\r\n        },\r\n\r\n        /**\r\n         * Renders warning messages for invalid post code.\r\n         *\r\n         * @protected\r\n         * @param {Boolean} valid\r\n         */\r\n        _renderValidationResult: function (valid) {\r\n            var warnMessage,\r\n                alertDiv = this.zipInput.next();\r\n\r\n            if (!valid) {\r\n                warnMessage = $t('Provided Zip/Postal Code seems to be invalid.');\r\n\r\n                if (postCodeValidator.validatedPostCodeExample.length) {\r\n                    warnMessage += $t(' Example: ') + postCodeValidator.validatedPostCodeExample.join('; ') + '. ';\r\n                }\r\n                warnMessage += $t('If you believe it is the right one you can ignore this notice.');\r\n            }\r\n\r\n            alertDiv.children(':first').text(warnMessage);\r\n\r\n            if (valid) {\r\n                alertDiv.hide();\r\n            } else {\r\n                alertDiv.show();\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.addressValidation;\r\n});\r\n","Magento_Customer/js/block-submit-on-send.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/mage'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config) {\r\n        var dataForm = $('#' + config.formId);\r\n\r\n        dataForm.on('submit', function () {\r\n            $(this).find(':submit').attr('disabled', 'disabled');\r\n\r\n            if (this.isValid === false) {\r\n                $(this).find(':submit').prop('disabled', false);\r\n            }\r\n            this.isValid = true;\r\n        });\r\n        dataForm.on('invalid-form.validate', function () {\r\n            $(this).find(':submit').prop('disabled', false);\r\n            this.isValid = false;\r\n        });\r\n    };\r\n});\r\n","Magento_Customer/js/change-email-password.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.changeEmailPassword', {\r\n        options: {\r\n            changeEmailSelector: '[data-role=change-email]',\r\n            changePasswordSelector: '[data-role=change-password]',\r\n            mainContainerSelector: '[data-container=change-email-password]',\r\n            titleSelector: '[data-title=change-email-password]',\r\n            emailContainerSelector: '[data-container=change-email]',\r\n            newPasswordContainerSelector: '[data-container=new-password]',\r\n            confirmPasswordContainerSelector: '[data-container=confirm-password]',\r\n            currentPasswordSelector: '[data-input=current-password]',\r\n            emailSelector: '[data-input=change-email]',\r\n            newPasswordSelector: '[data-input=new-password]',\r\n            confirmPasswordSelector: '[data-input=confirm-password]'\r\n        },\r\n\r\n        /**\r\n         * Create widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('change', $.proxy(function () {\r\n                this._checkChoice();\r\n            }, this));\r\n\r\n            this._checkChoice();\r\n            this._bind();\r\n        },\r\n\r\n        /**\r\n         * Event binding, will monitor change, keyup and paste events.\r\n         * @private\r\n         */\r\n        _bind: function () {\r\n            this._on($(this.options.emailSelector), {\r\n                'change': this._updatePasswordFieldWithEmailValue,\r\n                'keyup': this._updatePasswordFieldWithEmailValue,\r\n                'paste': this._updatePasswordFieldWithEmailValue\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Check choice\r\n         * @private\r\n         */\r\n        _checkChoice: function () {\r\n            if ($(this.options.changeEmailSelector).is(':checked') &&\r\n                $(this.options.changePasswordSelector).is(':checked')) {\r\n                this._showAll();\r\n            } else if ($(this.options.changeEmailSelector).is(':checked')) {\r\n                this._showEmail();\r\n            } else if ($(this.options.changePasswordSelector).is(':checked')) {\r\n                this._showPassword();\r\n            } else {\r\n                this._hideAll();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Show email and password input fields\r\n         * @private\r\n         */\r\n        _showAll: function () {\r\n            $(this.options.titleSelector).html(this.options.titleChangeEmailAndPassword);\r\n\r\n            $(this.options.mainContainerSelector).show();\r\n            $(this.options.emailContainerSelector).show();\r\n            $(this.options.newPasswordContainerSelector).show();\r\n            $(this.options.confirmPasswordContainerSelector).show();\r\n\r\n            $(this.options.currentPasswordSelector).attr('data-validate', '{required:true}').prop('disabled', false);\r\n            $(this.options.emailSelector).attr('data-validate', '{required:true}').prop('disabled', false);\r\n            this._updatePasswordFieldWithEmailValue();\r\n            $(this.options.confirmPasswordSelector).attr(\r\n                'data-validate',\r\n                '{required:true, equalTo:\"' + this.options.newPasswordSelector + '\"}'\r\n            ).prop('disabled', false);\r\n        },\r\n\r\n        /**\r\n         * Hide email and password input fields\r\n         * @private\r\n         */\r\n        _hideAll: function () {\r\n            $(this.options.mainContainerSelector).hide();\r\n            $(this.options.emailContainerSelector).hide();\r\n            $(this.options.newPasswordContainerSelector).hide();\r\n            $(this.options.confirmPasswordContainerSelector).hide();\r\n\r\n            $(this.options.currentPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n            $(this.options.emailSelector).removeAttr('data-validate').prop('disabled', true);\r\n            $(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n            $(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n        },\r\n\r\n        /**\r\n         * Show email input fields\r\n         * @private\r\n         */\r\n        _showEmail: function () {\r\n            this._showAll();\r\n            $(this.options.titleSelector).html(this.options.titleChangeEmail);\r\n\r\n            $(this.options.newPasswordContainerSelector).hide();\r\n            $(this.options.confirmPasswordContainerSelector).hide();\r\n\r\n            $(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n            $(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled', true);\r\n        },\r\n\r\n        /**\r\n         * Show password input fields\r\n         * @private\r\n         */\r\n        _showPassword: function () {\r\n            this._showAll();\r\n            $(this.options.titleSelector).html(this.options.titleChangePassword);\r\n\r\n            $(this.options.emailContainerSelector).hide();\r\n\r\n            $(this.options.emailSelector).removeAttr('data-validate').prop('disabled', true);\r\n        },\r\n\r\n        /**\r\n         * Update password validation rules with email input field value\r\n         * @private\r\n         */\r\n        _updatePasswordFieldWithEmailValue: function () {\r\n            $(this.options.newPasswordSelector).attr(\r\n                'data-validate',\r\n                '{required:true, ' +\r\n                '\\'validate-customer-password\\':true, ' +\r\n                '\\'password-not-equal-to-user-name\\':\\'' + $(this.options.emailSelector).val() + '\\'}'\r\n            ).prop('disabled', false);\r\n        }\r\n    });\r\n\r\n    return $.mage.changeEmailPassword;\r\n});\r\n","Magento_Customer/js/checkout-balance.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.checkoutBalance', {\r\n        /**\r\n         * Initialize store credit events\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.eventData = {\r\n                price: this.options.balance,\r\n                totalPrice: 0\r\n            };\r\n            this.element.on('change', $.proxy(function (e) {\r\n                if ($(e.target).is(':checked')) {\r\n                    this.eventData.price = -1 * this.options.balance;\r\n                } else {\r\n                    if (this.options.amountSubstracted) { //eslint-disable-line no-lonely-if\r\n                        this.eventData.price = parseFloat(this.options.usedAmount);\r\n                        this.options.amountSubstracted = false;\r\n                    } else {\r\n                        this.eventData.price = parseFloat(this.options.balance);\r\n                    }\r\n                }\r\n                this.element.trigger('updateCheckoutPrice', this.eventData);\r\n            }, this));\r\n        }\r\n    });\r\n\r\n    return $.mage.checkoutBalance;\r\n});\r\n","Magento_Customer/js/customer-data.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'ko',\r\n    'Magento_Customer/js/section-config',\r\n    'mage/url',\r\n    'mage/storage',\r\n    'jquery/jquery-storageapi'\r\n], function ($, _, ko, sectionConfig, url) {\r\n    'use strict';\r\n\r\n    var options = {\r\n            cookieLifeTime: 86400 //1 day by default\r\n        },\r\n        storage,\r\n        storageInvalidation,\r\n        invalidateCacheBySessionTimeOut,\r\n        invalidateCacheByCloseCookieSession,\r\n        dataProvider,\r\n        buffer,\r\n        customerData,\r\n        deferred = $.Deferred();\r\n\r\n    url.setBaseUrl(window.BASE_URL);\r\n    options.sectionLoadUrl = url.build('customer/section/load');\r\n\r\n    /**\r\n     * Storage initialization\r\n     */\r\n    function initStorage() {\r\n        $.cookieStorage.setConf({\r\n            path: '/',\r\n            expires: new Date(Date.now() + parseInt(options.cookieLifeTime, 10) * 1000),\r\n            samesite: 'lax'\r\n        });\r\n        storage = $.initNamespaceStorage('mage-cache-storage').localStorage;\r\n        storageInvalidation = $.initNamespaceStorage('mage-cache-storage-section-invalidation').localStorage;\r\n    }\r\n\r\n    // Initialize storage with default parameters to prevent JS errors while component still not initialized\r\n    initStorage();\r\n\r\n    /**\r\n     * @param {Object} invalidateOptions\r\n     */\r\n    invalidateCacheBySessionTimeOut = function (invalidateOptions) {\r\n        var date;\r\n\r\n        if (new Date($.localStorage.get('mage-cache-timeout')) < new Date()) {\r\n            storage.removeAll();\r\n        }\r\n        date = new Date(Date.now() + parseInt(invalidateOptions.cookieLifeTime, 10) * 1000);\r\n        $.localStorage.set('mage-cache-timeout', date);\r\n    };\r\n\r\n    /**\r\n     * Invalidate Cache By Close Cookie Session\r\n     */\r\n    invalidateCacheByCloseCookieSession = function () {\r\n        if (!$.cookieStorage.isSet('mage-cache-sessid')) {\r\n            $.cookieStorage.set('mage-cache-sessid', true);\r\n            storage.removeAll();\r\n        }\r\n    };\r\n\r\n    dataProvider = {\r\n\r\n        /**\r\n         * @param {Object} sectionNames\r\n         * @return {Object}\r\n         */\r\n        getFromStorage: function (sectionNames) {\r\n            var result = {};\r\n\r\n            _.each(sectionNames, function (sectionName) {\r\n                result[sectionName] = storage.get(sectionName);\r\n            });\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} sectionNames\r\n         * @param {Boolean} forceNewSectionTimestamp\r\n         * @return {*}\r\n         */\r\n        getFromServer: function (sectionNames, forceNewSectionTimestamp) {\r\n            var parameters;\r\n\r\n            sectionNames = sectionConfig.filterClientSideSections(sectionNames);\r\n            parameters = _.isArray(sectionNames) && sectionNames.indexOf('*') < 0 ? {\r\n                sections: sectionNames.join(',')\r\n            } : [];\r\n            parameters['force_new_section_timestamp'] = forceNewSectionTimestamp;\r\n\r\n            return $.getJSON(options.sectionLoadUrl, parameters).fail(function (jqXHR) {\r\n                throw new Error(jqXHR);\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @param {Function} target\r\n     * @param {String} sectionName\r\n     * @return {*}\r\n     */\r\n    ko.extenders.disposableCustomerData = function (target, sectionName) {\r\n        var sectionDataIds, newSectionDataIds = {};\r\n\r\n        target.subscribe(function () {\r\n            setTimeout(function () {\r\n                storage.remove(sectionName);\r\n                sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\r\n                _.each(sectionDataIds, function (data, name) {\r\n                    if (name !== sectionName) {\r\n                        newSectionDataIds[name] = data;\r\n                    }\r\n                });\r\n                $.cookieStorage.set('section_data_ids', newSectionDataIds);\r\n            }, 3000);\r\n        });\r\n\r\n        return target;\r\n    };\r\n\r\n    buffer = {\r\n        data: {},\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         */\r\n        bind: function (sectionName) {\r\n            this.data[sectionName] = ko.observable({});\r\n        },\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         * @return {Object}\r\n         */\r\n        get: function (sectionName) {\r\n            if (!this.data[sectionName]) {\r\n                this.bind(sectionName);\r\n            }\r\n\r\n            return this.data[sectionName];\r\n        },\r\n\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        keys: function () {\r\n            return _.keys(this.data);\r\n        },\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         * @param {Object} sectionData\r\n         */\r\n        notify: function (sectionName, sectionData) {\r\n            if (!this.data[sectionName]) {\r\n                this.bind(sectionName);\r\n            }\r\n            this.data[sectionName](sectionData);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} sections\r\n         */\r\n        update: function (sections) {\r\n            var sectionId = 0,\r\n                sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\r\n\r\n            _.each(sections, function (sectionData, sectionName) {\r\n                sectionId = sectionData['data_id'];\r\n                sectionDataIds[sectionName] = sectionId;\r\n                storage.set(sectionName, sectionData);\r\n                storageInvalidation.remove(sectionName);\r\n                buffer.notify(sectionName, sectionData);\r\n            });\r\n            $.cookieStorage.set('section_data_ids', sectionDataIds);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} sections\r\n         */\r\n        remove: function (sections) {\r\n            _.each(sections, function (sectionName) {\r\n                storage.remove(sectionName);\r\n\r\n                if (!sectionConfig.isClientSideSection(sectionName)) {\r\n                    storageInvalidation.set(sectionName, true);\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    customerData = {\r\n\r\n        /**\r\n         * Customer data initialization\r\n         */\r\n        init: function () {\r\n            var expiredSectionNames = this.getExpiredSectionNames();\r\n\r\n            if (expiredSectionNames.length > 0) {\r\n                _.each(dataProvider.getFromStorage(storage.keys()), function (sectionData, sectionName) {\r\n                    buffer.notify(sectionName, sectionData);\r\n                });\r\n                this.reload(expiredSectionNames, false);\r\n            } else {\r\n                _.each(dataProvider.getFromStorage(storage.keys()), function (sectionData, sectionName) {\r\n                    buffer.notify(sectionName, sectionData);\r\n                });\r\n\r\n                if (!_.isEmpty(storageInvalidation.keys())) {\r\n                    this.reload(storageInvalidation.keys(), false);\r\n                }\r\n            }\r\n\r\n            if (!_.isEmpty($.cookieStorage.get('section_data_clean'))) {\r\n                this.reload(sectionConfig.getSectionNames(), true);\r\n                $.cookieStorage.set('section_data_clean', '');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Storage init\r\n         */\r\n        initStorage: initStorage,\r\n\r\n        /**\r\n         * Retrieve the list of sections that has expired since last page reload.\r\n         *\r\n         * Sections can expire due to lifetime constraints or due to inconsistent storage information\r\n         * (validated by cookie data).\r\n         *\r\n         * @return {Array}\r\n         */\r\n        getExpiredSectionNames: function () {\r\n            var expiredSectionNames = [],\r\n                cookieSectionTimestamps = $.cookieStorage.get('section_data_ids') || {},\r\n                sectionLifetime = options.expirableSectionLifetime * 60,\r\n                currentTimestamp = Math.floor(Date.now() / 1000),\r\n                sectionData;\r\n\r\n            // process sections that can expire due to lifetime constraints\r\n            _.each(options.expirableSectionNames, function (sectionName) {\r\n                sectionData = storage.get(sectionName);\r\n\r\n                if (typeof sectionData === 'object' && sectionData['data_id'] + sectionLifetime <= currentTimestamp) {\r\n                    expiredSectionNames.push(sectionName);\r\n                }\r\n            });\r\n\r\n            // process sections that can expire due to storage information inconsistency\r\n            _.each(cookieSectionTimestamps, function (cookieSectionTimestamp, sectionName) {\r\n                sectionData = storage.get(sectionName);\r\n\r\n                if (typeof sectionData === 'undefined' ||\r\n                    typeof sectionData === 'object' &&\r\n                    cookieSectionTimestamp !== sectionData['data_id']\r\n                ) {\r\n                    expiredSectionNames.push(sectionName);\r\n                }\r\n            });\r\n\r\n            //remove expired section names of previously installed/enable modules\r\n            expiredSectionNames = _.intersection(expiredSectionNames, sectionConfig.getSectionNames());\r\n\r\n            return _.uniq(expiredSectionNames);\r\n        },\r\n\r\n        /**\r\n         * Check if some sections have to be reloaded.\r\n         *\r\n         * @deprecated Use getExpiredSectionNames instead.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        needReload: function () {\r\n            var expiredSectionNames = this.getExpiredSectionNames();\r\n\r\n            return expiredSectionNames.length > 0;\r\n        },\r\n\r\n        /**\r\n         * Retrieve the list of expired keys.\r\n         *\r\n         * @deprecated Use getExpiredSectionNames instead.\r\n         *\r\n         * @return {Array}\r\n         */\r\n        getExpiredKeys: function () {\r\n            return this.getExpiredSectionNames();\r\n        },\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         * @return {*}\r\n         */\r\n        get: function (sectionName) {\r\n            return buffer.get(sectionName);\r\n        },\r\n\r\n        /**\r\n         * @param {String} sectionName\r\n         * @param {Object} sectionData\r\n         */\r\n        set: function (sectionName, sectionData) {\r\n            var data = {};\r\n\r\n            data[sectionName] = sectionData;\r\n            buffer.update(data);\r\n        },\r\n\r\n        /**\r\n         * Avoid using this function directly 'cause of possible performance drawbacks.\r\n         * Each customer section reload brings new non-cached ajax request.\r\n         *\r\n         * @param {Array} sectionNames\r\n         * @param {Boolean} forceNewSectionTimestamp\r\n         * @return {*}\r\n         */\r\n        reload: function (sectionNames, forceNewSectionTimestamp) {\r\n            return dataProvider.getFromServer(sectionNames, forceNewSectionTimestamp).done(function (sections) {\r\n                $(document).trigger('customer-data-reload', [sectionNames]);\r\n                buffer.update(sections);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {Array} sectionNames\r\n         */\r\n        invalidate: function (sectionNames) {\r\n            var sectionDataIds,\r\n                sectionsNamesForInvalidation;\r\n\r\n            sectionsNamesForInvalidation = _.contains(sectionNames, '*') ? sectionConfig.getSectionNames() :\r\n                sectionNames;\r\n\r\n            $(document).trigger('customer-data-invalidate', [sectionsNamesForInvalidation]);\r\n            buffer.remove(sectionsNamesForInvalidation);\r\n            sectionDataIds = $.cookieStorage.get('section_data_ids') || {};\r\n\r\n            // Invalidate section in cookie (increase version of section with 1000)\r\n            _.each(sectionsNamesForInvalidation, function (sectionName) {\r\n                if (!sectionConfig.isClientSideSection(sectionName)) {\r\n                    sectionDataIds[sectionName] += 1000;\r\n                }\r\n            });\r\n            $.cookieStorage.set('section_data_ids', sectionDataIds);\r\n        },\r\n\r\n        /**\r\n         * Checks if customer data is initialized.\r\n         *\r\n         * @returns {jQuery.Deferred}\r\n         */\r\n        getInitCustomerData: function () {\r\n            return deferred.promise();\r\n        },\r\n\r\n        /**\r\n         * Reload sections on ajax complete\r\n         *\r\n         * @param {Object} jsonResponse\r\n         * @param {Object} settings\r\n         */\r\n        onAjaxComplete: function (jsonResponse, settings) {\r\n            var sections,\r\n                redirects;\r\n\r\n            if (settings.type.match(/post|put|delete/i)) {\r\n                sections = sectionConfig.getAffectedSections(settings.url);\r\n\r\n                if (sections && sections.length) {\r\n                    this.invalidate(sections);\r\n                    redirects = ['redirect', 'backUrl'];\r\n\r\n                    if (_.isObject(jsonResponse) && !_.isEmpty(_.pick(jsonResponse, redirects))) { //eslint-disable-line\r\n                        return;\r\n                    }\r\n                    this.reload(sections, true);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {Object} settings\r\n         * @constructor\r\n         */\r\n        'Magento_Customer/js/customer-data': function (settings) {\r\n            options = settings;\r\n\r\n            // re-init storage with a new settings\r\n            customerData.initStorage();\r\n\r\n            invalidateCacheBySessionTimeOut(settings);\r\n            invalidateCacheByCloseCookieSession();\r\n            customerData.init();\r\n            deferred.resolve();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Events listener\r\n     */\r\n    $(document).on('ajaxComplete', function (event, xhr, settings) {\r\n        customerData.onAjaxComplete(xhr.responseJSON, settings);\r\n    });\r\n\r\n    /**\r\n     * Events listener\r\n     */\r\n    $(document).on('submit', function (event) {\r\n        var sections;\r\n\r\n        if (event.target.method.match(/post|put|delete/i)) {\r\n            sections = sectionConfig.getAffectedSections(event.target.action);\r\n\r\n            if (sections) {\r\n                customerData.invalidate(sections);\r\n            }\r\n        }\r\n    });\r\n\r\n    return customerData;\r\n});\r\n","Magento_Customer/js/invalidation-processor.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiElement',\r\n    'Magento_Customer/js/customer-data'\r\n], function (_, Element, customerData) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        /**\r\n         * Initialize object\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.process(customerData);\r\n        },\r\n\r\n        /**\r\n         * Process all rules in loop, each rule can invalidate some sections in customer data\r\n         *\r\n         * @param {Object} customerDataObject\r\n         */\r\n        process: function (customerDataObject) {\r\n            _.each(this.invalidationRules, function (rule, ruleName) {\r\n                _.each(rule, function (ruleArgs, rulePath) {\r\n                    require([rulePath], function (Rule) {\r\n                        var currentRule = new Rule(ruleArgs);\r\n\r\n                        if (!_.isFunction(currentRule.process)) {\r\n                            throw new Error('Rule ' + ruleName + ' should implement invalidationProcessor interface');\r\n                        }\r\n                        currentRule.process(customerDataObject);\r\n                    });\r\n                });\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Customer/js/logout-redirect.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/mage'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (data) {\r\n        $($.mage.redirect(data.url, 'assign', 5000));\r\n    };\r\n});\r\n","Magento_Customer/js/password-strength-indicator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/zxcvbn',\r\n    'mage/translate',\r\n    'mage/validation'\r\n], function ($, zxcvbn, $t) {\r\n    'use strict';\r\n\r\n    $.widget('mage.passwordStrengthIndicator', {\r\n        options: {\r\n            cache: {},\r\n            passwordSelector: '[type=password]',\r\n            passwordStrengthMeterSelector: '[data-role=password-strength-meter]',\r\n            passwordStrengthMeterLabelSelector: '[data-role=password-strength-meter-label]',\r\n            formSelector: 'form',\r\n            emailSelector: 'input[type=\"email\"]'\r\n        },\r\n\r\n        /**\r\n         * Widget initialization\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.options.cache.input = $(this.options.passwordSelector, this.element);\r\n            this.options.cache.meter = $(this.options.passwordStrengthMeterSelector, this.element);\r\n            this.options.cache.label = $(this.options.passwordStrengthMeterLabelSelector, this.element);\r\n\r\n            // We need to look outside the module for backward compatibility, since someone can already use the module.\r\n            // @todo Narrow this selector in 2.3 so it doesn't accidentally finds the email field from the\r\n            // newsletter email field or any other \"email\" field.\r\n            this.options.cache.email = $(this.options.formSelector).find(this.options.emailSelector);\r\n            this._bind();\r\n        },\r\n\r\n        /**\r\n         * Event binding, will monitor change, keyup and paste events.\r\n         * @private\r\n         */\r\n        _bind: function () {\r\n            this._on(this.options.cache.input, {\r\n                'change': this._calculateStrength,\r\n                'keyup': this._calculateStrength,\r\n                'paste': this._calculateStrength\r\n            });\r\n\r\n            if (this.options.cache.email.length) {\r\n                this._on(this.options.cache.email, {\r\n                    'change': this._calculateStrength,\r\n                    'keyup': this._calculateStrength,\r\n                    'paste': this._calculateStrength\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Calculate password strength\r\n         * @private\r\n         */\r\n        _calculateStrength: function () {\r\n            var password = this._getPassword(),\r\n                isEmpty = password.length === 0,\r\n                zxcvbnScore,\r\n                displayScore,\r\n                isValid;\r\n\r\n            // Display score is based on combination of whether password is empty, valid, and zxcvbn strength\r\n            if (isEmpty) {\r\n                displayScore = 0;\r\n            } else {\r\n                this.options.cache.input.rules('add', {\r\n                    'password-not-equal-to-user-name': this.options.cache.email.val()\r\n                });\r\n\r\n                // We should only perform this check in case there is an email field on screen\r\n                if (this.options.cache.email.length &&\r\n                    password.toLowerCase() === this.options.cache.email.val().toLowerCase()) {\r\n                    displayScore = 1;\r\n                } else {\r\n                    isValid = $.validator.validateSingleElement(this.options.cache.input);\r\n                    zxcvbnScore = zxcvbn(password).score;\r\n                    displayScore = isValid && zxcvbnScore > 0 ? zxcvbnScore : 1;\r\n                }\r\n            }\r\n\r\n            // Update label\r\n            this._displayStrength(displayScore);\r\n        },\r\n\r\n        /**\r\n         * Display strength\r\n         * @param {Number} displayScore\r\n         * @private\r\n         */\r\n        _displayStrength: function (displayScore) {\r\n            var strengthLabel = '',\r\n                className;\r\n\r\n            switch (displayScore) {\r\n                case 0:\r\n                    strengthLabel = $t('No Password');\r\n                    className = 'password-none';\r\n                    break;\r\n\r\n                case 1:\r\n                    strengthLabel = $t('Weak');\r\n                    className = 'password-weak';\r\n                    break;\r\n\r\n                case 2:\r\n                    strengthLabel = $t('Medium');\r\n                    className = 'password-medium';\r\n                    break;\r\n\r\n                case 3:\r\n                    strengthLabel = $t('Strong');\r\n                    className = 'password-strong';\r\n                    break;\r\n\r\n                case 4:\r\n                    strengthLabel = $t('Very Strong');\r\n                    className = 'password-very-strong';\r\n                    break;\r\n            }\r\n\r\n            this.options.cache.meter\r\n                .removeClass()\r\n                .addClass(className);\r\n            this.options.cache.label.text(strengthLabel);\r\n        },\r\n\r\n        /**\r\n         * Get password value\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getPassword: function () {\r\n            return this.options.cache.input.val();\r\n        }\r\n    });\r\n\r\n    return $.mage.passwordStrengthIndicator;\r\n});\r\n","Magento_Customer/js/section-config.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['underscore'], function (_) {\r\n    'use strict';\r\n\r\n    var baseUrls = [],\r\n        sections = [],\r\n        clientSideSections = [],\r\n        sectionNames = [],\r\n        canonize;\r\n\r\n    /**\r\n     * @param {String} url\r\n     * @return {String}\r\n     */\r\n    canonize = function (url) {\r\n        var route = url;\r\n\r\n        _.some(baseUrls, function (baseUrl) {\r\n            route = url.replace(baseUrl, '');\r\n\r\n            return route !== url;\r\n        });\r\n\r\n        return route.replace(/^\\/?index.php\\/?/, '').toLowerCase();\r\n    };\r\n\r\n    return {\r\n        /**\r\n         * Returns a list of sections which should be invalidated for given URL.\r\n         * @param {String} url - URL which was requested.\r\n         * @return {Object} - List of sections to invalidate.\r\n         */\r\n        getAffectedSections: function (url) {\r\n            var route = canonize(url),\r\n                actions = _.find(sections, function (val, section) {\r\n                    var matched;\r\n\r\n                    // Covers the case where \"*\" works as a glob pattern.\r\n                    if (section.indexOf('*') >= 0) {\r\n                        section = section.replace(/\\*/g, '[^/]+') + '$';\r\n                        matched = route.match(section);\r\n\r\n                        return matched && matched[0] === route;\r\n                    }\r\n\r\n                    return route.indexOf(section) === 0;\r\n                });\r\n\r\n            return _.union(_.toArray(actions), sections['*']);\r\n        },\r\n\r\n        /**\r\n         * Filters the list of given sections to the ones defined as client side.\r\n         * @param {Object} allSections - List of sections to check.\r\n         * @return {Object} - List of filtered sections.\r\n         */\r\n        filterClientSideSections: function (allSections) {\r\n            return _.difference(allSections, clientSideSections);\r\n        },\r\n\r\n        /**\r\n         * Tells if section is defined as client side.\r\n         * @param {String} sectionName - Name of the section to check.\r\n         * @return {Boolean}\r\n         */\r\n        isClientSideSection: function (sectionName) {\r\n            return _.contains(clientSideSections, sectionName);\r\n        },\r\n\r\n        /**\r\n         * Returns array of section names.\r\n         * @returns {Array}\r\n         */\r\n        getSectionNames: function () {\r\n            return sectionNames;\r\n        },\r\n\r\n        /**\r\n         * @param {Object} options\r\n         * @constructor\r\n         */\r\n        'Magento_Customer/js/section-config': function (options) {\r\n            baseUrls = options.baseUrls;\r\n            sections = options.sections;\r\n            clientSideSections = options.clientSideSections;\r\n            sectionNames = options.sectionNames;\r\n        }\r\n    };\r\n});\r\n","Magento_Customer/js/show-password.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiComponent'\r\n], function ($, Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        passwordSelector: '',\r\n        passwordInputType: 'password',\r\n        textInputType: 'text',\r\n\r\n        defaults: {\r\n            template: 'Magento_Customer/show-password',\r\n            isPasswordVisible: false\r\n        },\r\n\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe(['isPasswordVisible']);\r\n\r\n            this.isPasswordVisible.subscribe(function (isChecked) {\r\n                this._showPassword(isChecked);\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Show/Hide password\r\n         * @private\r\n         */\r\n        _showPassword: function (isChecked) {\r\n            $(this.passwordSelector).attr('type',\r\n                isChecked ? this.textInputType : this.passwordInputType\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_Customer/js/validation.js":"define([\r\n    'jquery',\r\n    'moment',\r\n    'mageUtils',\r\n    'jquery/validate',\r\n    'validation',\r\n    'mage/translate'\r\n], function ($, moment, utils) {\r\n    'use strict';\r\n\r\n    $.validator.addMethod(\r\n        'validate-date',\r\n        function (value, element, params) {\r\n            var dateFormat = utils.normalizeDate(params.dateFormat);\r\n\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            return moment(value, dateFormat, true).isValid();\r\n        },\r\n        $.mage.__('Invalid date')\r\n    );\r\n\r\n    $.validator.addMethod(\r\n        'validate-dob',\r\n        function (value, element, params) {\r\n            var dateFormat = utils.convertToMomentFormat(params.dateFormat);\r\n\r\n            if (value === '') {\r\n                return true;\r\n            }\r\n\r\n            return moment(value, dateFormat).isBefore(moment());\r\n        },\r\n        $.mage.__('The Date of Birth should not be greater than today.')\r\n    );\r\n});\r\n","Magento_Customer/js/zxcvbn.js":"/*\r\n * Realistic Password Strength Estimator v4.2.0\r\n *\r\n * Copyright (c) 2012-2015 Dan Wheeler and Dropbox, Inc.\r\n *\r\n * See https://github.com/dropbox/zxcvbn/blob/master/LICENSE.txt\r\n */\r\n(function (f) {\r\n    if (typeof exports === \"object\" && typeof module !== \"undefined\") {\r\n        module.exports = f()\r\n    } else if (typeof define === \"function\" && define.amd) {\r\n        define([], f)\r\n    } else {\r\n        var g;\r\n        if (typeof window !== \"undefined\") {\r\n            g = window\r\n        } else if (typeof global !== \"undefined\") {\r\n            g = global\r\n        } else if (typeof self !== \"undefined\") {\r\n            g = self\r\n        } else {\r\n            g = this\r\n        }\r\n        g.zxcvbn = f()\r\n    }\r\n})(function () {\r\n    var define, module, exports;\r\n    return (function e(t, n, r) {\r\n        function s(o, u) {\r\n            if (!n[o]) {\r\n                if (!t[o]) {\r\n                    var a = typeof require == \"function\" && require;\r\n                    if (!u && a)return a(o, !0);\r\n                    if (i)return i(o, !0);\r\n                    var f = new Error(\"Cannot find module '\" + o + \"'\");\r\n                    throw f.code = \"MODULE_NOT_FOUND\", f\r\n                }\r\n                var l = n[o] = {exports: {}};\r\n                t[o][0].call(l.exports, function (e) {\r\n                    var n = t[o][1][e];\r\n                    return s(n ? n : e)\r\n                }, l, l.exports, e, t, n, r)\r\n            }\r\n            return n[o].exports\r\n        }\r\n\r\n        var i = typeof require == \"function\" && require;\r\n        for (var o = 0; o < r.length; o++)s(r[o]);\r\n        return s\r\n    })({\r\n        1: [function (require, module, exports) {\r\n            var adjacency_graphs;\r\n            adjacency_graphs = {\r\n                qwerty: {\r\n                    \"!\": [\"`~\", null, null, \"2@\", \"qQ\", null],\r\n                    '\"': [\";:\", \"[{\", \"]}\", null, null, \"/?\"],\r\n                    \"#\": [\"2@\", null, null, \"4$\", \"eE\", \"wW\"],\r\n                    $: [\"3#\", null, null, \"5%\", \"rR\", \"eE\"],\r\n                    \"%\": [\"4$\", null, null, \"6^\", \"tT\", \"rR\"],\r\n                    \"&\": [\"6^\", null, null, \"8*\", \"uU\", \"yY\"],\r\n                    \"'\": [\";:\", \"[{\", \"]}\", null, null, \"/?\"],\r\n                    \"(\": [\"8*\", null, null, \"0)\", \"oO\", \"iI\"],\r\n                    \")\": [\"9(\", null, null, \"-_\", \"pP\", \"oO\"],\r\n                    \"*\": [\"7&\", null, null, \"9(\", \"iI\", \"uU\"],\r\n                    \"+\": [\"-_\", null, null, null, \"]}\", \"[{\"],\r\n                    \",\": [\"mM\", \"kK\", \"lL\", \".>\", null, null],\r\n                    \"-\": [\"0)\", null, null, \"=+\", \"[{\", \"pP\"],\r\n                    \".\": [\",<\", \"lL\", \";:\", \"/?\", null, null],\r\n                    \"/\": [\".>\", \";:\", \"'\\\"\", null, null, null],\r\n                    0: [\"9(\", null, null, \"-_\", \"pP\", \"oO\"],\r\n                    1: [\"`~\", null, null, \"2@\", \"qQ\", null],\r\n                    2: [\"1!\", null, null, \"3#\", \"wW\", \"qQ\"],\r\n                    3: [\"2@\", null, null, \"4$\", \"eE\", \"wW\"],\r\n                    4: [\"3#\", null, null, \"5%\", \"rR\", \"eE\"],\r\n                    5: [\"4$\", null, null, \"6^\", \"tT\", \"rR\"],\r\n                    6: [\"5%\", null, null, \"7&\", \"yY\", \"tT\"],\r\n                    7: [\"6^\", null, null, \"8*\", \"uU\", \"yY\"],\r\n                    8: [\"7&\", null, null, \"9(\", \"iI\", \"uU\"],\r\n                    9: [\"8*\", null, null, \"0)\", \"oO\", \"iI\"],\r\n                    \":\": [\"lL\", \"pP\", \"[{\", \"'\\\"\", \"/?\", \".>\"],\r\n                    \";\": [\"lL\", \"pP\", \"[{\", \"'\\\"\", \"/?\", \".>\"],\r\n                    \"<\": [\"mM\", \"kK\", \"lL\", \".>\", null, null],\r\n                    \"=\": [\"-_\", null, null, null, \"]}\", \"[{\"],\r\n                    \">\": [\",<\", \"lL\", \";:\", \"/?\", null, null],\r\n                    \"?\": [\".>\", \";:\", \"'\\\"\", null, null, null],\r\n                    \"@\": [\"1!\", null, null, \"3#\", \"wW\", \"qQ\"],\r\n                    A: [null, \"qQ\", \"wW\", \"sS\", \"zZ\", null],\r\n                    B: [\"vV\", \"gG\", \"hH\", \"nN\", null, null],\r\n                    C: [\"xX\", \"dD\", \"fF\", \"vV\", null, null],\r\n                    D: [\"sS\", \"eE\", \"rR\", \"fF\", \"cC\", \"xX\"],\r\n                    E: [\"wW\", \"3#\", \"4$\", \"rR\", \"dD\", \"sS\"],\r\n                    F: [\"dD\", \"rR\", \"tT\", \"gG\", \"vV\", \"cC\"],\r\n                    G: [\"fF\", \"tT\", \"yY\", \"hH\", \"bB\", \"vV\"],\r\n                    H: [\"gG\", \"yY\", \"uU\", \"jJ\", \"nN\", \"bB\"],\r\n                    I: [\"uU\", \"8*\", \"9(\", \"oO\", \"kK\", \"jJ\"],\r\n                    J: [\"hH\", \"uU\", \"iI\", \"kK\", \"mM\", \"nN\"],\r\n                    K: [\"jJ\", \"iI\", \"oO\", \"lL\", \",<\", \"mM\"],\r\n                    L: [\"kK\", \"oO\", \"pP\", \";:\", \".>\", \",<\"],\r\n                    M: [\"nN\", \"jJ\", \"kK\", \",<\", null, null],\r\n                    N: [\"bB\", \"hH\", \"jJ\", \"mM\", null, null],\r\n                    O: [\"iI\", \"9(\", \"0)\", \"pP\", \"lL\", \"kK\"],\r\n                    P: [\"oO\", \"0)\", \"-_\", \"[{\", \";:\", \"lL\"],\r\n                    Q: [null, \"1!\", \"2@\", \"wW\", \"aA\", null],\r\n                    R: [\"eE\", \"4$\", \"5%\", \"tT\", \"fF\", \"dD\"],\r\n                    S: [\"aA\", \"wW\", \"eE\", \"dD\", \"xX\", \"zZ\"],\r\n                    T: [\"rR\", \"5%\", \"6^\", \"yY\", \"gG\", \"fF\"],\r\n                    U: [\"yY\", \"7&\", \"8*\", \"iI\", \"jJ\", \"hH\"],\r\n                    V: [\"cC\", \"fF\", \"gG\", \"bB\", null, null],\r\n                    W: [\"qQ\", \"2@\", \"3#\", \"eE\", \"sS\", \"aA\"],\r\n                    X: [\"zZ\", \"sS\", \"dD\", \"cC\", null, null],\r\n                    Y: [\"tT\", \"6^\", \"7&\", \"uU\", \"hH\", \"gG\"],\r\n                    Z: [null, \"aA\", \"sS\", \"xX\", null, null],\r\n                    \"[\": [\"pP\", \"-_\", \"=+\", \"]}\", \"'\\\"\", \";:\"],\r\n                    \"\\\\\": [\"]}\", null, null, null, null, null],\r\n                    \"]\": [\"[{\", \"=+\", null, \"\\\\|\", null, \"'\\\"\"],\r\n                    \"^\": [\"5%\", null, null, \"7&\", \"yY\", \"tT\"],\r\n                    _: [\"0)\", null, null, \"=+\", \"[{\", \"pP\"],\r\n                    \"`\": [null, null, null, \"1!\", null, null],\r\n                    a: [null, \"qQ\", \"wW\", \"sS\", \"zZ\", null],\r\n                    b: [\"vV\", \"gG\", \"hH\", \"nN\", null, null],\r\n                    c: [\"xX\", \"dD\", \"fF\", \"vV\", null, null],\r\n                    d: [\"sS\", \"eE\", \"rR\", \"fF\", \"cC\", \"xX\"],\r\n                    e: [\"wW\", \"3#\", \"4$\", \"rR\", \"dD\", \"sS\"],\r\n                    f: [\"dD\", \"rR\", \"tT\", \"gG\", \"vV\", \"cC\"],\r\n                    g: [\"fF\", \"tT\", \"yY\", \"hH\", \"bB\", \"vV\"],\r\n                    h: [\"gG\", \"yY\", \"uU\", \"jJ\", \"nN\", \"bB\"],\r\n                    i: [\"uU\", \"8*\", \"9(\", \"oO\", \"kK\", \"jJ\"],\r\n                    j: [\"hH\", \"uU\", \"iI\", \"kK\", \"mM\", \"nN\"],\r\n                    k: [\"jJ\", \"iI\", \"oO\", \"lL\", \",<\", \"mM\"],\r\n                    l: [\"kK\", \"oO\", \"pP\", \";:\", \".>\", \",<\"],\r\n                    m: [\"nN\", \"jJ\", \"kK\", \",<\", null, null],\r\n                    n: [\"bB\", \"hH\", \"jJ\", \"mM\", null, null],\r\n                    o: [\"iI\", \"9(\", \"0)\", \"pP\", \"lL\", \"kK\"],\r\n                    p: [\"oO\", \"0)\", \"-_\", \"[{\", \";:\", \"lL\"],\r\n                    q: [null, \"1!\", \"2@\", \"wW\", \"aA\", null],\r\n                    r: [\"eE\", \"4$\", \"5%\", \"tT\", \"fF\", \"dD\"],\r\n                    s: [\"aA\", \"wW\", \"eE\", \"dD\", \"xX\", \"zZ\"],\r\n                    t: [\"rR\", \"5%\", \"6^\", \"yY\", \"gG\", \"fF\"],\r\n                    u: [\"yY\", \"7&\", \"8*\", \"iI\", \"jJ\", \"hH\"],\r\n                    v: [\"cC\", \"fF\", \"gG\", \"bB\", null, null],\r\n                    w: [\"qQ\", \"2@\", \"3#\", \"eE\", \"sS\", \"aA\"],\r\n                    x: [\"zZ\", \"sS\", \"dD\", \"cC\", null, null],\r\n                    y: [\"tT\", \"6^\", \"7&\", \"uU\", \"hH\", \"gG\"],\r\n                    z: [null, \"aA\", \"sS\", \"xX\", null, null],\r\n                    \"{\": [\"pP\", \"-_\", \"=+\", \"]}\", \"'\\\"\", \";:\"],\r\n                    \"|\": [\"]}\", null, null, null, null, null],\r\n                    \"}\": [\"[{\", \"=+\", null, \"\\\\|\", null, \"'\\\"\"],\r\n                    \"~\": [null, null, null, \"1!\", null, null]\r\n                },\r\n                dvorak: {\r\n                    \"!\": [\"`~\", null, null, \"2@\", \"'\\\"\", null],\r\n                    '\"': [null, \"1!\", \"2@\", \",<\", \"aA\", null],\r\n                    \"#\": [\"2@\", null, null, \"4$\", \".>\", \",<\"],\r\n                    $: [\"3#\", null, null, \"5%\", \"pP\", \".>\"],\r\n                    \"%\": [\"4$\", null, null, \"6^\", \"yY\", \"pP\"],\r\n                    \"&\": [\"6^\", null, null, \"8*\", \"gG\", \"fF\"],\r\n                    \"'\": [null, \"1!\", \"2@\", \",<\", \"aA\", null],\r\n                    \"(\": [\"8*\", null, null, \"0)\", \"rR\", \"cC\"],\r\n                    \")\": [\"9(\", null, null, \"[{\", \"lL\", \"rR\"],\r\n                    \"*\": [\"7&\", null, null, \"9(\", \"cC\", \"gG\"],\r\n                    \"+\": [\"/?\", \"]}\", null, \"\\\\|\", null, \"-_\"],\r\n                    \",\": [\"'\\\"\", \"2@\", \"3#\", \".>\", \"oO\", \"aA\"],\r\n                    \"-\": [\"sS\", \"/?\", \"=+\", null, null, \"zZ\"],\r\n                    \".\": [\",<\", \"3#\", \"4$\", \"pP\", \"eE\", \"oO\"],\r\n                    \"/\": [\"lL\", \"[{\", \"]}\", \"=+\", \"-_\", \"sS\"],\r\n                    0: [\"9(\", null, null, \"[{\", \"lL\", \"rR\"],\r\n                    1: [\"`~\", null, null, \"2@\", \"'\\\"\", null],\r\n                    2: [\"1!\", null, null, \"3#\", \",<\", \"'\\\"\"],\r\n                    3: [\"2@\", null, null, \"4$\", \".>\", \",<\"],\r\n                    4: [\"3#\", null, null, \"5%\", \"pP\", \".>\"],\r\n                    5: [\"4$\", null, null, \"6^\", \"yY\", \"pP\"],\r\n                    6: [\"5%\", null, null, \"7&\", \"fF\", \"yY\"],\r\n                    7: [\"6^\", null, null, \"8*\", \"gG\", \"fF\"],\r\n                    8: [\"7&\", null, null, \"9(\", \"cC\", \"gG\"],\r\n                    9: [\"8*\", null, null, \"0)\", \"rR\", \"cC\"],\r\n                    \":\": [null, \"aA\", \"oO\", \"qQ\", null, null],\r\n                    \";\": [null, \"aA\", \"oO\", \"qQ\", null, null],\r\n                    \"<\": [\"'\\\"\", \"2@\", \"3#\", \".>\", \"oO\", \"aA\"],\r\n                    \"=\": [\"/?\", \"]}\", null, \"\\\\|\", null, \"-_\"],\r\n                    \">\": [\",<\", \"3#\", \"4$\", \"pP\", \"eE\", \"oO\"],\r\n                    \"?\": [\"lL\", \"[{\", \"]}\", \"=+\", \"-_\", \"sS\"],\r\n                    \"@\": [\"1!\", null, null, \"3#\", \",<\", \"'\\\"\"],\r\n                    A: [null, \"'\\\"\", \",<\", \"oO\", \";:\", null],\r\n                    B: [\"xX\", \"dD\", \"hH\", \"mM\", null, null],\r\n                    C: [\"gG\", \"8*\", \"9(\", \"rR\", \"tT\", \"hH\"],\r\n                    D: [\"iI\", \"fF\", \"gG\", \"hH\", \"bB\", \"xX\"],\r\n                    E: [\"oO\", \".>\", \"pP\", \"uU\", \"jJ\", \"qQ\"],\r\n                    F: [\"yY\", \"6^\", \"7&\", \"gG\", \"dD\", \"iI\"],\r\n                    G: [\"fF\", \"7&\", \"8*\", \"cC\", \"hH\", \"dD\"],\r\n                    H: [\"dD\", \"gG\", \"cC\", \"tT\", \"mM\", \"bB\"],\r\n                    I: [\"uU\", \"yY\", \"fF\", \"dD\", \"xX\", \"kK\"],\r\n                    J: [\"qQ\", \"eE\", \"uU\", \"kK\", null, null],\r\n                    K: [\"jJ\", \"uU\", \"iI\", \"xX\", null, null],\r\n                    L: [\"rR\", \"0)\", \"[{\", \"/?\", \"sS\", \"nN\"],\r\n                    M: [\"bB\", \"hH\", \"tT\", \"wW\", null, null],\r\n                    N: [\"tT\", \"rR\", \"lL\", \"sS\", \"vV\", \"wW\"],\r\n                    O: [\"aA\", \",<\", \".>\", \"eE\", \"qQ\", \";:\"],\r\n                    P: [\".>\", \"4$\", \"5%\", \"yY\", \"uU\", \"eE\"],\r\n                    Q: [\";:\", \"oO\", \"eE\", \"jJ\", null, null],\r\n                    R: [\"cC\", \"9(\", \"0)\", \"lL\", \"nN\", \"tT\"],\r\n                    S: [\"nN\", \"lL\", \"/?\", \"-_\", \"zZ\", \"vV\"],\r\n                    T: [\"hH\", \"cC\", \"rR\", \"nN\", \"wW\", \"mM\"],\r\n                    U: [\"eE\", \"pP\", \"yY\", \"iI\", \"kK\", \"jJ\"],\r\n                    V: [\"wW\", \"nN\", \"sS\", \"zZ\", null, null],\r\n                    W: [\"mM\", \"tT\", \"nN\", \"vV\", null, null],\r\n                    X: [\"kK\", \"iI\", \"dD\", \"bB\", null, null],\r\n                    Y: [\"pP\", \"5%\", \"6^\", \"fF\", \"iI\", \"uU\"],\r\n                    Z: [\"vV\", \"sS\", \"-_\", null, null, null],\r\n                    \"[\": [\"0)\", null, null, \"]}\", \"/?\", \"lL\"],\r\n                    \"\\\\\": [\"=+\", null, null, null, null, null],\r\n                    \"]\": [\"[{\", null, null, null, \"=+\", \"/?\"],\r\n                    \"^\": [\"5%\", null, null, \"7&\", \"fF\", \"yY\"],\r\n                    _: [\"sS\", \"/?\", \"=+\", null, null, \"zZ\"],\r\n                    \"`\": [null, null, null, \"1!\", null, null],\r\n                    a: [null, \"'\\\"\", \",<\", \"oO\", \";:\", null],\r\n                    b: [\"xX\", \"dD\", \"hH\", \"mM\", null, null],\r\n                    c: [\"gG\", \"8*\", \"9(\", \"rR\", \"tT\", \"hH\"],\r\n                    d: [\"iI\", \"fF\", \"gG\", \"hH\", \"bB\", \"xX\"],\r\n                    e: [\"oO\", \".>\", \"pP\", \"uU\", \"jJ\", \"qQ\"],\r\n                    f: [\"yY\", \"6^\", \"7&\", \"gG\", \"dD\", \"iI\"],\r\n                    g: [\"fF\", \"7&\", \"8*\", \"cC\", \"hH\", \"dD\"],\r\n                    h: [\"dD\", \"gG\", \"cC\", \"tT\", \"mM\", \"bB\"],\r\n                    i: [\"uU\", \"yY\", \"fF\", \"dD\", \"xX\", \"kK\"],\r\n                    j: [\"qQ\", \"eE\", \"uU\", \"kK\", null, null],\r\n                    k: [\"jJ\", \"uU\", \"iI\", \"xX\", null, null],\r\n                    l: [\"rR\", \"0)\", \"[{\", \"/?\", \"sS\", \"nN\"],\r\n                    m: [\"bB\", \"hH\", \"tT\", \"wW\", null, null],\r\n                    n: [\"tT\", \"rR\", \"lL\", \"sS\", \"vV\", \"wW\"],\r\n                    o: [\"aA\", \",<\", \".>\", \"eE\", \"qQ\", \";:\"],\r\n                    p: [\".>\", \"4$\", \"5%\", \"yY\", \"uU\", \"eE\"],\r\n                    q: [\";:\", \"oO\", \"eE\", \"jJ\", null, null],\r\n                    r: [\"cC\", \"9(\", \"0)\", \"lL\", \"nN\", \"tT\"],\r\n                    s: [\"nN\", \"lL\", \"/?\", \"-_\", \"zZ\", \"vV\"],\r\n                    t: [\"hH\", \"cC\", \"rR\", \"nN\", \"wW\", \"mM\"],\r\n                    u: [\"eE\", \"pP\", \"yY\", \"iI\", \"kK\", \"jJ\"],\r\n                    v: [\"wW\", \"nN\", \"sS\", \"zZ\", null, null],\r\n                    w: [\"mM\", \"tT\", \"nN\", \"vV\", null, null],\r\n                    x: [\"kK\", \"iI\", \"dD\", \"bB\", null, null],\r\n                    y: [\"pP\", \"5%\", \"6^\", \"fF\", \"iI\", \"uU\"],\r\n                    z: [\"vV\", \"sS\", \"-_\", null, null, null],\r\n                    \"{\": [\"0)\", null, null, \"]}\", \"/?\", \"lL\"],\r\n                    \"|\": [\"=+\", null, null, null, null, null],\r\n                    \"}\": [\"[{\", null, null, null, \"=+\", \"/?\"],\r\n                    \"~\": [null, null, null, \"1!\", null, null]\r\n                },\r\n                keypad: {\r\n                    \"*\": [\"/\", null, null, null, \"-\", \"+\", \"9\", \"8\"],\r\n                    \"+\": [\"9\", \"*\", \"-\", null, null, null, null, \"6\"],\r\n                    \"-\": [\"*\", null, null, null, null, null, \"+\", \"9\"],\r\n                    \".\": [\"0\", \"2\", \"3\", null, null, null, null, null],\r\n                    \"/\": [null, null, null, null, \"*\", \"9\", \"8\", \"7\"],\r\n                    0: [null, \"1\", \"2\", \"3\", \".\", null, null, null],\r\n                    1: [null, null, \"4\", \"5\", \"2\", \"0\", null, null],\r\n                    2: [\"1\", \"4\", \"5\", \"6\", \"3\", \".\", \"0\", null],\r\n                    3: [\"2\", \"5\", \"6\", null, null, null, \".\", \"0\"],\r\n                    4: [null, null, \"7\", \"8\", \"5\", \"2\", \"1\", null],\r\n                    5: [\"4\", \"7\", \"8\", \"9\", \"6\", \"3\", \"2\", \"1\"],\r\n                    6: [\"5\", \"8\", \"9\", \"+\", null, null, \"3\", \"2\"],\r\n                    7: [null, null, null, \"/\", \"8\", \"5\", \"4\", null],\r\n                    8: [\"7\", null, \"/\", \"*\", \"9\", \"6\", \"5\", \"4\"],\r\n                    9: [\"8\", \"/\", \"*\", \"-\", \"+\", null, \"6\", \"5\"]\r\n                },\r\n                mac_keypad: {\r\n                    \"*\": [\"/\", null, null, null, null, null, \"-\", \"9\"],\r\n                    \"+\": [\"6\", \"9\", \"-\", null, null, null, null, \"3\"],\r\n                    \"-\": [\"9\", \"/\", \"*\", null, null, null, \"+\", \"6\"],\r\n                    \".\": [\"0\", \"2\", \"3\", null, null, null, null, null],\r\n                    \"/\": [\"=\", null, null, null, \"*\", \"-\", \"9\", \"8\"],\r\n                    0: [null, \"1\", \"2\", \"3\", \".\", null, null, null],\r\n                    1: [null, null, \"4\", \"5\", \"2\", \"0\", null, null],\r\n                    2: [\"1\", \"4\", \"5\", \"6\", \"3\", \".\", \"0\", null],\r\n                    3: [\"2\", \"5\", \"6\", \"+\", null, null, \".\", \"0\"],\r\n                    4: [null, null, \"7\", \"8\", \"5\", \"2\", \"1\", null],\r\n                    5: [\"4\", \"7\", \"8\", \"9\", \"6\", \"3\", \"2\", \"1\"],\r\n                    6: [\"5\", \"8\", \"9\", \"-\", \"+\", null, \"3\", \"2\"],\r\n                    7: [null, null, null, \"=\", \"8\", \"5\", \"4\", null],\r\n                    8: [\"7\", null, \"=\", \"/\", \"9\", \"6\", \"5\", \"4\"],\r\n                    9: [\"8\", \"=\", \"/\", \"*\", \"-\", \"+\", \"6\", \"5\"],\r\n                    \"=\": [null, null, null, null, \"/\", \"9\", \"8\", \"7\"]\r\n                }\r\n            }, module.exports = adjacency_graphs;\r\n\r\n        }, {}],\r\n        2: [function (require, module, exports) {\r\n            var feedback, scoring;\r\n            scoring = require(\"./scoring\"), feedback = {\r\n                default_feedback: {\r\n                    warning: \"\",\r\n                    suggestions: [\"Use a few words, avoid common phrases\", \"No need for symbols, digits, or uppercase letters\"]\r\n                }, get_feedback: function (e, s) {\r\n                    var a, t, r, n, o, i;\r\n                    if (0 === s.length)return this.default_feedback;\r\n                    if (e > 2)return {warning: \"\", suggestions: []};\r\n                    for (n = s[0], i = s.slice(1), t = 0, r = i.length; r > t; t++)o = i[t], o.token.length > n.token.length && (n = o);\r\n                    return feedback = this.get_match_feedback(n, 1 === s.length), a = \"Add another word or two. Uncommon words are better.\", null != feedback ? (feedback.suggestions.unshift(a), null == feedback.warning && (feedback.warning = \"\")) : feedback = {\r\n                        warning: \"\",\r\n                        suggestions: [a]\r\n                    }, feedback\r\n                }, get_match_feedback: function (e, s) {\r\n                    var a, t;\r\n                    switch (e.pattern) {\r\n                        case\"dictionary\":\r\n                            return this.get_dictionary_match_feedback(e, s);\r\n                        case\"spatial\":\r\n                            return a = e.graph.toUpperCase(), t = 1 === e.turns ? \"Straight rows of keys are easy to guess\" : \"Short keyboard patterns are easy to guess\", {\r\n                                warning: t,\r\n                                suggestions: [\"Use a longer keyboard pattern with more turns\"]\r\n                            };\r\n                        case\"repeat\":\r\n                            return t = 1 === e.base_token.length ? 'Repeats like \"aaa\" are easy to guess' : 'Repeats like \"abcabcabc\" are only slightly harder to guess than \"abc\"', {\r\n                                warning: t,\r\n                                suggestions: [\"Avoid repeated words and characters\"]\r\n                            };\r\n                        case\"sequence\":\r\n                            return {\r\n                                warning: \"Sequences like abc or 6543 are easy to guess\",\r\n                                suggestions: [\"Avoid sequences\"]\r\n                            };\r\n                        case\"regex\":\r\n                            if (\"recent_year\" === e.regex_name)return {\r\n                                warning: \"Recent years are easy to guess\",\r\n                                suggestions: [\"Avoid recent years\", \"Avoid years that are associated with you\"]\r\n                            };\r\n                            break;\r\n                        case\"date\":\r\n                            return {\r\n                                warning: \"Dates are often easy to guess\",\r\n                                suggestions: [\"Avoid dates and years that are associated with you\"]\r\n                            }\r\n                    }\r\n                }, get_dictionary_match_feedback: function (e, s) {\r\n                    var a, t, r, n, o;\r\n                    return n = \"passwords\" === e.dictionary_name ? !s || e.l33t || e.reversed ? e.guesses_log10 <= 4 ? \"This is similar to a commonly used password\" : void 0 : e.rank <= 10 ? \"This is a top-10 common password\" : e.rank <= 100 ? \"This is a top-100 common password\" : \"This is a very common password\" : \"english\" === e.dictionary_name ? s ? \"A word by itself is easy to guess\" : void 0 : \"surnames\" === (a = e.dictionary_name) || \"male_names\" === a || \"female_names\" === a ? s ? \"Names and surnames by themselves are easy to guess\" : \"Common names and surnames are easy to guess\" : \"\", r = [], o = e.token, o.match(scoring.START_UPPER) ? r.push(\"Capitalization doesn't help very much\") : o.match(scoring.ALL_UPPER) && r.push(\"All-uppercase is almost as easy to guess as all-lowercase\"), e.reversed && e.token.length >= 4 && r.push(\"Reversed words aren't much harder to guess\"), e.l33t && r.push(\"Predictable substitutions like '@' instead of 'a' don't help very much\"), t = {\r\n                        warning: n,\r\n                        suggestions: r\r\n                    }\r\n                }\r\n            }, module.exports = feedback;\r\n\r\n        }, {\"./scoring\": 6}],\r\n        3: [function (require, module, exports) {\r\n            var frequency_lists;\r\n            frequency_lists = {\r\n            }, module.exports = frequency_lists;\r\n\r\n        }, {}],\r\n        4: [function (require, module, exports) {\r\n            var feedback, matching, scoring, time, time_estimates, zxcvbn;\r\n            matching = require(\"./matching\"), scoring = require(\"./scoring\"), time_estimates = require(\"./time_estimates\"), feedback = require(\"./feedback\"), time = function () {\r\n                return (new Date).getTime()\r\n            }, zxcvbn = function (e, t) {\r\n                var i, n, c, s, a, r, m, o, u, g, _;\r\n                for (null == t && (t = []), g = time(), u = [], c = 0, s = t.length; s > c; c++)i = t[c], (\"string\" == (m = typeof i) || \"number\" === m || \"boolean\" === m) && u.push(i.toString().toLowerCase());\r\n                matching.set_user_input_dictionary(u), a = matching.omnimatch(e), o = scoring.most_guessable_match_sequence(e, a), o.calc_time = time() - g, n = time_estimates.estimate_attack_times(o.guesses);\r\n                for (r in n)_ = n[r], o[r] = _;\r\n                return o.feedback = feedback.get_feedback(o.score, o.sequence), o\r\n            }, module.exports = zxcvbn;\r\n\r\n        }, {\"./feedback\": 2, \"./matching\": 5, \"./scoring\": 6, \"./time_estimates\": 7}],\r\n        5: [function (require, module, exports) {\r\n            var DATE_MAX_YEAR, DATE_MIN_YEAR, DATE_SPLITS, GRAPHS, L33T_TABLE, RANKED_DICTIONARIES, REGEXEN, SEQUENCES, adjacency_graphs, build_ranked_dict, frequency_lists, lst, matching, name, scoring, indexOf = [].indexOf || function (e) {\r\n                    for (var t = 0, n = this.length; n > t; t++)if (t in this && this[t] === e)return t;\r\n                    return -1\r\n                };\r\n            frequency_lists = require(\"./frequency_lists\"), adjacency_graphs = require(\"./adjacency_graphs\"), scoring = require(\"./scoring\"), build_ranked_dict = function (e) {\r\n                var t, n, r, i, a;\r\n                for (i = {}, t = 1, r = 0, n = e.length; n > r; r++)a = e[r], i[a] = t, t += 1;\r\n                return i\r\n            }, RANKED_DICTIONARIES = {};\r\n            for (name in frequency_lists)lst = frequency_lists[name], RANKED_DICTIONARIES[name] = build_ranked_dict(lst);\r\n            GRAPHS = {\r\n                qwerty: adjacency_graphs.qwerty,\r\n                dvorak: adjacency_graphs.dvorak,\r\n                keypad: adjacency_graphs.keypad,\r\n                mac_keypad: adjacency_graphs.mac_keypad\r\n            }, SEQUENCES = {\r\n                lower: \"abcdefghijklmnopqrstuvwxyz\",\r\n                upper: \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\",\r\n                digits: \"0123456789\"\r\n            }, L33T_TABLE = {\r\n                a: [\"4\", \"@\"],\r\n                b: [\"8\"],\r\n                c: [\"(\", \"{\", \"[\", \"<\"],\r\n                e: [\"3\"],\r\n                g: [\"6\", \"9\"],\r\n                i: [\"1\", \"!\", \"|\"],\r\n                l: [\"1\", \"|\", \"7\"],\r\n                o: [\"0\"],\r\n                s: [\"$\", \"5\"],\r\n                t: [\"+\", \"7\"],\r\n                x: [\"%\"],\r\n                z: [\"2\"]\r\n            }, REGEXEN = {recent_year: /19\\d\\d|200\\d|201\\d/g}, DATE_MAX_YEAR = 2050, DATE_MIN_YEAR = 1e3, DATE_SPLITS = {\r\n                4: [[1, 2], [2, 3]],\r\n                5: [[1, 3], [2, 3]],\r\n                6: [[1, 2], [2, 4], [4, 5]],\r\n                7: [[1, 3], [2, 3], [4, 5], [4, 6]],\r\n                8: [[2, 4], [4, 6]]\r\n            }, matching = {\r\n                empty: function (e) {\r\n                    var t;\r\n                    return 0 === function () {\r\n                            var n;\r\n                            n = [];\r\n                            for (t in e)n.push(t);\r\n                            return n\r\n                        }().length\r\n                },\r\n                extend: function (e, t) {\r\n                    return e.push.apply(e, t)\r\n                },\r\n                translate: function (e, t) {\r\n                    var n;\r\n                    return function () {\r\n                        var r, i, a, s;\r\n                        for (a = e.split(\"\"), s = [], i = 0, r = a.length; r > i; i++)n = a[i], s.push(t[n] || n);\r\n                        return s\r\n                    }().join(\"\")\r\n                },\r\n                mod: function (e, t) {\r\n                    return (e % t + t) % t\r\n                },\r\n                sorted: function (e) {\r\n                    return e.sort(function (e, t) {\r\n                        return e.i - t.i || e.j - t.j\r\n                    })\r\n                },\r\n                omnimatch: function (e) {\r\n                    var t, n, r, i, a;\r\n                    for (i = [], r = [this.dictionary_match, this.reverse_dictionary_match, this.l33t_match, this.spatial_match, this.repeat_match, this.sequence_match, this.regex_match, this.date_match], a = 0, t = r.length; t > a; a++)n = r[a], this.extend(i, n.call(this, e));\r\n                    return this.sorted(i)\r\n                },\r\n                dictionary_match: function (e, t) {\r\n                    var n, r, i, a, s, o, h, c, u, l, _, f, d, g;\r\n                    null == t && (t = RANKED_DICTIONARIES), s = [], a = e.length, c = e.toLowerCase();\r\n                    for (n in t)for (l = t[n], r = o = 0, _ = a; _ >= 0 ? _ > o : o > _; r = _ >= 0 ? ++o : --o)for (i = h = f = r, d = a; d >= f ? d > h : h > d; i = d >= f ? ++h : --h)c.slice(r, +i + 1 || 9e9)in l && (g = c.slice(r, +i + 1 || 9e9), u = l[g], s.push({\r\n                        pattern: \"dictionary\",\r\n                        i: r,\r\n                        j: i,\r\n                        token: e.slice(r, +i + 1 || 9e9),\r\n                        matched_word: g,\r\n                        rank: u,\r\n                        dictionary_name: n,\r\n                        reversed: !1,\r\n                        l33t: !1\r\n                    }));\r\n                    return this.sorted(s)\r\n                },\r\n                reverse_dictionary_match: function (e, t) {\r\n                    var n, r, i, a, s, o;\r\n                    for (null == t && (t = RANKED_DICTIONARIES), o = e.split(\"\").reverse().join(\"\"), i = this.dictionary_match(o, t), a = 0, n = i.length; n > a; a++)r = i[a], r.token = r.token.split(\"\").reverse().join(\"\"), r.reversed = !0, s = [e.length - 1 - r.j, e.length - 1 - r.i], r.i = s[0], r.j = s[1];\r\n                    return this.sorted(i)\r\n                },\r\n                set_user_input_dictionary: function (e) {\r\n                    return RANKED_DICTIONARIES.user_inputs = build_ranked_dict(e.slice())\r\n                },\r\n                relevant_l33t_subtable: function (e, t) {\r\n                    var n, r, i, a, s, o, h, c, u, l;\r\n                    for (s = {}, o = e.split(\"\"), a = 0, r = o.length; r > a; a++)n = o[a], s[n] = !0;\r\n                    l = {};\r\n                    for (i in t)u = t[i], h = function () {\r\n                        var e, t, n;\r\n                        for (n = [], t = 0, e = u.length; e > t; t++)c = u[t], c in s && n.push(c);\r\n                        return n\r\n                    }(), h.length > 0 && (l[i] = h);\r\n                    return l\r\n                },\r\n                enumerate_l33t_subs: function (e) {\r\n                    var t, n, r, i, a, s, o, h, c, u, l, _, f, d, g;\r\n                    a = function () {\r\n                        var t;\r\n                        t = [];\r\n                        for (i in e)t.push(i);\r\n                        return t\r\n                    }(), g = [[]], n = function (e) {\r\n                        var t, n, r, a, s, o, h, c;\r\n                        for (n = [], s = {}, o = 0, a = e.length; a > o; o++)h = e[o], t = function () {\r\n                            var e, t, n;\r\n                            for (n = [], c = t = 0, e = h.length; e > t; c = ++t)i = h[c], n.push([i, c]);\r\n                            return n\r\n                        }(), t.sort(), r = function () {\r\n                            var e, n, r;\r\n                            for (r = [], c = n = 0, e = t.length; e > n; c = ++n)i = t[c], r.push(i + \",\" + c);\r\n                            return r\r\n                        }().join(\"-\"), r in s || (s[r] = !0, n.push(h));\r\n                        return n\r\n                    }, r = function (t) {\r\n                        var i, a, s, o, h, c, u, l, _, f, d, p, E, m, y, A;\r\n                        if (t.length) {\r\n                            for (a = t[0], E = t.slice(1), u = [], d = e[a], l = 0, h = d.length; h > l; l++)for (o = d[l], _ = 0, c = g.length; c > _; _++) {\r\n                                for (m = g[_], i = -1, s = f = 0, p = m.length; p >= 0 ? p > f : f > p; s = p >= 0 ? ++f : --f)if (m[s][0] === o) {\r\n                                    i = s;\r\n                                    break\r\n                                }\r\n                                -1 === i ? (A = m.concat([[o, a]]), u.push(A)) : (y = m.slice(0), y.splice(i, 1), y.push([o, a]), u.push(m), u.push(y))\r\n                            }\r\n                            return g = n(u), r(E)\r\n                        }\r\n                    }, r(a), d = [];\r\n                    for (c = 0, o = g.length; o > c; c++) {\r\n                        for (_ = g[c], f = {}, u = 0, h = _.length; h > u; u++)l = _[u], s = l[0], t = l[1], f[s] = t;\r\n                        d.push(f)\r\n                    }\r\n                    return d\r\n                },\r\n                l33t_match: function (e, t, n) {\r\n                    var r, i, a, s, o, h, c, u, l, _, f, d, g, p, E, m;\r\n                    for (null == t && (t = RANKED_DICTIONARIES), null == n && (n = L33T_TABLE), c = [], _ = this.enumerate_l33t_subs(this.relevant_l33t_subtable(e, n)), u = 0, a = _.length; a > u && (d = _[u], !this.empty(d)); u++)for (p = this.translate(e, d), f = this.dictionary_match(p, t), l = 0, s = f.length; s > l; l++)if (o = f[l], E = e.slice(o.i, +o.j + 1 || 9e9), E.toLowerCase() !== o.matched_word) {\r\n                        h = {};\r\n                        for (g in d)r = d[g], -1 !== E.indexOf(g) && (h[g] = r);\r\n                        o.l33t = !0, o.token = E, o.sub = h, o.sub_display = function () {\r\n                            var e;\r\n                            e = [];\r\n                            for (i in h)m = h[i], e.push(i + \" -> \" + m);\r\n                            return e\r\n                        }().join(\", \"), c.push(o)\r\n                    }\r\n                    return this.sorted(c.filter(function (e) {\r\n                        return e.token.length > 1\r\n                    }))\r\n                },\r\n                spatial_match: function (e, t) {\r\n                    var n, r, i;\r\n                    null == t && (t = GRAPHS), i = [];\r\n                    for (r in t)n = t[r], this.extend(i, this.spatial_match_helper(e, n, r));\r\n                    return this.sorted(i)\r\n                },\r\n                SHIFTED_RX: /[~!@#$%^&*()_+QWERTYUIOP{}|ASDFGHJKL:\"ZXCVBNM<>?]/,\r\n                spatial_match_helper: function (e, t, n) {\r\n                    var r, i, a, s, o, h, c, u, l, _, f, d, g, p, E;\r\n                    for (f = [], c = 0; c < e.length - 1;)for (u = c + 1, l = null, E = 0, p = \"qwerty\" !== n && \"dvorak\" !== n || !this.SHIFTED_RX.exec(e.charAt(c)) ? 0 : 1; ;) {\r\n                        if (g = e.charAt(u - 1), o = !1, h = -1, s = -1, i = t[g] || [], u < e.length)for (a = e.charAt(u), d = 0, _ = i.length; _ > d; d++)if (r = i[d], s += 1, r && -1 !== r.indexOf(a)) {\r\n                            o = !0, h = s, 1 === r.indexOf(a) && (p += 1), l !== h && (E += 1, l = h);\r\n                            break\r\n                        }\r\n                        if (!o) {\r\n                            u - c > 2 && f.push({\r\n                                pattern: \"spatial\",\r\n                                i: c,\r\n                                j: u - 1,\r\n                                token: e.slice(c, u),\r\n                                graph: n,\r\n                                turns: E,\r\n                                shifted_count: p\r\n                            }), c = u;\r\n                            break\r\n                        }\r\n                        u += 1\r\n                    }\r\n                    return f\r\n                },\r\n                repeat_match: function (e) {\r\n                    var t, n, r, i, a, s, o, h, c, u, l, _, f, d, g;\r\n                    for (d = [], a = /(.+)\\1+/g, u = /(.+?)\\1+/g, l = /^(.+?)\\1+$/, c = 0; c < e.length && (a.lastIndex = u.lastIndex = c, s = a.exec(e), _ = u.exec(e), null != s);)s[0].length > _[0].length ? (f = s, i = l.exec(f[0])[1]) : (f = _, i = f[1]), g = [f.index, f.index + f[0].length - 1], o = g[0], h = g[1], t = scoring.most_guessable_match_sequence(i, this.omnimatch(i)), r = t.match_sequence, n = t.guesses, d.push({\r\n                        pattern: \"repeat\",\r\n                        i: o,\r\n                        j: h,\r\n                        token: f[0],\r\n                        base_token: i,\r\n                        base_guesses: n,\r\n                        base_matches: r,\r\n                        repeat_count: f[0].length / i.length\r\n                    }), c = h + 1;\r\n                    return d\r\n                },\r\n                sequence_match: function (e) {\r\n                    var t, n, r, i, a, s, o, h, c, u, l, _;\r\n                    a = [];\r\n                    for (l in SEQUENCES)for (u = SEQUENCES[l], h = [1, -1], o = 0, i = h.length; i > o; o++)for (t = h[o], n = 0; n < e.length;)if (c = e.charAt(n), indexOf.call(u, c) < 0)n += 1; else {\r\n                        for (r = n + 1, _ = u.indexOf(e.charAt(n)); r < e.length && (s = this.mod(_ + t, u.length), u.indexOf(e.charAt(r)) === s);)r += 1, _ = s;\r\n                        r -= 1, r - n + 1 > 1 && a.push({\r\n                            pattern: \"sequence\",\r\n                            i: n,\r\n                            j: r,\r\n                            token: e.slice(n, +r + 1 || 9e9),\r\n                            sequence_name: l,\r\n                            sequence_space: u.length,\r\n                            ascending: 1 === t\r\n                        }), n = r + 1\r\n                    }\r\n                    return this.sorted(a)\r\n                },\r\n                regex_match: function (e, t) {\r\n                    var n, r, i, a;\r\n                    null == t && (t = REGEXEN), n = [];\r\n                    for (name in t)for (r = t[name], r.lastIndex = 0; i = r.exec(e);)a = i[0], n.push({\r\n                        pattern: \"regex\",\r\n                        token: a,\r\n                        i: i.index,\r\n                        j: i.index + i[0].length - 1,\r\n                        regex_name: name,\r\n                        regex_match: i\r\n                    });\r\n                    return this.sorted(n)\r\n                },\r\n                date_match: function (e) {\r\n                    var t, n, r, i, a, s, o, h, c, u, l, _, f, d, g, p, E, m, y, A, v, I, R, x, T, N, k, D, S, j, b, q, C, O;\r\n                    for (_ = [], f = /^\\d{4,8}$/, d = /^(\\d{1,4})([\\s\\/\\\\_.-])(\\d{1,2})\\2(\\d{1,4})$/, s = E = 0, v = e.length - 4; v >= 0 ? v >= E : E >= v; s = v >= 0 ? ++E : --E)for (o = m = I = s + 3, R = s + 7; (R >= I ? R >= m : m >= R) && !(o >= e.length); o = R >= I ? ++m : --m)if (O = e.slice(s, +o + 1 || 9e9), f.exec(O)) {\r\n                        for (r = [], x = DATE_SPLITS[O.length], y = 0, u = x.length; u > y; y++)T = x[y], h = T[0], c = T[1], a = this.map_ints_to_dmy([parseInt(O.slice(0, h)), parseInt(O.slice(h, c)), parseInt(O.slice(c))]), null != a && r.push(a);\r\n                        if (r.length > 0) {\r\n                            for (t = r[0], g = function (e) {\r\n                                return Math.abs(e.year - scoring.REFERENCE_YEAR)\r\n                            }, p = g(r[0]), N = r.slice(1), A = 0, l = N.length; l > A; A++)n = N[A], i = g(n), p > i && (k = [n, i], t = k[0], p = k[1]);\r\n                            _.push({\r\n                                pattern: \"date\",\r\n                                token: O,\r\n                                i: s,\r\n                                j: o,\r\n                                separator: \"\",\r\n                                year: t.year,\r\n                                month: t.month,\r\n                                day: t.day\r\n                            })\r\n                        }\r\n                    }\r\n                    for (s = q = 0, D = e.length - 6; D >= 0 ? D >= q : q >= D; s = D >= 0 ? ++q : --q)for (o = C = S = s + 5, j = s + 9; (j >= S ? j >= C : C >= j) && !(o >= e.length); o = j >= S ? ++C : --C)O = e.slice(s, +o + 1 || 9e9), b = d.exec(O), null != b && (a = this.map_ints_to_dmy([parseInt(b[1]), parseInt(b[3]), parseInt(b[4])]), null != a && _.push({\r\n                        pattern: \"date\",\r\n                        token: O,\r\n                        i: s,\r\n                        j: o,\r\n                        separator: b[2],\r\n                        year: a.year,\r\n                        month: a.month,\r\n                        day: a.day\r\n                    }));\r\n                    return this.sorted(_.filter(function (e) {\r\n                        var t, n, r, i;\r\n                        for (t = !1, i = 0, n = _.length; n > i; i++)if (r = _[i], e !== r && r.i <= e.i && r.j >= e.j) {\r\n                            t = !0;\r\n                            break\r\n                        }\r\n                        return !t\r\n                    }))\r\n                },\r\n                map_ints_to_dmy: function (e) {\r\n                    var t, n, r, i, a, s, o, h, c, u, l, _, f, d, g, p;\r\n                    if (!(e[1] > 31 || e[1] <= 0)) {\r\n                        for (o = 0, h = 0, g = 0, s = 0, r = e.length; r > s; s++) {\r\n                            if (n = e[s], n > 99 && DATE_MIN_YEAR > n || n > DATE_MAX_YEAR)return;\r\n                            n > 31 && (h += 1), n > 12 && (o += 1), 0 >= n && (g += 1)\r\n                        }\r\n                        if (!(h >= 2 || 3 === o || g >= 2)) {\r\n                            for (u = [[e[2], e.slice(0, 2)], [e[0], e.slice(1, 3)]], c = 0, i = u.length; i > c; c++)if (_ = u[c], p = _[0], d = _[1], p >= DATE_MIN_YEAR && DATE_MAX_YEAR >= p)return t = this.map_ints_to_dm(d), null != t ? {\r\n                                year: p,\r\n                                month: t.month,\r\n                                day: t.day\r\n                            } : void 0;\r\n                            for (l = 0, a = u.length; a > l; l++)if (f = u[l], p = f[0], d = f[1], t = this.map_ints_to_dm(d), null != t)return p = this.two_to_four_digit_year(p), {\r\n                                year: p,\r\n                                month: t.month,\r\n                                day: t.day\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                map_ints_to_dm: function (e) {\r\n                    var t, n, r, i, a, s;\r\n                    for (a = [e, e.slice().reverse()], i = 0, n = a.length; n > i; i++)if (s = a[i], t = s[0], r = s[1], t >= 1 && 31 >= t && r >= 1 && 12 >= r)return {\r\n                        day: t,\r\n                        month: r\r\n                    }\r\n                },\r\n                two_to_four_digit_year: function (e) {\r\n                    return e > 99 ? e : e > 50 ? e + scoring.REFERENCE_YEAR - 100 : e + scoring.REFERENCE_YEAR\r\n                }\r\n            }, module.exports = matching;\r\n\r\n        }, {\"./adjacency_graphs\": 1, \"./frequency_lists\": 3, \"./scoring\": 6}],\r\n        6: [function (require, module, exports) {\r\n            var BRUTEFORCE_CARDINALITY, MIN_GUESSES_BEFORE_GROWING_SEQUENCE, MIN_SUBMATCH_GUESSES_MULTI_CHAR, MIN_SUBMATCH_GUESSES_SINGLE_CHAR, adjacency_graphs, calc_average_degree, k, scoring, v;\r\n            adjacency_graphs = require(\"./adjacency_graphs\"), calc_average_degree = function (e) {\r\n                var t, n, r, s, a, _;\r\n                t = 0;\r\n                for (r in e)a = e[r], t += function () {\r\n                    var e, t, n;\r\n                    for (n = [], t = 0, e = a.length; e > t; t++)s = a[t], s && n.push(s);\r\n                    return n\r\n                }().length;\r\n                return t /= function () {\r\n                    var t;\r\n                    t = [];\r\n                    for (n in e)_ = e[n], t.push(n);\r\n                    return t\r\n                }().length\r\n            }, BRUTEFORCE_CARDINALITY = 10, MIN_GUESSES_BEFORE_GROWING_SEQUENCE = 1e4, MIN_SUBMATCH_GUESSES_SINGLE_CHAR = 10, MIN_SUBMATCH_GUESSES_MULTI_CHAR = 50, scoring = {\r\n                nCk: function (e, t) {\r\n                    var n, r, s, a;\r\n                    if (t > e)return 0;\r\n                    if (0 === t)return 1;\r\n                    for (s = 1, n = r = 1, a = t; a >= 1 ? a >= r : r >= a; n = a >= 1 ? ++r : --r)s *= e, s /= n, e -= 1;\r\n                    return s\r\n                },\r\n                log10: function (e) {\r\n                    return Math.log(e) / Math.log(10)\r\n                },\r\n                log2: function (e) {\r\n                    return Math.log(e) / Math.log(2)\r\n                },\r\n                factorial: function (e) {\r\n                    var t, n, r, s;\r\n                    if (2 > e)return 1;\r\n                    for (t = 1, n = r = 2, s = e; s >= 2 ? s >= r : r >= s; n = s >= 2 ? ++r : --r)t *= n;\r\n                    return t\r\n                },\r\n                most_guessable_match_sequence: function (e, t, n) {\r\n                    var r, s, a, _, i, u, o, h, E, g, c, l, f, A, S, R, p, M, v, I, N, C, U, T, G, d, k, m, O, P, L, y, B, D;\r\n                    for (null == n && (n = !1), C = [], r = [], M = 0, N = null, S = function (t) {\r\n                        return function (t, n) {\r\n                            var r;\r\n                            return r = {pattern: \"bruteforce\", token: e.slice(t, +n + 1 || 9e9), i: t, j: n}\r\n                        }\r\n                    }(this), D = function (e) {\r\n                        return function (t, r) {\r\n                            var s;\r\n                            return s = e.factorial(r) * t, n || (s += Math.pow(MIN_GUESSES_BEFORE_GROWING_SEQUENCE, r - 1)), s\r\n                        }\r\n                    }(this), c = A = 0, k = e.length; k >= 0 ? k > A : A > k; c = k >= 0 ? ++A : --A)for (r[c] = [], C[c] = [], U = 1 / 0, G = I = 0, m = M; m >= 0 ? m >= I : I >= m; G = m >= 0 ? ++I : --I)for (o = !0, a = c, 0 === G ? (s = 0, v = 1) : \"bruteforce\" === (null != (O = r[c - 1]) && null != (P = O[G]) ? P.pattern : void 0) ? (s = r[c - 1][G].i, v = G) : null != (null != (L = r[c - 1]) ? L[G] : void 0) ? (s = c, v = G + 1) : o = !1, o && (_ = S(s, a), T = c - _.token.length, i = this.estimate_guesses(_, e), v > 1 && (i *= C[T][v - 1]), u = D(i, v), U > u && (U = u, C[c][v] = i, N = v, M = Math.max(M, v), r[c][v] = _)), d = 0, f = t.length; f > d; d++)if (R = t[d], R.j === c) {\r\n                        if (y = [R.i, R.j], E = y[0], g = y[1], 0 === G) {\r\n                            if (0 !== E)continue\r\n                        } else if (null == (null != (B = C[E - 1]) ? B[G] : void 0))continue;\r\n                        i = this.estimate_guesses(R, e), G > 0 && (i *= C[E - 1][G]), u = D(i, G + 1), U > u && (U = u, C[c][G + 1] = i, N = G + 1, M = Math.max(M, G + 1), r[c][G + 1] = R)\r\n                    }\r\n                    for (p = [], l = N, c = e.length - 1; c >= 0;)R = r[c][l], p.push(R), c = R.i - 1, l -= 1;\r\n                    return p.reverse(), h = 0 === e.length ? 1 : U, {\r\n                        password: e,\r\n                        guesses: h,\r\n                        guesses_log10: this.log10(h),\r\n                        sequence: p\r\n                    }\r\n                },\r\n                estimate_guesses: function (e, t) {\r\n                    var n, r, s;\r\n                    return null != e.guesses ? e.guesses : (s = 1, e.token.length < t.length && (s = 1 === e.token.length ? MIN_SUBMATCH_GUESSES_SINGLE_CHAR : MIN_SUBMATCH_GUESSES_MULTI_CHAR), n = {\r\n                        bruteforce: this.bruteforce_guesses,\r\n                        dictionary: this.dictionary_guesses,\r\n                        spatial: this.spatial_guesses,\r\n                        repeat: this.repeat_guesses,\r\n                        sequence: this.sequence_guesses,\r\n                        regex: this.regex_guesses,\r\n                        date: this.date_guesses\r\n                    }, r = n[e.pattern].call(this, e), e.guesses = Math.max(r, s), e.guesses_log10 = this.log10(e.guesses), e.guesses)\r\n                },\r\n                bruteforce_guesses: function (e) {\r\n                    var t, n;\r\n                    return t = Math.pow(BRUTEFORCE_CARDINALITY, e.token.length), n = 1 === e.token.length ? MIN_SUBMATCH_GUESSES_SINGLE_CHAR + 1 : MIN_SUBMATCH_GUESSES_MULTI_CHAR + 1, Math.max(t, n)\r\n                },\r\n                repeat_guesses: function (e) {\r\n                    return e.base_guesses * e.repeat_count\r\n                },\r\n                sequence_guesses: function (e) {\r\n                    var t, n;\r\n                    return n = e.token.charAt(0), t = \"a\" === n || \"A\" === n || \"z\" === n || \"Z\" === n || \"0\" === n || \"1\" === n || \"9\" === n ? 4 : n.match(/\\d/) ? 10 : 26, e.ascending || (t *= 2), t * e.token.length\r\n                },\r\n                MIN_YEAR_SPACE: 20,\r\n                REFERENCE_YEAR: 2e3,\r\n                regex_guesses: function (e) {\r\n                    var t, n;\r\n                    if (t = {\r\n                            alpha_lower: 26,\r\n                            alpha_upper: 26,\r\n                            alpha: 52,\r\n                            alphanumeric: 62,\r\n                            digits: 10,\r\n                            symbols: 33\r\n                        }, e.regex_name in t)return Math.pow(t[e.regex_name], e.token.length);\r\n                    switch (e.regex_name) {\r\n                        case\"recent_year\":\r\n                            return n = Math.abs(parseInt(e.regex_match[0]) - this.REFERENCE_YEAR), n = Math.max(n, this.MIN_YEAR_SPACE)\r\n                    }\r\n                },\r\n                date_guesses: function (e) {\r\n                    var t, n;\r\n                    return n = Math.max(Math.abs(e.year - this.REFERENCE_YEAR), this.MIN_YEAR_SPACE), t = 31 * n * 12, e.has_full_year && (t *= 2), e.separator && (t *= 4), t\r\n                },\r\n                KEYBOARD_AVERAGE_DEGREE: calc_average_degree(adjacency_graphs.qwerty),\r\n                KEYPAD_AVERAGE_DEGREE: calc_average_degree(adjacency_graphs.keypad),\r\n                KEYBOARD_STARTING_POSITIONS: function () {\r\n                    var e, t;\r\n                    e = adjacency_graphs.qwerty, t = [];\r\n                    for (k in e)v = e[k], t.push(k);\r\n                    return t\r\n                }().length,\r\n                KEYPAD_STARTING_POSITIONS: function () {\r\n                    var e, t;\r\n                    e = adjacency_graphs.keypad, t = [];\r\n                    for (k in e)v = e[k], t.push(k);\r\n                    return t\r\n                }().length,\r\n                spatial_guesses: function (e) {\r\n                    var t, n, r, s, a, _, i, u, o, h, E, g, c, l, f, A, S, R;\r\n                    for (\"qwerty\" === (g = e.graph) || \"dvorak\" === g ? (A = this.KEYBOARD_STARTING_POSITIONS, s = this.KEYBOARD_AVERAGE_DEGREE) : (A = this.KEYPAD_STARTING_POSITIONS, s = this.KEYPAD_AVERAGE_DEGREE), a = 0, t = e.token.length, R = e.turns, _ = u = 2, c = t; c >= 2 ? c >= u : u >= c; _ = c >= 2 ? ++u : --u)for (h = Math.min(R, _ - 1), i = o = 1, l = h; l >= 1 ? l >= o : o >= l; i = l >= 1 ? ++o : --o)a += this.nCk(_ - 1, i - 1) * A * Math.pow(s, i);\r\n                    if (e.shifted_count)if (n = e.shifted_count, r = e.token.length - e.shifted_count, 0 === n || 0 === r)a *= 2; else {\r\n                        for (S = 0, _ = E = 1, f = Math.min(n, r); f >= 1 ? f >= E : E >= f; _ = f >= 1 ? ++E : --E)S += this.nCk(n + r, _);\r\n                        a *= S\r\n                    }\r\n                    return a\r\n                },\r\n                dictionary_guesses: function (e) {\r\n                    var t;\r\n                    return e.base_guesses = e.rank, e.uppercase_variations = this.uppercase_variations(e), e.l33t_variations = this.l33t_variations(e), t = e.reversed && 2 || 1, e.base_guesses * e.uppercase_variations * e.l33t_variations * t\r\n                },\r\n                START_UPPER: /^[A-Z][^A-Z]+$/,\r\n                END_UPPER: /^[^A-Z]+[A-Z]$/,\r\n                ALL_UPPER: /^[^a-z]+$/,\r\n                ALL_LOWER: /^[^A-Z]+$/,\r\n                uppercase_variations: function (e) {\r\n                    var t, n, r, s, a, _, i, u, o, h, E, g;\r\n                    if (g = e.token, g.match(this.ALL_LOWER))return 1;\r\n                    for (u = [this.START_UPPER, this.END_UPPER, this.ALL_UPPER], _ = 0, a = u.length; a > _; _++)if (h = u[_], g.match(h))return 2;\r\n                    for (n = function () {\r\n                        var e, t, n, s;\r\n                        for (n = g.split(\"\"), s = [], t = 0, e = n.length; e > t; t++)r = n[t], r.match(/[A-Z]/) && s.push(r);\r\n                        return s\r\n                    }().length, t = function () {\r\n                        var e, t, n, s;\r\n                        for (n = g.split(\"\"), s = [], t = 0, e = n.length; e > t; t++)r = n[t], r.match(/[a-z]/) && s.push(r);\r\n                        return s\r\n                    }().length, E = 0, s = i = 1, o = Math.min(n, t); o >= 1 ? o >= i : i >= o; s = o >= 1 ? ++i : --i)E += this.nCk(n + t, s);\r\n                    return E\r\n                },\r\n                l33t_variations: function (e) {\r\n                    var t, n, r, s, a, _, i, u, o, h, E, g, c;\r\n                    if (!e.l33t)return 1;\r\n                    c = 1, o = e.sub;\r\n                    for (E in o)if (g = o[E], s = e.token.toLowerCase().split(\"\"), t = function () {\r\n                            var e, t, n;\r\n                            for (n = [], t = 0, e = s.length; e > t; t++)r = s[t], r === E && n.push(r);\r\n                            return n\r\n                        }().length, n = function () {\r\n                            var e, t, n;\r\n                            for (n = [], t = 0, e = s.length; e > t; t++)r = s[t], r === g && n.push(r);\r\n                            return n\r\n                        }().length, 0 === t || 0 === n)c *= 2; else {\r\n                        for (i = Math.min(n, t), u = 0, a = _ = 1, h = i; h >= 1 ? h >= _ : _ >= h; a = h >= 1 ? ++_ : --_)u += this.nCk(n + t, a);\r\n                        c *= u\r\n                    }\r\n                    return c\r\n                }\r\n            }, module.exports = scoring;\r\n\r\n        }, {\"./adjacency_graphs\": 1}],\r\n        7: [function (require, module, exports) {\r\n            var time_estimates;\r\n            time_estimates = {\r\n                estimate_attack_times: function (e) {\r\n                    var t, n, s, o;\r\n                    n = {\r\n                        online_throttling_100_per_hour: e / (100 / 3600),\r\n                        online_no_throttling_10_per_second: e / 100,\r\n                        offline_slow_hashing_1e4_per_second: e / 1e4,\r\n                        offline_fast_hashing_1e10_per_second: e / 1e10\r\n                    }, t = {};\r\n                    for (s in n)o = n[s], t[s] = this.display_time(o);\r\n                    return {crack_times_seconds: n, crack_times_display: t, score: this.guesses_to_score(e)}\r\n                }, guesses_to_score: function (e) {\r\n                    var t;\r\n                    return t = 5, 1e3 + t > e ? 0 : 1e6 + t > e ? 1 : 1e8 + t > e ? 2 : 1e10 + t > e ? 3 : 4\r\n                }, display_time: function (e) {\r\n                    var t, n, s, o, _, r, i, a, u, c;\r\n                    return i = 60, r = 60 * i, s = 24 * r, a = 31 * s, c = 12 * a, n = 100 * c, u = 1 > e ? [null, \"less than a second\"] : i > e ? (t = Math.round(e), [t, t + \" second\"]) : r > e ? (t = Math.round(e / i), [t, t + \" minute\"]) : s > e ? (t = Math.round(e / r), [t, t + \" hour\"]) : a > e ? (t = Math.round(e / s), [t, t + \" day\"]) : c > e ? (t = Math.round(e / a), [t, t + \" month\"]) : n > e ? (t = Math.round(e / c), [t, t + \" year\"]) : [null, \"centuries\"], o = u[0], _ = u[1], null != o && 1 !== o && (_ += \"s\"), _\r\n                }\r\n            }, module.exports = time_estimates;\r\n\r\n        }, {}]\r\n    }, {}, [4])(4)\r\n});\r\n//# sourceMappingURL=zxcvbn.js.map\r\n","Magento_Customer/js/action/check-email-availability.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'mage/storage',\r\n    'Magento_Checkout/js/model/url-builder'\r\n], function (storage, urlBuilder) {\r\n    'use strict';\r\n\r\n    return function (deferred, email) {\r\n        return storage.post(\r\n            urlBuilder.createUrl('/customers/isEmailAvailable', {}),\r\n            JSON.stringify({\r\n                customerEmail: email\r\n            }),\r\n            false\r\n        ).done(function (isEmailAvailable) {\r\n            if (isEmailAvailable) {\r\n                deferred.resolve();\r\n            } else {\r\n                deferred.reject();\r\n            }\r\n        }).fail(function () {\r\n            deferred.reject();\r\n        });\r\n    };\r\n});\r\n","Magento_Customer/js/action/login.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/storage',\r\n    'Magento_Ui/js/model/messageList',\r\n    'Magento_Customer/js/customer-data',\r\n    'mage/translate'\r\n], function ($, storage, globalMessageList, customerData, $t) {\r\n    'use strict';\r\n\r\n    var callbacks = [],\r\n\r\n        /**\r\n         * @param {Object} loginData\r\n         * @param {String} redirectUrl\r\n         * @param {*} isGlobal\r\n         * @param {Object} messageContainer\r\n         */\r\n        action = function (loginData, redirectUrl, isGlobal, messageContainer) {\r\n            messageContainer = messageContainer || globalMessageList;\r\n\r\n            return storage.post(\r\n                'customer/ajax/login',\r\n                JSON.stringify(loginData),\r\n                isGlobal\r\n            ).done(function (response) {\r\n                if (response.errors) {\r\n                    messageContainer.addErrorMessage(response);\r\n                    callbacks.forEach(function (callback) {\r\n                        callback(loginData);\r\n                    });\r\n                } else {\r\n                    callbacks.forEach(function (callback) {\r\n                        callback(loginData);\r\n                    });\r\n                    customerData.invalidate(['customer']);\r\n\r\n                    if (response.redirectUrl) {\r\n                        window.location.href = response.redirectUrl;\r\n                    } else if (redirectUrl) {\r\n                        window.location.href = redirectUrl;\r\n                    } else {\r\n                        location.reload();\r\n                    }\r\n                }\r\n            }).fail(function () {\r\n                messageContainer.addErrorMessage({\r\n                    'message': $t('Could not authenticate. Please try again later')\r\n                });\r\n                callbacks.forEach(function (callback) {\r\n                    callback(loginData);\r\n                });\r\n            });\r\n        };\r\n\r\n    /**\r\n     * @param {Function} callback\r\n     */\r\n    action.registerLoginCallback = function (callback) {\r\n        callbacks.push(callback);\r\n    };\r\n\r\n    return action;\r\n});\r\n","Magento_Customer/js/invalidation-rules/website-rule.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'uiClass'\r\n], function (Element) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n\r\n        defaults: {\r\n            scopeConfig: {}\r\n        },\r\n\r\n        /**\r\n         * Takes website id from current customer data and compare it with current website id\r\n         * If customer belongs to another scope, we need to invalidate current section\r\n         *\r\n         * @param {Object} customerData\r\n         */\r\n        process: function (customerData) {\r\n            var customer = customerData.get('customer');\r\n\r\n            if (this.scopeConfig && customer() &&\r\n                ~~customer().websiteId !== ~~this.scopeConfig.websiteId && ~~customer().websiteId !== 0) {\r\n                customerData.reload(['customer']);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Customer/js/model/address-list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    './customer-addresses'\r\n], function (ko, defaultProvider) {\r\n    'use strict';\r\n\r\n    return ko.observableArray(defaultProvider.getAddressItems());\r\n});\r\n","Magento_Customer/js/model/authentication-popup.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/modal'\r\n], function ($, modal) {\r\n    'use strict';\r\n\r\n    return {\r\n        modalWindow: null,\r\n\r\n        /**\r\n         * Create popUp window for provided element\r\n         *\r\n         * @param {HTMLElement} element\r\n         */\r\n        createPopUp: function (element) {\r\n            var options = {\r\n                'type': 'popup',\r\n                'modalClass': 'popup-authentication',\r\n                'focus': '[name=username]',\r\n                'responsive': true,\r\n                'innerScroll': true,\r\n                'trigger': '.proceed-to-checkout',\r\n                'buttons': []\r\n            };\r\n\r\n            this.modalWindow = element;\r\n            modal(options, $(this.modalWindow));\r\n        },\r\n\r\n        /** Show login popup window */\r\n        showModal: function () {\r\n            $(this.modalWindow).modal('openModal').trigger('contentUpdated');\r\n        }\r\n    };\r\n});\r\n","Magento_Customer/js/model/customer-addresses.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    './customer/address'\r\n], function ($, ko, Address) {\r\n    'use strict';\r\n\r\n    var isLoggedIn = ko.observable(window.isCustomerLoggedIn);\r\n\r\n    return {\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        getAddressItems: function () {\r\n            var items = [],\r\n                customerData = window.customerData;\r\n\r\n            if (isLoggedIn()) {\r\n                if (Object.keys(customerData).length) {\r\n                    $.each(customerData.addresses, function (key, item) {\r\n                        items.push(new Address(item));\r\n                    });\r\n                }\r\n            }\r\n\r\n            return items;\r\n        }\r\n    };\r\n});\r\n","Magento_Customer/js/model/customer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'underscore',\r\n    './address-list'\r\n], function ($, ko, _, addressList) {\r\n    'use strict';\r\n\r\n    var isLoggedIn = ko.observable(window.isCustomerLoggedIn),\r\n        customerData = {};\r\n\r\n    if (isLoggedIn()) {\r\n        customerData = window.customerData;\r\n    } else {\r\n        customerData = {};\r\n    }\r\n\r\n    return {\r\n        customerData: customerData,\r\n        customerDetails: {},\r\n        isLoggedIn: isLoggedIn,\r\n\r\n        /**\r\n         * @param {Boolean} flag\r\n         */\r\n        setIsLoggedIn: function (flag) {\r\n            isLoggedIn(flag);\r\n        },\r\n\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        getBillingAddressList: function () {\r\n            return addressList();\r\n        },\r\n\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        getShippingAddressList: function () {\r\n            return addressList();\r\n        },\r\n\r\n        /**\r\n         * @param {String} fieldName\r\n         * @param {*} value\r\n         */\r\n        setDetails: function (fieldName, value) {\r\n            if (fieldName) {\r\n                this.customerDetails[fieldName] = value;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {String} fieldName\r\n         * @return {*}\r\n         */\r\n        getDetails: function (fieldName) {\r\n            if (fieldName) {\r\n                if (this.customerDetails.hasOwnProperty(fieldName)) {\r\n                    return this.customerDetails[fieldName];\r\n                }\r\n\r\n                return undefined;\r\n            }\r\n\r\n            return this.customerDetails;\r\n        },\r\n\r\n        /**\r\n         * @param {Array} address\r\n         * @return {Number}\r\n         */\r\n        addCustomerAddress: function (address) {\r\n            var fields = [\r\n                    'customer_id', 'country_id', 'street', 'company', 'telephone', 'fax', 'postcode', 'city',\r\n                    'firstname', 'lastname', 'middlename', 'prefix', 'suffix', 'vat_id', 'default_billing',\r\n                    'default_shipping'\r\n                ],\r\n                customerAddress = {},\r\n                hasAddress = 0,\r\n                existingAddress;\r\n\r\n            if (!this.customerData.addresses) {\r\n                this.customerData.addresses = [];\r\n            }\r\n\r\n            customerAddress = _.pick(address, fields);\r\n\r\n            if (address.hasOwnProperty('region_id')) {\r\n                customerAddress.region = {\r\n                    'region_id': address['region_id'],\r\n                    region: address.region\r\n                };\r\n            }\r\n\r\n            for (existingAddress in this.customerData.addresses) {\r\n                if (this.customerData.addresses.hasOwnProperty(existingAddress)) {\r\n                    if (_.isEqual(this.customerData.addresses[existingAddress], customerAddress)) { //eslint-disable-line\r\n                        hasAddress = existingAddress;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (hasAddress === 0) {\r\n                return this.customerData.addresses.push(customerAddress) - 1;\r\n            }\r\n\r\n            return hasAddress;\r\n        },\r\n\r\n        /**\r\n         * @param {*} addressId\r\n         * @return {Boolean}\r\n         */\r\n        setAddressAsDefaultBilling: function (addressId) {\r\n            if (this.customerData.addresses[addressId]) {\r\n                this.customerData.addresses[addressId]['default_billing'] = 1;\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @param {*} addressId\r\n         * @return {Boolean}\r\n         */\r\n        setAddressAsDefaultShipping: function (addressId) {\r\n            if (this.customerData.addresses[addressId]) {\r\n                this.customerData.addresses[addressId]['default_shipping'] = 1;\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n    };\r\n});\r\n","Magento_Customer/js/model/customer/address.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine(['underscore'], function (_) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Returns new address object.\r\n     *\r\n     * @param {Object} addressData\r\n     * @return {Object}\r\n     */\r\n    return function (addressData) {\r\n        var regionId;\r\n\r\n        if (addressData.region['region_id'] && addressData.region['region_id'] !== '0') {\r\n            regionId = addressData.region['region_id'] + '';\r\n        }\r\n\r\n        return {\r\n            customerAddressId: addressData.id,\r\n            email: addressData.email,\r\n            countryId: addressData['country_id'],\r\n            regionId: regionId,\r\n            regionCode: addressData.region['region_code'],\r\n            region: addressData.region.region,\r\n            customerId: addressData['customer_id'],\r\n            street: addressData.street,\r\n            company: addressData.company,\r\n            telephone: addressData.telephone,\r\n            fax: addressData.fax,\r\n            postcode: addressData.postcode,\r\n            city: addressData.city,\r\n            firstname: addressData.firstname,\r\n            lastname: addressData.lastname,\r\n            middlename: addressData.middlename,\r\n            prefix: addressData.prefix,\r\n            suffix: addressData.suffix,\r\n            vatId: addressData['vat_id'],\r\n            sameAsBilling: addressData['same_as_billing'],\r\n            saveInAddressBook: addressData['save_in_address_book'],\r\n            customAttributes: _.toArray(addressData['custom_attributes']).reverse(),\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            isDefaultShipping: function () {\r\n                return addressData['default_shipping'];\r\n            },\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            isDefaultBilling: function () {\r\n                return addressData['default_billing'];\r\n            },\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            getAddressInline: function () {\r\n                return addressData.inline;\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getType: function () {\r\n                return 'customer-address';\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getKey: function () {\r\n                return this.getType() + this.customerAddressId;\r\n            },\r\n\r\n            /**\r\n             * @return {String}\r\n             */\r\n            getCacheKey: function () {\r\n                return this.getKey();\r\n            },\r\n\r\n            /**\r\n             * @return {Boolean}\r\n             */\r\n            isEditable: function () {\r\n                return false;\r\n            },\r\n\r\n            /**\r\n             * @return {Boolean}\r\n             */\r\n            canUseForBilling: function () {\r\n                return true;\r\n            }\r\n        };\r\n    };\r\n});\r\n","Magento_Customer/js/view/authentication-popup.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'Magento_Ui/js/form/form',\r\n    'Magento_Customer/js/action/login',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Customer/js/model/authentication-popup',\r\n    'mage/translate',\r\n    'mage/url',\r\n    'Magento_Ui/js/modal/alert',\r\n    'mage/validation'\r\n], function ($, ko, Component, loginAction, customerData, authenticationPopup, $t, url, alert) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        registerUrl: window.authenticationPopup.customerRegisterUrl,\r\n        forgotPasswordUrl: window.authenticationPopup.customerForgotPasswordUrl,\r\n        autocomplete: window.authenticationPopup.autocomplete,\r\n        modalWindow: null,\r\n        isLoading: ko.observable(false),\r\n\r\n        defaults: {\r\n            template: 'Magento_Customer/authentication-popup'\r\n        },\r\n\r\n        /**\r\n         * Init\r\n         */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n            url.setBaseUrl(window.authenticationPopup.baseUrl);\r\n            loginAction.registerLoginCallback(function () {\r\n                self.isLoading(false);\r\n            });\r\n        },\r\n\r\n        /** Init popup login window */\r\n        setModalElement: function (element) {\r\n            if (authenticationPopup.modalWindow == null) {\r\n                authenticationPopup.createPopUp(element);\r\n            }\r\n        },\r\n\r\n        /** Is login form enabled for current customer */\r\n        isActive: function () {\r\n            var customer = customerData.get('customer');\r\n\r\n            return customer() == false; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /** Show login popup window */\r\n        showModal: function () {\r\n            if (this.modalWindow) {\r\n                $(this.modalWindow).modal('openModal');\r\n            } else {\r\n                alert({\r\n                    content: $t('Guest checkout is disabled.')\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Provide login action\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        login: function (formUiElement, event) {\r\n            var loginData = {},\r\n                formElement = $(event.currentTarget),\r\n                formDataArray = formElement.serializeArray();\r\n\r\n            event.stopPropagation();\r\n            formDataArray.forEach(function (entry) {\r\n                loginData[entry.name] = entry.value;\r\n            });\r\n\r\n            if (formElement.validation() &&\r\n                formElement.validation('isValid')\r\n            ) {\r\n                this.isLoading(true);\r\n                loginAction(loginData);\r\n            }\r\n\r\n            return false;\r\n        }\r\n    });\r\n});\r\n","Magento_Customer/js/view/customer.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data'\r\n], function (Component, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.customer = customerData.get('customer');\r\n        }\r\n    });\r\n});\r\n","Magento_Dhl/js/model/shipping-rates-validation-rules.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'postcode': {\r\n                    'required': true\r\n                },\r\n                'country_id': {\r\n                    'required': true\r\n                },\r\n                'city': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_Dhl/js/model/shipping-rates-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    'Magento_Dhl/js/model/shipping-rates-validation-rules',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_Dhl/js/view/shipping-rates-validation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    'Magento_Dhl/js/model/shipping-rates-validator',\r\n    'Magento_Dhl/js/model/shipping-rates-validation-rules'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    dhlShippingRatesValidator,\r\n    dhlShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('dhl', dhlShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('dhl', dhlShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_Directory/js/region-updater.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'underscore',\r\n    'jquery-ui-modules/widget',\r\n    'mage/validation'\r\n], function ($, mageTemplate, _) {\r\n    'use strict';\r\n\r\n    $.widget('mage.directoryRegionUpdater', {\r\n        options: {\r\n            regionTemplate:\r\n                '<option value=\"<%- data.value %>\" <% if (data.isSelected) { %>selected=\"selected\"<% } %>>' +\r\n                '<%- data.title %>' +\r\n                '</option>',\r\n            isRegionRequired: true,\r\n            isZipRequired: true,\r\n            isCountryRequired: true,\r\n            currentRegion: null,\r\n            isMultipleCountriesAllowed: true\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._initCountryElement();\r\n\r\n            this.currentRegionOption = this.options.currentRegion;\r\n            this.regionTmpl = mageTemplate(this.options.regionTemplate);\r\n\r\n            this._updateRegion(this.element.find('option:selected').val());\r\n\r\n            $(this.options.regionListId).on('change', $.proxy(function (e) {\r\n                this.setOption = false;\r\n                this.currentRegionOption = $(e.target).val();\r\n            }, this));\r\n\r\n            $(this.options.regionInputId).on('focusout', $.proxy(function () {\r\n                this.setOption = true;\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _initCountryElement: function () {\r\n\r\n            if (this.options.isMultipleCountriesAllowed) {\r\n                this.element.parents('div.field').show();\r\n                this.element.on('change', $.proxy(function (e) {\r\n                    // clear region inputs on country change\r\n                    $(this.options.regionListId).val('');\r\n                    $(this.options.regionInputId).val('');\r\n                    this._updateRegion($(e.target).val());\r\n                }, this));\r\n\r\n                if (this.options.isCountryRequired) {\r\n                    this.element.addClass('required-entry');\r\n                    this.element.parents('div.field').addClass('required');\r\n                }\r\n            } else {\r\n                this.element.parents('div.field').hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Remove options from dropdown list\r\n         *\r\n         * @param {Object} selectElement - jQuery object for dropdown list\r\n         * @private\r\n         */\r\n        _removeSelectOptions: function (selectElement) {\r\n            selectElement.find('option').each(function (index) {\r\n                if (index) {\r\n                    $(this).remove();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Render dropdown list\r\n         * @param {Object} selectElement - jQuery object for dropdown list\r\n         * @param {String} key - region code\r\n         * @param {Object} value - region object\r\n         * @private\r\n         */\r\n        _renderSelectOption: function (selectElement, key, value) {\r\n            selectElement.append($.proxy(function () {\r\n                var name = value.name.replace(/[!\"#$%&'()*+,.\\/:;<=>?@[\\\\\\]^`{|}~]/g, '\\\\$&'),\r\n                    tmplData,\r\n                    tmpl;\r\n\r\n                if (value.code && $(name).is('span')) {\r\n                    key = value.code;\r\n                    value.name = $(name).text();\r\n                }\r\n\r\n                tmplData = {\r\n                    value: key,\r\n                    title: value.name,\r\n                    isSelected: false\r\n                };\r\n\r\n                if (this.options.defaultRegion === key) {\r\n                    tmplData.isSelected = true;\r\n                }\r\n\r\n                tmpl = this.regionTmpl({\r\n                    data: tmplData\r\n                });\r\n\r\n                return $(tmpl);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Takes clearError callback function as first option\r\n         * If no form is passed as option, look up the closest form and call clearError method.\r\n         * @private\r\n         */\r\n        _clearError: function () {\r\n            var args = ['clearError', this.options.regionListId, this.options.regionInputId, this.options.postcodeId];\r\n\r\n            if (this.options.clearError && typeof this.options.clearError === 'function') {\r\n                this.options.clearError.call(this);\r\n            } else {\r\n                if (!this.options.form) {\r\n                    this.options.form = this.element.closest('form').length ? $(this.element.closest('form')[0]) : null;\r\n                }\r\n\r\n                this.options.form = $(this.options.form);\r\n\r\n                this.options.form && this.options.form.data('validator') &&\r\n                this.options.form.validation.apply(this.options.form, _.compact(args));\r\n\r\n                // Clean up errors on region & zip fix\r\n                $(this.options.regionInputId).removeClass('mage-error').parent().find('[generated]').remove();\r\n                $(this.options.regionListId).removeClass('mage-error').parent().find('[generated]').remove();\r\n                $(this.options.postcodeId).removeClass('mage-error').parent().find('[generated]').remove();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update dropdown list based on the country selected\r\n         *\r\n         * @param {String} country - 2 uppercase letter for country code\r\n         * @private\r\n         */\r\n        _updateRegion: function (country) {\r\n            // Clear validation error messages\r\n            var regionList = $(this.options.regionListId),\r\n                regionInput = $(this.options.regionInputId),\r\n                postcode = $(this.options.postcodeId),\r\n                label = regionList.parent().siblings('label'),\r\n                container = regionList.parents('div.field'),\r\n                regionsEntries,\r\n                regionId,\r\n                regionData;\r\n\r\n            this._clearError();\r\n            this._checkRegionRequired(country);\r\n\r\n            // Populate state/province dropdown list if available or use input box\r\n            if (this.options.regionJson[country]) {\r\n                this._removeSelectOptions(regionList);\r\n                regionsEntries = _.pairs(this.options.regionJson[country]);\r\n                $.each(regionsEntries, $.proxy(function (key, value) {\r\n                    regionData = value[1];\r\n                    regionId = regionData.id;\r\n                    this._renderSelectOption(regionList, regionId.toString(), regionData);\r\n                }, this));\r\n\r\n                if (this.currentRegionOption) {\r\n                    regionList.val(this.currentRegionOption);\r\n                }\r\n\r\n                if (this.setOption) {\r\n                    regionList.find('option').filter(function () {\r\n                        return this.text === regionInput.val();\r\n                    }).attr('selected', true);\r\n                }\r\n\r\n                if (this.options.isRegionRequired) {\r\n                    regionList.addClass('required-entry').removeAttr('disabled');\r\n                    container.addClass('required').show();\r\n                } else {\r\n                    regionList.removeClass('required-entry validate-select').removeAttr('data-validate');\r\n                    container.removeClass('required');\r\n\r\n                    if (!this.options.optionalRegionAllowed) { //eslint-disable-line max-depth\r\n                        regionList.hide();\r\n                        container.hide();\r\n                    } else {\r\n                        regionList.removeAttr('disabled').show();\r\n                    }\r\n                }\r\n\r\n                regionList.show();\r\n                regionInput.hide();\r\n                label.attr('for', regionList.attr('id'));\r\n            } else {\r\n                this._removeSelectOptions(regionList);\r\n\r\n                if (this.options.isRegionRequired) {\r\n                    regionInput.addClass('required-entry').removeAttr('disabled');\r\n                    container.addClass('required').show();\r\n                } else {\r\n                    if (!this.options.optionalRegionAllowed) { //eslint-disable-line max-depth\r\n                        regionInput.attr('disabled', 'disabled');\r\n                        container.hide();\r\n                    }\r\n                    container.removeClass('required');\r\n                    regionInput.removeClass('required-entry');\r\n                }\r\n\r\n                regionList.removeClass('required-entry').prop('disabled', 'disabled').hide();\r\n                regionInput.show();\r\n                label.attr('for', regionInput.attr('id'));\r\n            }\r\n\r\n            // If country is in optionalzip list, make postcode input not required\r\n            if (this.options.isZipRequired) {\r\n                $.inArray(country, this.options.countriesWithOptionalZip) >= 0 ?\r\n                    postcode.removeClass('required-entry').closest('.field').removeClass('required') :\r\n                    postcode.addClass('required-entry').closest('.field').addClass('required');\r\n            }\r\n\r\n            // Add defaultvalue attribute to state/province select element\r\n            regionList.attr('defaultvalue', this.options.defaultRegion);\r\n            this.options.form.find('[type=\"submit\"]').removeAttr('disabled').show();\r\n        },\r\n\r\n        /**\r\n         * Check if the selected country has a mandatory region selection\r\n         *\r\n         * @param {String} country - Code of the country - 2 uppercase letter for country code\r\n         * @private\r\n         */\r\n        _checkRegionRequired: function (country) {\r\n            var self = this;\r\n\r\n            this.options.isRegionRequired = false;\r\n            $.each(this.options.regionJson.config['regions_required'], function (index, elem) {\r\n                if (elem === country) {\r\n                    self.options.isRegionRequired = true;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return $.mage.directoryRegionUpdater;\r\n});\r\n","Magento_Downloadable/js/downloadable.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'Magento_Catalog/js/price-box'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Downloadable widget\r\n     */\r\n    $.widget('mage.downloadable', {\r\n        options: {\r\n            priceHolderSelector: '.price-box',\r\n            linkElement: '',\r\n            allElements: ''\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        _init: function initLinks() {\r\n            var element = this.element,\r\n                options = $(this.options.linkElement, element);\r\n\r\n            options.trigger('change');\r\n        },\r\n\r\n        /**\r\n         *  @inheritdoc\r\n         */\r\n        _create: function () {\r\n            var self = this;\r\n\r\n            this.element.find(this.options.linkElement).on('change', $.proxy(function () {\r\n                this._reloadPrice();\r\n            }, this));\r\n\r\n            this.element.find(this.options.allElements).on('change', function () {\r\n                if (this.checked) {\r\n                    $('label[for=\"' + this.id + '\"] > span').text($(this).attr('data-checked'));\r\n                    self.element.find(self.options.linkElement + ':not(:checked)').each(function () {\r\n                        $(this).trigger('click');\r\n                    });\r\n                } else {\r\n                    $('[for=\"' + this.id + '\"] > span').text($(this).attr('data-notchecked'));\r\n                    self.element.find(self.options.linkElement + ':checked').each(function () {\r\n                        $(this).trigger('click');\r\n                    });\r\n                }\r\n            });\r\n\r\n            this._reloadPrice();\r\n        },\r\n\r\n        /**\r\n         * Reload product price with selected link price included\r\n         * @private\r\n         */\r\n        _reloadPrice: function () {\r\n            var finalPrice = 0,\r\n                basePrice = 0;\r\n\r\n            this.element.find(this.options.linkElement + ':checked').each($.proxy(function (index, element) {\r\n                finalPrice += this.options.config.links[$(element).val()].finalPrice;\r\n                basePrice += this.options.config.links[$(element).val()].basePrice;\r\n            }, this));\r\n\r\n            $(this.options.priceHolderSelector).trigger('updatePrice', {\r\n                'prices': {\r\n                    'finalPrice': {\r\n                        'amount': finalPrice\r\n                    },\r\n                    'basePrice': {\r\n                        'amount': basePrice\r\n                    }\r\n                }\r\n            });\r\n\r\n            this.reloadAllCheckText();\r\n        },\r\n\r\n        /**\r\n         * Reload all-elements-checkbox's label\r\n         * @private\r\n         */\r\n        reloadAllCheckText: function () {\r\n            var allChecked = true,\r\n                allElementsCheck = $(this.options.allElements),\r\n                allElementsLabel = $('label[for=\"' + allElementsCheck.attr('id') + '\"] > span');\r\n\r\n            $(this.options.linkElement).each(function () {\r\n                if (!this.checked) {\r\n                    allChecked = false;\r\n                }\r\n            });\r\n\r\n            if (allChecked) {\r\n                allElementsLabel.text(allElementsCheck.attr('data-checked'));\r\n                allElementsCheck.prop('checked', true);\r\n            } else {\r\n                allElementsLabel.text(allElementsCheck.attr('data-notchecked'));\r\n                allElementsCheck.prop('checked', false);\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.downloadable;\r\n});\r\n","Magento_Fedex/js/model/shipping-rates-validation-rules.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'postcode': {\r\n                    'required': true\r\n                },\r\n                'country_id': {\r\n                    'required': true\r\n                },\r\n                'city': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_Fedex/js/model/shipping-rates-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    'Magento_Fedex/js/model/shipping-rates-validation-rules',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_Fedex/js/view/shipping-rates-validation.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    'Magento_Fedex/js/model/shipping-rates-validator',\r\n    'Magento_Fedex/js/model/shipping-rates-validation-rules'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    fedexShippingRatesValidator,\r\n    fedexShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('fedex', fedexShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('fedex', fedexShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_GiftMessage/js/gift-options.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.giftOptions', {\r\n        options: {\r\n            mageError: 'mage-error',\r\n            noDisplay: 'no-display',\r\n            requiredEntry: 'required-entry'\r\n        },\r\n\r\n        /**\r\n         * Initial toggle of the various gift options after widget instantiation.\r\n         * @private\r\n         */\r\n        _init: function () {\r\n            this._toggleVisibility();\r\n        },\r\n\r\n        /**\r\n         * Bind a click handler to the widget's context element.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('click', $.proxy(this._toggleVisibility, this));\r\n            $(this.element.data('selector').id).find('.giftmessage-area')\r\n                .on('change', $.proxy(this._toggleRequired, this));\r\n        },\r\n\r\n        /**\r\n         * Toggle the visibility of the widget's context element's selector(s).\r\n         * @private\r\n         * @param {jQuery.Event} event - Click event. Target is a checkbox.\r\n         */\r\n        _toggleVisibility: function (event) {\r\n            var checkbox = event ? $(event.target) : this.element,\r\n                container = $(checkbox.data('selector').id),\r\n                _this;\r\n\r\n            if (checkbox.is(':checked')) {\r\n                container.show()\r\n                    .find('.giftmessage-area:not(:visible)').each(function (x, element) {\r\n                        if ($(element).val().length > 0) {\r\n                            $(element).trigger('change');\r\n                            container.find('a').trigger('click');\r\n                        }\r\n                    });\r\n            } else {\r\n                _this = this;\r\n                container.hide()\r\n                    .find('.input-text:not(.giftmessage-area)').each(function (x, element) {\r\n                        $(element).val(element.defaultValue).removeClass(_this.options.mageError)\r\n                            .next('div.' + _this.options.mageError).remove();\r\n                    }).end()\r\n                    .find('.giftmessage-area').val('').change().end()\r\n                    .find('.select').val('').change().end()\r\n                    .find('.checkbox:checked').prop('checked', false).trigger('click').prop('checked', false).end()\r\n                    .find('.price-box').addClass(this.options.noDisplay).end();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Make the From and To input fields required if a gift message has been written.\r\n         * @private\r\n         * @param {jQuery.Event} event - Change event. Target is a textarea.\r\n         */\r\n        _toggleRequired: function (event) {\r\n            var textArea = $(event.target),\r\n                length = textArea.val().length;\r\n\r\n            textArea.closest('li').prev('.fields')\r\n                .find('.input-text').toggleClass(this.options.requiredEntry, length > 0);\r\n        }\r\n    });\r\n\r\n    return $.mage.giftOptions;\r\n});\r\n","Magento_GiftMessage/js/action/gift-options.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_GiftMessage/js/model/url-builder',\r\n    'mage/storage',\r\n    'Magento_Ui/js/model/messageList',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'mage/url',\r\n    'Magento_Checkout/js/model/quote',\r\n    'underscore'\r\n], function (urlBuilder, storage, messageList, errorProcessor, url, quote, _) {\r\n    'use strict';\r\n\r\n    return function (giftMessage, remove) {\r\n        var serviceUrl;\r\n\r\n        url.setBaseUrl(giftMessage.getConfigValue('baseUrl'));\r\n\r\n        if (giftMessage.getConfigValue('isCustomerLoggedIn')) {\r\n            serviceUrl = urlBuilder.createUrl('/carts/mine/gift-message', {});\r\n\r\n            if (giftMessage.itemId != 'orderLevel') { //eslint-disable-line eqeqeq\r\n                serviceUrl = urlBuilder.createUrl('/carts/mine/gift-message/:itemId', {\r\n                    itemId: giftMessage.itemId\r\n                });\r\n            }\r\n        } else {\r\n            serviceUrl = urlBuilder.createUrl('/guest-carts/:cartId/gift-message', {\r\n                cartId: quote.getQuoteId()\r\n            });\r\n\r\n            if (giftMessage.itemId != 'orderLevel') { //eslint-disable-line eqeqeq\r\n                serviceUrl = urlBuilder.createUrl(\r\n                    '/guest-carts/:cartId/gift-message/:itemId',\r\n                    {\r\n                        cartId: quote.getQuoteId(), itemId: giftMessage.itemId\r\n                    }\r\n                );\r\n            }\r\n        }\r\n        messageList.clear();\r\n\r\n        storage.post(\r\n            serviceUrl,\r\n            JSON.stringify({\r\n                'gift_message': giftMessage.getSubmitParams(remove)\r\n            })\r\n        ).done(function () {\r\n            giftMessage.reset();\r\n            _.each(giftMessage.getAfterSubmitCallbacks(), function (callback) {\r\n                if (_.isFunction(callback)) {\r\n                    callback();\r\n                }\r\n            });\r\n        }).fail(function (response) {\r\n            errorProcessor.process(response);\r\n        });\r\n    };\r\n});\r\n","Magento_GiftMessage/js/model/gift-message.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'uiElement',\r\n    'underscore',\r\n    'mage/url'\r\n], function (uiElement, _, url) {\r\n    'use strict';\r\n\r\n    var provider = uiElement();\r\n\r\n    return function (itemId) {\r\n        var model = {\r\n            id: 'message-' + itemId,\r\n            itemId: itemId,\r\n            observables: {},\r\n            additionalOptions: [],\r\n            submitParams: [\r\n                'recipient',\r\n                'sender',\r\n                'message'\r\n            ],\r\n\r\n            /**\r\n             * Initialize.\r\n             */\r\n            initialize: function () {\r\n                var message = false;\r\n\r\n                this.getObservable('alreadyAdded')(false);\r\n\r\n                if (this.itemId == 'orderLevel') { //eslint-disable-line eqeqeq\r\n                    message = window.giftOptionsConfig.giftMessage.hasOwnProperty(this.itemId) ?\r\n                        window.giftOptionsConfig.giftMessage[this.itemId] :\r\n                        null;\r\n                } else {\r\n                    message =\r\n                        window.giftOptionsConfig.giftMessage.hasOwnProperty('itemLevel') &&\r\n                        window.giftOptionsConfig.giftMessage.itemLevel.hasOwnProperty(this.itemId) ?\r\n                            window.giftOptionsConfig.giftMessage.itemLevel[this.itemId].message :\r\n                            null;\r\n                }\r\n\r\n                if (_.isObject(message)) {\r\n                    this.getObservable('recipient')(message.recipient);\r\n                    this.getObservable('sender')(message.sender);\r\n                    this.getObservable('message')(message.message);\r\n                    this.getObservable('alreadyAdded')(true);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @param {String} key\r\n             * @return {*}\r\n             */\r\n            getObservable: function (key) {\r\n                this.initObservable(this.id, key);\r\n\r\n                return provider[this.getUniqueKey(this.id, key)];\r\n            },\r\n\r\n            /**\r\n             * @param {String} node\r\n             * @param {String} key\r\n             */\r\n            initObservable: function (node, key) {\r\n                if (node && !this.observables.hasOwnProperty(node)) {\r\n                    this.observables[node] = [];\r\n                }\r\n\r\n                if (key && this.observables[node].indexOf(key) === -1) {\r\n                    this.observables[node].push(key);\r\n                    provider.observe(this.getUniqueKey(node, key));\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @param {String} node\r\n             * @param {String} key\r\n             * @return {String}\r\n             */\r\n            getUniqueKey: function (node, key) {\r\n                return node + '-' + key;\r\n            },\r\n\r\n            /**\r\n             * @param {String} key\r\n             * @return {null}\r\n             */\r\n            getConfigValue: function (key) {\r\n                return window.giftOptionsConfig.hasOwnProperty(key) ?\r\n                    window.giftOptionsConfig[key]\r\n                    : null;\r\n            },\r\n\r\n            /**\r\n             * Reset.\r\n             */\r\n            reset: function () {\r\n                this.getObservable('isClear')(true);\r\n            },\r\n\r\n            /**\r\n             * @return {Array}\r\n             */\r\n            getAfterSubmitCallbacks: function () {\r\n                var callbacks = [];\r\n\r\n                callbacks.push(this.afterSubmit);\r\n                _.each(this.additionalOptions, function (option) {\r\n                    if (_.isFunction(option.afterSubmit)) {\r\n                        callbacks.push(option.afterSubmit);\r\n                    }\r\n                });\r\n\r\n                return callbacks;\r\n            },\r\n\r\n            /**\r\n             * After submit.\r\n             */\r\n            afterSubmit: function () {\r\n                window.location.href = url.build('checkout/cart/updatePost') +\r\n                    '?form_key=' + window.checkoutConfig.formKey +\r\n                    '&cart[]';\r\n            },\r\n\r\n            /**\r\n             * @param {Boolean} remove\r\n             * @return {Object}\r\n             */\r\n            getSubmitParams: function (remove) {\r\n                var params = {},\r\n                    self = this;\r\n\r\n                _.each(this.submitParams, function (key) {\r\n                    var observable = provider[self.getUniqueKey(self.id, key)];\r\n\r\n                    if (_.isFunction(observable)) {\r\n                        params[key] = remove ? null : observable();\r\n                    }\r\n                });\r\n\r\n                if (this.additionalOptions.length) {\r\n                    params['extension_attributes'] = {};\r\n                }\r\n                _.each(this.additionalOptions, function (option) {\r\n                    if (_.isFunction(option.getSubmitParams)) {\r\n                        params['extension_attributes'] = _.extend(\r\n                            params['extension_attributes'],\r\n                            option.getSubmitParams(remove)\r\n                        );\r\n                    }\r\n                });\r\n\r\n                return params;\r\n            },\r\n\r\n            /**\r\n             * Check if gift message can be displayed\r\n             *\r\n             * @returns {Boolean}\r\n             */\r\n            isGiftMessageAvailable: function () {\r\n                var isGloballyAvailable,\r\n                    giftMessageConfig,\r\n                    itemConfig;\r\n\r\n                // itemId represent gift message level: 'orderLevel' constant or cart item ID\r\n                if (this.itemId === 'orderLevel') {\r\n                    return this.getConfigValue('isOrderLevelGiftOptionsEnabled');\r\n                }\r\n\r\n                // gift message product configuration must override system configuration\r\n                isGloballyAvailable = this.getConfigValue('isItemLevelGiftOptionsEnabled');\r\n                giftMessageConfig = window.giftOptionsConfig.giftMessage;\r\n                itemConfig = giftMessageConfig.hasOwnProperty('itemLevel') &&\r\n                    giftMessageConfig.itemLevel.hasOwnProperty(this.itemId) ?\r\n                    giftMessageConfig.itemLevel[this.itemId] :\r\n                    {};\r\n\r\n                return itemConfig.hasOwnProperty('is_available') ? itemConfig['is_available'] : isGloballyAvailable;\r\n            }\r\n        };\r\n\r\n        model.initialize();\r\n\r\n        return model;\r\n    };\r\n});\r\n","Magento_GiftMessage/js/model/gift-options.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'ko'\r\n], function (_, ko) {\r\n    'use strict';\r\n\r\n    return {\r\n        options: ko.observableArray([]),\r\n\r\n        /**\r\n         * @param {Object} option\r\n         */\r\n        addOption: function (option) {\r\n            if (!this.options().hasOwnProperty(option.itemId)) {\r\n                this.options.push({\r\n                        id: option.itemId, value: option\r\n                    }\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @param {*} itemId\r\n         * @return {*}\r\n         */\r\n        getOptionByItemId: function (itemId) {\r\n            var option = null;\r\n\r\n            _.each(this.options(), function (data) {\r\n                if (data.id === itemId) {\r\n                    option = data.value;\r\n\r\n                    return false;\r\n                }\r\n            });\r\n\r\n            return option;\r\n        }\r\n    };\r\n});\r\n","Magento_GiftMessage/js/model/url-builder.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/model/url-builder'\r\n], function ($, urlBuilder) {\r\n    'use strict';\r\n\r\n    return $.extend(urlBuilder, {\r\n        storeCode: window.giftOptionsConfig.storeCode\r\n    });\r\n});\r\n","Magento_GiftMessage/js/view/gift-message.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_GiftMessage/js/model/gift-message',\r\n    'Magento_GiftMessage/js/model/gift-options',\r\n    'Magento_GiftMessage/js/action/gift-options'\r\n], function (Component, GiftMessage, giftOptions, giftOptionsService) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        formBlockVisibility: null,\r\n        resultBlockVisibility: null,\r\n        model: {},\r\n\r\n        /**\r\n         * Component init\r\n         */\r\n        initialize: function () {\r\n            var self = this,\r\n                model;\r\n\r\n            this._super()\r\n                .observe('formBlockVisibility')\r\n                .observe({\r\n                    'resultBlockVisibility': false\r\n                });\r\n\r\n            this.itemId = this.itemId || 'orderLevel';\r\n            model = new GiftMessage(this.itemId);\r\n            this.model = model;\r\n            this.isResultBlockVisible();\r\n            giftOptions.addOption(model);\r\n\r\n            this.model.getObservable('isClear').subscribe(function (value) {\r\n                if (value == true) { //eslint-disable-line eqeqeq\r\n                    self.formBlockVisibility(false);\r\n                    self.model.getObservable('alreadyAdded')(true);\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Is reslt block visible\r\n         */\r\n        isResultBlockVisible: function () {\r\n            var self = this;\r\n\r\n            if (this.model.getObservable('alreadyAdded')()) {\r\n                this.resultBlockVisibility(true);\r\n            }\r\n            this.model.getObservable('additionalOptionsApplied').subscribe(function (value) {\r\n                if (value == true) { //eslint-disable-line eqeqeq\r\n                    self.resultBlockVisibility(true);\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @param {String} key\r\n         * @return {*}\r\n         */\r\n        getObservable: function (key) {\r\n            return this.model.getObservable(key);\r\n        },\r\n\r\n        /**\r\n         * Hide\\Show form block\r\n         */\r\n        toggleFormBlockVisibility: function () {\r\n            if (!this.model.getObservable('alreadyAdded')()) {\r\n                this.formBlockVisibility(!this.formBlockVisibility());\r\n            } else {\r\n                this.resultBlockVisibility(!this.resultBlockVisibility());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Edit options\r\n         */\r\n        editOptions: function () {\r\n            this.resultBlockVisibility(false);\r\n            this.formBlockVisibility(true);\r\n        },\r\n\r\n        /**\r\n         * Delete options\r\n         */\r\n        deleteOptions: function () {\r\n            giftOptionsService(this.model, true);\r\n        },\r\n\r\n        /**\r\n         * Hide form block\r\n         */\r\n        hideFormBlock: function () {\r\n            this.formBlockVisibility(false);\r\n\r\n            if (this.model.getObservable('alreadyAdded')()) {\r\n                this.resultBlockVisibility(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        hasActiveOptions: function () {\r\n            var regionData = this.getRegion('additionalOptions'),\r\n                options = regionData(),\r\n                i;\r\n\r\n            for (i = 0; i < options.length; i++) {\r\n                if (options[i].isActive()) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isActive: function () {\r\n            return this.model.isGiftMessageAvailable();\r\n        },\r\n\r\n        /**\r\n         * Submit options\r\n         */\r\n        submitOptions: function () {\r\n            giftOptionsService(this.model);\r\n        }\r\n    });\r\n});\r\n","Magento_GoogleAnalytics/js/google-analytics.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/* jscs:disable */\r\n/* eslint-disable */\r\ndefine([\r\n    'jquery',\r\n    'mage/cookies'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {Object} config\r\n     */\r\n    return function (config) {\r\n        var allowServices = false,\r\n            allowedCookies,\r\n            allowedWebsites;\r\n\r\n        if (config.isCookieRestrictionModeEnabled) {\r\n            allowedCookies = $.mage.cookies.get(config.cookieName);\r\n\r\n            if (allowedCookies !== null) {\r\n                allowedWebsites = JSON.parse(allowedCookies);\r\n\r\n                if (allowedWebsites[config.currentWebsite] === 1) {\r\n                    allowServices = true;\r\n                }\r\n            }\r\n        } else {\r\n            allowServices = true;\r\n        }\r\n\r\n        if (allowServices) {\r\n            (function (i, s, o, g, r, a, m) {\r\n                i.GoogleAnalyticsObject = r;\r\n                i[r] = i[r] || function () {\r\n                        (i[r].q = i[r].q || []).push(arguments)\r\n                    }, i[r].l = 1 * new Date();\r\n                a = s.createElement(o),\r\n                    m = s.getElementsByTagName(o)[0];\r\n                a.async = 1;\r\n                a.src = g;\r\n                m.parentNode.insertBefore(a, m)\r\n            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');\r\n\r\n            // Process page info\r\n            ga('create', config.pageTrackingData.accountId, 'auto');\r\n\r\n            if (config.pageTrackingData.isAnonymizedIpActive) {\r\n                ga('set', 'anonymizeIp', true);\r\n            }\r\n\r\n            // Process orders data\r\n            if (config.ordersTrackingData.hasOwnProperty('currency')) {\r\n                ga('require', 'ec', 'ec.js');\r\n\r\n                ga('set', 'currencyCode', config.ordersTrackingData.currency);\r\n\r\n                // Collect product data for GA\r\n                if (config.ordersTrackingData.products) {\r\n                    $.each(config.ordersTrackingData.products, function (index, value) {\r\n                        ga('ec:addProduct', value);\r\n                    });\r\n                }\r\n\r\n                // Collect orders data for GA\r\n                if (config.ordersTrackingData.orders) {\r\n                    $.each(config.ordersTrackingData.orders, function (index, value) {\r\n                        ga('ec:setAction', 'purchase', value);\r\n                    });\r\n                }\r\n\r\n                ga('send', 'pageview');\r\n            } else {\r\n                // Process Data if not orders\r\n                ga('send', 'pageview' + config.pageTrackingData.optPageUrl);\r\n            }\r\n        }\r\n    }\r\n});\r\n","Magento_GroupedProduct/js/product-ids-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Catalog/js/product/view/product-ids',\r\n    'Magento_Catalog/js/product/view/product-info'\r\n], function ($, productIds, productInfo) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Returns id's of products in form.\r\n     *\r\n     * @param {Object} config\r\n     * @param {HTMLElement} element\r\n     * @return {Array}\r\n     */\r\n    return function (config, element) {\r\n        $(element).find('div[data-product-id]').each(function () {\r\n            productIds.push($(this).data('productId').toString());\r\n            productInfo.push(\r\n                {\r\n                    'id': $(this).data('productId').toString()\r\n                }\r\n            );\r\n        });\r\n\r\n        return productIds();\r\n    };\r\n});\r\n","Magento_InstantPurchase/js/view/instant-purchase.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'Magento_Customer/js/customer-data',\r\n    'mage/url',\r\n    'mage/template',\r\n    'mage/translate',\r\n    'text!Magento_InstantPurchase/template/confirmation.html',\r\n    'mage/validation'\r\n], function (ko, $, _, Component, confirm, customerData, urlBuilder, mageTemplate, $t, confirmationTemplate) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_InstantPurchase/instant-purchase',\r\n            buttonText: $t('Instant Purchase'),\r\n            purchaseUrl: urlBuilder.build('instantpurchase/button/placeOrder'),\r\n            showButton: false,\r\n            paymentToken: null,\r\n            shippingAddress: null,\r\n            billingAddress: null,\r\n            shippingMethod: null,\r\n            productFormSelector: '#product_addtocart_form',\r\n            confirmationTitle: $t('Instant Purchase Confirmation'),\r\n            confirmationData: {\r\n                message: $t('Are you sure you want to place order and pay?'),\r\n                shippingAddressTitle: $t('Shipping Address'),\r\n                billingAddressTitle: $t('Billing Address'),\r\n                paymentMethodTitle: $t('Payment Method'),\r\n                shippingMethodTitle: $t('Shipping Method')\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var instantPurchase = customerData.get('instant-purchase');\r\n\r\n            this._super();\r\n\r\n            this.setPurchaseData(instantPurchase());\r\n            instantPurchase.subscribe(this.setPurchaseData, this);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('showButton paymentToken shippingAddress billingAddress shippingMethod');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set data from customerData.\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        setPurchaseData: function (data) {\r\n            this.showButton(data.available);\r\n            this.paymentToken(data.paymentToken);\r\n            this.shippingAddress(data.shippingAddress);\r\n            this.billingAddress(data.billingAddress);\r\n            this.shippingMethod(data.shippingMethod);\r\n        },\r\n\r\n        /**\r\n         * Confirmation method\r\n         */\r\n        instantPurchase: function () {\r\n            var form = $(this.productFormSelector),\r\n                confirmTemplate = mageTemplate(confirmationTemplate),\r\n                confirmData = _.extend({}, this.confirmationData, {\r\n                    paymentToken: this.paymentToken().summary,\r\n                    shippingAddress: this.shippingAddress().summary,\r\n                    billingAddress: this.billingAddress().summary,\r\n                    shippingMethod: this.shippingMethod().summary\r\n                });\r\n\r\n            if (!(form.validation() && form.validation('isValid'))) {\r\n                return;\r\n            }\r\n\r\n            confirm({\r\n                title: this.confirmationTitle,\r\n                content: confirmTemplate({\r\n                    data: confirmData\r\n                }),\r\n                actions: {\r\n                    /** @inheritdoc */\r\n                    confirm: function () {\r\n                        $.ajax({\r\n                            url: this.purchaseUrl,\r\n                            data: form.serialize(),\r\n                            type: 'post',\r\n                            dataType: 'json',\r\n\r\n                            /** Show loader before send */\r\n                            beforeSend: function () {\r\n                                $('body').trigger('processStart');\r\n                            }\r\n                        }).always(function () {\r\n                            $('body').trigger('processStop');\r\n                        });\r\n                    }.bind(this)\r\n                }\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_LoginAsCustomerAssistance/js/opt-in.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).on('submit', function () {\r\n            this.elements['assistance_allowed'].value =\r\n                this.elements['assistance_allowed_checkbox'].checked ?\r\n                    config.allowAccess : config.denyAccess;\r\n        });\r\n    };\r\n});\r\n","Magento_LoginAsCustomerFrontendUi/js/login.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Customer/js/section-config'\r\n], function ($, customerData, sectionConfig) {\r\n\r\n    'use strict';\r\n\r\n    return function (config) {\r\n        customerData.reload(sectionConfig.getSectionNames()).done(function () {\r\n            window.location.href = config.redirectUrl;\r\n        });\r\n    };\r\n});\r\n","Magento_LoginAsCustomerFrontendUi/js/view/loginAsCustomer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'mage/translate'\r\n], function ($, _, Component, customer) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            isVisible: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var customerData, loggedAsCustomerData;\r\n\r\n            this._super();\r\n\r\n            customerData = customer.get('customer');\r\n            loggedAsCustomerData = customer.get('loggedAsCustomer');\r\n\r\n            customerData.subscribe(function (data) {\r\n                this.fullname = data.fullname;\r\n                this.updateBanner();\r\n            }.bind(this));\r\n            loggedAsCustomerData.subscribe(function (data) {\r\n                this.adminUserId = data.adminUserId;\r\n                this.websiteName = data.websiteName;\r\n                this.updateBanner();\r\n            }.bind(this));\r\n\r\n            this.fullname = customerData().fullname;\r\n            this.adminUserId = loggedAsCustomerData().adminUserId;\r\n            this.websiteName = loggedAsCustomerData().websiteName;\r\n\r\n            this.updateBanner();\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe(['isVisible', 'notificationText']);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update banner area\r\n         *\r\n         * @returns void\r\n         */\r\n        updateBanner: function () {\r\n            if (this.adminUserId !== undefined) {\r\n                this.isVisible(this.adminUserId);\r\n            }\r\n\r\n            if (this.fullname !== undefined && this.websiteName !== undefined) {\r\n                this.notificationText($.mage.__('You are connected as <strong>%1</strong> on %2')\r\n                    .replace('%1', _.escape(this.fullname))\r\n                    .replace('%2', _.escape(this.websiteName)));\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Msrp/js/msrp.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Catalog/js/price-utils',\r\n    'underscore',\r\n    'jquery-ui-modules/widget',\r\n    'mage/dropdown',\r\n    'mage/template'\r\n], function ($, priceUtils, _) {\r\n    'use strict';\r\n\r\n    $.widget('mage.addToCart', {\r\n        options: {\r\n            showAddToCart: true,\r\n            submitUrl: '',\r\n            cartButtonId: '',\r\n            singleOpenDropDown: true,\r\n            dialog: {}, // Options for mage/dropdown\r\n            dialogDelay: 500, // Delay in ms after resize dropdown shown again\r\n            origin: '', //Required, type of popup: 'msrp', 'tier' or 'info' popup\r\n\r\n            // Selectors\r\n            cartForm: '.form.map.checkout',\r\n            msrpLabelId: '#map-popup-msrp',\r\n            msrpPriceElement: '#map-popup-msrp .price-wrapper',\r\n            priceLabelId: '#map-popup-price',\r\n            priceElement: '#map-popup-price .price',\r\n            mapInfoLinks: '.map-show-info',\r\n            displayPriceElement: '.old-price.map-old-price .price-wrapper',\r\n            fallbackPriceElement: '.normal-price.map-fallback-price .price-wrapper',\r\n            displayPriceContainer: '.old-price.map-old-price',\r\n            fallbackPriceContainer: '.normal-price.map-fallback-price',\r\n            popUpAttr: '[data-role=msrp-popup-template]',\r\n            popupCartButtonId: '#map-popup-button',\r\n            paypalCheckoutButons: '[data-action=checkout-form-submit]',\r\n            popupId: '',\r\n            realPrice: '',\r\n            isSaleable: '',\r\n            msrpPrice: '',\r\n            helpLinkId: '',\r\n            addToCartButton: '',\r\n\r\n            // Text options\r\n            productName: '',\r\n            addToCartUrl: ''\r\n        },\r\n\r\n        openDropDown: null,\r\n        triggerClass: 'dropdown-active',\r\n\r\n        popUpOptions: {\r\n            appendTo: 'body',\r\n            dialogContentClass: 'active',\r\n            closeOnMouseLeave: false,\r\n            autoPosition: true,\r\n            closeOnClickOutside: false,\r\n            'dialogClass': 'popup map-popup-wrapper',\r\n            position: {\r\n                my: 'left top',\r\n                collision: 'fit none',\r\n                at: 'left bottom',\r\n                within: 'body'\r\n            },\r\n            shadowHinter: 'popup popup-pointer'\r\n        },\r\n        popupOpened: false,\r\n        wasOpened: false,\r\n\r\n        /**\r\n         * Creates widget instance\r\n         *\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            if (this.options.origin === 'msrp') {\r\n                this.initMsrpPopup();\r\n            } else if (this.options.origin === 'info') {\r\n                this.initInfoPopup();\r\n            } else if (this.options.origin === 'tier') {\r\n                this.initTierPopup();\r\n            }\r\n            $(this.options.cartButtonId).on('click', this._addToCartSubmit.bind(this));\r\n            $(document).on('updateMsrpPriceBlock', this.onUpdateMsrpPrice.bind(this));\r\n            $(this.options.cartForm).on('submit', this._onSubmitForm.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Init msrp popup\r\n         *\r\n         * @private\r\n         */\r\n        initMsrpPopup: function () {\r\n            var popupDOM = $(this.options.popUpAttr)[0],\r\n                $msrpPopup = $(popupDOM.innerHTML.trim());\r\n\r\n            $msrpPopup.find(this.options.productIdInput).val(this.options.productId);\r\n            $('body').append($msrpPopup);\r\n            $msrpPopup.trigger('contentUpdated');\r\n\r\n            $msrpPopup.find('button')\r\n                .on('click',\r\n                    this.handleMsrpAddToCart.bind(this))\r\n                .filter(this.options.popupCartButtonId)\r\n                .text($(this.options.addToCartButton).text());\r\n\r\n            $msrpPopup.find(this.options.paypalCheckoutButons).on('click',\r\n                this.handleMsrpPaypalCheckout.bind(this));\r\n\r\n            $(this.options.popupId).on('click',\r\n                this.openPopup.bind(this));\r\n\r\n            this.$popup = $msrpPopup;\r\n        },\r\n\r\n        /**\r\n         * Init info popup\r\n         *\r\n         * @private\r\n         */\r\n        initInfoPopup: function () {\r\n            var infoPopupDOM = $('[data-role=msrp-info-template]')[0],\r\n                $infoPopup = $(infoPopupDOM.innerHTML.trim());\r\n\r\n            $('body').append($infoPopup);\r\n\r\n            $(this.options.helpLinkId).on('click', function (e) {\r\n                this.popUpOptions.position.of = $(e.target);\r\n                $infoPopup.dropdownDialog(this.popUpOptions).dropdownDialog('open');\r\n                this._toggle($infoPopup);\r\n            }.bind(this));\r\n\r\n            this.$popup = $infoPopup;\r\n        },\r\n\r\n        /**\r\n         * Init tier price popup\r\n         * @private\r\n         */\r\n        initTierPopup: function () {\r\n            var popupDOM = $(this.options.popUpAttr)[0],\r\n                $tierPopup = $(popupDOM.innerHTML.trim());\r\n\r\n            $('body').append($tierPopup);\r\n            $tierPopup.find(this.options.productIdInput).val(this.options.productId);\r\n            this.popUpOptions.position.of = $(this.options.helpLinkId);\r\n\r\n            $tierPopup.find('button').on('click',\r\n                this.handleTierAddToCart.bind(this))\r\n                .filter(this.options.popupCartButtonId)\r\n                .text($(this.options.addToCartButton).text());\r\n\r\n            $tierPopup.find(this.options.paypalCheckoutButons).on('click',\r\n                this.handleTierPaypalCheckout.bind(this));\r\n\r\n            $(this.options.attr).on('click', function (e) {\r\n                this.$popup = $tierPopup;\r\n                this.tierOptions = $(e.target).data('tier-price');\r\n                this.openPopup(e);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * handle 'AddToCart' click on Msrp popup\r\n         * @param {Object} ev\r\n         *\r\n         * @private\r\n         */\r\n        handleMsrpAddToCart: function (ev) {\r\n            ev.preventDefault();\r\n\r\n            if (this.options.addToCartButton) {\r\n                $(this.options.addToCartButton).trigger('click');\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * handle 'paypal checkout buttons' click on Msrp popup\r\n         *\r\n         * @private\r\n         */\r\n        handleMsrpPaypalCheckout: function () {\r\n            this.closePopup(this.$popup);\r\n        },\r\n\r\n        /**\r\n         * handle 'AddToCart' click on Tier popup\r\n         *\r\n         * @param {Object} ev\r\n         * @private\r\n         */\r\n        handleTierAddToCart: function (ev) {\r\n            ev.preventDefault();\r\n\r\n            if (this.options.addToCartButton &&\r\n                this.options.inputQty && !isNaN(this.tierOptions.qty)\r\n            ) {\r\n                $(this.options.inputQty).val(this.tierOptions.qty);\r\n                $(this.options.addToCartButton).trigger('click');\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * handle 'paypal checkout buttons' click on Tier popup\r\n         *\r\n         * @private\r\n         */\r\n        handleTierPaypalCheckout: function () {\r\n            if (this.options.inputQty && !isNaN(this.tierOptions.qty)\r\n            ) {\r\n                $(this.options.inputQty).val(this.tierOptions.qty);\r\n                this.closePopup(this.$popup);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Open and set up popup\r\n         *\r\n         * @param {Object} event\r\n         */\r\n        openPopup: function (event) {\r\n            var options = this.tierOptions || this.options;\r\n\r\n            this.popUpOptions.position.of = $(event.target);\r\n\r\n            if (!this.wasOpened) {\r\n                this.$popup.find(this.options.msrpLabelId).html(options.msrpPrice);\r\n                this.$popup.find(this.options.priceLabelId).html(options.realPrice);\r\n                this.wasOpened = true;\r\n            }\r\n            this.$popup.dropdownDialog(this.popUpOptions).dropdownDialog('open');\r\n            this._toggle(this.$popup);\r\n\r\n            if (!this.options.isSaleable) {\r\n                this.$popup.find('form').hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Toggle MAP popup visibility\r\n         *\r\n         * @param {HTMLElement} $elem\r\n         * @private\r\n         */\r\n        _toggle: function ($elem) {\r\n            $(document).on('mouseup.msrp touchend.msrp', function (e) {\r\n                if (!$elem.is(e.target) && $elem.has(e.target).length === 0) {\r\n                    this.closePopup($elem);\r\n                }\r\n            }.bind(this));\r\n            $(window).on('resize', function () {\r\n                this.closePopup($elem);\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Close MAP information popup\r\n         *\r\n         * @param {HTMLElement} $elem\r\n         */\r\n        closePopup: function ($elem) {\r\n            $elem.dropdownDialog('close');\r\n            $(document).off('mouseup.msrp touchend.msrp');\r\n        },\r\n\r\n        /**\r\n         * Handler for addToCart action\r\n         *\r\n         * @param {Object} e\r\n         */\r\n        _addToCartSubmit: function (e) {\r\n            this.element.trigger('addToCart', this.element);\r\n\r\n            if (this.element.data('stop-processing')) {\r\n                return false;\r\n            }\r\n\r\n            if (this.options.addToCartButton) {\r\n                $(this.options.addToCartButton).trigger('click');\r\n\r\n                return false;\r\n            }\r\n\r\n            if (this.options.addToCartUrl) {\r\n                $('.mage-dropdown-dialog > .ui-dialog-content').dropdownDialog('close');\r\n            }\r\n\r\n            e.preventDefault();\r\n            $(this.options.cartForm).trigger('submit');\r\n        },\r\n\r\n        /**\r\n         * Call on event updatePrice. Proxy to updateMsrpPrice method.\r\n         *\r\n         * @param {Event} event\r\n         * @param {mixed} priceIndex\r\n         * @param {Object} prices\r\n         * @param {Object|undefined} $priceBox\r\n         */\r\n        onUpdateMsrpPrice: function onUpdateMsrpPrice(event, priceIndex, prices, $priceBox) {\r\n\r\n            var defaultMsrp,\r\n                defaultPrice,\r\n                msrpPrice,\r\n                finalPrice;\r\n\r\n            defaultMsrp = _.chain(prices).map(function (price) {\r\n                return price.msrpPrice.amount;\r\n            }).reject(function (p) {\r\n                return p === null;\r\n            }).max().value();\r\n\r\n            defaultPrice = _.chain(prices).map(function (p) {\r\n                return p.finalPrice.amount;\r\n            }).min().value();\r\n\r\n            if (typeof priceIndex !== 'undefined') {\r\n                msrpPrice = prices[priceIndex].msrpPrice.amount;\r\n                finalPrice = prices[priceIndex].finalPrice.amount;\r\n\r\n                if (msrpPrice === null || msrpPrice <= finalPrice) {\r\n                    this.updateNonMsrpPrice(priceUtils.formatPrice(finalPrice), $priceBox);\r\n                } else {\r\n                    this.updateMsrpPrice(\r\n                        priceUtils.formatPrice(finalPrice),\r\n                        priceUtils.formatPrice(msrpPrice),\r\n                        false,\r\n                        $priceBox);\r\n                }\r\n            } else {\r\n                this.updateMsrpPrice(\r\n                    priceUtils.formatPrice(defaultPrice),\r\n                    priceUtils.formatPrice(defaultMsrp),\r\n                    true,\r\n                    $priceBox);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update prices for configurable product with MSRP enabled\r\n         *\r\n         * @param {String} finalPrice\r\n         * @param {String} msrpPrice\r\n         * @param {Boolean} useDefaultPrice\r\n         * @param {Object|undefined} $priceBox\r\n         */\r\n        updateMsrpPrice: function (finalPrice, msrpPrice, useDefaultPrice, $priceBox) {\r\n            var options = this.tierOptions || this.options;\r\n\r\n            $(this.options.fallbackPriceContainer, $priceBox).hide();\r\n            $(this.options.displayPriceContainer, $priceBox).show();\r\n            $(this.options.mapInfoLinks, $priceBox).show();\r\n\r\n            if (useDefaultPrice || !this.wasOpened) {\r\n                if (this.$popup) {\r\n                    this.$popup.find(this.options.msrpLabelId).html(options.msrpPrice);\r\n                    this.$popup.find(this.options.priceLabelId).html(options.realPrice);\r\n                }\r\n\r\n                $(this.options.displayPriceElement, $priceBox).html(msrpPrice);\r\n                this.wasOpened = true;\r\n            }\r\n\r\n            if (!useDefaultPrice) {\r\n                this.$popup.find(this.options.msrpPriceElement).html(msrpPrice);\r\n                this.$popup.find(this.options.priceElement).html(finalPrice);\r\n                $(this.options.displayPriceElement, $priceBox).html(msrpPrice);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Display non MAP price for irrelevant products\r\n         *\r\n         * @param {String} price\r\n         * @param {Object|undefined} $priceBox\r\n         */\r\n        updateNonMsrpPrice: function (price, $priceBox) {\r\n            $(this.options.fallbackPriceElement, $priceBox).html(price);\r\n            $(this.options.displayPriceContainer, $priceBox).hide();\r\n            $(this.options.mapInfoLinks, $priceBox).hide();\r\n            $(this.options.fallbackPriceContainer, $priceBox).show();\r\n        },\r\n\r\n        /**\r\n         * Handler for submit form\r\n         *\r\n         * @private\r\n         */\r\n        _onSubmitForm: function () {\r\n            if ($(this.options.cartForm).valid()) {\r\n                $(this.options.cartButtonId).prop('disabled', true);\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n    return $.mage.addToCart;\r\n});\r\n","Magento_Msrp/js/product/list/columns/msrp-price.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Catalog/js/product/list/columns/price-box',\r\n    'Magento_Catalog/js/product/addtocart-button',\r\n    'mage/dropdown'\r\n], function ($, _, PriceBox) {\r\n    'use strict';\r\n\r\n    return PriceBox.extend({\r\n        defaults: {\r\n            priceBoxSelector: '[data-role=msrp-price-box]',\r\n            popupTmpl: 'Magento_Msrp/product/item/popup',\r\n            popupTriggerSelector: '[data-role=msrp-popup-trigger]',\r\n            popupSelector: '[data-role=msrp-popup]',\r\n            popupOptions: {\r\n                appendTo: 'body',\r\n                dialogContentClass: 'active',\r\n                closeOnMouseLeave: false,\r\n                autoPosition: true,\r\n                dialogClass: 'popup map-popup-wrapper',\r\n                position: {\r\n                    my: 'left top',\r\n                    collision: 'fit none',\r\n                    at: 'left bottom',\r\n                    within: 'body'\r\n                },\r\n                shadowHinter: 'popup popup-pointer'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Create and open popup with Msrp information.\r\n         *\r\n         * @param {Object} data - element data\r\n         * @param {DOMElement} elem - element\r\n         * @param {Event} event - event object\r\n         */\r\n        openPopup: function (data, elem, event) {\r\n            var $elem = $(elem),\r\n                $popup = $elem.find(this.popupSelector),\r\n                $trigger = $elem.find(this.popupTriggerSelector);\r\n\r\n            event.stopPropagation();\r\n\r\n            this.popupOptions.position.of = $trigger;\r\n            this.popupOptions.triggerTarget = $trigger;\r\n\r\n            $popup.dropdownDialog(this.popupOptions)\r\n                  .dropdownDialog('open');\r\n        },\r\n\r\n        /**\r\n         * Set listeners.\r\n         *\r\n         * @param {DOMElement} elem - DOM element\r\n         * @param {Object} data - element data\r\n         */\r\n        initListeners: function (elem, data) {\r\n            var $trigger = $(elem).find(this.popupTriggerSelector);\r\n\r\n            $trigger.on('click', this.openPopup.bind(this, data, elem));\r\n        },\r\n\r\n        /**\r\n         * Check whether we can apply msrp, or should use standard price.\r\n         *\r\n         * @param {Object} row\r\n         * @returns {Bool}\r\n         */\r\n        isMsrpApplicable: function (row) {\r\n            return this.getPrice(row)['is_applicable'];\r\n        },\r\n\r\n        /**\r\n         * Retrieve msrp formatted price\r\n         *\r\n         * @param {Object} row\r\n         * @returns {String}\r\n         */\r\n        getPrice: function (row) {\r\n            return row['price_info']['extension_attributes'].msrp;\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getPrice.\r\n         *\r\n         * @param {Object} row\r\n         * @returns {String}\r\n         */\r\n        getPriceUnsanitizedHtml: function (row) {\r\n            return this.getPrice(row);\r\n        },\r\n\r\n        /**\r\n         * Get msrp_price property of a price.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} final price html\r\n         */\r\n        getMsrpPriceUnsanitizedHtml: function (row) {\r\n            return this.getPrice(row)['msrp_price'];\r\n        },\r\n\r\n        /**\r\n         * Returns path to the columns' body template.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getBody: function () {\r\n            return this.bodyTmpl;\r\n        },\r\n\r\n        /**\r\n         * Check if popup with actual price must be shown.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isShowPriceOnGesture: function (row) {\r\n            return this.getPrice(row)['is_shown_price_on_gesture'];\r\n        },\r\n\r\n        /**\r\n         * Get msrp price supporting text.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getMsrpPriceMessage: function (row) {\r\n            return this.getPrice(row)['msrp_message'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getMsrpPriceMessage.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getMsrpPriceMessageUnsanitizedHtml: function (row) {\r\n            return this.getMsrpPriceMessage(row);\r\n        },\r\n\r\n        /**\r\n         * Get msrp price supporting text, when actual price is hidden.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getExplanationMessage: function (row) {\r\n            return this.getPrice(row)['explanation_message'];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getExplanationMessage.\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getExplanationMessageUnsanitizedHtml: function (row) {\r\n            return this.getExplanationMessage(row);\r\n        }\r\n    });\r\n});\r\n","Magento_Msrp/js/view/checkout/minicart/subtotal/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Tax/js/view/checkout/minicart/subtotal/totals',\r\n    'underscore'\r\n], function (Component, _) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.displaySubtotal(this.isMsrpApplied(this.cart().items));\r\n            this.cart.subscribe(function (updatedCart) {\r\n\r\n                this.displaySubtotal(this.isMsrpApplied(updatedCart.items));\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Determine if subtotal should be hidden.\r\n         * @param {Array} cartItems\r\n         * @return {Boolean}\r\n         */\r\n        isMsrpApplied: function (cartItems) {\r\n            return !_.find(cartItems, function (item) {\r\n                if (_.has(item, 'canApplyMsrp')) {\r\n                    return item.canApplyMsrp;\r\n                }\r\n\r\n                return false;\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Multishipping/js/multi-shipping-balance.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/dataPost',\r\n    'jquery-ui-modules/widget'\r\n], function ($, dataPost) {\r\n    'use strict';\r\n\r\n    $.widget('mage.multiShippingBalance', {\r\n        options: {\r\n            changeUrl: ''\r\n        },\r\n\r\n        /**\r\n         * Initialize balance checkbox events.\r\n         *\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('change', $.proxy(function (event) {\r\n                dataPost().postData({\r\n                    action: this.options.changeUrl,\r\n                    data: {\r\n                        useBalance: +$(event.target).is(':checked')\r\n                    }\r\n                });\r\n            }, this));\r\n        }\r\n    });\r\n\r\n    return $.mage.multiShippingBalance;\r\n});\r\n","Magento_Multishipping/js/multi-shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Customer/js/customer-data',\r\n    'jquery-ui-modules/widget'\r\n], function ($, customerData) {\r\n    'use strict';\r\n\r\n    $.widget('mage.multiShipping', {\r\n        options: {\r\n            itemsQty: 0,\r\n            addNewAddressBtn: 'button[data-role=\"add-new-address\"]', // Add a new multishipping address.\r\n            addNewAddressFlag: '#add_new_address_flag', // Hidden input field with value 0 or 1.\r\n            canContinueBtn: 'button[data-role=\"can-continue\"]', // Continue (update quantity or go to shipping).\r\n            canContinueFlag: '#can_continue_flag' // Hidden input field with value 0 or 1.\r\n        },\r\n\r\n        /**\r\n         * Bind event handlers to click events for corresponding buttons.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this._prepareCartData();\r\n            $(this.options.addNewAddressBtn).on('click', $.proxy(this._addNewAddress, this));\r\n            $(this.options.canContinueBtn).on('click', $.proxy(this._canContinue, this));\r\n        },\r\n\r\n        /**\r\n         * Takes cart items qty from current cart data and compare it with current items qty\r\n         * Reloads cart data if cart items qty is wrong\r\n         * @private\r\n         */\r\n        _prepareCartData: function () {\r\n            var cartData = customerData.get('cart');\r\n\r\n            if (cartData()['summary_count'] !== this.options.itemsQty) {\r\n                customerData.reload(['cart'], false);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add a new address. Set the hidden input field and submit the form. Then enter a new shipping address.\r\n         * @private\r\n         */\r\n        _addNewAddress: function () {\r\n            $(this.options.addNewAddressFlag).val(1);\r\n            this.element.submit();\r\n        },\r\n\r\n        /**\r\n         * Can the user continue to the next step? The data-flag attribute holds either 0 (no) or 1 (yes).\r\n         * @private\r\n         * @param {Event} event - Click event on the corresponding button.\r\n         */\r\n        _canContinue: function (event) {\r\n            $(this.options.canContinueFlag).val(parseInt($(event.currentTarget).data('flag'), 10));\r\n        }\r\n    });\r\n\r\n    return $.mage.multiShipping;\r\n});\r\n","Magento_Multishipping/js/overview.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.orderOverview', {\r\n        options: {\r\n            opacity: 0.5, // CSS opacity for the 'Place Order' button when it's clicked and then disabled.\r\n            pleaseWaitLoader: 'span.please-wait', // 'Submitting order information...' Ajax loader.\r\n            placeOrderSubmit: 'button[type=\"submit\"]', // The 'Place Order' button.\r\n            agreements: '.checkout-agreements' // Container for all of the checkout agreements and terms/conditions\r\n        },\r\n\r\n        /**\r\n         * Bind a submit handler to the form.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('submit', $.proxy(this._showLoader, this));\r\n        },\r\n\r\n        /**\r\n         * Verify that all agreements and terms/conditions are checked. Show the Ajax loader. Disable\r\n         * the submit button (i.e. Place Order).\r\n         * @return {Boolean}\r\n         * @private\r\n         */\r\n        _showLoader: function () {\r\n            if ($(this.options.agreements).find('input[type=\"checkbox\"]:not(:checked)').length > 0) {\r\n                return false;\r\n            }\r\n            this.element.find(this.options.pleaseWaitLoader).show().end()\r\n                .find(this.options.placeOrderSubmit).prop('disabled', true).css('opacity', this.options.opacity);\r\n\r\n            return true;\r\n        }\r\n    });\r\n\r\n    return $.mage.orderOverview;\r\n});\r\n","Magento_Multishipping/js/payment.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate'\r\n], function ($, mageTemplate, alert) {\r\n    'use strict';\r\n\r\n    $.widget('mage.payment', {\r\n        options: {\r\n            continueSelector: '#payment-continue',\r\n            methodsContainer: '#payment-methods',\r\n            minBalance: 0,\r\n            tmpl: '<input id=\"hidden-free\" type=\"hidden\" name=\"payment[method]\" value=\"free\">'\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            this.element.find('dd [name^=\"payment[\"]').prop('disabled', true).end()\r\n                .on('click', this.options.continueSelector, $.proxy(this._submitHandler, this))\r\n                .on('updateCheckoutPrice', $.proxy(function (event, data) {\r\n                    //updating the checkoutPrice\r\n                    if (data.price) {\r\n                        this.options.checkoutPrice += data.price;\r\n                    }\r\n\r\n                    //updating total price\r\n                    if (data.totalPrice) {\r\n                        data.totalPrice = this.options.checkoutPrice;\r\n                    }\r\n\r\n                    if (this.options.checkoutPrice <= this.options.minBalance) {\r\n                        // Add free input field, hide and disable unchecked\r\n                        // checkbox payment method and all radio button payment methods\r\n                        this._disablePaymentMethods();\r\n                    } else {\r\n                        // Remove free input field, show all payment method\r\n                        this._enablePaymentMethods();\r\n                    }\r\n                }, this))\r\n                .on('click', 'dt input:radio', $.proxy(this._paymentMethodHandler, this));\r\n\r\n            if (this.options.checkoutPrice < this.options.minBalance) {\r\n                this._disablePaymentMethods();\r\n            } else {\r\n                this._enablePaymentMethods();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Display payment details when payment method radio button is checked\r\n         * @private\r\n         * @param {EventObject} e\r\n         */\r\n        _paymentMethodHandler: function (e) {\r\n            var element = $(e.target),\r\n                parentsDl = element.closest('dl');\r\n\r\n            parentsDl.find('dt input:radio').prop('checked', false);\r\n            parentsDl.find('dd').addClass('no-display').end()\r\n                .find('.items').hide()\r\n                .find('[name^=\"payment[\"]').prop('disabled', true);\r\n            element.prop('checked', true).parent()\r\n                .next('dd').removeClass('no-display')\r\n                .find('.items').show().find('[name^=\"payment[\"]').prop('disabled', false);\r\n        },\r\n\r\n        /**\r\n         * make sure one payment method is selected\r\n         * @private\r\n         * @return {Boolean}\r\n         */\r\n        _validatePaymentMethod: function () {\r\n            var methods = this.element.find('[name^=\"payment[\"]'),\r\n                isValid = false;\r\n\r\n            if (methods.length === 0) {\r\n                alert({\r\n                    content: $.mage.__('We can\\'t complete your order because you don\\'t have a payment method set up.')\r\n                });\r\n            } else if (this.options.checkoutPrice <= this.options.minBalance) {\r\n                isValid = true;\r\n            } else if (methods.filter('input:radio:checked').length) {\r\n                isValid = true;\r\n            } else {\r\n                alert({\r\n                    content: $.mage.__('Please choose a payment method.')\r\n                });\r\n            }\r\n\r\n            return isValid;\r\n        },\r\n\r\n        /**\r\n         * Disable and enable payment methods\r\n         * @private\r\n         */\r\n        _disablePaymentMethods: function () {\r\n            var tmpl = mageTemplate(this.options.tmpl, {\r\n                data: {}\r\n            });\r\n\r\n            this.element.find('input[name=\"payment[method]\"]').prop('disabled', true).end()\r\n                .find('input[id^=\"use\"][name^=\"payment[use\"]:not(:checked)').prop('disabled', true).parent().hide();\r\n            this.element.find('[name=\"payment[method]\"][value=\"free\"]').parent('dt').remove();\r\n            this.element.find(this.options.methodsContainer).hide().find('[name^=\"payment[\"]').prop('disabled', true);\r\n\r\n            $(tmpl).appendTo(this.element);\r\n        },\r\n\r\n        /**\r\n         * Enable and enable payment methods\r\n         * @private\r\n         */\r\n        _enablePaymentMethods: function () {\r\n            this.element.find('input[name=\"payment[method]\"]').prop('disabled', false).end()\r\n                .find('dt input:radio:checked').trigger('click').end()\r\n                .find('input[id^=\"use\"][name^=\"payment[use\"]:not(:checked)').prop('disabled', false).parent().show();\r\n            this.element.find(this.options.methodsContainer).show();\r\n        },\r\n\r\n        /**\r\n         * Returns checked payment method.\r\n         *\r\n         * @private\r\n         */\r\n        _getSelectedPaymentMethod: function () {\r\n            return this.element.find('input[name=\\'payment[method]\\']:checked');\r\n        },\r\n\r\n        /**\r\n         * Validate  before form submit\r\n         * @private\r\n         * @param {EventObject} e\r\n         */\r\n        _submitHandler: function (e) {\r\n            var currentMethod,\r\n                submitButton;\r\n\r\n            e.preventDefault();\r\n\r\n            if (this._validatePaymentMethod()) {\r\n                currentMethod = this._getSelectedPaymentMethod();\r\n                submitButton = currentMethod.parent().next('dd').find('button[type=submit]');\r\n\r\n                if (submitButton.length) {\r\n                    submitButton.first().trigger('click');\r\n                } else {\r\n                    this.element.trigger('submit');\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.payment;\r\n});\r\n","Magento_Newsletter/js/newsletter-sign-up.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiElement',\r\n    'mage/url',\r\n    'subscriptionStatusResolver',\r\n    'mage/validation'\r\n], function ($, Component, urlBuilder, subscriptionStatusResolver) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            signUpElement: '',\r\n            submitButton: '',\r\n            element: null\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function (config, element) {\r\n            this._super();\r\n            this.element = element;\r\n            $(element).on('change', $.proxy(this.updateSignUpStatus, this));\r\n            this.updateSignUpStatus();\r\n        },\r\n\r\n        /**\r\n         * Send status request and update subscription element according to result.\r\n         */\r\n        updateSignUpStatus: function () {\r\n            var element = $(this.element),\r\n                email = element.val(),\r\n                self = this,\r\n                newsletterSubscription;\r\n\r\n            if ($(self.signUpElement).is(':checked')) {\r\n                return;\r\n            }\r\n\r\n            if (!email || !$.validator.methods['validate-email'].call(this, email, element)) {\r\n                return;\r\n            }\r\n\r\n            newsletterSubscription = $.Deferred();\r\n\r\n            $(self.submitButton).prop('disabled', true);\r\n\r\n            subscriptionStatusResolver(email, newsletterSubscription);\r\n\r\n            $.when(newsletterSubscription).done(function (isSubscribed) {\r\n                if (isSubscribed) {\r\n                    $(self.signUpElement).prop('checked', true);\r\n                }\r\n            }).always(function () {\r\n                $(self.submitButton).prop('disabled', false);\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Newsletter/js/subscription-status-resolver.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/url'\r\n], function ($, urlBuilder) {\r\n    'use strict';\r\n\r\n    return function (email, deferred) {\r\n        return $.getJSON(\r\n            urlBuilder.build('newsletter/ajax/status'),\r\n            {\r\n                email: email\r\n            }\r\n        ).done(function (response) {\r\n            if (response.errors) {\r\n                deferred.reject();\r\n            } else {\r\n                deferred.resolve(response.subscribed);\r\n            }\r\n        }).fail(function () {\r\n            deferred.reject();\r\n        });\r\n    };\r\n});\r\n","Magento_OfflinePayments/js/view/payment/offline-payments.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/renderer-list'\r\n], function (Component, rendererList) {\r\n    'use strict';\r\n\r\n    rendererList.push(\r\n        {\r\n            type: 'checkmo',\r\n            component: 'Magento_OfflinePayments/js/view/payment/method-renderer/checkmo-method'\r\n        },\r\n        {\r\n            type: 'banktransfer',\r\n            component: 'Magento_OfflinePayments/js/view/payment/method-renderer/banktransfer-method'\r\n        },\r\n        {\r\n            type: 'cashondelivery',\r\n            component: 'Magento_OfflinePayments/js/view/payment/method-renderer/cashondelivery-method'\r\n        },\r\n        {\r\n            type: 'purchaseorder',\r\n            component: 'Magento_OfflinePayments/js/view/payment/method-renderer/purchaseorder-method'\r\n        }\r\n    );\r\n\r\n    /** Add view logic here if needed */\r\n    return Component.extend({});\r\n});\r\n","Magento_OfflinePayments/js/view/payment/method-renderer/banktransfer-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/view/payment/default'\r\n], function (ko, Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_OfflinePayments/payment/banktransfer'\r\n        },\r\n\r\n        /**\r\n         * Get value of instruction field.\r\n         * @returns {String}\r\n         */\r\n        getInstructions: function () {\r\n            return window.checkoutConfig.payment.instructions[this.item.method];\r\n        }\r\n    });\r\n});\r\n","Magento_OfflinePayments/js/view/payment/method-renderer/cashondelivery-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_OfflinePayments/payment/cashondelivery'\r\n        },\r\n\r\n        /**\r\n         * Returns payment method instructions.\r\n         *\r\n         * @return {*}\r\n         */\r\n        getInstructions: function () {\r\n            return window.checkoutConfig.payment.instructions[this.item.method];\r\n        }\r\n    });\r\n});\r\n","Magento_OfflinePayments/js/view/payment/method-renderer/checkmo-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_OfflinePayments/payment/checkmo'\r\n        },\r\n\r\n        /**\r\n         * Returns send check to info.\r\n         *\r\n         * @return {*}\r\n         */\r\n        getMailingAddress: function () {\r\n            return window.checkoutConfig.payment.checkmo.mailingAddress;\r\n        },\r\n\r\n        /**\r\n         * Returns payable to info.\r\n         *\r\n         * @return {*}\r\n         */\r\n        getPayableTo: function () {\r\n            return window.checkoutConfig.payment.checkmo.payableTo;\r\n        }\r\n    });\r\n});\r\n","Magento_OfflinePayments/js/view/payment/method-renderer/purchaseorder-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'jquery',\r\n    'mage/validation'\r\n], function (Component, $) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_OfflinePayments/payment/purchaseorder-form',\r\n            purchaseOrderNumber: ''\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('purchaseOrderNumber');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getData: function () {\r\n            return {\r\n                method: this.item.method,\r\n                'po_number': this.purchaseOrderNumber(),\r\n                'additional_data': null\r\n            };\r\n        },\r\n\r\n        /**\r\n         * @return {jQuery}\r\n         */\r\n        validate: function () {\r\n            var form = 'form[data-role=purchaseorder-form]';\r\n\r\n            return $(form).validation() && $(form).validation('isValid');\r\n        }\r\n    });\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validation-rules/flatrate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'country_id': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validation-rules/freeshipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'country_id': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validation-rules/tablerate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getRules: function () {\r\n            return {\r\n                'postcode': {\r\n                    'required': true\r\n                },\r\n                'country_id': {\r\n                    'required': true\r\n                },\r\n                'region_id': {\r\n                    'required': true\r\n                },\r\n                'region_id_input': {\r\n                    'required': true\r\n                }\r\n            };\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validator/flatrate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    '../shipping-rates-validation-rules/flatrate',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validator/freeshipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    '../shipping-rates-validation-rules/freeshipping',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n                    self.validationErrors.push(message);\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/model/shipping-rates-validator/tablerate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mageUtils',\r\n    '../shipping-rates-validation-rules/tablerate',\r\n    'mage/translate'\r\n], function ($, utils, validationRules, $t) {\r\n    'use strict';\r\n\r\n    return {\r\n        validationErrors: [],\r\n\r\n        /**\r\n         * @param {Object} address\r\n         * @return {Boolean}\r\n         */\r\n        validate: function (address) {\r\n            var self = this;\r\n\r\n            this.validationErrors = [];\r\n            $.each(validationRules.getRules(), function (field, rule) {\r\n                var message, regionFields;\r\n\r\n                if (rule.required && utils.isEmpty(address[field])) {\r\n                    message = $t('Field ') + field + $t(' is required.');\r\n                    regionFields = ['region', 'region_id', 'region_id_input'];\r\n\r\n                    if (\r\n                        $.inArray(field, regionFields) === -1 ||\r\n                        utils.isEmpty(address.region) && utils.isEmpty(address['region_id'])\r\n                    ) {\r\n                        self.validationErrors.push(message);\r\n                    }\r\n                }\r\n            });\r\n\r\n            return !this.validationErrors.length;\r\n        }\r\n    };\r\n});\r\n","Magento_OfflineShipping/js/view/shipping-rates-validation/flatrate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    '../../model/shipping-rates-validator/flatrate',\r\n    '../../model/shipping-rates-validation-rules/flatrate'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    flatrateShippingRatesValidator,\r\n    flatrateShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('flatrate', flatrateShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('flatrate', flatrateShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_OfflineShipping/js/view/shipping-rates-validation/freeshipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    '../../model/shipping-rates-validator/freeshipping',\r\n    '../../model/shipping-rates-validation-rules/freeshipping'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    freeshippingShippingRatesValidator,\r\n    freeshippingShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('freeshipping', freeshippingShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('freeshipping', freeshippingShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_OfflineShipping/js/view/shipping-rates-validation/tablerate.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/shipping-rates-validator',\r\n    'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n    '../../model/shipping-rates-validator/tablerate',\r\n    '../../model/shipping-rates-validation-rules/tablerate'\r\n], function (\r\n    Component,\r\n    defaultShippingRatesValidator,\r\n    defaultShippingRatesValidationRules,\r\n    tablerateShippingRatesValidator,\r\n    tablerateShippingRatesValidationRules\r\n) {\r\n    'use strict';\r\n\r\n    defaultShippingRatesValidator.registerValidator('tablerate', tablerateShippingRatesValidator);\r\n    defaultShippingRatesValidationRules.registerRules('tablerate', tablerateShippingRatesValidationRules);\r\n\r\n    return Component;\r\n});\r\n","Magento_PageCache/js/form-key-provider.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return function () {\r\n        var formKey,\r\n            inputElements,\r\n            inputSelector = 'input[name=\"form_key\"]';\r\n\r\n        /**\r\n         * Set form_key cookie\r\n         * @private\r\n         */\r\n        function setFormKeyCookie(value) {\r\n            var expires,\r\n                secure,\r\n                date = new Date(),\r\n                cookiesConfig = window.cookiesConfig || {},\r\n                isSecure = !!cookiesConfig.secure,\r\n                samesite = cookiesConfig.samesite || 'lax';\r\n\r\n            date.setTime(date.getTime() + 86400000);\r\n            expires = '; expires=' + date.toUTCString();\r\n            secure = isSecure ? '; secure' : '';\r\n            samesite = '; samesite=' + samesite;\r\n\r\n            document.cookie = 'form_key=' + (value || '') + expires + secure + '; path=/' + samesite;\r\n        }\r\n\r\n        /**\r\n         * Retrieves form key from cookie\r\n         * @private\r\n         */\r\n        function getFormKeyCookie() {\r\n            var cookie,\r\n                i,\r\n                nameEQ = 'form_key=',\r\n                cookieArr = document.cookie.split(';');\r\n\r\n            for (i = 0; i < cookieArr.length; i++) {\r\n                cookie = cookieArr[i];\r\n\r\n                while (cookie.charAt(0) === ' ') {\r\n                    cookie = cookie.substring(1, cookie.length);\r\n                }\r\n\r\n                if (cookie.indexOf(nameEQ) === 0) {\r\n                    return cookie.substring(nameEQ.length, cookie.length);\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        /**\r\n         * Generate form key string\r\n         * @private\r\n         */\r\n        function generateFormKeyString() {\r\n            var result = '',\r\n                length = 16,\r\n                chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n\r\n            while (length--) {\r\n                result += chars[Math.round(Math.random() * (chars.length - 1))];\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        /**\r\n         * Init form_key inputs with value\r\n         * @private\r\n         */\r\n        function initFormKey() {\r\n            formKey = getFormKeyCookie();\r\n\r\n            if (!formKey) {\r\n                formKey = generateFormKeyString();\r\n                setFormKeyCookie(formKey);\r\n            }\r\n            inputElements = document.querySelectorAll(inputSelector);\r\n\r\n            if (inputElements.length) {\r\n                Array.prototype.forEach.call(inputElements, function (element) {\r\n                    element.setAttribute('value', formKey);\r\n                });\r\n            }\r\n        }\r\n\r\n        initFormKey();\r\n    };\r\n});\r\n","Magento_PageCache/js/page-cache.js":"/**\n * Handles additional ajax request for rendering user private content\n *\n * Copyright \u00a9 2015 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'domReady',\n    'jquery/ui',\n    'mage/cookies'\n], function ($, domReady) {\n    'use strict';\n\n    /**\n     * Nodes tree to flat list converter\n     * @returns {Array}\n     */\n    $.fn.comments = function () {\n        var elements = [];\n\n        /**\n         * @param {jQuery} element - Comment holder\n         */\n        (function lookup(element) {\n            $(element).contents().each(function (index, el) {\n                switch (el.nodeType) {\n                    case 1: // ELEMENT_NODE\n                        lookup(el);\n                        break;\n\n                    case 8: // COMMENT_NODE\n                        elements.push(el);\n                        break;\n\n                    case 9: // DOCUMENT_NODE\n                        var hostName = window.location.hostname,\n                            iFrameHostName = $('<a>')\n                                .prop('href', element.src)\n                                .prop('hostname');\n\n                        if (hostName === iFrameHostName) {\n                            lookup($(el).find('body'));\n                        }\n                        break;\n                }\n            });\n        })(this);\n\n        return elements;\n    };\n\n    /**\n     * MsgBox Widget checks if message box is displayed and sets cookie\n     */\n    $.widget('mage.msgBox', {\n        options: {\n            msgBoxCookieName: 'message_box_display',\n            msgBoxSelector: '.main div.messages'\n        },\n\n        /**\n         * Creates widget 'mage.msgBox'\n         * @private\n         */\n        _create: function () {\n            if ($.mage.cookies.get(this.options.msgBoxCookieName)) {\n                $.mage.cookies.clear(this.options.msgBoxCookieName);\n            } else {\n                $(this.options.msgBoxSelector).hide();\n            }\n        }\n    });\n\n    /**\n     * FormKey Widget - this widget is generating from key, saves it to cookie and\n     */\n    $.widget('mage.formKey', {\n        options: {\n            inputSelector: 'input[name=\"form_key\"]',\n            allowedCharacters: '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ',\n            length: 16\n        },\n\n        /**\n         * Creates widget 'mage.formKey'\n         * @private\n         */\n        _create: function () {\n            var formKey = $.mage.cookies.get('form_key');\n\n            if (!formKey) {\n                formKey = generateRandomString(this.options.allowedCharacters, this.options.length);\n                $.mage.cookies.set('form_key', formKey);\n            }\n            $(this.options.inputSelector).val(formKey);\n        }\n    });\n\n    /**\n     * PageCache Widget\n     */\n    $.widget('mage.pageCache', {\n        options: {\n            url: '/',\n            patternPlaceholderOpen: /^ BLOCK (.+) $/,\n            patternPlaceholderClose: /^ \\/BLOCK (.+) $/,\n            versionCookieName: 'private_content_version',\n            handles: []\n        },\n\n        /**\n         * Creates widget 'mage.pageCache'\n         * @private\n         */\n        _create: function () {\n            var placeholders,\n                version = $.mage.cookies.get(this.options.versionCookieName);\n\n            if (!version) {\n                return;\n            }\n            placeholders = this._searchPlaceholders(this.element.comments());\n\n            if (placeholders && placeholders.length) {\n                this._ajax(placeholders, version);\n            }\n        },\n\n        /**\n         * Parse page for placeholders.\n         * @param {Array} elements\n         * @returns {Array}\n         * @private\n         */\n        _searchPlaceholders: function (elements) {\n            var placeholders = [],\n                tmp = {},\n                ii,\n                len,\n                el, matches, name;\n\n            if (!(elements && elements.length)) {\n                return placeholders;\n            }\n\n            for (ii = 0, len = elements.length; ii < len; ii++) {\n                el = elements[ii];\n                matches = this.options.patternPlaceholderOpen.exec(el.nodeValue);\n                name = null;\n\n                if (matches) {\n                    name = matches[1];\n                    tmp[name] = {\n                        name: name,\n                        openElement: el\n                    };\n                } else {\n                    matches = this.options.patternPlaceholderClose.exec(el.nodeValue);\n\n                    if (matches) {\n                        name = matches[1];\n\n                        if (tmp[name]) {\n                            tmp[name].closeElement = el;\n                            placeholders.push(tmp[name]);\n                            delete tmp[name];\n                        }\n                    }\n                }\n            }\n\n            return placeholders;\n        },\n\n        /**\n         * Parse for page and replace placeholders\n         * @param {Object} placeholder\n         * @param {Object} html\n         * @protected\n         */\n        _replacePlaceholder: function (placeholder, html) {\n            if (!placeholder || !html) {\n                return;\n            }\n\n            var parent = $(placeholder.openElement).parent(),\n                contents = parent.contents(),\n                startReplacing = false,\n                prevSibling = null,\n                yy,\n                len,\n                element;\n\n            for (yy = 0, len = contents.length; yy < len; yy++) {\n                element = contents[yy];\n\n                if (element == placeholder.openElement) {\n                    startReplacing = true;\n                }\n\n                if (startReplacing) {\n                    $(element).remove();\n                } else if (element.nodeType != 8) {\n                    //due to comment tag doesn't have siblings we try to find it manually\n                    prevSibling = element;\n                }\n\n                if (element == placeholder.closeElement) {\n                    break;\n                }\n            }\n\n            if (prevSibling) {\n                $(prevSibling).after(html);\n            } else {\n                $(parent).prepend(html);\n            }\n\n            // trigger event to use mage-data-init attribute\n            $(parent).trigger('contentUpdated');\n        },\n\n        /**\n         * AJAX helper\n         * @param {Object} placeholders\n         * @param {String} version\n         * @private\n         */\n        _ajax: function (placeholders, version) {\n            var ii,\n                data = {\n                    blocks: [],\n                    handles: this.options.handles,\n                    originalRequest: this.options.originalRequest,\n                    version: version\n                };\n\n            for (ii = 0; ii < placeholders.length; ii++) {\n                data.blocks.push(placeholders[ii].name);\n            }\n            data.blocks = JSON.stringify(data.blocks.sort());\n            data.handles = JSON.stringify(data.handles);\n            data.originalRequest = JSON.stringify(data.originalRequest);\n            $.ajax({\n                url: this.options.url,\n                data: data,\n                type: 'GET',\n                cache: true,\n                dataType: 'json',\n                context: this,\n\n                /**\n                 * Response handler\n                 * @param {Object} response\n                 */\n                success: function (response) {\n                    var placeholder, i;\n\n                    for (i = 0; i < placeholders.length; i++) {\n                        placeholder = placeholders[i];\n\n                        if (response.hasOwnProperty(placeholder.name)) {\n                            this._replacePlaceholder(placeholder, response[placeholder.name]);\n                        }\n                    }\n                }\n            });\n        }\n    });\n\n    domReady(function () {\n        $('body')\n            .msgBox()\n            .formKey();\n    });\n\n    return {\n        'pageCache': $.mage.pageCache,\n        'formKey': $.mage.formKey,\n        'msgBox': $.mage.msgBox\n    };\n\n    /**\n     * Helper. Generate random string\n     * TODO: Merge with mage/utils\n     * @param {String} chars - list of symbols\n     * @param {Number} length - length for need string\n     * @returns {String}\n     */\n    function generateRandomString(chars, length) {\n        var result = '';\n        length = length > 0 ? length : 1;\n\n        while (length--) {\n            result += chars[Math.round(Math.random() * (chars.length - 1))];\n        }\n\n        return result;\n    }\n});\n","Magento_Payment/js/cc-type.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.creditCardType', {\r\n        options: {\r\n            typeCodes: ['SS', 'SM', 'SO'] // Type codes for Switch/Maestro/Solo credit cards.\r\n        },\r\n\r\n        /**\r\n         * Bind change handler to select element and trigger the event to show/hide\r\n         * the Switch/Maestro or Solo credit card type container for those credit card types.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('change', $.proxy(this._toggleCardType, this)).trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Toggle the Switch/Maestro and Solo credit card type container depending on which\r\n         * credit card type is selected.\r\n         * @private\r\n         */\r\n        _toggleCardType: function () {\r\n            $(this.options.creditCardTypeContainer)\r\n                .toggle($.inArray(this.element.val(), this.options.typeCodes) !== -1);\r\n        }\r\n    });\r\n\r\n    return $.mage.creditCardType;\r\n});\r\n","Magento_Payment/js/transparent.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery-ui-modules/widget',\r\n    'Magento_Payment/js/model/credit-card-validation/validator',\r\n    'Magento_Checkout/js/model/full-screen-loader'\r\n], function ($, mageTemplate, alert, ui, validator, fullScreenLoader) {\r\n    'use strict';\r\n\r\n    $.widget('mage.transparent', {\r\n        options: {\r\n            context: null,\r\n            placeOrderSelector: '[data-role=\"review-save\"]',\r\n            paymentFormSelector: '#co-payment-form',\r\n            updateSelectorPrefix: '#checkout-',\r\n            updateSelectorSuffix: '-load',\r\n            hiddenFormTmpl:\r\n                '<form target=\"<%= data.target %>\" action=\"<%= data.action %>\" method=\"POST\" ' +\r\n                'hidden enctype=\"application/x-www-form-urlencoded\" class=\"no-display\">' +\r\n                    '<% _.each(data.inputs, function(val, key){ %>' +\r\n                    '<input value=\"<%= val %>\" name=\"<%= key %>\" type=\"hidden\">' +\r\n                    '<% }); %>' +\r\n                '</form>',\r\n            reviewAgreementForm: '#checkout-agreements',\r\n            cgiUrl: null,\r\n            orderSaveUrl: null,\r\n            controller: null,\r\n            gateway: null,\r\n            dateDelim: null,\r\n            cardFieldsMap: null,\r\n            expireYearLength: 2\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.hiddenFormTmpl = mageTemplate(this.options.hiddenFormTmpl);\r\n\r\n            if (this.options.context) {\r\n                this.options.context.setPlaceOrderHandler($.proxy(this._orderSave, this));\r\n                this.options.context.setValidateHandler($.proxy(this._validateHandler, this));\r\n            } else {\r\n                $(this.options.placeOrderSelector)\r\n                    .off('click')\r\n                    .on('click', $.proxy(this._placeOrderHandler, this));\r\n            }\r\n\r\n            this.element.validation();\r\n            $('[data-container=\"' + this.options.gateway + '-cc-number\"]').on('focusout', function () {\r\n                $(this).valid();\r\n            });\r\n        },\r\n\r\n        /**\r\n         * handler for credit card validation\r\n         * @return {Boolean}\r\n         * @private\r\n         */\r\n        _validateHandler: function () {\r\n            return this.element.validation && this.element.validation('isValid');\r\n        },\r\n\r\n        /**\r\n         * handler for Place Order button to call gateway for credit card validation\r\n         * @return {Boolean}\r\n         * @private\r\n         */\r\n        _placeOrderHandler: function () {\r\n            if (this._validateHandler()) {\r\n                this._orderSave();\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Save order and generate post data for gateway call\r\n         * @private\r\n         */\r\n        _orderSave: function () {\r\n            var postData = $(this.options.paymentFormSelector).serialize();\r\n\r\n            if ($(this.options.reviewAgreementForm).length) {\r\n                postData += '&' + $(this.options.reviewAgreementForm).serialize();\r\n            }\r\n            postData += '&controller=' + this.options.controller;\r\n            postData += '&cc_type=' + this.element.find(\r\n                '[data-container=\"' + this.options.gateway + '-cc-type\"]'\r\n            ).val();\r\n\r\n            return $.ajax({\r\n                url: this.options.orderSaveUrl,\r\n                type: 'post',\r\n                context: this,\r\n                data: postData,\r\n                dataType: 'json',\r\n\r\n                /**\r\n                 * {Function}\r\n                 */\r\n                beforeSend: function () {\r\n                    fullScreenLoader.startLoader();\r\n                },\r\n\r\n                /**\r\n                 * {Function}\r\n                 */\r\n                success: function (response) {\r\n                    var preparedData,\r\n                        msg,\r\n\r\n                        /**\r\n                         * {Function}\r\n                         */\r\n                        alertActionHandler = function () {\r\n                            // default action\r\n                        };\r\n\r\n                    if (response.success && response[this.options.gateway]) {\r\n                        preparedData = this._preparePaymentData(\r\n                            response[this.options.gateway].fields,\r\n                            this.options.cardFieldsMap\r\n                        );\r\n                        this._postPaymentToGateway(preparedData);\r\n                    } else {\r\n                        fullScreenLoader.stopLoader(true);\r\n\r\n                        msg = response['error_messages'];\r\n\r\n                        if (this.options.context) {\r\n                            this.options.context.clearTimeout().fail();\r\n                            alertActionHandler = this.options.context.alertActionHandler;\r\n                        }\r\n\r\n                        if (typeof msg === 'object') {\r\n                            msg = msg.join('\\n');\r\n                        }\r\n\r\n                        if (msg) {\r\n                            alert(\r\n                                {\r\n                                    content: msg,\r\n                                    actions: {\r\n\r\n                                        /**\r\n                                         * {Function}\r\n                                         */\r\n                                        always: alertActionHandler\r\n                                    }\r\n                                }\r\n                            );\r\n                        }\r\n                    }\r\n                }.bind(this)\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Post data to gateway for credit card validation\r\n         * @param {Object} data\r\n         * @private\r\n         */\r\n        _postPaymentToGateway: function (data) {\r\n            var tmpl,\r\n                iframeSelector = '[data-container=\"' + this.options.gateway + '-transparent-iframe\"]';\r\n\r\n            tmpl = this.hiddenFormTmpl({\r\n                data: {\r\n                    target: $(iframeSelector).attr('name'),\r\n                    action: this.options.cgiUrl,\r\n                    inputs: data\r\n                }\r\n            });\r\n            $(tmpl).appendTo($(iframeSelector)).trigger('submit');\r\n        },\r\n\r\n        /**\r\n         * Add credit card fields to post data for gateway\r\n         * @param {Object} data\r\n         * @param {Object} ccfields\r\n         * @private\r\n         */\r\n        _preparePaymentData: function (data, ccfields) {\r\n            var preparedata;\r\n\r\n            if (this.element.find('[data-container=\"' + this.options.gateway + '-cc-cvv\"]').length) {\r\n                data[ccfields.cccvv] = this.element.find(\r\n                    '[data-container=\"' + this.options.gateway + '-cc-cvv\"]'\r\n                ).val();\r\n            }\r\n            preparedata = this._prepareExpDate();\r\n            data[ccfields.ccexpdate] = preparedata.month + this.options.dateDelim + preparedata.year;\r\n            data[ccfields.ccnum] = this.element.find(\r\n                '[data-container=\"' + this.options.gateway + '-cc-number\"]'\r\n            ).val();\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Grab Month and Year into one\r\n         * @returns {Object}\r\n         * @private\r\n         */\r\n        _prepareExpDate: function () {\r\n            var year = this.element.find('[data-container=\"' + this.options.gateway + '-cc-year\"]').val(),\r\n                month = parseInt(\r\n                    this.element.find('[data-container=\"' + this.options.gateway + '-cc-month\"]').val(),\r\n                    10\r\n                );\r\n\r\n            if (year.length > this.options.expireYearLength) {\r\n                year = year.substring(year.length - this.options.expireYearLength);\r\n            }\r\n\r\n            if (month < 10) {\r\n                month = '0' + month;\r\n            }\r\n\r\n            return {\r\n                month: month, year: year\r\n            };\r\n        }\r\n    });\r\n\r\n    return $.mage.transparent;\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-data.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        creditCard: null,\r\n        creditCardNumber: null,\r\n        expirationMonth: null,\r\n        expirationYear: null,\r\n        cvvCode: null\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'mageUtils',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/luhn10-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/credit-card-type'\r\n], function (utils, luhn10, creditCardTypes) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} card\r\n     * @param {*} isPotentiallyValid\r\n     * @param {*} isValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(card, isPotentiallyValid, isValid) {\r\n        return {\r\n            card: card,\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var potentialTypes,\r\n            cardType,\r\n            valid,\r\n            i,\r\n            maxLength;\r\n\r\n        if (utils.isEmpty(value)) {\r\n            return resultWrapper(null, false, false);\r\n        }\r\n\r\n        value = value.replace(/\\s+/g, '');\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(null, false, false);\r\n        }\r\n\r\n        potentialTypes = creditCardTypes.getCardTypes(value);\r\n\r\n        if (potentialTypes.length === 0) {\r\n            return resultWrapper(null, false, false);\r\n        } else if (potentialTypes.length !== 1) {\r\n            return resultWrapper(null, true, false);\r\n        }\r\n\r\n        cardType = potentialTypes[0];\r\n\r\n        if (cardType.type === 'unionpay') {  // UnionPay is not Luhn 10 compliant\r\n            valid = true;\r\n        } else {\r\n            valid = luhn10(value);\r\n        }\r\n\r\n        for (i = 0; i < cardType.lengths.length; i++) {\r\n            if (cardType.lengths[i] === value.length) {\r\n                return resultWrapper(cardType, valid, valid);\r\n            }\r\n        }\r\n\r\n        maxLength = Math.max.apply(null, cardType.lengths);\r\n\r\n        if (value.length < maxLength) {\r\n            return resultWrapper(cardType, true, false);\r\n        }\r\n\r\n        return resultWrapper(cardType, false, false);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/cvv-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    /**\r\n     * CVV number validation.\r\n     * Validate digit count for CVV code.\r\n     *\r\n     * @param {*} value\r\n     * @param {Number} maxLength\r\n     * @return {Object}\r\n     */\r\n    return function (value, maxLength) {\r\n        var DEFAULT_LENGTH = 3;\r\n\r\n        maxLength = maxLength || DEFAULT_LENGTH;\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        if (value.length === maxLength) {\r\n            return resultWrapper(true, true);\r\n        }\r\n\r\n        if (value.length < maxLength) {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        if (value.length > maxLength) {\r\n            return resultWrapper(false, false);\r\n        }\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'mageUtils',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/parse-date',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator'\r\n], function (utils, parseDate, expirationMonth, expirationYear) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @param {*} month\r\n     * @param {*} year\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid, month, year) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid,\r\n            month: month,\r\n            year: year\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var date,\r\n            monthValid,\r\n            yearValid;\r\n\r\n        if (utils.isEmpty(value)) {\r\n            return resultWrapper(false, false, null, null);\r\n        }\r\n\r\n        value = value.replace(/^(\\d\\d) (\\d\\d(\\d\\d)?)$/, '$1/$2');\r\n        date = parseDate(value);\r\n        monthValid = expirationMonth(date.month);\r\n        yearValid = expirationYear(date.year);\r\n\r\n        if (monthValid.isValid && yearValid.isValid) {\r\n            return resultWrapper(true, true, date.month, date.year);\r\n        }\r\n\r\n        if (monthValid.isPotentiallyValid && yearValid.isPotentiallyValid) {\r\n            return resultWrapper(false, true, null, null);\r\n        }\r\n\r\n        return resultWrapper(false, false, null, null);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Payment/js/model/credit-card-validation/cvv-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-data',\r\n    'mage/translate'\r\n], function ($, cvvValidator, creditCardNumberValidator, yearValidator, monthValidator, creditCardData) {\r\n    'use strict';\r\n\r\n    $('.payment-method-content input[type=\"number\"]').on('keyup', function () {\r\n        if ($(this).val() < 0) {\r\n            $(this).val($(this).val().replace(/^-/, ''));\r\n        }\r\n    });\r\n\r\n    $.each({\r\n        'validate-card-type': [\r\n            function (number, item, allowedTypes) {\r\n                var cardInfo,\r\n                    i,\r\n                    l;\r\n\r\n                if (!creditCardNumberValidator(number).isValid) {\r\n                    return false;\r\n                }\r\n\r\n                cardInfo = creditCardNumberValidator(number).card;\r\n\r\n                for (i = 0, l = allowedTypes.length; i < l; i++) {\r\n                    if (cardInfo.title == allowedTypes[i].type) { //eslint-disable-line eqeqeq\r\n                        return true;\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            },\r\n            $.mage.__('Please enter a valid credit card type number.')\r\n        ],\r\n        'validate-card-number': [\r\n\r\n            /**\r\n             * Validate credit card number based on mod 10\r\n             *\r\n             * @param {*} number - credit card number\r\n             * @return {Boolean}\r\n             */\r\n            function (number) {\r\n                return creditCardNumberValidator(number).isValid;\r\n            },\r\n            $.mage.__('Please enter a valid credit card number.')\r\n        ],\r\n        'validate-card-date': [\r\n\r\n            /**\r\n             * Validate credit card expiration month\r\n             *\r\n             * @param {String} date - month\r\n             * @return {Boolean}\r\n             */\r\n            function (date) {\r\n                return monthValidator(date).isValid;\r\n            },\r\n            $.mage.__('Incorrect credit card expiration month.')\r\n        ],\r\n        'validate-card-cvv': [\r\n\r\n            /**\r\n             * Validate cvv\r\n             *\r\n             * @param {String} cvv - card verification value\r\n             * @return {Boolean}\r\n             */\r\n            function (cvv) {\r\n                var maxLength = creditCardData.creditCard ? creditCardData.creditCard.code.size : 3;\r\n\r\n                return cvvValidator(cvv, maxLength).isValid;\r\n            },\r\n            $.mage.__('Please enter a valid credit card verification number.')\r\n        ],\r\n        'validate-card-year': [\r\n\r\n            /**\r\n             * Validate credit card expiration year\r\n             *\r\n             * @param {String} date - year\r\n             * @return {Boolean}\r\n             */\r\n            function (date) {\r\n                return yearValidator(date).isValid;\r\n            },\r\n            $.mage.__('Incorrect credit card expiration year.')\r\n        ]\r\n\r\n    }, function (i, rule) {\r\n        rule.unshift(i);\r\n        $.validator.addMethod.apply($.validator, rule);\r\n    });\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/credit-card-type.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'mageUtils'\r\n], function ($, utils) {\r\n    'use strict';\r\n\r\n    var types = [\r\n        {\r\n            title: 'Visa',\r\n            type: 'VI',\r\n            pattern: '^4\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16],\r\n            code: {\r\n                name: 'CVV',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'MasterCard',\r\n            type: 'MC',\r\n            pattern: '^(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'American Express',\r\n            type: 'AE',\r\n            pattern: '^3([47]\\\\d*)?$',\r\n            isAmex: true,\r\n            gaps: [4, 10],\r\n            lengths: [15],\r\n            code: {\r\n                name: 'CID',\r\n                size: 4\r\n            }\r\n        },\r\n        {\r\n            title: 'Diners',\r\n            type: 'DN',\r\n            pattern: '^(3(0[0-5]|095|6|[8-9]))\\\\d*$',\r\n            gaps: [4, 10],\r\n            lengths: [14, 16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVV',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Discover',\r\n            type: 'DI',\r\n            pattern: '^(6011(0|[2-4]|74|7[7-9]|8[6-9]|9)|6(4[4-9]|5))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16, 17, 18, 19],\r\n            code: {\r\n                name: 'CID',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'JCB',\r\n            type: 'JCB',\r\n            pattern: '^35(2[8-9]|[3-8])\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVV',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'UnionPay',\r\n            type: 'UN',\r\n            pattern: '^(622(1(2[6-9]|[3-9])|[3-8]|9([[0-1]|2[0-5]))|62[4-6]|628([2-8]))\\\\d*?$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVN',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Maestro International',\r\n            type: 'MI',\r\n            pattern: '^(5(0|[6-9])|63|67(?!59|6770|6774))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [12, 13, 14, 15, 16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Maestro Domestic',\r\n            type: 'MD',\r\n            pattern: '^6759(?!24|38|40|6[3-9]|70|76)|676770|676774\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [12, 13, 14, 15, 16, 17, 18, 19],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Hipercard',\r\n            type: 'HC',\r\n            pattern: '^((606282)|(637095)|(637568)|(637599)|(637609)|(637612))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [13, 16],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Elo',\r\n            type: 'ELO',\r\n            pattern: '^((509091)|(636368)|(636297)|(504175)|(438935)|(40117[8-9])|(45763[1-2])|' +\r\n                '(457393)|(431274)|(50990[0-2])|(5099[7-9][0-9])|(50996[4-9])|(509[1-8][0-9][0-9])|' +\r\n                '(5090(0[0-2]|0[4-9]|1[2-9]|[24589][0-9]|3[1-9]|6[0-46-9]|7[0-24-9]))|' +\r\n                '(5067(0[0-24-8]|1[0-24-9]|2[014-9]|3[0-379]|4[0-9]|5[0-3]|6[0-5]|7[0-8]))|' +\r\n                '(6504(0[5-9]|1[0-9]|2[0-9]|3[0-9]))|' +\r\n                '(6504(8[5-9]|9[0-9])|6505(0[0-9]|1[0-9]|2[0-9]|3[0-8]))|' +\r\n                '(6505(4[1-9]|5[0-9]|6[0-9]|7[0-9]|8[0-9]|9[0-8]))|' +\r\n                '(6507(0[0-9]|1[0-8]))|(65072[0-7])|(6509(0[1-9]|1[0-9]|20))|' +\r\n                '(6516(5[2-9]|6[0-9]|7[0-9]))|(6550(0[0-9]|1[0-9]))|' +\r\n                '(6550(2[1-9]|3[0-9]|4[0-9]|5[0-8])))\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [16],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        },\r\n        {\r\n            title: 'Aura',\r\n            type: 'AU',\r\n            pattern: '^5078\\\\d*$',\r\n            gaps: [4, 8, 12],\r\n            lengths: [19],\r\n            code: {\r\n                name: 'CVC',\r\n                size: 3\r\n            }\r\n        }\r\n    ];\r\n\r\n    return {\r\n        /**\r\n         * @param {*} cardNumber\r\n         * @return {Array}\r\n         */\r\n        getCardTypes: function (cardNumber) {\r\n            var i, value,\r\n                result = [];\r\n\r\n            if (utils.isEmpty(cardNumber)) {\r\n                return result;\r\n            }\r\n\r\n            if (cardNumber === '') {\r\n                return $.extend(true, {}, types);\r\n            }\r\n\r\n            for (i = 0; i < types.length; i++) {\r\n                value = types[i];\r\n\r\n                if (new RegExp(value.pattern).test(cardNumber)) {\r\n                    result.push($.extend(true, {}, value));\r\n                }\r\n            }\r\n\r\n            return result;\r\n        }\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/credit-card-number-validator/luhn10-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * Luhn algorithm verification\r\n     */\r\n    return function (a, b, c, d, e) {\r\n        for (d = +a[b = a.length - 1], e = 0; b--;) {\r\n            c = +a[b];\r\n            d += ++e % 2 ? 2 * c % 10 + (c > 4) : c;\r\n        }\r\n\r\n        return !(d % 10);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-month-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var month,\r\n            monthValid;\r\n\r\n        if (value.replace(/\\s/g, '') === '' || value === '0') {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        if (isNaN(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        month = parseInt(value, 10);\r\n        monthValid = month > 0 && month < 13;\r\n\r\n        return resultWrapper(monthValid, monthValid);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/expiration-year-validator.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {*} isValid\r\n     * @param {*} isPotentiallyValid\r\n     * @return {Object}\r\n     */\r\n    function resultWrapper(isValid, isPotentiallyValid) {\r\n        return {\r\n            isValid: isValid,\r\n            isPotentiallyValid: isPotentiallyValid\r\n        };\r\n    }\r\n\r\n    return function (value) {\r\n        var currentYear = new Date().getFullYear(),\r\n            len = value.length,\r\n            valid,\r\n            expMaxLifetime = 19;\r\n\r\n        if (value.replace(/\\s/g, '') === '') {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        if (!/^\\d*$/.test(value)) {\r\n            return resultWrapper(false, false);\r\n        }\r\n\r\n        if (len !== 4) {\r\n            return resultWrapper(false, true);\r\n        }\r\n\r\n        value = parseInt(value, 10);\r\n        valid = value >= currentYear && value <= currentYear + expMaxLifetime;\r\n\r\n        return resultWrapper(valid, valid);\r\n    };\r\n});\r\n","Magento_Payment/js/model/credit-card-validation/expiration-date-validator/parse-date.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return function (value) {\r\n        var month, len;\r\n\r\n        if (value.match('/')) {\r\n            value = value.split(/\\s*\\/\\s*/g);\r\n\r\n            return {\r\n                month: value[0],\r\n                year: value.slice(1).join()\r\n            };\r\n        }\r\n\r\n        len = value[0] === '0' || value.length > 5 || value.length === 4 || value.length === 3 ? 2 : 1;\r\n        month = value.substr(0, len);\r\n\r\n        return {\r\n            month: month,\r\n            year: value.substr(month.length, 4)\r\n        };\r\n    };\r\n});\r\n","Magento_Payment/js/view/payment/cc-form.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-data',\r\n    'Magento_Payment/js/model/credit-card-validation/credit-card-number-validator',\r\n    'mage/translate'\r\n], function (_, Component, creditCardData, cardNumberValidator, $t) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            creditCardType: '',\r\n            creditCardExpYear: '',\r\n            creditCardExpMonth: '',\r\n            creditCardNumber: '',\r\n            creditCardSsStartMonth: '',\r\n            creditCardSsStartYear: '',\r\n            creditCardSsIssue: '',\r\n            creditCardVerificationNumber: '',\r\n            selectedCardType: null\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe([\r\n                    'creditCardType',\r\n                    'creditCardExpYear',\r\n                    'creditCardExpMonth',\r\n                    'creditCardNumber',\r\n                    'creditCardVerificationNumber',\r\n                    'creditCardSsStartMonth',\r\n                    'creditCardSsStartYear',\r\n                    'creditCardSsIssue',\r\n                    'selectedCardType'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init component\r\n         */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n\r\n            //Set credit card number to credit card data object\r\n            this.creditCardNumber.subscribe(function (value) {\r\n                var result;\r\n\r\n                self.selectedCardType(null);\r\n\r\n                if (value === '' || value === null) {\r\n                    return false;\r\n                }\r\n                result = cardNumberValidator(value);\r\n\r\n                if (!result.isPotentiallyValid && !result.isValid) {\r\n                    return false;\r\n                }\r\n\r\n                if (result.card !== null) {\r\n                    self.selectedCardType(result.card.type);\r\n                    creditCardData.creditCard = result.card;\r\n                }\r\n\r\n                if (result.isValid) {\r\n                    creditCardData.creditCardNumber = value;\r\n                    self.creditCardType(result.card.type);\r\n                }\r\n            });\r\n\r\n            //Set expiration year to credit card data object\r\n            this.creditCardExpYear.subscribe(function (value) {\r\n                creditCardData.expirationYear = value;\r\n            });\r\n\r\n            //Set expiration month to credit card data object\r\n            this.creditCardExpMonth.subscribe(function (value) {\r\n                creditCardData.expirationMonth = value;\r\n            });\r\n\r\n            //Set cvv code to credit card data object\r\n            this.creditCardVerificationNumber.subscribe(function (value) {\r\n                creditCardData.cvvCode = value;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get code\r\n         * @returns {String}\r\n         */\r\n        getCode: function () {\r\n            return 'cc';\r\n        },\r\n\r\n        /**\r\n         * Get data\r\n         * @returns {Object}\r\n         */\r\n        getData: function () {\r\n            return {\r\n                'method': this.item.method,\r\n                'additional_data': {\r\n                    'cc_cid': this.creditCardVerificationNumber(),\r\n                    'cc_ss_start_month': this.creditCardSsStartMonth(),\r\n                    'cc_ss_start_year': this.creditCardSsStartYear(),\r\n                    'cc_ss_issue': this.creditCardSsIssue(),\r\n                    'cc_type': this.creditCardType(),\r\n                    'cc_exp_year': this.creditCardExpYear(),\r\n                    'cc_exp_month': this.creditCardExpMonth(),\r\n                    'cc_number': this.creditCardNumber()\r\n                }\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get list of available credit card types\r\n         * @returns {Object}\r\n         */\r\n        getCcAvailableTypes: function () {\r\n            return window.checkoutConfig.payment.ccform.availableTypes[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get payment icons\r\n         * @param {String} type\r\n         * @returns {Boolean}\r\n         */\r\n        getIcons: function (type) {\r\n            return window.checkoutConfig.payment.ccform.icons.hasOwnProperty(type) ?\r\n                window.checkoutConfig.payment.ccform.icons[type]\r\n                : false;\r\n        },\r\n\r\n        /**\r\n         * Get list of months\r\n         * @returns {Object}\r\n         */\r\n        getCcMonths: function () {\r\n            return window.checkoutConfig.payment.ccform.months[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get list of years\r\n         * @returns {Object}\r\n         */\r\n        getCcYears: function () {\r\n            return window.checkoutConfig.payment.ccform.years[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Check if current payment has verification\r\n         * @returns {Boolean}\r\n         */\r\n        hasVerification: function () {\r\n            return window.checkoutConfig.payment.ccform.hasVerification[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @deprecated\r\n         * @returns {Boolean}\r\n         */\r\n        hasSsCardType: function () {\r\n            return window.checkoutConfig.payment.ccform.hasSsCardType[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get image url for CVV\r\n         * @returns {String}\r\n         */\r\n        getCvvImageUrl: function () {\r\n            return window.checkoutConfig.payment.ccform.cvvImageUrl[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get image for CVV\r\n         * @returns {String}\r\n         */\r\n        getCvvImageHtml: function () {\r\n            return '<img src=\"' + this.getCvvImageUrl() +\r\n                '\" alt=\"' + $t('Card Verification Number Visual Reference') +\r\n                '\" title=\"' + $t('Card Verification Number Visual Reference') +\r\n                '\" />';\r\n        },\r\n\r\n        /**\r\n         * Get unsanitized html for image for CVV\r\n         * @returns {String}\r\n         */\r\n        getCvvImageUnsanitizedHtml: function () {\r\n            return this.getCvvImageHtml();\r\n        },\r\n\r\n        /**\r\n         * @deprecated\r\n         * @returns {Object}\r\n         */\r\n        getSsStartYears: function () {\r\n            return window.checkoutConfig.payment.ccform.ssStartYears[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * Get list of available credit card types values\r\n         * @returns {Object}\r\n         */\r\n        getCcAvailableTypesValues: function () {\r\n            return _.map(this.getCcAvailableTypes(), function (value, key) {\r\n                return {\r\n                    'value': key,\r\n                    'type': value\r\n                };\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get list of available month values\r\n         * @returns {Object}\r\n         */\r\n        getCcMonthsValues: function () {\r\n            return _.map(this.getCcMonths(), function (value, key) {\r\n                return {\r\n                    'value': key,\r\n                    'month': value\r\n                };\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get list of available year values\r\n         * @returns {Object}\r\n         */\r\n        getCcYearsValues: function () {\r\n            return _.map(this.getCcYears(), function (value, key) {\r\n                return {\r\n                    'value': key,\r\n                    'year': value\r\n                };\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @deprecated\r\n         * @returns {Object}\r\n         */\r\n        getSsStartYearsValues: function () {\r\n            return _.map(this.getSsStartYears(), function (value, key) {\r\n                return {\r\n                    'value': key,\r\n                    'year': value\r\n                };\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Is legend available to display\r\n         * @returns {Boolean}\r\n         */\r\n        isShowLegend: function () {\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Get available credit card type by code\r\n         * @param {String} code\r\n         * @returns {String}\r\n         */\r\n        getCcTypeTitleByCode: function (code) {\r\n            var title = '',\r\n                keyValue = 'value',\r\n                keyType = 'type';\r\n\r\n            _.each(this.getCcAvailableTypesValues(), function (value) {\r\n                if (value[keyValue] === code) {\r\n                    title = value[keyType];\r\n                }\r\n            });\r\n\r\n            return title;\r\n        },\r\n\r\n        /**\r\n         * Prepare credit card number to output\r\n         * @param {String} number\r\n         * @returns {String}\r\n         */\r\n        formatDisplayCcNumber: function (number) {\r\n            return 'xxxx-' + number.substr(-4);\r\n        },\r\n\r\n        /**\r\n         * Get credit card details\r\n         * @returns {Array}\r\n         */\r\n        getInfo: function () {\r\n            return [\r\n                {\r\n                    'name': 'Credit Card Type', value: this.getCcTypeTitleByCode(this.creditCardType())\r\n                },\r\n                {\r\n                    'name': 'Credit Card Number', value: this.formatDisplayCcNumber(this.creditCardNumber())\r\n                }\r\n            ];\r\n        }\r\n    });\r\n});\r\n","Magento_Payment/js/view/payment/iframe.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Payment/js/view/payment/cc-form',\r\n    'Magento_Ui/js/model/messageList',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Checkout/js/action/set-payment-information',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Ui/js/modal/alert'\r\n], function (\r\n    $,\r\n    Component,\r\n    messageList,\r\n    $t,\r\n    fullScreenLoader,\r\n    setPaymentInformationAction,\r\n    additionalValidators,\r\n    alert\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Payment/payment/iframe',\r\n            timeoutId: null,\r\n            timeoutMessage: 'Sorry, but something went wrong.'\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getSource: function () {\r\n            return window.checkoutConfig.payment.iframe.source[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getControllerName: function () {\r\n            return window.checkoutConfig.payment.iframe.controllerName[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getPlaceOrderUrl: function () {\r\n            return window.checkoutConfig.payment.iframe.placeOrderUrl[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getCgiUrl: function () {\r\n            return window.checkoutConfig.payment.iframe.cgiUrl[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getSaveOrderUrl: function () {\r\n            return window.checkoutConfig.payment.iframe.saveOrderUrl[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getDateDelim: function () {\r\n            return window.checkoutConfig.payment.iframe.dateDelim[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getCardFieldsMap: function () {\r\n            return window.checkoutConfig.payment.iframe.cardFieldsMap[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getExpireYearLength: function () {\r\n            return window.checkoutConfig.payment.iframe.expireYearLength[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @param {Object} parent\r\n         * @returns {Function}\r\n         */\r\n        originalPlaceOrder: function (parent) {\r\n            return parent.placeOrder.bind(parent);\r\n        },\r\n\r\n        /**\r\n         * @returns {Number}\r\n         */\r\n        getTimeoutTime: function () {\r\n            return window.checkoutConfig.payment.iframe.timeoutTime[this.getCode()];\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getTimeoutMessage: function () {\r\n            return $t(this.timeoutMessage);\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        placeOrder: function () {\r\n            var self = this;\r\n\r\n            if (this.validateHandler() &&\r\n                additionalValidators.validate() &&\r\n                this.isPlaceOrderActionAllowed() === true\r\n            ) {\r\n                fullScreenLoader.startLoader();\r\n\r\n                this.isPlaceOrderActionAllowed(false);\r\n\r\n                $.when(\r\n                    this.setPaymentInformation()\r\n                ).done(\r\n                    this.done.bind(this)\r\n                ).fail(\r\n                    this.fail.bind(this)\r\n                ).always(\r\n                    function () {\r\n                        self.isPlaceOrderActionAllowed(true);\r\n                    }\r\n                );\r\n\r\n                this.initTimeoutHandler();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        setPaymentInformation: function () {\r\n            return setPaymentInformationAction(\r\n                this.messageContainer,\r\n                {\r\n                    method: this.getCode()\r\n                }\r\n            );\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        initTimeoutHandler: function () {\r\n            this.timeoutId = setTimeout(\r\n                this.timeoutHandler.bind(this),\r\n                this.getTimeoutTime()\r\n            );\r\n\r\n            $(window).off('clearTimeout')\r\n                .on('clearTimeout', this.clearTimeout.bind(this));\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        clearTimeout: function () {\r\n            clearTimeout(this.timeoutId);\r\n            this.fail();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        timeoutHandler: function () {\r\n            this.clearTimeout();\r\n\r\n            alert(\r\n                {\r\n                    content: this.getTimeoutMessage(),\r\n                    actions: {\r\n\r\n                        /**\r\n                         * {Function}\r\n                         */\r\n                        always: this.alertActionHandler.bind(this)\r\n                    }\r\n                }\r\n            );\r\n\r\n            this.fail();\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        alertActionHandler: function () {\r\n            fullScreenLoader.startLoader();\r\n            window.location.reload();\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        fail: function () {\r\n            fullScreenLoader.stopLoader();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * {Function}\r\n         */\r\n        done: function () {\r\n            this.placeOrderHandler().fail(function () {\r\n                fullScreenLoader.stopLoader();\r\n            });\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Payment/js/view/payment/payments.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/renderer-list'\r\n], function (Component, rendererList) {\r\n    'use strict';\r\n\r\n    rendererList.push(\r\n        {\r\n            type: 'free',\r\n            component: 'Magento_Payment/js/view/payment/method-renderer/free-method'\r\n        }\r\n    );\r\n\r\n    /** Add view logic here if needed */\r\n    return Component.extend({});\r\n});\r\n","Magento_Payment/js/view/payment/method-renderer/free-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/* @api */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Payment/payment/free'\r\n        },\r\n\r\n        /** Returns is method available */\r\n        isAvailable: function () {\r\n            return quote.totals()['grand_total'] <= 0;\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/order-review.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/alert',\r\n    'jquery-ui-modules/widget',\r\n    'mage/translate',\r\n    'mage/mage',\r\n    'mage/validation'\r\n], function ($, alert) {\r\n    'use strict';\r\n\r\n    $.widget('mage.orderReview', {\r\n        options: {\r\n            orderReviewSubmitSelector: '#review-button',\r\n            shippingSelector: '#shipping_method',\r\n            shippingSubmitFormSelector: null,\r\n            updateOrderSelector: '#update-order',\r\n            billingAsShippingSelector: '#billing\\\\:as_shipping',\r\n            updateContainerSelector: '#details-reload',\r\n            waitLoadingContainer: '#review-please-wait',\r\n            shippingMethodContainer: '#shipping-method-container',\r\n            agreementSelector: 'div.checkout-agreements input',\r\n            isAjax: false,\r\n            shippingMethodUpdateUrl: null,\r\n            updateOrderSubmitUrl: null,\r\n            canEditShippingMethod: false\r\n        },\r\n\r\n        /**\r\n         * Widget instance properties\r\n         */\r\n        triggerPropertyChange: true,\r\n        isShippingSubmitForm: false,\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            var isDisable;\r\n\r\n            //change handler for ajaxEnabled\r\n            if (this.options.isAjax) {\r\n                this._submitOrder = this._ajaxSubmitOrder;\r\n            }\r\n\r\n            this.element.on('click', this.options.orderReviewSubmitSelector, $.proxy(this._submitOrder, this))\r\n                .on('click', this.options.billingAsShippingSelector, $.proxy(this._shippingTobilling, this))\r\n                .on('change',\r\n                    this.options.shippingSelector,\r\n                    $.proxy(this._submitUpdateOrder,\r\n                        this,\r\n                        this.options.updateOrderSubmitUrl,\r\n                        this.options.updateContainerSelector\r\n                    )\r\n                ).find(this.options.updateOrderSelector).on('click', $.proxy(this._updateOrderHandler, this)).end();\r\n            this._shippingTobilling();\r\n\r\n            if ($(this.options.shippingSubmitFormSelector).length && this.options.canEditShippingMethod) {\r\n                this.isShippingSubmitForm = true;\r\n                $(this.options.shippingSubmitFormSelector)\r\n                    .on('change',\r\n                        this.options.shippingSelector,\r\n                        $.proxy(\r\n                            this._submitUpdateOrder,\r\n                            this,\r\n                            $(this.options.shippingSubmitFormSelector).prop('action'),\r\n                            this.options.updateContainerSelector\r\n                        )\r\n                    );\r\n                this._updateOrderSubmit(!$(this.options.shippingSubmitFormSelector)\r\n                    .find(this.options.shippingSelector).val());\r\n            } else {\r\n                isDisable = this.isShippingSubmitForm && this.element.find(this.options.shippingSelector).val();\r\n                this.element\r\n                    .on('input propertychange', ':input[name]',\r\n                        $.proxy(this._updateOrderSubmit, this, isDisable, this._onShippingChange)\r\n                    ).find('select').not(this.options.shippingSelector).on('change', this._propertyChange);\r\n                this._updateOrderSubmit(isDisable);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * show ajax loader\r\n         */\r\n        _ajaxBeforeSend: function () {\r\n            this.element.find(this.options.waitLoadingContainer).show();\r\n        },\r\n\r\n        /**\r\n         * hide ajax loader\r\n         */\r\n        _ajaxComplete: function () {\r\n            this.element.find(this.options.waitLoadingContainer).hide();\r\n        },\r\n\r\n        /**\r\n         * trigger propertychange for input type select\r\n         */\r\n        _propertyChange: function () {\r\n            $(this).trigger('propertychange');\r\n        },\r\n\r\n        /**\r\n         * trigger change for the update of shipping methods from server\r\n         */\r\n        _updateOrderHandler: function () {\r\n            $(this.options.shippingSelector).trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Attempt to submit order\r\n         */\r\n        _submitOrder: function () {\r\n            if (this._validateForm()) {\r\n                this.element.find(this.options.updateOrderSelector).fadeTo(0, 0.5)\r\n                    .end().find(this.options.waitLoadingContainer).show()\r\n                    .end().trigger('submit');\r\n                this._updateOrderSubmit(true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Attempt to ajax submit order\r\n         */\r\n        _ajaxSubmitOrder: function () {\r\n            if (this.element.find(this.options.waitLoadingContainer).is(':visible')) {\r\n                return false;\r\n            }\r\n            $.ajax({\r\n                url: this.element.prop('action'),\r\n                type: 'post',\r\n                context: this,\r\n                data: {\r\n                    isAjax: 1\r\n                },\r\n                dataType: 'json',\r\n                beforeSend: this._ajaxBeforeSend,\r\n                complete: this._ajaxComplete,\r\n\r\n                /** @inheritdoc */\r\n                success: function (response) {\r\n                    var msg;\r\n\r\n                    if ($.type(response) === 'object' && !$.isEmptyObject(response)) {\r\n                        if (response['error_messages']) {\r\n                            this._ajaxComplete();\r\n                            msg = response['error_messages'];\r\n\r\n                            /* eslint-disable max-depth */\r\n                            if (msg) {\r\n                                if ($.type(msg) === 'array') {\r\n                                    msg = msg.join('\\n');\r\n                                }\r\n                            }\r\n\r\n                            /* eslint-enablemax-depth */\r\n                            alert({\r\n                                content: msg\r\n                            });\r\n\r\n                            return false;\r\n                        }\r\n\r\n                        if (response.redirect) {\r\n                            $.mage.redirect(response.redirect);\r\n\r\n                            return false;\r\n                        } else if (response.success) {\r\n                            $.mage.redirect(this.options.successUrl);\r\n\r\n                            return false;\r\n                        }\r\n                        this._ajaxComplete();\r\n                        alert({\r\n                            content: $.mage.__('Sorry, something went wrong.')\r\n                        });\r\n                    }\r\n                },\r\n\r\n                /** @inheritdoc */\r\n                error: function () {\r\n                    alert({\r\n                        content: $.mage.__('Sorry, something went wrong. Please try again later.')\r\n                    });\r\n                    this._ajaxComplete();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Validate Order form\r\n         */\r\n        _validateForm: function () {\r\n            this.element.find(this.options.agreementSelector).off('change').on('change', $.proxy(function () {\r\n                var isValid = this._validateForm();\r\n\r\n                this._updateOrderSubmit(!isValid);\r\n            }, this));\r\n\r\n            if (this.element.data('mageValidation')) {\r\n                return this.element.validation().valid();\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check/Set whether order can be submitted\r\n         * Also disables form submission element, if any\r\n         * @param {*} shouldDisable - whether should prevent order submission explicitly\r\n         * @param {Function} [fn] - function for shipping change handler\r\n         * @param {*} [*] - if true the property change will be set to true\r\n         */\r\n        _updateOrderSubmit: function (shouldDisable, fn) {\r\n            this._toggleButton(this.options.orderReviewSubmitSelector, shouldDisable);\r\n\r\n            if ($.type(fn) === 'function') {\r\n                fn.call(this);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Enable/Disable button\r\n         * @param {jQuery} button - button selector to be toggled\r\n         * @param {*} disable - boolean for toggling\r\n         */\r\n        _toggleButton: function (button, disable) {\r\n            $(button).prop({\r\n                'disabled': disable\r\n            }).toggleClass('no-checkout', disable).fadeTo(0, disable ? 0.5 : 1);\r\n        },\r\n\r\n        /**\r\n         * Copy element value from shipping to billing address\r\n         * @param {jQuery.Event} e - optional\r\n         */\r\n        _shippingTobilling: function (e) {\r\n            var isChecked, opacity;\r\n\r\n            if (this.options.shippingSubmitFormSelector) {\r\n                return false;\r\n            }\r\n            isChecked = $(this.options.billingAsShippingSelector).is(':checked');\r\n            opacity = isChecked ? 0.5 : 1;\r\n\r\n            if (isChecked) {\r\n                this.element.validation('clearError', ':input[name^=\"billing\"]');\r\n            }\r\n            $(':input[name^=\"shipping\"]', this.element).each($.proxy(function (key, value) {\r\n                var fieldObj = $(value.id.replace('shipping:', '#billing\\\\:'));\r\n\r\n                if (isChecked) {\r\n                    fieldObj = fieldObj.val($(value).val());\r\n                }\r\n                fieldObj.prop({\r\n                    'readonly': isChecked,\r\n                    'disabled': isChecked\r\n                }).fadeTo(0, opacity);\r\n\r\n                if (fieldObj.is('select')) {\r\n                    this.triggerPropertyChange = false;\r\n                    fieldObj.trigger('change');\r\n                }\r\n            }, this));\r\n\r\n            if (isChecked || e) {\r\n                this._updateOrderSubmit(true);\r\n            }\r\n            this.triggerPropertyChange = true;\r\n        },\r\n\r\n        /**\r\n         * Dispatch an ajax request of Update Order submission\r\n         * @param {*} url - url where to submit shipping method\r\n         * @param {*} resultId - id of element to be updated\r\n         */\r\n        _submitUpdateOrder: function (url, resultId) {\r\n            var isChecked, formData, callBackResponseHandler, shippingMethod;\r\n\r\n            if (this.element.find(this.options.waitLoadingContainer).is(':visible')) {\r\n                return false;\r\n            }\r\n            isChecked = $(this.options.billingAsShippingSelector).is(':checked');\r\n            formData = null;\r\n            callBackResponseHandler = null;\r\n            shippingMethod = $(this.options.shippingSelector).val().trim();\r\n            this._shippingTobilling();\r\n\r\n            if (url && resultId && shippingMethod) {\r\n                this._updateOrderSubmit(true);\r\n                this._toggleButton(this.options.updateOrderSelector, true);\r\n\r\n                // form data and callBack updated based on the shipping Form element\r\n                if (this.isShippingSubmitForm) {\r\n                    formData = $(this.options.shippingSubmitFormSelector).serialize() + '&isAjax=true';\r\n\r\n                    /**\r\n                     * @param {Object} response\r\n                     */\r\n                    callBackResponseHandler = function (response) {\r\n                        $(resultId).html(response);\r\n                        this._updateOrderSubmit(false);\r\n                        this._ajaxComplete();\r\n                    };\r\n                } else {\r\n                    formData = this.element.serialize() + '&isAjax=true';\r\n\r\n                    /**\r\n                     * @param {Object} response\r\n                     */\r\n                    callBackResponseHandler = function (response) {\r\n                        $(resultId).html(response);\r\n                        this._ajaxShippingUpdate(shippingMethod);\r\n                    };\r\n                }\r\n\r\n                if (isChecked) {\r\n                    $(this.options.shippingSelect).prop('disabled', true);\r\n                }\r\n                $.ajax({\r\n                    url: url,\r\n                    type: 'post',\r\n                    context: this,\r\n                    beforeSend: this._ajaxBeforeSend,\r\n                    data: formData,\r\n                    success: callBackResponseHandler\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update Shipping Methods Element from server\r\n         * @param {*} shippingMethod\r\n         */\r\n        _ajaxShippingUpdate: function (shippingMethod) {\r\n            $.ajax({\r\n                url: this.options.shippingMethodUpdateUrl,\r\n                data: {\r\n                    isAjax: true,\r\n                    'shipping_method': shippingMethod\r\n                },\r\n                type: 'post',\r\n                context: this,\r\n\r\n                /** @inheritdoc */\r\n                success: function (response) {\r\n                    $(this.options.shippingMethodContainer).parent().html(response);\r\n                    this._toggleButton(this.options.updateOrderSelector, false);\r\n                    this._updateOrderSubmit(false);\r\n                },\r\n                complete: this._ajaxComplete\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Actions on change Shipping Address data\r\n         */\r\n        _onShippingChange: function () {\r\n            if (this.triggerPropertyChange && $(this.options.shippingSelector).val().trim()) {\r\n                this.element.find(this.options.shippingSelector).hide().end()\r\n                    .find(this.options.shippingSelector + '_update').show();\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.orderReview;\r\n});\r\n","Magento_Paypal/js/paypal-checkout.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'Magento_Customer/js/customer-data',\r\n    'jquery-ui-modules/widget',\r\n    'mage/mage'\r\n], function ($, confirm, customerData) {\r\n    'use strict';\r\n\r\n    $.widget('mage.paypalCheckout', {\r\n        options: {\r\n            originalForm:\r\n                'form:not(#product_addtocart_form_from_popup):has(input[name=\"product\"][value=%1])',\r\n            productId: 'input[type=\"hidden\"][name=\"product\"]',\r\n            ppCheckoutSelector: '[data-role=pp-checkout-url]',\r\n            ppCheckoutInput: '<input type=\"hidden\" data-role=\"pp-checkout-url\" name=\"return_url\" value=\"\"/>'\r\n        },\r\n\r\n        /**\r\n         * Initialize store credit events\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('click', '[data-action=\"checkout-form-submit\"]', $.proxy(function (e) {\r\n                var $target = $(e.target),\r\n                    returnUrl = $target.data('checkout-url'),\r\n                    productId = $target.closest('form').find(this.options.productId).val(),\r\n                    originalForm = this.options.originalForm.replace('%1', productId),\r\n                    self = this,\r\n                    billingAgreement = customerData.get('paypal-billing-agreement');\r\n\r\n                e.preventDefault();\r\n\r\n                if (billingAgreement().askToCreate) {\r\n                    confirm({\r\n                        content: billingAgreement().confirmMessage,\r\n                        actions: {\r\n\r\n                            /**\r\n                             * Confirmation handler\r\n                             *\r\n                             */\r\n                            confirm: function () {\r\n                                returnUrl = billingAgreement().confirmUrl;\r\n                                self._redirect(returnUrl, originalForm);\r\n                            },\r\n\r\n                            /**\r\n                             * Cancel confirmation handler\r\n                             *\r\n                             */\r\n                            cancel: function (event) {\r\n                                if (event && !$(event.target).hasClass('action-close')) {\r\n                                    self._redirect(returnUrl);\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                } else {\r\n                    this._redirect(returnUrl, originalForm);\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Redirect to certain url, with optional form\r\n         * @param {String} returnUrl\r\n         * @param {HTMLElement} originalForm\r\n         *\r\n         */\r\n        _redirect: function (returnUrl, originalForm) {\r\n            var $form,\r\n                ppCheckoutInput;\r\n\r\n            if (this.options.isCatalogProduct) {\r\n                // find the form from which the button was clicked\r\n                $form = originalForm ? $(originalForm) : $($(this.options.shortcutContainerClass).closest('form'));\r\n\r\n                ppCheckoutInput = $form.find(this.options.ppCheckoutSelector)[0];\r\n\r\n                if (!ppCheckoutInput) {\r\n                    ppCheckoutInput = $(this.options.ppCheckoutInput);\r\n                    ppCheckoutInput.appendTo($form);\r\n                }\r\n                $(ppCheckoutInput).val(returnUrl);\r\n\r\n                $form.trigger('submit');\r\n            } else {\r\n                $.mage.redirect(returnUrl);\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.paypalCheckout;\r\n});\r\n","Magento_Paypal/js/action/set-payment-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/action/set-payment-information'\r\n], function (quote, setPaymentInformation) {\r\n    'use strict';\r\n\r\n    return function (messageContainer) {\r\n        return setPaymentInformation(messageContainer, quote.paymentMethod());\r\n    };\r\n});\r\n","Magento_Paypal/js/in-context/billing-agreement.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/confirm',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, confirm, customerData) {\r\n    'use strict';\r\n\r\n    $.widget('mage.billingAgreement', {\r\n        options: {\r\n            invalidateOnLoad: false,\r\n            cancelButtonSelector: '.block-billing-agreements-view button.cancel',\r\n            cancelMessage: '',\r\n            cancelUrl: ''\r\n        },\r\n\r\n        /**\r\n         * Initialize billing agreements events\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var self = this;\r\n\r\n            if (this.options.invalidateOnLoad) {\r\n                this.invalidate();\r\n            }\r\n            $(this.options.cancelButtonSelector).on('click', function () {\r\n                confirm({\r\n                    content: self.options.cancelMessage,\r\n                    actions: {\r\n                        /**\r\n                         * 'Confirm' action handler.\r\n                         */\r\n                        confirm: function () {\r\n                            self.invalidate();\r\n                            window.location.href = self.options.cancelUrl;\r\n                        }\r\n                    }\r\n                });\r\n\r\n                return false;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * clear paypal billing agreement customer data\r\n         * @returns void\r\n         */\r\n        invalidate: function () {\r\n            customerData.invalidate(['paypal-billing-agreement']);\r\n        }\r\n    });\r\n\r\n    return $.mage.billingAgreement;\r\n});\r\n","Magento_Paypal/js/in-context/button.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'uiComponent',\r\n    'jquery',\r\n    'Magento_Paypal/js/in-context/express-checkout-wrapper',\r\n    'Magento_Customer/js/customer-data'\r\n], function (Component, $, Wrapper, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend(Wrapper).extend({\r\n        defaults: {\r\n            declinePayment: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function (config, element) {\r\n            var cart = customerData.get('cart'),\r\n                customer = customerData.get('customer');\r\n\r\n            this._super();\r\n            this.renderPayPalButtons(element);\r\n\r\n            if (cart().isGuestCheckoutAllowed === undefined) {\r\n                cart.subscribe(function (updatedCart) {\r\n                    this.declinePayment = !customer().firstname && !cart().isGuestCheckoutAllowed;\r\n\r\n                    return updatedCart;\r\n                }.bind(this));\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        beforePayment: function (resolve, reject) {\r\n            var promise = $.Deferred();\r\n\r\n            if (this.declinePayment) {\r\n                this.addError(this.signInMessage, 'warning');\r\n\r\n                reject();\r\n            } else {\r\n                promise.resolve();\r\n            }\r\n\r\n            return promise;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        prepareClientConfig: function () {\r\n            this._super();\r\n\r\n            return this.clientConfig;\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/in-context/express-checkout-smart-buttons.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/* eslint-disable max-nested-callbacks */\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'Magento_Paypal/js/in-context/paypal-sdk',\r\n    'domReady!'\r\n], function (_, $, paypalSdk) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Triggers beforePayment action on PayPal buttons\r\n     *\r\n     * @param {Object} clientConfig\r\n     * @returns {Object} jQuery promise\r\n     */\r\n    function performCreateOrder(clientConfig) {\r\n        var params = {\r\n            'quote_id': clientConfig.quoteId,\r\n            'customer_id': clientConfig.customerId || '',\r\n            'form_key': clientConfig.formKey,\r\n            button: clientConfig.button\r\n        };\r\n\r\n        return $.Deferred(function (deferred) {\r\n            clientConfig.rendererComponent.beforePayment(deferred.resolve, deferred.reject).then(function () {\r\n                $.post(clientConfig.getTokenUrl, params).done(function (res) {\r\n                    clientConfig.rendererComponent.afterPayment(res, deferred.resolve, deferred.reject);\r\n                }).fail(function (jqXHR, textStatus, err) {\r\n                    clientConfig.rendererComponent.catchPayment(err, deferred.resolve, deferred.reject);\r\n                });\r\n            });\r\n        }).promise();\r\n    }\r\n\r\n    /**\r\n     * Triggers beforeOnAuthorize action on PayPal buttons\r\n     * @param {Object} clientConfig\r\n     * @param {Object} data\r\n     * @param {Object} actions\r\n     * @returns {Object} jQuery promise\r\n     */\r\n    function performOnApprove(clientConfig, data, actions) {\r\n        var params = {\r\n            paymentToken: data.orderID,\r\n            payerId: data.payerID,\r\n            'form_key': clientConfig.formKey\r\n        };\r\n\r\n        return $.Deferred(function (deferred) {\r\n            clientConfig.rendererComponent.beforeOnAuthorize(deferred.resolve, deferred.reject, actions)\r\n                .then(function () {\r\n                    $.post(clientConfig.onAuthorizeUrl, params).done(function (res) {\r\n                        clientConfig.rendererComponent\r\n                            .afterOnAuthorize(res, deferred.resolve, deferred.reject, actions);\r\n                    }).fail(function (jqXHR, textStatus, err) {\r\n                        clientConfig.rendererComponent.catchOnAuthorize(err, deferred.resolve, deferred.reject);\r\n                    });\r\n                });\r\n        }).promise();\r\n    }\r\n\r\n    return function (clientConfig, element) {\r\n        paypalSdk(clientConfig.sdkUrl).done(function (paypal) {\r\n            paypal.Buttons({\r\n                style: clientConfig.styles,\r\n\r\n                /**\r\n                 * onInit is called when the button first renders\r\n                 * @param {Object} data\r\n                 * @param {Object} actions\r\n                 */\r\n                onInit: function (data, actions) {\r\n                    clientConfig.rendererComponent.validate(actions);\r\n                },\r\n\r\n                /**\r\n                 * Triggers beforePayment action on PayPal buttons\r\n                 * @returns {Object} jQuery promise\r\n                 */\r\n                createOrder: function () {\r\n                    return performCreateOrder(clientConfig);\r\n                },\r\n\r\n                /**\r\n                 * Triggers beforeOnAuthorize action on PayPal buttons\r\n                 * @param {Object} data\r\n                 * @param {Object} actions\r\n                 */\r\n                onApprove: function (data, actions) {\r\n                    performOnApprove(clientConfig, data, actions);\r\n                },\r\n\r\n                /**\r\n                 * Execute logic on Paypal button click\r\n                 */\r\n                onClick: function () {\r\n                    clientConfig.rendererComponent.validate();\r\n                    clientConfig.rendererComponent.onClick();\r\n                },\r\n\r\n                /**\r\n                 * Process cancel action\r\n                 * @param {Object} data\r\n                 * @param {Object} actions\r\n                 */\r\n                onCancel: function (data, actions) {\r\n                    clientConfig.rendererComponent.onCancel(data, actions);\r\n                },\r\n\r\n                /**\r\n                 * Process errors\r\n                 *\r\n                 * @param {Error} err\r\n                 */\r\n                onError: function (err) {\r\n                    clientConfig.rendererComponent.onError(err);\r\n                }\r\n            }).render(element);\r\n        });\r\n    };\r\n});\r\n","Magento_Paypal/js/in-context/express-checkout-wrapper.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/translate',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Paypal/js/in-context/express-checkout-smart-buttons',\r\n    'Magento_Ui/js/modal/alert',\r\n    'mage/cookies'\r\n], function ($, $t, customerData, checkoutSmartButtons, alert) {\r\n    'use strict';\r\n\r\n    return {\r\n        defaults: {\r\n            paymentActionError: $t('Something went wrong with your request. Please try again later.'),\r\n            signInMessage: $t('To check out, please sign in with your email address.')\r\n        },\r\n\r\n        /**\r\n         * Render PayPal buttons using checkout.js\r\n         */\r\n        renderPayPalButtons: function (element) {\r\n            checkoutSmartButtons(this.prepareClientConfig(), element);\r\n        },\r\n\r\n        /**\r\n         * Validate payment method\r\n         *\r\n         * @param {Object} actions\r\n         */\r\n        validate: function (actions) {\r\n            this.actions = actions || this.actions;\r\n        },\r\n\r\n        /**\r\n         * Execute logic on Paypal button click\r\n         */\r\n        onClick: function () {},\r\n\r\n        /**\r\n         * Before payment execute\r\n         *\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         * @return {*}\r\n         */\r\n        beforePayment: function (resolve, reject) { //eslint-disable-line no-unused-vars\r\n            return $.Deferred().resolve();\r\n        },\r\n\r\n        /**\r\n         * After payment execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterPayment: function (res, resolve, reject) {\r\n\r\n            if (res.success) {\r\n                return resolve(res.token);\r\n            }\r\n\r\n            return reject(new Error(res['error_message']));\r\n        },\r\n\r\n        /**\r\n         * Catch payment\r\n         *\r\n         * @param {Error} err\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         */\r\n        catchPayment: function (err, resolve, reject) {\r\n            this.addAlert(this.paymentActionError);\r\n            reject(err);\r\n        },\r\n\r\n        /**\r\n         * Before onAuthorize execute\r\n         *\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         * @param {Object} actions\r\n         *\r\n         * @return {jQuery.Deferred}\r\n         */\r\n        beforeOnAuthorize: function (resolve, reject, actions) { //eslint-disable-line no-unused-vars\r\n            //display loading widget.\r\n            $('body').trigger('processStart');\r\n\r\n            return $.Deferred().resolve();\r\n        },\r\n\r\n        /**\r\n         * After onAuthorize execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         * @param {Object} actions\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterOnAuthorize: function (res, resolve, reject, actions) {\r\n            $('body').trigger('processStop');\r\n\r\n            if (res.success) {\r\n                resolve();\r\n\r\n                return actions.redirect(res.redirectUrl);\r\n            }\r\n\r\n            return reject(new Error(res['error_message']));\r\n        },\r\n\r\n        /**\r\n         * Catch payment\r\n         *\r\n         * @param {Error} err\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         */\r\n        catchOnAuthorize: function (err, resolve, reject) {\r\n            $('body').trigger('processStop');\r\n            this.addAlert(this.paymentActionError);\r\n            reject(err);\r\n        },\r\n\r\n        /**\r\n         * Process cancel action\r\n         *\r\n         * @param {Object} data\r\n         * @param {Object} actions\r\n         */\r\n        onCancel: function (data, actions) {\r\n            $('body').trigger('processStop');\r\n            actions.redirect(this.clientConfig.onCancelUrl);\r\n        },\r\n\r\n        /**\r\n         * Process errors\r\n         *\r\n         * @param {Error} err\r\n         */\r\n        onError: function (err) { //eslint-disable-line no-unused-vars\r\n            // Uncaught error isn't displayed in the console\r\n        },\r\n\r\n        /**\r\n         * Adds error message\r\n         *\r\n         * @param {String} message\r\n         * @param {String} [type]\r\n         */\r\n        addError: function (message, type) {\r\n            type = type || 'error';\r\n            customerData.set('messages', {\r\n                messages: [{\r\n                    type: type,\r\n                    text: message\r\n                }],\r\n                'data_id': Math.floor(Date.now() / 1000)\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Add alert message\r\n         *\r\n         * @param {String} message\r\n         */\r\n        addAlert: function (message) {\r\n            alert({\r\n                content: message\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getButtonId: function () {\r\n            return this.inContextId;\r\n        },\r\n\r\n        /**\r\n         * Populate client config with all required data\r\n         *\r\n         * @return {Object}\r\n         */\r\n        prepareClientConfig: function () {\r\n            this.clientConfig.rendererComponent = this;\r\n            this.clientConfig.formKey = $.mage.cookies.get('form_key');\r\n\r\n            return this.clientConfig;\r\n        }\r\n    };\r\n});\r\n","Magento_Paypal/js/in-context/paypal-sdk.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var dfd = $.Deferred();\r\n\r\n    /**\r\n     * Loads the PayPal SDK object\r\n     * @param {String} paypalUrl - the url of the PayPal SDK\r\n     */\r\n    return function loadPaypalScript(paypalUrl) {\r\n        //configuration for loaded PayPal script\r\n        require.config({\r\n            paths: {\r\n                paypalSdk: paypalUrl\r\n            },\r\n            shim: {\r\n                paypalSdk: {\r\n                    exports: 'paypal'\r\n                }\r\n            }\r\n        });\r\n\r\n        if (dfd.state() !== 'resolved') {\r\n            require(['paypalSdk'], function (paypalObject) {\r\n                dfd.resolve(paypalObject);\r\n            });\r\n        }\r\n\r\n        return dfd.promise();\r\n    };\r\n});\r\n","Magento_Paypal/js/in-context/product-express-checkout.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Paypal/js/in-context/express-checkout-wrapper',\r\n    'Magento_Customer/js/customer-data'\r\n], function (_, $, Component, Wrapper, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend(Wrapper).extend({\r\n        defaults: {\r\n            productFormSelector: '#product_addtocart_form',\r\n            declinePayment: false,\r\n            formInvalid: false,\r\n            productAddedToCart: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function (config, element) {\r\n            var cart = customerData.get('cart'),\r\n                customer = customerData.get('customer'),\r\n                isGuestCheckoutAllowed;\r\n\r\n            this._super();\r\n\r\n            isGuestCheckoutAllowed = cart().isGuestCheckoutAllowed;\r\n\r\n            if (typeof isGuestCheckoutAllowed === 'undefined') {\r\n                isGuestCheckoutAllowed = config.clientConfig.isGuestCheckoutAllowed;\r\n            }\r\n\r\n            if (config.clientConfig.isVisibleOnProductPage) {\r\n                this.renderPayPalButtons(element);\r\n            }\r\n\r\n            this.declinePayment = !customer().firstname && !isGuestCheckoutAllowed;\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        onClick: function () {\r\n            var $form = $(this.productFormSelector);\r\n\r\n            if (!this.declinePayment && !this.productAddedToCart) {\r\n                $form.trigger('submit');\r\n                this.formInvalid = !$form.validation('isValid');\r\n                this.productAddedToCart = true;\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        beforePayment: function (resolve, reject) {\r\n            var promise = $.Deferred();\r\n\r\n            if (this.declinePayment) {\r\n                this.addError(this.signInMessage, 'warning');\r\n                reject();\r\n            } else if (this.formInvalid) {\r\n                reject();\r\n            } else {\r\n                $(document).on('ajax:addToCart', function (e, data) {\r\n                    if (_.isEmpty(data.response)) {\r\n                        return promise.resolve();\r\n                    }\r\n\r\n                    return reject();\r\n                });\r\n                $(document).on('ajax:addToCart:error', reject);\r\n            }\r\n\r\n            return promise;\r\n        },\r\n\r\n        /**\r\n         * After payment execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterPayment: function (res, resolve, reject) {\r\n            if (res.success) {\r\n                return resolve(res.token);\r\n            }\r\n\r\n            this.addAlert(res['error_message']);\r\n\r\n            return reject(new Error(res['error_message']));\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        prepareClientConfig: function () {\r\n            this._super();\r\n            this.clientConfig.quoteId = '';\r\n            this.clientConfig.customerId = '';\r\n\r\n            return this.clientConfig;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        onError: function (err) {\r\n            this.productAddedToCart = false;\r\n            this._super(err);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        onCancel: function (data, actions) {\r\n            this.productAddedToCart = false;\r\n            this._super(data, actions);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        afterOnAuthorize: function (res, resolve, reject, actions) {\r\n            this.productAddedToCart = false;\r\n\r\n            return this._super(res, resolve, reject, actions);\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/model/iframe-redirect.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Paypal/js/model/iframe',\r\n    'Magento_Ui/js/model/messageList'\r\n],\r\nfunction (ko, iframe, messageList) {\r\n    'use strict';\r\n\r\n    return function (cartUrl, errorMessage, goToSuccessPage, successUrl) {\r\n        if (this === window.self) {\r\n            window.location = cartUrl;\r\n        }\r\n\r\n        if (!!errorMessage.message) { //eslint-disable-line no-extra-boolean-cast\r\n            document.removeEventListener('click', iframe.stopEventPropagation, true);\r\n            iframe.isInAction(false);\r\n            messageList.addErrorMessage(errorMessage);\r\n        } else if (!!goToSuccessPage) { //eslint-disable-line no-extra-boolean-cast\r\n            window.location = successUrl;\r\n        } else {\r\n            window.location = cartUrl;\r\n        }\r\n    };\r\n});\r\n","Magento_Paypal/js/model/iframe.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['ko'], function (ko) {\r\n    'use strict';\r\n\r\n    var isInAction = ko.observable(false);\r\n\r\n    return {\r\n        isInAction: isInAction,\r\n\r\n        /**\r\n         * @param {jQuery.Event} event\r\n         */\r\n        stopEventPropagation: function (event) {\r\n            event.stopImmediatePropagation();\r\n            event.preventDefault();\r\n        }\r\n    };\r\n});\r\n","Magento_Paypal/js/view/paylater.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'uiElement',\r\n    'uiLayout',\r\n    'Magento_Paypal/js/in-context/paypal-sdk',\r\n    'domReady!'\r\n], function (\r\n    $,\r\n    ko,\r\n    Component,\r\n    layout,\r\n    paypalSdk\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            template: 'Magento_Paypal/paylater',\r\n            sdkUrl: '',\r\n            attributes: {\r\n                class: 'pay-later-message'\r\n            },\r\n            refreshSelector: '',\r\n            displayAmount: false,\r\n            amountComponentConfig: {\r\n                name: '${ $.name }.amountProvider',\r\n                component: ''\r\n            }\r\n        },\r\n        paypal: null,\r\n        amount: null,\r\n\r\n        /**\r\n         * Initialize\r\n         *\r\n         * @returns {*}\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .observe(['amount']);\r\n\r\n            if (this.displayAmount) {\r\n                layout([this.amountComponentConfig]);\r\n            }\r\n\r\n            if (this.sdkUrl !== '') {\r\n                this.loadPayPalSdk(this.sdkUrl)\r\n                    .then(this._setPayPalObject.bind(this));\r\n            }\r\n\r\n            if (this.refreshSelector) {\r\n                $(this.refreshSelector).on('click', this._refreshMessages.bind(this));\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get attribute value from configuration\r\n         *\r\n         * @param {String} attributeName\r\n         * @returns {*|null}\r\n         */\r\n        getAttribute: function (attributeName) {\r\n            return typeof this.attributes[attributeName] !== 'undefined' ?\r\n                this.attributes[attributeName] : null;\r\n        },\r\n\r\n        /**\r\n         * Load PP SDK with preconfigured options\r\n         *\r\n         * @param {String} sdkUrl\r\n         */\r\n        loadPayPalSdk: function (sdkUrl) {\r\n            return paypalSdk(sdkUrl);\r\n        },\r\n\r\n        /**\r\n         * Set reference to paypal Sdk object\r\n         *\r\n         * @param {Object} paypal\r\n         * @private\r\n         */\r\n        _setPayPalObject: function (paypal) {\r\n            this.paypal = paypal;\r\n        },\r\n\r\n        /**\r\n         * Render messages\r\n         *\r\n         * @private\r\n         */\r\n        _refreshMessages: function () {\r\n            if (this.paypal) {\r\n                this.paypal.Messages.render();\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/amountProviders/checkout.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'uiElement',\r\n    'uiRegistry',\r\n    'Magento_Checkout/js/model/quote',\r\n    'domReady!'\r\n], function (\r\n    $,\r\n    ko,\r\n    Component,\r\n    registry,\r\n    quote\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            amount: null\r\n        },\r\n\r\n        /**\r\n         * Initialize\r\n         *\r\n         * @returns {*}\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.updateAmount();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update amount\r\n         */\r\n        updateAmount: function () {\r\n            var payLater = registry.get(this.parentName);\r\n\r\n            quote.totals.subscribe(function (newValue) {\r\n                payLater.amount(newValue['base_grand_total']);\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/amountProviders/product-grouped.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiElement',\r\n    'uiRegistry',\r\n    'domReady!'\r\n], function (\r\n    $,\r\n    Component,\r\n    registry\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            tableWrapperSelector: '.table-wrapper.grouped',\r\n            priceBoxSelector: '[data-role=\"priceBox\"]',\r\n            qtyFieldSelector: '.input-text.qty',\r\n            amount: null\r\n        },\r\n        priceInfo: {},\r\n\r\n        /**\r\n         * Initialize\r\n         *\r\n         * @returns {*}\r\n         */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n\r\n            $('tbody tr', this.tableWrapperSelector).each(function (index, element) {\r\n                var priceBox = $(self.priceBoxSelector, element),\r\n                    qtyElement = $(self.qtyFieldSelector, element),\r\n                    productId = priceBox.data('productId'),\r\n                    priceElement = $('#product-price-' + productId);\r\n\r\n                self.priceInfo[productId] = {\r\n                    qty: self._getQty(qtyElement),\r\n                    price: priceElement.data('priceAmount')\r\n                };\r\n            });\r\n\r\n            $(this.qtyFieldSelector).on('change', this._onQtyChange.bind(this));\r\n\r\n            this._updateAmount();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get product quantity\r\n         *\r\n         * @param {jQuery.Element} element\r\n         * @private\r\n         */\r\n        _getQty: function (element) {\r\n            var qty = parseFloat(element.val());\r\n\r\n            return !isNaN(qty) && qty ? qty : 0;\r\n        },\r\n\r\n        /**\r\n         * Handle changed product quantity\r\n         *\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _onQtyChange: function (event) {\r\n            var qtyElement = $(event.target),\r\n                parent = qtyElement.parents('tr'),\r\n                priceBox = $(this.priceBoxSelector, parent),\r\n                productId = priceBox.data('productId');\r\n\r\n            if (this.priceInfo[productId]) {\r\n                this.priceInfo[productId].qty = this._getQty(qtyElement);\r\n            }\r\n\r\n            this._updateAmount();\r\n        },\r\n\r\n        /**\r\n         * Calculate and update amount\r\n         *\r\n         * @private\r\n         */\r\n        _updateAmount: function () {\r\n            var productId,\r\n                amount = 0,\r\n                payLater = registry.get(this.parentName);\r\n\r\n            for (productId in this.priceInfo) {\r\n                if (this.priceInfo.hasOwnProperty(productId)) {\r\n                    amount += this.priceInfo[productId].price * this.priceInfo[productId].qty;\r\n                }\r\n            }\r\n\r\n            payLater.amount(amount);\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/amountProviders/product.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'jquery',\r\n    'uiElement',\r\n    'uiRegistry',\r\n    'priceBox',\r\n    'domReady!'\r\n], function (\r\n    $,\r\n    Component,\r\n    registry\r\n) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n        defaults: {\r\n            priceBoxSelector: '.price-box',\r\n            qtyFieldSelector: '#product_addtocart_form [name=\"qty\"]',\r\n            amount: null\r\n        },\r\n        qty: 1,\r\n        price: 0,\r\n        priceType: '',\r\n\r\n        /**\r\n         * Initialize\r\n         *\r\n         * @returns {*}\r\n         */\r\n        initialize: function () {\r\n            var priceBox;\r\n\r\n            this._super();\r\n\r\n            priceBox = $(this.priceBoxSelector);\r\n            priceBox.on('priceUpdated', this._onPriceChange.bind(this));\r\n\r\n            if (priceBox.priceBox('option') &&\r\n                priceBox.priceBox('option').prices &&\r\n                (priceBox.priceBox('option').prices.finalPrice || priceBox.priceBox('option').prices.basePrice)\r\n            ) {\r\n                this.priceType = priceBox.priceBox('option').prices.finalPrice ? 'finalPrice' : 'basePrice';\r\n                this.price = priceBox.priceBox('option').prices[this.priceType].amount;\r\n            }\r\n\r\n            $(this.qtyFieldSelector).on('change', this._onQtyChange.bind(this));\r\n\r\n            priceBox.trigger('updatePrice');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handle changed product qty\r\n         *\r\n         * @param {jQuery.Event} event\r\n         * @private\r\n         */\r\n        _onQtyChange: function (event) {\r\n            var qty = parseFloat($(event.target).val());\r\n\r\n            this.qty = !isNaN(qty) && qty ? qty : 1;\r\n            this._updateAmount();\r\n        },\r\n\r\n        /**\r\n         * Handle product price change\r\n         *\r\n         * @param {jQuery.Event} event\r\n         * @param {Object} data\r\n         * @private\r\n         */\r\n        _onPriceChange: function (event, data) {\r\n            this.price = data[this.priceType].amount;\r\n            this._updateAmount();\r\n        },\r\n\r\n        /**\r\n         * Calculate and update amount\r\n         *\r\n         * @private\r\n         */\r\n        _updateAmount: function () {\r\n            var amount = this.price * this.qty,\r\n                payLater = registry.get(this.parentName);\r\n\r\n            if (amount !== 0) {\r\n                payLater.amount(amount);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/paypal-payments.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/payment/renderer-list'\r\n], function (Component, rendererList) {\r\n    'use strict';\r\n\r\n    var isContextCheckout = window.checkoutConfig.payment.paypalExpress.isContextCheckout,\r\n        paypalExpress = 'Magento_Paypal/js/view/payment/method-renderer' +\r\n            (isContextCheckout ? '/in-context/checkout-express' : '/paypal-express');\r\n\r\n    rendererList.push(\r\n        {\r\n            type: 'paypal_express',\r\n            component: paypalExpress,\r\n            config: window.checkoutConfig.payment.paypalExpress.inContextConfig\r\n        },\r\n        {\r\n            type: 'payflow_express',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/payflow-express'\r\n        },\r\n        {\r\n            type: 'payflow_express_bml',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/payflow-express-bml'\r\n        },\r\n        {\r\n            type: 'payflowpro',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/payflowpro-method'\r\n        },\r\n        {\r\n            type: 'payflow_link',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/iframe-methods'\r\n        },\r\n        {\r\n            type: 'payflow_advanced',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/iframe-methods'\r\n        },\r\n        {\r\n            type: 'hosted_pro',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/iframe-methods'\r\n        },\r\n        {\r\n            type: 'paypal_billing_agreement',\r\n            component: 'Magento_Paypal/js/view/payment/method-renderer/paypal-billing-agreement'\r\n        }\r\n    );\r\n\r\n    /**\r\n     * Add view logic here if needed\r\n     **/\r\n    return Component.extend({});\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/iframe-methods.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'Magento_Paypal/js/model/iframe',\r\n    'Magento_Checkout/js/model/full-screen-loader'\r\n], function (Component, iframe, fullScreenLoader) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/iframe-methods',\r\n            paymentReady: false\r\n        },\r\n        redirectAfterPlaceOrder: false,\r\n        isInAction: iframe.isInAction,\r\n\r\n        /**\r\n         * @return {exports}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('paymentReady');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        isPaymentReady: function () {\r\n            return this.paymentReady();\r\n        },\r\n\r\n        /**\r\n         * Get action url for payment method iframe.\r\n         * @returns {String}\r\n         */\r\n        getActionUrl: function () {\r\n            return this.isInAction() ? window.checkoutConfig.payment.paypalIframe.actionUrl[this.getCode()] : '';\r\n        },\r\n\r\n        /**\r\n         * Places order in pending payment status.\r\n         */\r\n        placePendingPaymentOrder: function () {\r\n            if (this.placeOrder()) {\r\n                fullScreenLoader.startLoader();\r\n                this.isInAction(true);\r\n                // capture all click events\r\n                document.addEventListener('click', iframe.stopEventPropagation, true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getPlaceOrderDeferredObject: function () {\r\n            var self = this;\r\n\r\n            return this._super().fail(function () {\r\n                fullScreenLoader.stopLoader();\r\n                self.isInAction(false);\r\n                document.removeEventListener('click', iframe.stopEventPropagation, true);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * After place order callback\r\n         */\r\n        afterPlaceOrder: function () {\r\n            if (this.iframeIsLoaded) {\r\n                document.getElementById(this.getCode() + '-iframe')\r\n                    .contentWindow.location.reload();\r\n                this.paymentReady(false);\r\n            }\r\n\r\n            this.paymentReady(true);\r\n            this.iframeIsLoaded = true;\r\n            this.isPlaceOrderActionAllowed(true);\r\n            fullScreenLoader.stopLoader();\r\n        },\r\n\r\n        /**\r\n         * Hide loader when iframe is fully loaded.\r\n         */\r\n        iframeLoaded: function () {\r\n            fullScreenLoader.stopLoader();\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/payflow-express-bml.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/payflow-express-bml'\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/payflow-express.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/payflow-express'\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/payflowpro-method.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Payment/js/view/payment/iframe',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Checkout/js/action/set-payment-information',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Vault/js/view/payment/vault-enabler'\r\n], function ($, Component, additionalValidators, setPaymentInformationAction, fullScreenLoader, VaultEnabler) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/payflowpro-form'\r\n        },\r\n        placeOrderHandler: null,\r\n        validateHandler: null,\r\n\r\n        /**\r\n         * @returns {exports.initialize}\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.vaultEnabler = new VaultEnabler();\r\n            this.vaultEnabler.setPaymentCode(this.getVaultCode());\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @param {Function} handler\r\n         */\r\n        setPlaceOrderHandler: function (handler) {\r\n            this.placeOrderHandler = handler;\r\n        },\r\n\r\n        /**\r\n         * @param {Function} handler\r\n         */\r\n        setValidateHandler: function (handler) {\r\n            this.validateHandler = handler;\r\n        },\r\n\r\n        /**\r\n         * @returns {Object}\r\n         */\r\n        context: function () {\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @returns {Boolean}\r\n         */\r\n        isShowLegend: function () {\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getCode: function () {\r\n            return 'payflowpro';\r\n        },\r\n\r\n        /**\r\n         * @returns {Boolean}\r\n         */\r\n        isActive: function () {\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        placeOrder: function () {\r\n            var self = this;\r\n\r\n            if (this.validateHandler() &&\r\n                additionalValidators.validate() &&\r\n                this.isPlaceOrderActionAllowed() === true\r\n            ) {\r\n                this.isPlaceOrderActionAllowed(false);\r\n                fullScreenLoader.startLoader();\r\n                $.when(\r\n                    setPaymentInformationAction(this.messageContainer, self.getData())\r\n                ).done(\r\n                    function () {\r\n                        self.placeOrderHandler().fail(\r\n                            function () {\r\n                                fullScreenLoader.stopLoader();\r\n                            }\r\n                        );\r\n                    }\r\n                ).always(\r\n                    function () {\r\n                        self.isPlaceOrderActionAllowed(true);\r\n                        fullScreenLoader.stopLoader();\r\n                    }\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @returns {Object}\r\n         */\r\n        getData: function () {\r\n            var data = {\r\n                'method': this.getCode(),\r\n                'additional_data': {\r\n                    'cc_type': this.creditCardType(),\r\n                    'cc_exp_year': this.creditCardExpYear(),\r\n                    'cc_exp_month': this.creditCardExpMonth(),\r\n                    'cc_last_4': this.creditCardNumber().substr(-4)\r\n                }\r\n            };\r\n\r\n            this.vaultEnabler.visitAdditionalData(data);\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * @returns {Bool}\r\n         */\r\n        isVaultEnabled: function () {\r\n            return this.vaultEnabler.isVaultEnabled();\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getVaultCode: function () {\r\n            return 'payflowpro_cc_vault';\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/paypal-billing-agreement.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'mage/validation'\r\n], function ($, Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/paypal_billing_agreement-form',\r\n            selectedBillingAgreement: ''\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('selectedBillingAgreement');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getTransportName: function () {\r\n            return window.checkoutConfig.payment.paypalBillingAgreement.transportName;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getBillingAgreements: function () {\r\n            return window.checkoutConfig.payment.paypalBillingAgreement.agreements;\r\n        },\r\n\r\n        /**\r\n         * @return {Object}\r\n         */\r\n        getData: function () {\r\n            var additionalData = null;\r\n\r\n            if (this.getTransportName()) {\r\n                additionalData = {};\r\n                additionalData[this.getTransportName()] = this.selectedBillingAgreement();\r\n            }\r\n\r\n            return {\r\n                'method': this.item.method,\r\n                'additional_data': additionalData\r\n            };\r\n        },\r\n\r\n        /**\r\n         * @return {jQuery}\r\n         */\r\n        validate: function () {\r\n            var form = '#billing-agreement-form';\r\n\r\n            return $(form).validation() && $(form).validation('isValid');\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/view/payment/default',\r\n    'Magento_Paypal/js/action/set-payment-method',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, Component, setPaymentMethodAction, additionalValidators, quote, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/payflow-express-bml',\r\n            billingAgreement: ''\r\n        },\r\n\r\n        /** Init observable variables */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('billingAgreement');\r\n\r\n            return this;\r\n        },\r\n\r\n        /** Open window with  */\r\n        showAcceptanceWindow: function (data, event) {\r\n            window.open(\r\n                $(event.currentTarget).attr('href'),\r\n                'olcwhatispaypal',\r\n                'toolbar=no, location=no,' +\r\n                ' directories=no, status=no,' +\r\n                ' menubar=no, scrollbars=yes,' +\r\n                ' resizable=yes, ,left=0,' +\r\n                ' top=0, width=400, height=350'\r\n            );\r\n\r\n            return false;\r\n        },\r\n\r\n        /** Returns payment acceptance mark link path */\r\n        getPaymentAcceptanceMarkHref: function () {\r\n            return window.checkoutConfig.payment.paypalExpress.paymentAcceptanceMarkHref;\r\n        },\r\n\r\n        /** Returns payment acceptance mark image path */\r\n        getPaymentAcceptanceMarkSrc: function () {\r\n            return window.checkoutConfig.payment.paypalExpress.paymentAcceptanceMarkSrc;\r\n        },\r\n\r\n        /** Returns billing agreement data */\r\n        getBillingAgreementCode: function () {\r\n            return window.checkoutConfig.payment.paypalExpress.billingAgreementCode[this.item.method];\r\n        },\r\n\r\n        /** Returns payment information data */\r\n        getData: function () {\r\n            var parent = this._super(),\r\n                additionalData = null;\r\n\r\n            if (this.getBillingAgreementCode()) {\r\n                additionalData = {};\r\n                additionalData[this.getBillingAgreementCode()] = this.billingAgreement();\r\n            }\r\n\r\n            return $.extend(true, parent, {\r\n                'additional_data': additionalData\r\n            });\r\n        },\r\n\r\n        /** Redirect to paypal */\r\n        continueToPayPal: function () {\r\n            if (additionalValidators.validate()) {\r\n                //update payment method information if additional data was changed\r\n                setPaymentMethodAction(this.messageContainer).done(\r\n                    function () {\r\n                        customerData.invalidate(['cart']);\r\n                        $.mage.redirect(\r\n                            window.checkoutConfig.payment.paypalExpress.redirectUrl[quote.paymentMethod().method]\r\n                        );\r\n                    }\r\n                );\r\n\r\n                return false;\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/paypal-express.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/paypal-express'\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/in-context/checkout-express.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Paypal/js/view/payment/method-renderer/paypal-express-abstract',\r\n    'Magento_Paypal/js/in-context/express-checkout-wrapper',\r\n    'Magento_Paypal/js/action/set-payment-method',\r\n    'Magento_Checkout/js/model/payment/additional-validators',\r\n    'Magento_Ui/js/model/messageList',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function ($, Component, Wrapper, setPaymentMethod, additionalValidators, messageList) {\r\n    'use strict';\r\n\r\n    return Component.extend(Wrapper).extend({\r\n        defaults: {\r\n            template: 'Magento_Paypal/payment/paypal-express-in-context',\r\n            validationElements: 'input'\r\n        },\r\n\r\n        /**\r\n         * Listens element on change and validate it.\r\n         *\r\n         * @param {HTMLElement} context\r\n         */\r\n        initListeners: function (context) {\r\n            $.async(this.validationElements, context, function (element) {\r\n                $(element).on('change', function () {\r\n                    this.validate();\r\n                }.bind(this));\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         *  Validates Smart Buttons\r\n         */\r\n        validate: function () {\r\n            this._super();\r\n\r\n            if (this.actions) {\r\n                additionalValidators.validate(true) ? this.actions.enable() : this.actions.disable();\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        beforePayment: function (resolve, reject) {\r\n            var promise = $.Deferred();\r\n\r\n            setPaymentMethod(this.messageContainer).done(function () {\r\n                return promise.resolve();\r\n            }).fail(function (response) {\r\n                var error;\r\n\r\n                try {\r\n                    error = JSON.parse(response.responseText);\r\n                } catch (exception) {\r\n                    error = this.paymentActionError;\r\n                }\r\n\r\n                this.addError(error);\r\n\r\n                return reject(new Error(error));\r\n            }.bind(this));\r\n\r\n            return promise;\r\n        },\r\n\r\n        /**\r\n         * Populate client config with all required data\r\n         *\r\n         * @return {Object}\r\n         */\r\n        prepareClientConfig: function () {\r\n            this._super();\r\n            this.clientConfig.quoteId = window.checkoutConfig.quoteData['entity_id'];\r\n            this.clientConfig.customerId = window.customerData.id;\r\n            this.clientConfig.button = 0;\r\n\r\n            return this.clientConfig;\r\n        },\r\n\r\n        /**\r\n         * Adding logic to be triggered onClick action for smart buttons component\r\n         */\r\n        onClick: function () {\r\n            additionalValidators.validate();\r\n        },\r\n\r\n        /**\r\n         * Adds error message\r\n         *\r\n         * @param {String} message\r\n         */\r\n        addError: function (message) {\r\n            messageList.addErrorMessage({\r\n                message: message\r\n            });\r\n        },\r\n\r\n        /**\r\n         * After payment execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterPayment: function (res, resolve, reject) {\r\n            if (res.success) {\r\n                return resolve(res.token);\r\n            }\r\n\r\n            this.addError(res['error_message']);\r\n\r\n            return reject(new Error(res['error_message']));\r\n        },\r\n\r\n        /**\r\n         * After onAuthorize execute\r\n         *\r\n         * @param {Object} res\r\n         * @param {Function} resolve\r\n         * @param {Function} reject\r\n         * @param {Object} actions\r\n         *\r\n         * @return {*}\r\n         */\r\n        afterOnAuthorize: function (res, resolve, reject, actions) {\r\n            if (res.success) {\r\n                resolve();\r\n\r\n                return actions.redirect(res.redirectUrl);\r\n            }\r\n\r\n            this.addError(res['error_message']);\r\n\r\n            return reject(new Error(res['error_message']));\r\n        }\r\n    });\r\n});\r\n","Magento_Paypal/js/view/payment/method-renderer/payflowpro/vault.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Vault/js/view/payment/method-renderer/vault'\r\n], function (VaultComponent) {\r\n    'use strict';\r\n\r\n    return VaultComponent.extend({\r\n        defaults: {\r\n            template: 'Magento_Vault/payment/form'\r\n        },\r\n\r\n        /**\r\n         * @returns {String}\r\n         */\r\n        getToken: function () {\r\n            return this.publicHash;\r\n        },\r\n\r\n        /**\r\n         * Get last 4 digits of card\r\n         * @returns {String}\r\n         */\r\n        getMaskedCard: function () {\r\n            return this.details['cc_last_4'];\r\n        },\r\n\r\n        /**\r\n         * Get expiration date\r\n         * @returns {String}\r\n         */\r\n        getExpirationDate: function () {\r\n            return this.details['cc_exp_month'] + '/' + this.details['cc_exp_year'];\r\n        },\r\n\r\n        /**\r\n         * Get card type\r\n         * @returns {String}\r\n         */\r\n        getCardType: function () {\r\n            return this.details['cc_type'];\r\n        }\r\n    });\r\n});\r\n","Magento_PaypalCaptcha/js/model/skipRefreshCaptcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['ko'], function (ko) {\r\n    'use strict';\r\n\r\n    return {\r\n        skip: ko.observable(false)\r\n    };\r\n});\r\n","Magento_PaypalCaptcha/js/view/checkout/defaultCaptcha-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_PaypalCaptcha/js/model/skipRefreshCaptcha'\r\n], function (skipRefreshCaptcha) {\r\n    'use strict';\r\n\r\n    var defaultCaptchaMixin = {\r\n        /**\r\n         * @override\r\n         */\r\n        refresh: function () {\r\n            if (!skipRefreshCaptcha.skip()) {\r\n                this._super();\r\n            } else {\r\n                skipRefreshCaptcha.skip(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    return function (defaultCaptcha) {\r\n        return defaultCaptcha.extend(defaultCaptchaMixin);\r\n    };\r\n});\r\n","Magento_PaypalCaptcha/js/view/checkout/paymentCaptcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Captcha/js/view/checkout/defaultCaptcha',\r\n    'Magento_Captcha/js/model/captchaList',\r\n    'Magento_Captcha/js/model/captcha'\r\n],\r\nfunction ($, defaultCaptcha, captchaList, Captcha) {\r\n    'use strict';\r\n\r\n    return defaultCaptcha.extend({\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            var captchaConfigPayment,\r\n                currentCaptcha;\r\n\r\n            this._super();\r\n\r\n            if (window[this.configSource] && window[this.configSource].captchaPayments) {\r\n                captchaConfigPayment = window[this.configSource].captchaPayments;\r\n\r\n                $.each(captchaConfigPayment, function (formId, captchaData) {\r\n                    var captcha;\r\n\r\n                    captchaData.formId = formId;\r\n                    captcha = Captcha(captchaData);\r\n                    captchaList.add(captcha);\r\n                });\r\n            }\r\n\r\n            currentCaptcha = captchaList.getCaptchaByFormId(this.formId);\r\n\r\n            if (currentCaptcha != null) {\r\n                currentCaptcha.setIsVisible(true);\r\n                this.setCurrentCaptcha(currentCaptcha);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_PaypalCaptcha/js/view/payment/list-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Captcha/js/model/captchaList'\r\n], function ($, captchaList) {\r\n    'use strict';\r\n\r\n    var mixin = {\r\n\r\n        formId: 'co-payment-form',\r\n\r\n        /**\r\n         * Sets custom template for Payflow Pro\r\n         *\r\n         * @param {Object} payment\r\n         * @returns {Object}\r\n         */\r\n        createComponent: function (payment) {\r\n\r\n            var component = this._super(payment);\r\n\r\n            if (component.component === 'Magento_Paypal/js/view/payment/method-renderer/payflowpro-method') {\r\n                component.template = 'Magento_PaypalCaptcha/payment/payflowpro-form';\r\n                $(window).off('clearTimeout')\r\n                    .on('clearTimeout', this.clearTimeout.bind(this));\r\n            }\r\n\r\n            return component;\r\n        },\r\n\r\n        /**\r\n         * Overrides default window.clearTimeout() to catch errors from iframe and reload Captcha.\r\n         *\r\n         * @param {Number} timeoutID\r\n         */\r\n        clearTimeout: function (timeoutID) {\r\n            var captcha = captchaList.getCaptchaByFormId(this.formId);\r\n\r\n            if (captcha !== null) {\r\n                captcha.refresh();\r\n            }\r\n            clearTimeout(timeoutID);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Overrides `Magento_Checkout/js/view/payment/list::createComponent`\r\n     */\r\n    return function (target) {\r\n        return target.extend(mixin);\r\n    };\r\n});\r\n","Magento_PaypalCaptcha/js/view/payment/method-renderer/payflowpro-method-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_PaypalCaptcha/js/model/skipRefreshCaptcha'\r\n], function (skipRefreshCaptcha) {\r\n    'use strict';\r\n\r\n    var payflowProMethodMixin = {\r\n        /**\r\n         * @override\r\n         */\r\n        placeOrder: function () {\r\n            skipRefreshCaptcha.skip(true);\r\n            this._super();\r\n        }\r\n    };\r\n\r\n    return function (payflowProMethod) {\r\n        return payflowProMethod.extend(payflowProMethodMixin);\r\n    };\r\n});\r\n","Magento_Persistent/js/view/additional-welcome.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/translate',\r\n    'Magento_Customer/js/customer-data'\r\n], function ($, $t, customerData) {\r\n    'use strict';\r\n\r\n    return {\r\n        /**\r\n         * Init.\r\n         */\r\n        init: function () {\r\n            var persistent = customerData.get('persistent');\r\n\r\n            if (persistent().fullname === undefined) {\r\n                customerData.get('persistent').subscribe(this.replacePersistentWelcome);\r\n            } else {\r\n                this.replacePersistentWelcome();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Replace welcome message for customer with persistent cookie.\r\n         */\r\n        replacePersistentWelcome: function () {\r\n            var persistent = customerData.get('persistent'),\r\n                welcomeElems;\r\n\r\n            if (persistent().fullname !== undefined) {\r\n                welcomeElems = $('li.greet.welcome > span.not-logged-in');\r\n\r\n                if (welcomeElems.length) {\r\n                    $(welcomeElems).each(function () {\r\n                        var html = $t('Welcome, %1!').replace('%1', persistent().fullname);\r\n\r\n                        $(this).attr('data-bind', html);\r\n                        $(this).html(html);\r\n                    });\r\n                    $(welcomeElems).append(' <span><a ' + window.notYouLink + '>' + $t('Not you?') + '</a>');\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @constructor\r\n         */\r\n        'Magento_Persistent/js/view/additional-welcome': function () {\r\n            this.init();\r\n        }\r\n    };\r\n});\r\n","Magento_Persistent/js/view/customer-data-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper'\r\n], function ($, wrapper) {\r\n    'use strict';\r\n\r\n    var mixin = {\r\n\r\n        /**\r\n         * Check if persistent section is expired due to lifetime.\r\n         *\r\n         * @param {Function} originFn - Original method.\r\n         * @return {Array}\r\n         */\r\n        getExpiredSectionNames: function (originFn) {\r\n            var expiredSections = originFn(),\r\n                storage = $.initNamespaceStorage('mage-cache-storage').localStorage,\r\n                currentTimestamp = Math.floor(Date.now() / 1000),\r\n                persistentIndex = expiredSections.indexOf('persistent'),\r\n                persistentLifeTime = 0,\r\n                sectionData;\r\n\r\n            if (window.persistent !== undefined && window.persistent.expirationLifetime !== undefined) {\r\n                persistentLifeTime = window.persistent.expirationLifetime;\r\n            }\r\n\r\n            if (persistentIndex !== -1) {\r\n                sectionData = storage.get('persistent');\r\n\r\n                if (typeof sectionData === 'object' &&\r\n                    sectionData['data_id'] + persistentLifeTime >= currentTimestamp\r\n                ) {\r\n                    expiredSections.splice(persistentIndex, 1);\r\n                }\r\n            }\r\n\r\n            return expiredSections;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Override default customer-data.getExpiredSectionNames().\r\n     */\r\n    return function (target) {\r\n        return wrapper.extend(target, mixin);\r\n    };\r\n});\r\n","Magento_ProductAlert/js/form-submitter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (data, element) {\r\n\r\n        $(element).trigger('submit');\r\n    };\r\n});\r\n","Magento_ProductVideo/js/fotorama-add-video-events.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget',\r\n    'catalogGallery',\r\n    'loadPlayer'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    var allowBase = true; //global var is needed because fotorama always fully reloads events in case of fullscreen\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    function parseHref(href) {\r\n        var a = document.createElement('a');\r\n\r\n        a.href = href;\r\n\r\n        return a;\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    function parseURL(href, forceVideo) {\r\n        var id,\r\n            type,\r\n            ampersandPosition,\r\n            vimeoRegex,\r\n            useYoutubeNocookie = false;\r\n\r\n        /**\r\n         * Get youtube ID\r\n         * @param {String} srcid\r\n         * @returns {{}}\r\n         */\r\n        function _getYoutubeId(srcid) {\r\n            if (srcid) {\r\n                ampersandPosition = srcid.indexOf('&');\r\n\r\n                if (ampersandPosition === -1) {\r\n                    return srcid;\r\n                }\r\n\r\n                srcid = srcid.substring(0, ampersandPosition);\r\n            }\r\n\r\n            return srcid;\r\n        }\r\n\r\n        if (typeof href !== 'string') {\r\n            return href;\r\n        }\r\n\r\n        href = parseHref(href);\r\n\r\n        if (href.host.match(/youtube\\.com/) && href.search) {\r\n            id = href.search.split('v=')[1];\r\n\r\n            if (id) {\r\n                id = _getYoutubeId(id);\r\n                type = 'youtube';\r\n            }\r\n        } else if (href.host.match(/youtube\\.com|youtu\\.be|youtube-nocookie.com/)) {\r\n            id = href.pathname.replace(/^\\/(embed\\/|v\\/)?/, '').replace(/\\/.*/, '');\r\n            type = 'youtube';\r\n\r\n            if (href.host.match(/youtube-nocookie.com/)) {\r\n                useYoutubeNocookie = true;\r\n            }\r\n        } else if (href.host.match(/vimeo\\.com/)) {\r\n            type = 'vimeo';\r\n            vimeoRegex = new RegExp(['https?:\\\\/\\\\/(?:www\\\\.|player\\\\.)?vimeo.com\\\\/(?:channels\\\\/(?:\\\\w+\\\\/)',\r\n                '?|groups\\\\/([^\\\\/]*)\\\\/videos\\\\/|album\\\\/(\\\\d+)\\\\/video\\\\/|video\\\\/|)(\\\\d+)(?:$|\\\\/|\\\\?)'\r\n            ].join(''));\r\n            id = href.href.match(vimeoRegex)[3];\r\n        }\r\n\r\n        if ((!id || !type) && forceVideo) {\r\n            id = href.href;\r\n            type = 'custom';\r\n        }\r\n\r\n        return id ? {\r\n            id: id, type: type, s: href.search.replace(/^\\?/, ''), useYoutubeNocookie: useYoutubeNocookie\r\n        } : false;\r\n    }\r\n\r\n    //create AddFotoramaVideoEvents widget\r\n    $.widget('mage.AddFotoramaVideoEvents', {\r\n        options: {\r\n            videoData: '',\r\n            videoSettings: '',\r\n            optionsVideoData: '',\r\n            dataMergeStrategy: 'replace',\r\n            vimeoJSFrameworkLoaded: false\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        onVimeoJSFramework: function () {},\r\n        defaultVideoData: [],\r\n        PV: 'product-video', // [CONST]\r\n        VU: 'video-unplayed',\r\n        PVLOADED: 'fotorama__product-video--loaded', // [CONST]\r\n        PVLOADING: 'fotorama__product-video--loading', // [CONST]\r\n        VID: 'video', // [CONST]\r\n        VI: 'vimeo', // [CONST]\r\n        FTVC: 'fotorama__video-close',\r\n        FTAR: 'fotorama__arr',\r\n        fotoramaSpinner: 'fotorama__spinner',\r\n        fotoramaSpinnerShow: 'fotorama__spinner--show',\r\n        TI: 'video-thumb-icon',\r\n        isFullscreen: false,\r\n        FTCF: '[data-gallery-role=\"fotorama__fullscreen-icon\"]',\r\n        Base: 0, //on check for video is base this setting become true if there is any video with base role\r\n        MobileMaxWidth: 768,\r\n        GP: 'gallery-placeholder', //gallery placeholder class is needed to find and erase <script> tag\r\n        videoData: null,\r\n        videoDataPlaceholder: [{\r\n            id: '',\r\n            isBase: true,\r\n            mediaType: 'image',\r\n            provider: ''\r\n        }],\r\n\r\n        /**\r\n         * Creates widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            $(this.element).data('gallery') ?\r\n                this._onGalleryLoaded() :\r\n                $(this.element).on('gallery:loaded', this._onGalleryLoaded.bind(this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _initialize: function () {\r\n            if (!this.defaultVideoData.length) {\r\n                this.defaultVideoData = this.options.videoData;\r\n            }\r\n\r\n            // If product does not have images, no video data generated,\r\n            // but for configurable product we still need a video data, in case of 'prepend' gallery strategy.\r\n            if (!this.defaultVideoData.length && !this.options.videoData.length) {\r\n                this.defaultVideoData = this.options.videoData = this.videoDataPlaceholder;\r\n            }\r\n\r\n            this.clearEvents();\r\n\r\n            if (this._checkForVideoExist()) {\r\n                this._checkFullscreen();\r\n                this._listenForFullscreen();\r\n                this._checkForVimeo();\r\n                this._isVideoBase();\r\n                this._initFotoramaVideo();\r\n                this._attachFotoramaEvents();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Callback which fired after gallery gets initialized.\r\n         */\r\n        _onGalleryLoaded: function () {\r\n            this.fotoramaItem = $(this.element).find('.fotorama-item');\r\n            this._initialize();\r\n        },\r\n\r\n        /**\r\n         * Clear gallery events to prevent duplicated calls.\r\n         *\r\n         * @private\r\n         */\r\n        clearEvents: function () {\r\n            if (this.fotoramaItem !== undefined) {\r\n                this.fotoramaItem.off(\r\n                    'fotorama:show.' + this.PV +\r\n                    ' fotorama:showend.' + this.PV +\r\n                    ' fotorama:fullscreenenter.' + this.PV +\r\n                    ' fotorama:fullscreenexit.' + this.PV\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} options\r\n         * @private\r\n         */\r\n        _setOptions: function (options) {\r\n            if (options.videoData && options.videoData.length) {\r\n                this.options.videoData = options.videoData;\r\n            }\r\n\r\n            this._loadVideoData(options);\r\n            this._initialize();\r\n        },\r\n\r\n        /**\r\n         * Set video data for configurable product.\r\n         *\r\n         * @param {Object} options\r\n         * @private\r\n         */\r\n        _loadVideoData: function (options) {\r\n            if (options.selectedOption) {\r\n                if (options.dataMergeStrategy === 'prepend') {\r\n                    this.options.videoData = [].concat(\r\n                        this.options.optionsVideoData[options.selectedOption],\r\n                        this.defaultVideoData\r\n                    );\r\n                } else {\r\n                    this.options.videoData = this.options.optionsVideoData[options.selectedOption];\r\n                }\r\n            } else {\r\n                this.options.videoData = this.defaultVideoData;\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _checkFullscreen: function () {\r\n            if (this.fotoramaItem.data('fotorama').fullScreen || false) {\r\n                this.isFullscreen = true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _listenForFullscreen: function () {\r\n            this.fotoramaItem.on('fotorama:fullscreenenter.' + this.PV, $.proxy(function () {\r\n                this.isFullscreen = true;\r\n            }, this));\r\n\r\n            this.fotoramaItem.on('fotorama:fullscreenexit.' + this.PV, $.proxy(function () {\r\n                this.isFullscreen = false;\r\n                this._hideVideoArrows();\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} inputData\r\n         * @param {bool} isJSON\r\n         * @returns {{}}\r\n         * @private\r\n         */\r\n        _createVideoData: function (inputData, isJSON) {\r\n            var videoData = [],\r\n                dataUrl,\r\n                tmpVideoData,\r\n                tmpInputData,\r\n                i;\r\n\r\n            if (isJSON) {\r\n                inputData = $.parseJSON(inputData);\r\n            }\r\n\r\n            for (i = 0; i < inputData.length; i++) {\r\n                tmpInputData = inputData[i];\r\n                dataUrl = '';\r\n                tmpVideoData = {\r\n                    mediaType: '',\r\n                    isBase: '',\r\n                    id: '',\r\n                    provider: ''\r\n                };\r\n                tmpVideoData.mediaType = this.VID;\r\n\r\n                if (tmpInputData.mediaType !== 'external-video') {\r\n                    tmpVideoData.mediaType = tmpInputData.mediaType;\r\n                }\r\n\r\n                tmpVideoData.isBase = tmpInputData.isBase;\r\n\r\n                if (tmpInputData.videoUrl && tmpInputData.videoUrl !== null) {\r\n                    dataUrl = tmpInputData.videoUrl;\r\n                    dataUrl = parseURL(dataUrl);\r\n                    tmpVideoData.id = dataUrl.id;\r\n                    tmpVideoData.provider = dataUrl.type;\r\n                    tmpVideoData.videoUrl = tmpInputData.videoUrl;\r\n                    tmpVideoData.useYoutubeNocookie = dataUrl.useYoutubeNocookie;\r\n                }\r\n\r\n                videoData.push(tmpVideoData);\r\n            }\r\n\r\n            return videoData;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} fotorama\r\n         * @param {bool} isBase\r\n         * @private\r\n         */\r\n        _createCloseVideo: function (fotorama, isBase) {\r\n            var closeVideo;\r\n\r\n            this.fotoramaItem.find('.' + this.FTVC).remove();\r\n            this.fotoramaItem.append('<div class=\"' + this.FTVC + '\"></div>');\r\n            this.fotoramaItem.css('position', 'relative');\r\n            closeVideo = this.fotoramaItem.find('.' + this.FTVC);\r\n            this._closeVideoSetEvents(closeVideo, fotorama);\r\n\r\n            if (\r\n                isBase &&\r\n                this.options.videoData[fotorama.activeIndex].isBase &&\r\n                $(window).width() > this.MobileMaxWidth) {\r\n                this._showCloseVideo();\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _hideCloseVideo: function () {\r\n            this.fotoramaItem\r\n                .find('.' + this.FTVC)\r\n                .removeClass('fotorama-show-control');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _showCloseVideo: function () {\r\n            this.fotoramaItem\r\n                .find('.' + this.FTVC)\r\n                .addClass('fotorama-show-control');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {jQuery} $closeVideo\r\n         * @param {jQuery} fotorama\r\n         * @private\r\n         */\r\n        _closeVideoSetEvents: function ($closeVideo, fotorama) {\r\n            $closeVideo.on('click', $.proxy(function () {\r\n                this._unloadVideoPlayer(fotorama.activeFrame.$stageFrame.parent(), fotorama, true);\r\n                this._hideCloseVideo();\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {Boolean}\r\n         * @private\r\n         */\r\n        _checkForVideoExist: function () {\r\n            var key, result, checker, videoSettings;\r\n\r\n            if (!this.options.videoData) {\r\n                return false;\r\n            }\r\n\r\n            if (!this.options.videoSettings) {\r\n                return false;\r\n            }\r\n\r\n            result = this._createVideoData(this.options.videoData, false);\r\n            checker = false;\r\n            videoSettings = this.options.videoSettings[0];\r\n            videoSettings.playIfBase = parseInt(videoSettings.playIfBase, 10);\r\n            videoSettings.showRelated = parseInt(videoSettings.showRelated, 10);\r\n            videoSettings.videoAutoRestart = parseInt(videoSettings.videoAutoRestart, 10);\r\n\r\n            for (key in result) {\r\n                if (result[key].mediaType === this.VID) {\r\n                    checker = true;\r\n                }\r\n            }\r\n\r\n            if (checker) {\r\n                this.options.videoData = result;\r\n            }\r\n\r\n            return checker;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _checkForVimeo: function () {\r\n            var allVideoData = this.options.videoData,\r\n                videoItem;\r\n\r\n            if (window.Froogaloop) { // prevent duplicated initialization\r\n                return;\r\n            }\r\n\r\n            for (videoItem in allVideoData) {\r\n                if (allVideoData[videoItem].provider === this.VI) {\r\n                    this._loadVimeoJSFramework();\r\n\r\n                    return;\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _isVideoBase: function () {\r\n            var allVideoData = this.options.videoData,\r\n                videoItem,\r\n                allVideoDataKeys,\r\n                key,\r\n                i;\r\n\r\n            allVideoDataKeys = Object.keys(allVideoData);\r\n\r\n            for (i = 0; i < allVideoDataKeys.length; i++) {\r\n                key = allVideoDataKeys[i];\r\n                videoItem = allVideoData[key];\r\n\r\n                if (\r\n                    videoItem.mediaType === this.VID && videoItem.isBase &&\r\n                    this.options.videoSettings[0].playIfBase && allowBase\r\n                ) {\r\n                    this.Base = true;\r\n                    allowBase = false;\r\n                }\r\n            }\r\n\r\n            if (!this.isFullscreen) {\r\n                this._createCloseVideo(this.fotoramaItem.data('fotorama'), this.Base);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _loadVimeoJSFramework: function () {\r\n            var element = document.createElement('script'),\r\n                scriptTag = document.getElementsByTagName('script')[0];\r\n\r\n            element.async = true;\r\n            element.src = 'https://f.vimeocdn.com/js/froogaloop2.min.js';\r\n\r\n            /**\r\n             * Vimeo js framework on load callback.\r\n             */\r\n            element.onload = function () {\r\n                this.onVimeoJSFramework();\r\n                this.vimeoJSFrameworkLoaded = true;\r\n            }.bind(this);\r\n            scriptTag.parentNode.insertBefore(element, scriptTag);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Event} e\r\n         * @private\r\n         */\r\n        _initFotoramaVideo: function (e) {\r\n            var fotorama = this.fotoramaItem.data('fotorama'),\r\n                thumbsParent,\r\n                thumbs,\r\n                t;\r\n\r\n            if (!fotorama.activeFrame.$navThumbFrame) {\r\n                this.fotoramaItem.on('fotorama:showend.' + this.PV, $.proxy(function (evt, fotoramaData) {\r\n                    $(fotoramaData.activeFrame.$stageFrame).removeAttr('href');\r\n                }, this));\r\n\r\n                this._startPrepareForPlayer(e, fotorama);\r\n\r\n                return null;\r\n            }\r\n\r\n            fotorama.data.map($.proxy(this._setItemType, this));\r\n            thumbsParent = fotorama.activeFrame.$navThumbFrame.parent();\r\n            thumbs = thumbsParent.find('.fotorama__nav__frame:visible');\r\n\r\n            for (t = 0; t < thumbs.length; t++) {\r\n                this._setThumbsIcon(thumbs.eq(t), t);\r\n                this._checkForVideo(e, fotorama, t + 1);\r\n            }\r\n\r\n            this.fotoramaItem.on('fotorama:showend.' + this.PV, $.proxy(function (evt, fotoramaData) {\r\n                $(fotoramaData.activeFrame.$stageFrame).removeAttr('href');\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} elem\r\n         * @param {Number} i\r\n         * @private\r\n         */\r\n        _setThumbsIcon: function (elem, i) {\r\n            var fotorama = this.fotoramaItem.data('fotorama');\r\n\r\n            if (fotorama.options.nav === 'dots' && elem.hasClass(this.TI)) {\r\n                elem.removeClass(this.TI);\r\n            }\r\n\r\n            if (this.options.videoData[i].mediaType === this.VID &&\r\n                fotorama.data[i].type ===  this.VID &&\r\n                fotorama.options.nav === 'thumbs') {\r\n                elem.addClass(this.TI);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Temporary solution with adding types for configurable product items\r\n         *\r\n         * @param {Object} item\r\n         * @param {Number} i\r\n         * @private\r\n         */\r\n        _setItemType: function (item, i) {\r\n            !item.type && (item.type = this.options.videoData[i].mediaType);\r\n        },\r\n\r\n        /**\r\n         * Attach\r\n         *\r\n         * @private\r\n         */\r\n        _attachFotoramaEvents: function () {\r\n            this.fotoramaItem.on('fotorama:showend.' + this.PV, $.proxy(function (e, fotorama) {\r\n                this._startPrepareForPlayer(e, fotorama);\r\n            }, this));\r\n\r\n            this.fotoramaItem.on('fotorama:show.' + this.PV, $.proxy(function (e, fotorama) {\r\n                this._unloadVideoPlayer(fotorama.activeFrame.$stageFrame.parent(), fotorama, true);\r\n            }, this));\r\n\r\n            this.fotoramaItem.on('fotorama:fullscreenexit.' + this.PV, $.proxy(function (e, fotorama) {\r\n                fotorama.activeFrame.$stageFrame.find('.' + this.PV).remove();\r\n                this._startPrepareForPlayer(e, fotorama);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Start prepare for player\r\n         *\r\n         * @param {Event} e\r\n         * @param {jQuery} fotorama\r\n         * @private\r\n         */\r\n        _startPrepareForPlayer: function (e, fotorama) {\r\n            this._unloadVideoPlayer(fotorama.activeFrame.$stageFrame.parent(), fotorama, false);\r\n            this._checkForVideo(e, fotorama, fotorama.activeFrame.i);\r\n            this._checkForVideo(e, fotorama, fotorama.activeFrame.i - 1);\r\n            this._checkForVideo(e, fotorama, fotorama.activeFrame.i + 1);\r\n        },\r\n\r\n        /**\r\n         * Check for video\r\n         *\r\n         * @param {Event} e\r\n         * @param {jQuery} fotorama\r\n         * @param {Number} number\r\n         * @private\r\n         */\r\n        _checkForVideo: function (e, fotorama, number) {\r\n            var videoData = this.options.videoData[number - 1],\r\n                $image = fotorama.data[number - 1];\r\n\r\n            if ($image) {\r\n                !$image.type && this._setItemType($image, number - 1);\r\n\r\n                if ($image.type === 'image') {\r\n                    $image.$navThumbFrame && $image.$navThumbFrame.removeClass(this.TI);\r\n                    this._hideCloseVideo();\r\n\r\n                    return;\r\n                } else if ($image.$navThumbFrame && $image.type === 'video') {\r\n                    !$image.$navThumbFrame.hasClass(this.TI) && $image.$navThumbFrame.addClass(this.TI);\r\n                }\r\n\r\n                $image = $image.$stageFrame;\r\n            }\r\n\r\n            if ($image && videoData && videoData.mediaType === this.VID) {\r\n                $(fotorama.activeFrame.$stageFrame).removeAttr('href');\r\n                this._prepareForVideoContainer($image, videoData, fotorama, number);\r\n            }\r\n\r\n            if (this.isFullscreen && this.fotoramaItem.data('fotorama').activeFrame.i === number) {\r\n                this.fotoramaItem.data('fotorama').activeFrame.$stageFrame[0].trigger('click');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Prepare for video container\r\n         *\r\n         * @param {jQuery} $image\r\n         * @param {Object} videoData\r\n         * @param {Object} fotorama\r\n         * @param {Number} number\r\n         * @private\r\n         */\r\n        _prepareForVideoContainer: function ($image, videoData, fotorama, number) {\r\n            $image.addClass('fotorama-video-container').addClass(this.VU);\r\n            this._createVideoContainer(videoData, $image);\r\n            this._setVideoEvent($image, this.PV, fotorama, number);\r\n        },\r\n\r\n        /**\r\n         * Create video container\r\n         *\r\n         * @param {Object} videoData\r\n         * @param {jQuery} $image\r\n         * @private\r\n         */\r\n        _createVideoContainer: function (videoData, $image) {\r\n            var videoSettings;\r\n\r\n            videoSettings = this.options.videoSettings[0];\r\n            $image.find('.' + this.PV).remove();\r\n            $image.append(\r\n                '<div class=\"' +\r\n                this.PV +\r\n                '\" data-related=\"' +\r\n                videoSettings.showRelated +\r\n                '\" data-loop=\"' +\r\n                videoSettings.videoAutoRestart +\r\n                '\" data-type=\"' +\r\n                videoData.provider +\r\n                '\" data-code=\"' +\r\n                videoData.id +\r\n                '\"  data-youtubenocookie=\"' +\r\n                videoData.useYoutubeNocookie +\r\n                '\" data-width=\"100%\" data-height=\"100%\"></div>'\r\n            );\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} $image\r\n         * @param {Object} PV\r\n         * @param {Object} fotorama\r\n         * @param {Number} number\r\n         * @private\r\n         */\r\n        _setVideoEvent: function ($image, PV, fotorama, number) {\r\n            $image.find('.magnify-lens').remove();\r\n            $image\r\n                .off('click tap', $.proxy(this._clickHandler, this))\r\n                .on('click tap', $.proxy(this._clickHandler, this));\r\n            this._handleBaseVideo(fotorama, number); //check for video is it base and handle it if it's base\r\n        },\r\n\r\n        /**\r\n         * Hides preview arrows above video player.\r\n         * @private\r\n         */\r\n        _hideVideoArrows: function () {\r\n            var arrows = $('.' + this.FTAR);\r\n\r\n            arrows.removeClass('fotorama__arr--shown');\r\n            arrows.removeClass('fotorama__arr--hidden');\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _showLoader: function () {\r\n            var spinner = this.fotoramaItem.find('.' + this.fotoramaSpinner);\r\n\r\n            spinner.addClass(this.fotoramaSpinnerShow);\r\n            this.fotoramaItem.data('fotorama').activeFrame.$stageFrame.addClass(this.PVLOADING);\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _hideLoader: function () {\r\n            var spinner = this.fotoramaItem.find('.' + this.fotoramaSpinner);\r\n\r\n            spinner.removeClass(this.fotoramaSpinnerShow);\r\n            this.fotoramaItem.data('fotorama').activeFrame.$stageFrame.removeClass(this.PVLOADING);\r\n        },\r\n\r\n        /**\r\n         * @param {Event} event\r\n         * @private\r\n         */\r\n        _clickHandler: function (event) {\r\n            var type;\r\n\r\n            if ($(event.target).hasClass(this.VU) && $(event.target).find('iframe').length === 0) {\r\n                $(event.target).removeClass(this.VU);\r\n                type = $(event.target).find('.' + this.PV).data('type');\r\n\r\n                if (this.vimeoJSFrameworkLoaded && type === this.VI) {\r\n                    $(event.target).find('.' + this.PV).productVideoLoader();\r\n                } else if (type === this.VI) {\r\n                    this._showLoader();\r\n                    this.onVimeoJSFramework = function () {\r\n                        $(event.target).find('.' + this.PV).productVideoLoader();\r\n                        this._hideLoader();\r\n                    }.bind(this);\r\n                } else {\r\n                    $(event.target).find('.' + this.PV).productVideoLoader();\r\n                }\r\n\r\n                $('.' + this.FTAR).addClass(this.isFullscreen ? 'fotorama__arr--shown' : 'fotorama__arr--hidden');\r\n                $('.' + this.FTVC).addClass('fotorama-show-control');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handle base video\r\n         * @param {Object} fotorama\r\n         * @param {Number} srcNumber\r\n         * @private\r\n         */\r\n        _handleBaseVideo: function (fotorama, srcNumber) {\r\n            var waitForFroogaloop,\r\n                videoData = this.options.videoData,\r\n                activeIndex = fotorama.activeIndex,\r\n                number = parseInt(srcNumber, 10),\r\n                activeIndexIsBase = videoData[activeIndex];\r\n\r\n            if (!this.Base) {\r\n                return;\r\n            }\r\n\r\n            if (activeIndexIsBase && number === 1 && $(window).width() > this.MobileMaxWidth) {\r\n                if (this.options.videoData[fotorama.activeIndex].provider === this.VI) {\r\n                    waitForFroogaloop = setInterval($.proxy(function () {\r\n                        if (window.Froogaloop) {\r\n                            clearInterval(waitForFroogaloop);\r\n                            fotorama.requestFullScreen();\r\n                            this.fotoramaItem.data('fotorama').activeFrame.$stageFrame[0].trigger('click');\r\n                            this.Base = false;\r\n                        }\r\n                    }, this), 50);\r\n                } else { //if not a vimeo - play it immediately with a little lag in case for fotorama fullscreen\r\n                    setTimeout($.proxy(function () {\r\n                        fotorama.requestFullScreen();\r\n                        this.fotoramaItem.data('fotorama').activeFrame.$stageFrame[0].trigger('click');\r\n                        this.Base = false;\r\n                    }, this), 50);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Destroy video player\r\n         * @param {jQuery} $wrapper\r\n         * @param {jQuery} current\r\n         * @param {bool} close\r\n         * @private\r\n         */\r\n        _unloadVideoPlayer: function ($wrapper, current, close) {\r\n            var self = this;\r\n\r\n            if (!$wrapper) {\r\n                return;\r\n            }\r\n\r\n            $wrapper.find('.' + this.PVLOADED).removeClass(this.PVLOADED);\r\n            this._hideLoader();\r\n\r\n            $wrapper.find('.' + this.PV).each(function () {\r\n                var $item = $(this).parent(),\r\n                    cloneVideoDiv,\r\n                    iframeElement = $(this).find('iframe'),\r\n                    currentIndex,\r\n                    itemIndex;\r\n\r\n                if (iframeElement.length === 0) {\r\n                    return;\r\n                }\r\n\r\n                currentIndex = current.activeFrame.$stageFrame.index();\r\n                itemIndex = $item.index();\r\n\r\n                if (currentIndex === itemIndex && !close) {\r\n                    return;\r\n                }\r\n\r\n                if (currentIndex !== itemIndex && close) {\r\n                    return;\r\n                }\r\n\r\n                iframeElement.remove();\r\n                cloneVideoDiv = $(this).clone();\r\n                $(this).remove();\r\n                $item.append(cloneVideoDiv);\r\n                $item.addClass(self.VU);\r\n\r\n                self._hideCloseVideo();\r\n                self._hideVideoArrows();\r\n\r\n                if (self.isFullscreen && !self.fotoramaItem.data('fotorama').options.fullscreen.arrows) {\r\n                    if ($('.' + self.FTAR + '--prev').is(':focus') || $('.' + self.FTAR + '--next').is(':focus')) {\r\n                        $(self.FTCF).trigger('focus');\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return $.mage.AddFotoramaVideoEvents;\r\n});\r\n","Magento_ProductVideo/js/load-player.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n @version 0.0.1\r\n @requires jQuery & jQuery UI\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    var videoRegister = {\r\n        _register: {},\r\n\r\n        /**\r\n         * Checks, if api is already registered\r\n         *\r\n         * @param {String} api\r\n         * @returns {bool}\r\n         */\r\n        isRegistered: function (api) {\r\n            return this._register[api] !== undefined;\r\n        },\r\n\r\n        /**\r\n         * Checks, if api is loaded\r\n         *\r\n         * @param {String} api\r\n         * @returns {bool}\r\n         */\r\n        isLoaded: function (api) {\r\n            return this._register[api] !== undefined && this._register[api] === true;\r\n        },\r\n\r\n        /**\r\n         * Register new video api\r\n         * @param {String} api\r\n         * @param {bool} loaded\r\n         */\r\n        register: function (api, loaded) {\r\n            loaded = loaded || false;\r\n            this._register[api] = loaded;\r\n        }\r\n    };\r\n\r\n    $.widget('mage.productVideoLoader', {\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            switch (this.element.data('type')) {\r\n                case 'youtube':\r\n                    this.element.videoYoutube();\r\n                    this._player = this.element.data('mageVideoYoutube');\r\n                    break;\r\n\r\n                case 'vimeo':\r\n                    this.element.videoVimeo();\r\n                    this._player = this.element.data('mageVideoVimeo');\r\n                    break;\r\n                default:\r\n                    throw {\r\n                        name: 'Video Error',\r\n                        message: 'Unknown video type',\r\n\r\n                        /**\r\n                         * join name with message\r\n                         */\r\n                        toString: function () {\r\n                            return this.name + ': ' + this.message;\r\n                        }\r\n                    };\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes variables\r\n         * @private\r\n         */\r\n        _initialize: function () {\r\n            this._params = this.element.data('params') || {};\r\n            this._code = this.element.data('code');\r\n            this._width = this.element.data('width');\r\n            this._height = this.element.data('height');\r\n            this._autoplay = !!this.element.data('autoplay');\r\n            this._playing = this._autoplay || false;\r\n            this._loop = this.element.data('loop');\r\n            this._rel = this.element.data('related');\r\n            this.useYoutubeNocookie = this.element.data('youtubenocookie') || false;\r\n\r\n            this._responsive = this.element.data('responsive') !== false;\r\n\r\n            if (this._responsive === true) {\r\n                this.element.addClass('responsive');\r\n            }\r\n\r\n            this._calculateRatio();\r\n        },\r\n\r\n        /**\r\n         * Abstract play command\r\n         */\r\n        play: function () {\r\n            this._player.play();\r\n        },\r\n\r\n        /**\r\n         * Abstract pause command\r\n         */\r\n        pause: function () {\r\n            this._player.pause();\r\n        },\r\n\r\n        /**\r\n         * Abstract stop command\r\n         */\r\n        stop: function () {\r\n            this._player.stop();\r\n        },\r\n\r\n        /**\r\n         * Abstract playing command\r\n         */\r\n        playing: function () {\r\n            return this._player.playing();\r\n        },\r\n\r\n        /**\r\n         * Destroyer\r\n         */\r\n        destroy: function () {\r\n            this._player.destroy();\r\n        },\r\n\r\n        /**\r\n         * Calculates ratio for responsive videos\r\n         * @private\r\n         */\r\n        _calculateRatio: function () {\r\n            if (!this._responsive) {\r\n                return;\r\n            }\r\n            this.element.css('paddingBottom', this._height / this._width * 100 + '%');\r\n        }\r\n    });\r\n\r\n    $.widget('mage.videoYoutube', $.mage.productVideoLoader, {\r\n\r\n        /**\r\n         * Initialization of the Youtube widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var self = this;\r\n\r\n            this._initialize();\r\n\r\n            this.element.append('<div></div>');\r\n\r\n            this._on(window, {\r\n\r\n                /**\r\n                 * Handle event\r\n                 */\r\n                'youtubeapiready': function () {\r\n                    var host = 'https://www.youtube.com';\r\n\r\n                    if (self.useYoutubeNocookie) {\r\n                        host = 'https://www.youtube-nocookie.com';\r\n                    }\r\n\r\n                    if (self._player !== undefined) {\r\n                        return;\r\n                    }\r\n                    self._autoplay = true;\r\n\r\n                    if (self._autoplay) {\r\n                        self._params.autoplay = 1;\r\n                    }\r\n\r\n                    if (!self._rel) {\r\n                        self._params.rel = 0;\r\n                    }\r\n\r\n                    self._player = new window.YT.Player(self.element.children(':first')[0], {\r\n                        height: self._height,\r\n                        width: self._width,\r\n                        videoId: self._code,\r\n                        playerVars: self._params,\r\n                        host: host,\r\n                        events: {\r\n\r\n                            /**\r\n                             * Get duration\r\n                             */\r\n                            'onReady': function onPlayerReady() {\r\n                                self._player.getDuration();\r\n                                self.element.closest('.fotorama__stage__frame')\r\n                                    .addClass('fotorama__product-video--loaded');\r\n                            },\r\n\r\n                            /**\r\n                             * Event observer\r\n                             */\r\n                            onStateChange: function (data) {\r\n                                switch (window.parseInt(data.data, 10)) {\r\n                                    case 1:\r\n                                        self._playing = true;\r\n                                        break;\r\n                                    default:\r\n                                        self._playing = false;\r\n                                        break;\r\n                                }\r\n\r\n                                self._trigger('statechange', {}, data);\r\n\r\n                                if (data.data === window.YT.PlayerState.ENDED && self._loop) {\r\n                                    self._player.playVideo();\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                    });\r\n                }\r\n            });\r\n\r\n            this._loadApi();\r\n        },\r\n\r\n        /**\r\n         * Loads Youtube API and triggers event, when loaded\r\n         * @private\r\n         */\r\n        _loadApi: function () {\r\n            var element,\r\n                scriptTag;\r\n\r\n            if (videoRegister.isRegistered('youtube')) {\r\n                if (videoRegister.isLoaded('youtube')) {\r\n                    $(window).trigger('youtubeapiready');\r\n                }\r\n\r\n                return;\r\n            }\r\n            videoRegister.register('youtube');\r\n\r\n            element = document.createElement('script');\r\n            scriptTag = document.getElementsByTagName('script')[0];\r\n\r\n            element.async = true;\r\n            element.src = 'https://www.youtube.com/iframe_api';\r\n            scriptTag.parentNode.insertBefore(element, scriptTag);\r\n\r\n            /**\r\n             * Event observe and handle\r\n             */\r\n            window.onYouTubeIframeAPIReady = function () {\r\n                $(window).trigger('youtubeapiready');\r\n                videoRegister.register('youtube', true);\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Play command for Youtube\r\n         */\r\n        play: function () {\r\n            this._player.playVideo();\r\n            this._playing = true;\r\n        },\r\n\r\n        /**\r\n         * Pause command for Youtube\r\n         */\r\n        pause: function () {\r\n            this._player.pauseVideo();\r\n            this._playing = false;\r\n        },\r\n\r\n        /**\r\n         * Stop command for Youtube\r\n         */\r\n        stop: function () {\r\n            this._player.stopVideo();\r\n            this._playing = false;\r\n        },\r\n\r\n        /**\r\n         * Playing command for Youtube\r\n         */\r\n        playing: function () {\r\n            return this._playing;\r\n        },\r\n\r\n        /**\r\n         * stops and unloads player\r\n         * @private\r\n         */\r\n        destroy: function () {\r\n            this.stop();\r\n            this._player.destroy();\r\n        }\r\n    });\r\n\r\n    $.widget('mage.videoVimeo', $.mage.productVideoLoader, {\r\n\r\n        /**\r\n         * Initialize the Vimeo widget\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var timestamp,\r\n                additionalParams = '',\r\n                src;\r\n\r\n            this._initialize();\r\n            timestamp = new Date().getTime();\r\n            this._autoplay = true;\r\n\r\n            if (this._autoplay) {\r\n                additionalParams += '&autoplay=1';\r\n            }\r\n\r\n            if (this._loop) {\r\n                additionalParams += '&loop=1';\r\n            }\r\n            src = 'https://player.vimeo.com/video/' +\r\n                this._code + '?api=1&player_id=vimeo' +\r\n                this._code +\r\n                timestamp +\r\n                additionalParams;\r\n            this.element.append(\r\n                $('<iframe></iframe>')\r\n                    .attr('frameborder', 0)\r\n                    .attr('id', 'vimeo' + this._code + timestamp)\r\n                    .attr('width', this._width)\r\n                    .attr('height', this._height)\r\n                    .attr('src', src)\r\n                    .attr('webkitallowfullscreen', '')\r\n                    .attr('mozallowfullscreen', '')\r\n                    .attr('allowfullscreen', '')\r\n                    .attr('referrerPolicy', 'origin')\r\n                    .attr('allow', 'autoplay')\r\n            );\r\n            this._player = window.$f(this.element.children(':first')[0]);\r\n\r\n            // Froogaloop throws error without a registered ready event\r\n            this._player.addEvent('ready', function (id) {\r\n                $('#' + id).closest('.fotorama__stage__frame').addClass('fotorama__product-video--loaded');\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Play command for Vimeo\r\n         */\r\n        play: function () {\r\n            this._player.api('play');\r\n            this._playing = true;\r\n        },\r\n\r\n        /**\r\n         * Pause command for Vimeo\r\n         */\r\n        pause: function () {\r\n            this._player.api('pause');\r\n            this._playing = false;\r\n        },\r\n\r\n        /**\r\n         * Stop command for Vimeo\r\n         */\r\n        stop: function () {\r\n            this._player.api('unload');\r\n            this._playing = false;\r\n        },\r\n\r\n        /**\r\n         * Playing command for Vimeo\r\n         */\r\n        playing: function () {\r\n            return this._playing;\r\n        }\r\n    });\r\n});\r\n","Magento_Reports/js/recently-viewed.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.recentlyViewedProducts', {\r\n        options: {\r\n            localStorageKey: 'recently-viewed-products',\r\n            productBlock: '#widget_viewed_item',\r\n            viewedContainer: 'ol'\r\n        },\r\n\r\n        /**\r\n         * Bind events to the appropriate handlers.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var productHtml = $(this.options.productBlock).html(),\r\n                productSku = $(this.options.productBlock).data('sku'),\r\n                products = JSON.parse(window.localStorage.getItem(this.options.localStorageKey)),\r\n                productsLength, maximum, showed, index;\r\n\r\n            if (products) {\r\n                productsLength = products.sku.length;\r\n                maximum = $(this.element).data('count');\r\n                showed = 0;\r\n\r\n                for (index = 0; index <= productsLength; index++) {\r\n                    if (products.sku[index] == productSku || showed >= maximum) { //eslint-disable-line\r\n                        products.sku.splice(index, 1);\r\n                        products.html.splice(index, 1);\r\n                    } else {\r\n                        $(this.element).find(this.options.viewedContainer).append(products.html[index]);\r\n                        $(this.element).show();\r\n                        showed++;\r\n                    }\r\n                }\r\n                $(this.element).find(this.options.productBlock).show();\r\n            } else {\r\n                products = {};\r\n                products.sku = [];\r\n                products.html = [];\r\n            }\r\n            products.sku.unshift(productSku);\r\n            products.html.unshift(productHtml);\r\n            window.localStorage.setItem(this.options.localStorageKey, JSON.stringify(products));\r\n        }\r\n    });\r\n\r\n    return $.mage.recentlyViewedProducts;\r\n});\r\n","Magento_Review/js/error-placement.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/mage'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).mage('validation', {\r\n            /** @inheritdoc */\r\n            errorPlacement: function (error, el) {\r\n\r\n                if (el.parents('#product-review-table').length) {\r\n                    $('#product-review-table').siblings(this.errorElement + '.' + this.errorClass).remove();\r\n                    $('#product-review-table').after(error);\r\n                } else {\r\n                    el.after(error);\r\n                }\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_Review/js/process-reviews.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'tabs',\r\n    'collapsible'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @param {String} url\r\n     * @param {*} fromPages\r\n     */\r\n    function processReviews(url, fromPages) {\r\n        $.ajax({\r\n            url: url,\r\n            cache: true,\r\n            dataType: 'html',\r\n            showLoader: false,\r\n            loaderContext: $('.product.data.items')\r\n        }).done(function (data) {\r\n            $('#product-review-container').html(data).trigger('contentUpdated');\r\n            $('[data-role=\"product-review\"] .pages a').each(function (index, element) {\r\n                $(element).on('click', function (event) { //eslint-disable-line max-nested-callbacks\r\n                    processReviews($(element).attr('href'), true);\r\n                    event.preventDefault();\r\n                });\r\n            });\r\n        }).always(function () {\r\n            if (fromPages == true) { //eslint-disable-line eqeqeq\r\n                $('html, body').animate({\r\n                    scrollTop: $('#reviews').offset().top - 50\r\n                }, 300);\r\n            }\r\n        });\r\n    }\r\n\r\n    return function (config) {\r\n        var reviewTab = $(config.reviewsTabSelector),\r\n            requiredReviewTabRole = 'tab';\r\n\r\n        if (reviewTab.attr('role') === requiredReviewTabRole && reviewTab.hasClass('active')) {\r\n            processReviews(config.productReviewUrl, location.hash === '#reviews');\r\n        } else {\r\n            reviewTab.one('beforeOpen', function () {\r\n                processReviews(config.productReviewUrl);\r\n            });\r\n        }\r\n\r\n        $(function () {\r\n            $('.product-info-main .reviews-actions a').on('click', function (event) {\r\n                var anchor, addReviewBlock;\r\n\r\n                event.preventDefault();\r\n                anchor = $(this).attr('href').replace(/^.*?(#|$)/, '');\r\n                addReviewBlock = $('#' + anchor);\r\n\r\n                if (addReviewBlock.length) {\r\n                    $('.product.data.items [data-role=\"content\"]').each(function (index) { //eslint-disable-line\r\n                        if (this.id == 'reviews') { //eslint-disable-line eqeqeq\r\n                            $('.product.data.items').tabs('activate', index);\r\n                        }\r\n                    });\r\n                    $('html, body').animate({\r\n                        scrollTop: addReviewBlock.offset().top - 50\r\n                    }, 300);\r\n                }\r\n\r\n            });\r\n        });\r\n    };\r\n});\r\n","Magento_Review/js/submit-review.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).on('submit', function () {\r\n            if ($(this).valid()) {\r\n                $(this).find('.submit').attr('disabled', true);\r\n            }\r\n        });\r\n    };\r\n});\r\n","Magento_Review/js/validate-review.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery/validate',\r\n    'mage/translate'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.validator.addMethod(\r\n        'rating-required', function (value) {\r\n            return value !== undefined;\r\n        }, $.mage.__('Please select one of each of the ratings above.'));\r\n});\r\n","Magento_Review/js/view/review.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'Magento_Customer/js/view/customer'\r\n], function (Component, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.review = customerData.get('review').extend({\r\n                disposableCustomerData: 'review'\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        nickname: function () {\r\n            return this.review().nickname || customerData.get('customer')().firstname;\r\n        }\r\n    });\r\n});\r\n","Magento_Sales/js/gift-message.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.giftMessage', {\r\n        options: {\r\n            rowPrefix: '#order-item-row-', // Selector prefix for item's row in the table.\r\n            linkPrefix: '#order-item-gift-message-link-', // Selector prefix for the 'Gift Message' link.\r\n            duration: 100, // Toggle duration.\r\n            expandedClass: 'expanded', // Class added/removed to/from the 'Gift Message' link.\r\n            expandedContentClass: 'expanded-content', // Class added/removed to/from the 'Gift Message' content.\r\n            lastClass: 'last' // Class added/removed to/from the last item's row in the products table.\r\n        },\r\n\r\n        /**\r\n         * Bind a click handler on the widget's element to toggle the gift message.\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.element.on('click', $.proxy(this._toggleGiftMessage, this));\r\n        },\r\n\r\n        /**\r\n         * Toggle the display of the item's corresponding gift message.\r\n         * @private\r\n         * @param {jQuery.Event} event - Click event.\r\n         */\r\n        _toggleGiftMessage: function (event) {\r\n            var element = $(event.target), // Click target. The 'Gift Message' link or 'Close' button.\r\n                options = this.options, // Cached widget options.\r\n                itemId = element.data('item-id'), // The individual item's numeric id.\r\n                link = $(options.linkPrefix + itemId), // The 'Gift Message' expandable link.\r\n                row = $(options.rowPrefix + itemId), // The item's row in the products table.\r\n                region = $('#' + element.attr('aria-controls')); // The gift message container region.\r\n\r\n            region.toggleClass(options.expandedContentClass, options.duration, function () {\r\n                if (region.attr('aria-expanded') === 'true') {\r\n                    region.attr('aria-expanded', 'false');\r\n\r\n                    if (region.hasClass(options.lastClass)) {\r\n                        row.addClass(options.lastClass);\r\n                    }\r\n                } else {\r\n                    region.attr('aria-expanded', 'true');\r\n\r\n                    if (region.hasClass(options.lastClass)) {\r\n                        row.removeClass(options.lastClass);\r\n                    }\r\n                }\r\n                link.toggleClass(options.expandedClass);\r\n            });\r\n            event.preventDefault(); // Prevent event propagation and avoid going to the link's href.\r\n        }\r\n    });\r\n\r\n    return $.mage.giftMessage;\r\n});\r\n","Magento_Sales/js/orders-returns.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'jquery-ui-modules/widget'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    $.widget('mage.ordersReturns', {\r\n        options: {\r\n            zipCode: '#oar-zip', // Search by zip code.\r\n            emailAddress: '#oar-email', // Search by email address.\r\n            searchType: '#quick-search-type-id' // Search element used for choosing between the two.\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            $(this.options.searchType).on('change', $.proxy(this._showIdentifyBlock, this)).trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Show either the search by zip code option or the search by email address option.\r\n         * @private\r\n         * @param {jQuery.Event} e - Change event. Event target value is either 'zip' or 'email'.\r\n         */\r\n        _showIdentifyBlock: function (e) {\r\n            var value = $(e.target).val();\r\n\r\n            $(this.options.zipCode).toggle(value === 'zip');\r\n            $(this.options.emailAddress).toggle(value === 'email');\r\n        }\r\n    });\r\n\r\n    return $.mage.ordersReturns;\r\n});\r\n","Magento_Sales/js/view/last-ordered-items.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'underscore'\r\n], function (Component, customerData, _) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            isShowAddToCart: false\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n            this.lastOrderedItems = customerData.get('last-ordered-items');\r\n            this.lastOrderedItems.subscribe(this.checkSalableItems.bind(this));\r\n            this.checkSalableItems();\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('isShowAddToCart');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Check if items is_saleable and change add to cart button visibility.\r\n         */\r\n        checkSalableItems: function () {\r\n            var isShowAddToCart = _.some(this.lastOrderedItems().items, {\r\n                'is_saleable': true\r\n            });\r\n\r\n            this.isShowAddToCart(isShowAddToCart);\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/action/cancel-coupon.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Customer store credit(balance) application\r\n */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_SalesRule/js/model/payment/discount-messages',\r\n    'mage/storage',\r\n    'Magento_Checkout/js/action/get-payment-information',\r\n    'Magento_Checkout/js/model/totals',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Checkout/js/action/recollect-shipping-rates'\r\n], function ($, quote, urlManager, errorProcessor, messageContainer, storage, getPaymentInformationAction, totals, $t,\r\n  fullScreenLoader, recollectShippingRates\r\n) {\r\n    'use strict';\r\n\r\n    var successCallbacks = [],\r\n        action,\r\n        callSuccessCallbacks;\r\n\r\n    /**\r\n     * Execute callbacks when a coupon is successfully canceled.\r\n     */\r\n    callSuccessCallbacks = function () {\r\n        successCallbacks.forEach(function (callback) {\r\n            callback();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Cancel applied coupon.\r\n     *\r\n     * @param {Boolean} isApplied\r\n     * @returns {Deferred}\r\n     */\r\n    action =  function (isApplied) {\r\n        var quoteId = quote.getQuoteId(),\r\n            url = urlManager.getCancelCouponUrl(quoteId),\r\n            message = $t('Your coupon was successfully removed.');\r\n\r\n        messageContainer.clear();\r\n        fullScreenLoader.startLoader();\r\n\r\n        return storage.delete(\r\n            url,\r\n            false\r\n        ).done(function () {\r\n            var deferred = $.Deferred();\r\n\r\n            totals.isLoading(true);\r\n            recollectShippingRates();\r\n            getPaymentInformationAction(deferred);\r\n            $.when(deferred).done(function () {\r\n                isApplied(false);\r\n                totals.isLoading(false);\r\n                fullScreenLoader.stopLoader();\r\n                //Allowing to tap into coupon-cancel process.\r\n                callSuccessCallbacks();\r\n            });\r\n            messageContainer.addSuccessMessage({\r\n                'message': message\r\n            });\r\n        }).fail(function (response) {\r\n            totals.isLoading(false);\r\n            fullScreenLoader.stopLoader();\r\n            errorProcessor.process(response, messageContainer);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Callback for when the cancel-coupon process is finished.\r\n     *\r\n     * @param {Function} callback\r\n     */\r\n    action.registerSuccessCallback = function (callback) {\r\n        successCallbacks.push(callback);\r\n    };\r\n\r\n    return action;\r\n});\r\n","Magento_SalesRule/js/action/select-payment-method-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/model/payment/discount-messages',\r\n    'Magento_Checkout/js/action/set-payment-information-extended',\r\n    'Magento_Checkout/js/action/get-totals',\r\n    'Magento_SalesRule/js/model/coupon'\r\n], function ($, wrapper, quote, messageContainer, setPaymentInformationExtended, getTotalsAction, coupon) {\r\n    'use strict';\r\n\r\n    return function (selectPaymentMethodAction) {\r\n\r\n        return wrapper.wrap(selectPaymentMethodAction, function (originalSelectPaymentMethodAction, paymentMethod) {\r\n\r\n            originalSelectPaymentMethodAction(paymentMethod);\r\n\r\n            if (paymentMethod === null) {\r\n                return;\r\n            }\r\n\r\n            $.when(\r\n                setPaymentInformationExtended(\r\n                    messageContainer,\r\n                    {\r\n                        method: paymentMethod.method\r\n                    },\r\n                    true\r\n                )\r\n            ).done(\r\n                function () {\r\n                    var deferred = $.Deferred(),\r\n\r\n                        /**\r\n                         * Update coupon form.\r\n                         */\r\n                        updateCouponCallback = function () {\r\n                            if (quote.totals() && !quote.totals()['coupon_code']) {\r\n                                coupon.setCouponCode('');\r\n                                coupon.setIsApplied(false);\r\n                            }\r\n                        };\r\n\r\n                    getTotalsAction([], deferred);\r\n                    $.when(deferred).done(updateCouponCallback);\r\n                }\r\n            );\r\n        });\r\n    };\r\n\r\n});\r\n","Magento_SalesRule/js/action/set-coupon-code.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Customer store credit(balance) application\r\n */\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/resource-url-manager',\r\n    'Magento_Checkout/js/model/error-processor',\r\n    'Magento_SalesRule/js/model/payment/discount-messages',\r\n    'mage/storage',\r\n    'mage/translate',\r\n    'Magento_Checkout/js/action/get-payment-information',\r\n    'Magento_Checkout/js/model/totals',\r\n    'Magento_Checkout/js/model/full-screen-loader',\r\n    'Magento_Checkout/js/action/recollect-shipping-rates'\r\n], function (ko, $, quote, urlManager, errorProcessor, messageContainer, storage, $t, getPaymentInformationAction,\r\n    totals, fullScreenLoader, recollectShippingRates\r\n) {\r\n    'use strict';\r\n\r\n    var dataModifiers = [],\r\n        successCallbacks = [],\r\n        failCallbacks = [],\r\n        action;\r\n\r\n    /**\r\n     * Apply provided coupon.\r\n     *\r\n     * @param {String} couponCode\r\n     * @param {Boolean}isApplied\r\n     * @returns {Deferred}\r\n     */\r\n    action = function (couponCode, isApplied) {\r\n        var quoteId = quote.getQuoteId(),\r\n            url = urlManager.getApplyCouponUrl(couponCode, quoteId),\r\n            message = $t('Your coupon was successfully applied.'),\r\n            data = {},\r\n            headers = {};\r\n\r\n        //Allowing to modify coupon-apply request\r\n        dataModifiers.forEach(function (modifier) {\r\n            modifier(headers, data);\r\n        });\r\n        fullScreenLoader.startLoader();\r\n\r\n        return storage.put(\r\n            url,\r\n            data,\r\n            false,\r\n            null,\r\n            headers\r\n        ).done(function (response) {\r\n            var deferred;\r\n\r\n            if (response) {\r\n                deferred = $.Deferred();\r\n\r\n                isApplied(true);\r\n                totals.isLoading(true);\r\n                recollectShippingRates();\r\n                getPaymentInformationAction(deferred);\r\n                $.when(deferred).done(function () {\r\n                    fullScreenLoader.stopLoader();\r\n                    totals.isLoading(false);\r\n                });\r\n                messageContainer.addSuccessMessage({\r\n                    'message': message\r\n                });\r\n                //Allowing to tap into apply-coupon process.\r\n                successCallbacks.forEach(function (callback) {\r\n                    callback(response);\r\n                });\r\n            }\r\n        }).fail(function (response) {\r\n            fullScreenLoader.stopLoader();\r\n            totals.isLoading(false);\r\n            errorProcessor.process(response, messageContainer);\r\n            //Allowing to tap into apply-coupon process.\r\n            failCallbacks.forEach(function (callback) {\r\n                callback(response);\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Modifying data to be sent.\r\n     *\r\n     * @param {Function} modifier\r\n     */\r\n    action.registerDataModifier = function (modifier) {\r\n        dataModifiers.push(modifier);\r\n    };\r\n\r\n    /**\r\n     * When successfully added a coupon.\r\n     *\r\n     * @param {Function} callback\r\n     */\r\n    action.registerSuccessCallback = function (callback) {\r\n        successCallbacks.push(callback);\r\n    };\r\n\r\n    /**\r\n     * When failed to add a coupon.\r\n     *\r\n     * @param {Function} callback\r\n     */\r\n    action.registerFailCallback = function (callback) {\r\n        failCallbacks.push(callback);\r\n    };\r\n\r\n    return action;\r\n});\r\n","Magento_SalesRule/js/form/element/coupon-type.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/form/element/select'\r\n], function (_, uiRegistry, select) {\r\n    'use strict';\r\n\r\n    return select.extend({\r\n\r\n        /**\r\n         * Hide fields on coupon tab\r\n         */\r\n        onUpdate: function () {\r\n\r\n            /* eslint-disable eqeqeq */\r\n            if (this.value() != this.displayOnlyForCouponType) {\r\n                uiRegistry.get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation').checked(false);\r\n            }\r\n\r\n            this.enableDisableFields();\r\n        },\r\n\r\n        /**\r\n         * Enable/disable fields on Coupons tab\r\n         */\r\n        enableDisableFields: function () {\r\n            var selector,\r\n                isUseAutoGenerationChecked,\r\n                couponType,\r\n                disableAuto;\r\n\r\n            selector = '[id=sales-rule-form-tab-coupons] input, [id=sales-rule-form-tab-coupons] select, ' +\r\n                    '[id=sales-rule-form-tab-coupons] button';\r\n            isUseAutoGenerationChecked = uiRegistry\r\n                    .get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation')\r\n                    .checked();\r\n            couponType = uiRegistry\r\n                .get('sales_rule_form.sales_rule_form.rule_information.coupon_type')\r\n                .value();\r\n            disableAuto = couponType === 3 || isUseAutoGenerationChecked;\r\n            _.each(\r\n                document.querySelectorAll(selector),\r\n                function (element) {\r\n                    element.disabled = !disableAuto;\r\n                }\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/form/element/manage-coupon-codes.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'Magento_Ui/js/form/components/fieldset',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function (_, uiRegistry, fieldset, async) {\r\n    'use strict';\r\n\r\n    return fieldset.extend({\r\n\r\n        /*eslint-disable no-unused-vars*/\r\n        /**\r\n         * Initialize element\r\n         *\r\n         * @returns {Abstract} Chainable\r\n         */\r\n        initialize: function (elems, position) {\r\n            var obj = this;\r\n\r\n            this._super();\r\n\r\n            async.async('#sales-rule-form-tab-coupons', document.getElementById('container'), function (node) {\r\n                var useAutoGeneration = uiRegistry.get(\r\n                    'sales_rule_form.sales_rule_form.rule_information.use_auto_generation'\r\n                );\r\n\r\n                useAutoGeneration.on('checked', function () {\r\n                    obj.enableDisableFields();\r\n                });\r\n                obj.enableDisableFields();\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /*eslint-enable no-unused-vars*/\r\n        /*eslint-disable lines-around-comment*/\r\n\r\n        /**\r\n         * Enable/disable fields on Coupons tab\r\n         */\r\n        enableDisableFields: function () {\r\n            var selector,\r\n                isUseAutoGenerationChecked,\r\n                couponType,\r\n                disableAuto;\r\n\r\n            selector = '[id=sales-rule-form-tab-coupons] input, [id=sales-rule-form-tab-coupons] select, ' +\r\n                    '[id=sales-rule-form-tab-coupons] button';\r\n            isUseAutoGenerationChecked = uiRegistry\r\n                    .get('sales_rule_form.sales_rule_form.rule_information.use_auto_generation')\r\n                    .checked();\r\n            couponType = uiRegistry\r\n                .get('sales_rule_form.sales_rule_form.rule_information.coupon_type')\r\n                .value();\r\n            /**\r\n             * \\Magento\\Rule\\Model\\AbstractModel::COUPON_TYPE_AUTO\r\n             */\r\n            disableAuto = couponType === 3 || isUseAutoGenerationChecked;\r\n            _.each(\r\n                document.querySelectorAll(selector),\r\n                function (element) {\r\n                    element.disabled = !disableAuto;\r\n                }\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/model/coupon.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/**\r\n * Coupon model.\r\n */\r\ndefine([\r\n    'ko',\r\n    'domReady!'\r\n], function (ko) {\r\n    'use strict';\r\n\r\n    var couponCode = ko.observable(null),\r\n        isApplied = ko.observable(null);\r\n\r\n    return {\r\n        couponCode: couponCode,\r\n        isApplied: isApplied,\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getCouponCode: function () {\r\n            return couponCode;\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        getIsApplied: function () {\r\n            return isApplied;\r\n        },\r\n\r\n        /**\r\n         * @param {*} couponCodeValue\r\n         */\r\n        setCouponCode: function (couponCodeValue) {\r\n            couponCode(couponCodeValue);\r\n        },\r\n\r\n        /**\r\n         * @param {Boolean} isAppliedValue\r\n         */\r\n        setIsApplied: function (isAppliedValue) {\r\n            isApplied(isAppliedValue);\r\n        }\r\n    };\r\n});\r\n","Magento_SalesRule/js/model/place-order-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/model/coupon',\r\n    'Magento_Checkout/js/action/get-totals'\r\n], function ($, wrapper, quote, coupon, getTotalsAction) {\r\n    'use strict';\r\n\r\n    return function (placeOrderAction) {\r\n        return wrapper.wrap(placeOrderAction, function (originalAction, paymentData, messageContainer) {\r\n            var result;\r\n\r\n            $.when(\r\n                result = originalAction(paymentData, messageContainer)\r\n            ).fail(\r\n                function () {\r\n                    var deferred = $.Deferred(),\r\n\r\n                        /**\r\n                         * Update coupon form\r\n                         */\r\n                        updateCouponCallback = function () {\r\n                            if (quote.totals() && !quote.totals()['coupon_code']) {\r\n                                coupon.setCouponCode('');\r\n                                coupon.setIsApplied(false);\r\n                            }\r\n                        };\r\n\r\n                    getTotalsAction([], deferred);\r\n                    $.when(deferred).done(updateCouponCallback);\r\n                }\r\n            );\r\n\r\n            return result;\r\n        });\r\n    };\r\n});\r\n","Magento_SalesRule/js/model/shipping-save-processor-mixin.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'mage/utils/wrapper',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/model/coupon'\r\n], function (wrapper, quote, coupon) {\r\n    'use strict';\r\n\r\n    return function (shippingSaveProcessor) {\r\n        shippingSaveProcessor.saveShippingInformation = wrapper.wrapSuper(\r\n            shippingSaveProcessor.saveShippingInformation,\r\n            function (type) {\r\n                var updateCouponCallback;\r\n\r\n                /**\r\n                 * Update coupon form\r\n                 */\r\n                updateCouponCallback = function () {\r\n                    if (quote.totals() && !quote.totals()['coupon_code']) {\r\n                        coupon.setCouponCode('');\r\n                        coupon.setIsApplied(false);\r\n                    }\r\n                };\r\n\r\n                return this._super(type).done(updateCouponCallback);\r\n            }\r\n        );\r\n\r\n        return shippingSaveProcessor;\r\n    };\r\n});\r\n","Magento_SalesRule/js/model/payment/discount-messages.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/model/messages'\r\n], function (Messages) {\r\n    'use strict';\r\n\r\n    return new Messages();\r\n});\r\n","Magento_SalesRule/js/view/cart/totals/discount.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_SalesRule/js/view/summary/discount'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_SalesRule/cart/totals/discount'\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isDisplayed: function () {\r\n            return this.getPureValue() != 0; //eslint-disable-line eqeqeq\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/view/payment/captcha.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n        'Magento_Captcha/js/view/checkout/defaultCaptcha',\r\n        'Magento_Captcha/js/model/captchaList',\r\n        'Magento_SalesRule/js/action/set-coupon-code',\r\n        'Magento_SalesRule/js/action/cancel-coupon',\r\n        'Magento_Checkout/js/model/quote',\r\n        'ko'\r\n    ],\r\n    function (defaultCaptcha, captchaList, setCouponCodeAction, cancelCouponAction, quote, ko) {\r\n        'use strict';\r\n\r\n        var totals = quote.getTotals(),\r\n            couponCode = ko.observable(null),\r\n            isApplied;\r\n\r\n        if (totals()) {\r\n            couponCode(totals()['coupon_code']);\r\n        }\r\n        //Captcha can only be required for adding a coupon so we need to know if one was added already.\r\n        isApplied = ko.observable(couponCode() != null);\r\n\r\n        return defaultCaptcha.extend({\r\n            /** @inheritdoc */\r\n            initialize: function () {\r\n                var self = this,\r\n                    currentCaptcha;\r\n\r\n                this._super();\r\n                //Getting coupon captcha model.\r\n                currentCaptcha = captchaList.getCaptchaByFormId(this.formId);\r\n\r\n                if (currentCaptcha != null) {\r\n                    if (!isApplied()) {\r\n                        //Show captcha if we don't have a coupon applied.\r\n                        currentCaptcha.setIsVisible(true);\r\n                    }\r\n                    this.setCurrentCaptcha(currentCaptcha);\r\n                    //Add captcha code to coupon-apply request.\r\n                    setCouponCodeAction.registerDataModifier(function (headers) {\r\n                        if (self.isRequired()) {\r\n                            headers['X-Captcha'] = self.captchaValue()();\r\n                        }\r\n                    });\r\n                    //Refresh captcha after failed request.\r\n                    setCouponCodeAction.registerFailCallback(function () {\r\n                        if (self.isRequired()) {\r\n                            self.refresh();\r\n                        }\r\n                    });\r\n                    //Hide captcha when a coupon has been applied.\r\n                    setCouponCodeAction.registerSuccessCallback(function () {\r\n                        self.setIsVisible(false);\r\n                    });\r\n                    //Show captcha again if it was canceled.\r\n                    cancelCouponAction.registerSuccessCallback(function () {\r\n                        if (self.isRequired()) {\r\n                            self.setIsVisible(true);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    });\r\n","Magento_SalesRule/js/view/payment/discount-messages.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/view/messages',\r\n    '../../model/payment/discount-messages'\r\n], function (Component, messageContainer) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /** @inheritdoc */\r\n        initialize: function (config) {\r\n            return this._super(config, messageContainer);\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/view/payment/discount.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_SalesRule/js/action/set-coupon-code',\r\n    'Magento_SalesRule/js/action/cancel-coupon',\r\n    'Magento_SalesRule/js/model/coupon'\r\n], function ($, ko, Component, quote, setCouponCodeAction, cancelCouponAction, coupon) {\r\n    'use strict';\r\n\r\n    var totals = quote.getTotals(),\r\n        couponCode = coupon.getCouponCode(),\r\n        isApplied = coupon.getIsApplied();\r\n\r\n    if (totals()) {\r\n        couponCode(totals()['coupon_code']);\r\n    }\r\n    isApplied(couponCode() != null);\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_SalesRule/payment/discount'\r\n        },\r\n        couponCode: couponCode,\r\n\r\n        /**\r\n         * Applied flag\r\n         */\r\n        isApplied: isApplied,\r\n\r\n        /**\r\n         * Coupon code application procedure\r\n         */\r\n        apply: function () {\r\n            if (this.validate()) {\r\n                setCouponCodeAction(couponCode(), isApplied);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Cancel using coupon\r\n         */\r\n        cancel: function () {\r\n            if (this.validate()) {\r\n                couponCode('');\r\n                cancelCouponAction(isApplied);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Coupon form validation\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        validate: function () {\r\n            var form = '#discount-form';\r\n\r\n            return $(form).validation() && $(form).validation('isValid');\r\n        }\r\n    });\r\n});\r\n","Magento_SalesRule/js/view/summary/discount.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_SalesRule/summary/discount'\r\n        },\r\n        totals: quote.getTotals(),\r\n\r\n        /**\r\n         * @return {*|Boolean}\r\n         */\r\n        isDisplayed: function () {\r\n            return this.isFullMode() && this.getPureValue() != 0; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getCouponCode: function () {\r\n            if (!this.totals()) {\r\n                return null;\r\n            }\r\n\r\n            return this.totals()['coupon_code'];\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getCouponLabel: function () {\r\n            if (!this.totals()) {\r\n                return null;\r\n            }\r\n\r\n            return this.totals()['coupon_label'];\r\n        },\r\n\r\n        /**\r\n         * Get discount title\r\n         *\r\n         * @returns {null|String}\r\n         */\r\n        getTitle: function () {\r\n            var discountSegments;\r\n\r\n            if (!this.totals()) {\r\n                return null;\r\n            }\r\n\r\n            discountSegments = this.totals()['total_segments'].filter(function (segment) {\r\n                return segment.code.indexOf('discount') !== -1;\r\n            });\r\n\r\n            return discountSegments.length ? discountSegments[0].title : null;\r\n        },\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getPureValue: function () {\r\n            var price = 0;\r\n\r\n            if (this.totals() && this.totals()['discount_amount']) {\r\n                price = parseFloat(this.totals()['discount_amount']);\r\n            }\r\n\r\n            return price;\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            return this.getFormattedPrice(this.getPureValue());\r\n        }\r\n    });\r\n});\r\n","Magento_Search/js/form-mini.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/template',\r\n    'matchMedia',\r\n    'jquery-ui-modules/widget',\r\n    'jquery-ui-modules/core',\r\n    'mage/translate'\r\n], function ($, _, mageTemplate, mediaCheck) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Check whether the incoming string is not empty or if doesn't consist of spaces.\r\n     *\r\n     * @param {String} value - Value to check.\r\n     * @returns {Boolean}\r\n     */\r\n    function isEmpty(value) {\r\n        return value.length === 0 || value == null || /^\\s+$/.test(value);\r\n    }\r\n\r\n    $.widget('mage.quickSearch', {\r\n        options: {\r\n            autocomplete: 'off',\r\n            minSearchLength: 3,\r\n            responseFieldElements: 'ul li',\r\n            selectClass: 'selected',\r\n            template:\r\n                '<li class=\"<%- data.row_class %>\" id=\"qs-option-<%- data.index %>\" role=\"option\">' +\r\n                '<span class=\"qs-option-name\">' +\r\n                ' <%- data.title %>' +\r\n                '</span>' +\r\n                '<span aria-hidden=\"true\" class=\"amount\">' +\r\n                '<%- data.num_results %>' +\r\n                '</span>' +\r\n                '</li>',\r\n            submitBtn: 'button[type=\"submit\"]',\r\n            searchLabel: '[data-role=minisearch-label]',\r\n            isExpandable: null,\r\n            suggestionDelay: 300\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        _create: function () {\r\n            this.responseList = {\r\n                indexList: null,\r\n                selected: null\r\n            };\r\n            this.autoComplete = $(this.options.destinationSelector);\r\n            this.searchForm = $(this.options.formSelector);\r\n            this.submitBtn = this.searchForm.find(this.options.submitBtn)[0];\r\n            this.searchLabel = this.searchForm.find(this.options.searchLabel);\r\n            this.isExpandable = this.options.isExpandable;\r\n\r\n            _.bindAll(this, '_onKeyDown', '_onPropertyChange', '_onSubmit');\r\n\r\n            this.submitBtn.disabled = true;\r\n\r\n            this.element.attr('autocomplete', this.options.autocomplete);\r\n\r\n            mediaCheck({\r\n                media: '(max-width: 768px)',\r\n                entry: function () {\r\n                    this.isExpandable = true;\r\n                }.bind(this),\r\n                exit: function () {\r\n                    this.isExpandable = true;\r\n                }.bind(this)\r\n            });\r\n\r\n            this.searchLabel.on('click', function (e) {\r\n                // allow input to lose its' focus when clicking on label\r\n                if (this.isExpandable && this.isActive()) {\r\n                    e.preventDefault();\r\n                }\r\n            }.bind(this));\r\n\r\n            this.element.on('blur', $.proxy(function () {\r\n                if (!this.searchLabel.hasClass('active')) {\r\n                    return;\r\n                }\r\n\r\n                setTimeout($.proxy(function () {\r\n                    if (this.autoComplete.is(':hidden')) {\r\n                        this.setActiveState(false);\r\n                    } else {\r\n                        this.element.trigger('focus');\r\n                    }\r\n                    this.autoComplete.hide();\r\n                    this._updateAriaHasPopup(false);\r\n                }, this), 250);\r\n            }, this));\r\n\r\n            if (this.element.get(0) === document.activeElement) {\r\n                this.setActiveState(true);\r\n            }\r\n\r\n            this.element.on('focus', this.setActiveState.bind(this, true));\r\n            this.element.on('keydown', this._onKeyDown);\r\n            // Prevent spamming the server with requests by waiting till the user has stopped typing for period of time\r\n            this.element.on('input propertychange', _.debounce(this._onPropertyChange, this.options.suggestionDelay));\r\n\r\n            this.searchForm.on('submit', $.proxy(function (e) {\r\n                this._onSubmit(e);\r\n                this._updateAriaHasPopup(false);\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Checks if search field is active.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        isActive: function () {\r\n            return this.searchLabel.hasClass('active');\r\n        },\r\n\r\n        /**\r\n         * Sets state of the search field to provided value.\r\n         *\r\n         * @param {Boolean} isActive\r\n         */\r\n        setActiveState: function (isActive) {\r\n            var searchValue;\r\n\r\n            this.searchForm.toggleClass('active', isActive);\r\n            this.searchLabel.toggleClass('active', isActive);\r\n\r\n            if (this.isExpandable) {\r\n                this.element.attr('aria-expanded', isActive);\r\n                searchValue = this.element.val();\r\n                this.element.val('');\r\n                this.element.val(searchValue);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         * @return {Element} The first element in the suggestion list.\r\n         */\r\n        _getFirstVisibleElement: function () {\r\n            return this.responseList.indexList ? this.responseList.indexList.first() : false;\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         * @return {Element} The last element in the suggestion list.\r\n         */\r\n        _getLastElement: function () {\r\n            return this.responseList.indexList ? this.responseList.indexList.last() : false;\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         * @param {Boolean} show - Set attribute aria-haspopup to \"true/false\" for element.\r\n         */\r\n        _updateAriaHasPopup: function (show) {\r\n            if (show) {\r\n                this.element.attr('aria-haspopup', 'true');\r\n            } else {\r\n                this.element.attr('aria-haspopup', 'false');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Clears the item selected from the suggestion list and resets the suggestion list.\r\n         * @private\r\n         * @param {Boolean} all - Controls whether to clear the suggestion list.\r\n         */\r\n        _resetResponseList: function (all) {\r\n            this.responseList.selected = null;\r\n\r\n            if (all === true) {\r\n                this.responseList.indexList = null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Executes when the search box is submitted. Sets the search input field to the\r\n         * value of the selected item.\r\n         * @private\r\n         * @param {Event} e - The submit event\r\n         */\r\n        _onSubmit: function (e) {\r\n            var value = this.element.val();\r\n\r\n            if (isEmpty(value)) {\r\n                e.preventDefault();\r\n            }\r\n\r\n            if (this.responseList.selected) {\r\n                this.element.val(this.responseList.selected.find('.qs-option-name').text());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Executes when keys are pressed in the search input field. Performs specific actions\r\n         * depending on which keys are pressed.\r\n         * @private\r\n         * @param {Event} e - The key down event\r\n         * @return {Boolean} Default return type for any unhandled keys\r\n         */\r\n        _onKeyDown: function (e) {\r\n            var keyCode = e.keyCode || e.which;\r\n\r\n            switch (keyCode) {\r\n                case $.ui.keyCode.HOME:\r\n                    if (this._getFirstVisibleElement()) {\r\n                        this._getFirstVisibleElement().addClass(this.options.selectClass);\r\n                        this.responseList.selected = this._getFirstVisibleElement();\r\n                    }\r\n                    break;\r\n\r\n                case $.ui.keyCode.END:\r\n                    if (this._getLastElement()) {\r\n                        this._getLastElement().addClass(this.options.selectClass);\r\n                        this.responseList.selected = this._getLastElement();\r\n                    }\r\n                    break;\r\n\r\n                case $.ui.keyCode.ESCAPE:\r\n                    this._resetResponseList(true);\r\n                    this.autoComplete.hide();\r\n                    break;\r\n\r\n                case $.ui.keyCode.ENTER:\r\n                    if (this.element.val().length >= parseInt(this.options.minSearchLength, 10)) {\r\n                        this.searchForm.trigger('submit');\r\n                        e.preventDefault();\r\n                    }\r\n                    break;\r\n\r\n                case $.ui.keyCode.DOWN:\r\n                    if (this.responseList.indexList) {\r\n                        if (!this.responseList.selected) {  //eslint-disable-line max-depth\r\n                            this._getFirstVisibleElement().addClass(this.options.selectClass);\r\n                            this.responseList.selected = this._getFirstVisibleElement();\r\n                        } else if (!this._getLastElement().hasClass(this.options.selectClass)) {\r\n                            this.responseList.selected = this.responseList.selected\r\n                                .removeClass(this.options.selectClass).next().addClass(this.options.selectClass);\r\n                        } else {\r\n                            this.responseList.selected.removeClass(this.options.selectClass);\r\n                            this._getFirstVisibleElement().addClass(this.options.selectClass);\r\n                            this.responseList.selected = this._getFirstVisibleElement();\r\n                        }\r\n                        this.element.val(this.responseList.selected.find('.qs-option-name').text());\r\n                        this.element.attr('aria-activedescendant', this.responseList.selected.attr('id'));\r\n                        this._updateAriaHasPopup(true);\r\n                        this.autoComplete.show();\r\n                    }\r\n                    break;\r\n\r\n                case $.ui.keyCode.UP:\r\n                    if (this.responseList.indexList !== null) {\r\n                        if (!this._getFirstVisibleElement().hasClass(this.options.selectClass)) {\r\n                            this.responseList.selected = this.responseList.selected\r\n                                .removeClass(this.options.selectClass).prev().addClass(this.options.selectClass);\r\n\r\n                        } else {\r\n                            this.responseList.selected.removeClass(this.options.selectClass);\r\n                            this._getLastElement().addClass(this.options.selectClass);\r\n                            this.responseList.selected = this._getLastElement();\r\n                        }\r\n                        this.element.val(this.responseList.selected.find('.qs-option-name').text());\r\n                        this.element.attr('aria-activedescendant', this.responseList.selected.attr('id'));\r\n                        this._updateAriaHasPopup(true);\r\n                        this.autoComplete.show();\r\n                    }\r\n                    break;\r\n                default:\r\n                    return true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Executes when the value of the search input field changes. Executes a GET request\r\n         * to populate a suggestion list based on entered text. Handles click (select), hover,\r\n         * and mouseout events on the populated suggestion list dropdown.\r\n         * @private\r\n         */\r\n        _onPropertyChange: function () {\r\n            var searchField = this.element,\r\n                clonePosition = {\r\n                    position: 'absolute',\r\n                    // Removed to fix display issues\r\n                    // left: searchField.offset().left,\r\n                    // top: searchField.offset().top + searchField.outerHeight(),\r\n                    width: searchField.outerWidth()\r\n                },\r\n                source = this.options.template,\r\n                template = mageTemplate(source),\r\n                dropdown = $('<ul role=\"listbox\"></ul>'),\r\n                value = this.element.val();\r\n\r\n            this.submitBtn.disabled = true;\r\n\r\n            if (value.length >= parseInt(this.options.minSearchLength, 10)) {\r\n                this.submitBtn.disabled = false;\r\n\r\n                if (this.options.url !== '') { //eslint-disable-line eqeqeq\r\n                    $.getJSON(this.options.url, {\r\n                        q: value\r\n                    }, $.proxy(function (data) {\r\n                        if (data.length) {\r\n                            $.each(data, function (index, element) {\r\n                                var html;\r\n\r\n                                element.index = index;\r\n                                html = template({\r\n                                    data: element\r\n                                });\r\n                                dropdown.append(html);\r\n                            });\r\n\r\n                            this._resetResponseList(true);\r\n\r\n                            this.responseList.indexList = this.autoComplete.html(dropdown)\r\n                                .css(clonePosition)\r\n                                .show()\r\n                                .find(this.options.responseFieldElements + ':visible');\r\n\r\n                            this.element.removeAttr('aria-activedescendant');\r\n\r\n                            if (this.responseList.indexList.length) {\r\n                                this._updateAriaHasPopup(true);\r\n                            } else {\r\n                                this._updateAriaHasPopup(false);\r\n                            }\r\n\r\n                            this.responseList.indexList\r\n                                .on('click', function (e) {\r\n                                    this.responseList.selected = $(e.currentTarget);\r\n                                    this.searchForm.trigger('submit');\r\n                                }.bind(this))\r\n                                .on('mouseenter mouseleave', function (e) {\r\n                                    this.responseList.indexList.removeClass(this.options.selectClass);\r\n                                    $(e.target).addClass(this.options.selectClass);\r\n                                    this.responseList.selected = $(e.target);\r\n                                    this.element.attr('aria-activedescendant', $(e.target).attr('id'));\r\n                                }.bind(this))\r\n                                .on('mouseout', function (e) {\r\n                                    if (!this._getLastElement() &&\r\n                                        this._getLastElement().hasClass(this.options.selectClass)) {\r\n                                        $(e.target).removeClass(this.options.selectClass);\r\n                                        this._resetResponseList(false);\r\n                                    }\r\n                                }.bind(this));\r\n                        } else {\r\n                            this._resetResponseList(true);\r\n                            this.autoComplete.hide();\r\n                            this._updateAriaHasPopup(false);\r\n                            this.element.removeAttr('aria-activedescendant');\r\n                        }\r\n                    }, this));\r\n                }\r\n            } else {\r\n                this._resetResponseList(true);\r\n                this.autoComplete.hide();\r\n                this._updateAriaHasPopup(false);\r\n                this.element.removeAttr('aria-activedescendant');\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.quickSearch;\r\n});\r\n","Magento_Security/js/escaper.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * A loose JavaScript version of Magento\\Framework\\Escaper\r\n *\r\n * Due to differences in how XML/HTML is processed in PHP vs JS there are a couple of minor differences in behavior\r\n * from the PHP counterpart.\r\n *\r\n * The first difference is that the default invocation of escapeHtml without allowedTags will double-escape existing\r\n * entities as the intention of such an invocation is that the input isn't supposed to contain any HTML.\r\n *\r\n * The second difference is that escapeHtml will not escape quotes. Since the input is actually being processed by the\r\n * DOM there is no chance of quotes being mixed with HTML syntax. And, since escapeHtml is not\r\n * intended to be used with raw injection into a HTML attribute, this is acceptable.\r\n *\r\n * @api\r\n */\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return {\r\n        neverAllowedElements: ['script', 'img', 'embed', 'iframe', 'video', 'source', 'object', 'audio'],\r\n        generallyAllowedAttributes: ['id', 'class', 'href', 'title', 'style'],\r\n        forbiddenAttributesByElement: {\r\n            a: ['style']\r\n        },\r\n\r\n        /**\r\n         * Escape a string for safe injection into HTML\r\n         *\r\n         * @param {String} data\r\n         * @param {Array|null} allowedTags\r\n         * @returns {String}\r\n         */\r\n        escapeHtml: function (data, allowedTags) {\r\n            var domParser = new DOMParser(),\r\n                fragment = domParser.parseFromString('<div></div>', 'text/html');\r\n\r\n            fragment = fragment.body.childNodes[0];\r\n            allowedTags = typeof allowedTags === 'object' && allowedTags.length ? allowedTags : null;\r\n\r\n            if (allowedTags) {\r\n                fragment.innerHTML = data || '';\r\n                allowedTags = this._filterProhibitedTags(allowedTags);\r\n\r\n                this._removeComments(fragment);\r\n                this._removeNotAllowedElements(fragment, allowedTags);\r\n                this._removeNotAllowedAttributes(fragment);\r\n\r\n                return fragment.innerHTML;\r\n            }\r\n\r\n            fragment.textContent = data || '';\r\n\r\n            return fragment.innerHTML;\r\n        },\r\n\r\n        /**\r\n         * Remove the always forbidden tags from a list of provided tags\r\n         *\r\n         * @param {Array} tags\r\n         * @returns {Array}\r\n         * @private\r\n         */\r\n        _filterProhibitedTags: function (tags) {\r\n            return tags.filter(function (n) {\r\n                return this.neverAllowedElements.indexOf(n) === -1;\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Remove comment nodes from the given node\r\n         *\r\n         * @param {Node} node\r\n         * @private\r\n         */\r\n        _removeComments: function (node) {\r\n            var treeWalker = node.ownerDocument.createTreeWalker(\r\n                    node,\r\n                    NodeFilter.SHOW_COMMENT,\r\n                    function () {\r\n                        return NodeFilter.FILTER_ACCEPT;\r\n                    },\r\n                    false\r\n                ),\r\n                nodesToRemove = [];\r\n\r\n            while (treeWalker.nextNode()) {\r\n                nodesToRemove.push(treeWalker.currentNode);\r\n            }\r\n\r\n            nodesToRemove.forEach(function (nodeToRemove) {\r\n                nodeToRemove.parentNode.removeChild(nodeToRemove);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Strip the given node of all disallowed tags while permitting any nested text nodes\r\n         *\r\n         * @param {Node} node\r\n         * @param {Array|null} allowedTags\r\n         * @private\r\n         */\r\n        _removeNotAllowedElements: function (node, allowedTags) {\r\n            var treeWalker = node.ownerDocument.createTreeWalker(\r\n                    node,\r\n                    NodeFilter.SHOW_ELEMENT,\r\n                    function (currentNode) {\r\n                        return allowedTags.indexOf(currentNode.nodeName.toLowerCase()) === -1 ?\r\n                            NodeFilter.FILTER_ACCEPT\r\n                            // SKIP instead of REJECT because REJECT also rejects child nodes\r\n                            : NodeFilter.FILTER_SKIP;\r\n                    },\r\n                false\r\n                ),\r\n                nodesToRemove = [];\r\n\r\n            while (treeWalker.nextNode()) {\r\n                if (allowedTags.indexOf(treeWalker.currentNode.nodeName.toLowerCase()) === -1) {\r\n                    nodesToRemove.push(treeWalker.currentNode);\r\n                }\r\n            }\r\n\r\n            nodesToRemove.forEach(function (nodeToRemove) {\r\n                nodeToRemove.parentNode.replaceChild(\r\n                    node.ownerDocument.createTextNode(nodeToRemove.textContent),\r\n                    nodeToRemove\r\n                );\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Remove any invalid attributes from the given node\r\n         *\r\n         * @param {Node} node\r\n         * @private\r\n         */\r\n        _removeNotAllowedAttributes: function (node) {\r\n            var treeWalker = node.ownerDocument.createTreeWalker(\r\n                    node,\r\n                    NodeFilter.SHOW_ELEMENT,\r\n                    function () {\r\n                        return NodeFilter.FILTER_ACCEPT;\r\n                    },\r\n                false\r\n                ),\r\n                i,\r\n                attribute,\r\n                nodeName,\r\n                attributesToRemove = [];\r\n\r\n            while (treeWalker.nextNode()) {\r\n                for (i = 0; i < treeWalker.currentNode.attributes.length; i++) {\r\n                    attribute = treeWalker.currentNode.attributes[i];\r\n                    nodeName = treeWalker.currentNode.nodeName.toLowerCase();\r\n\r\n                    if (this.generallyAllowedAttributes.indexOf(attribute.name) === -1  || // eslint-disable-line max-depth,max-len\r\n                        this._checkHrefValue(attribute) ||\r\n                        this.forbiddenAttributesByElement[nodeName] &&\r\n                        this.forbiddenAttributesByElement[nodeName].indexOf(attribute.name) !== -1\r\n                    ) {\r\n                        attributesToRemove.push(attribute);\r\n                    }\r\n                }\r\n            }\r\n\r\n            attributesToRemove.forEach(function (attributeToRemove) {\r\n                attributeToRemove.ownerElement.removeAttribute(attributeToRemove.name);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Check that attribute contains script content\r\n         *\r\n         * @param {Object} attribute\r\n         * @private\r\n         */\r\n        _checkHrefValue: function (attribute) {\r\n            return attribute.nodeName === 'href' && attribute.nodeValue.startsWith('javascript');\r\n        }\r\n    };\r\n});\r\n","Magento_SendFriend/requirejs-config.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\nvar config = {\r\n    map: {\r\n        '*': {\r\n            'Magento_SendFriend/back-event': 'Magento_SendFriend/js/back-event'\r\n        }\r\n    }\r\n};\r\n","Magento_SendFriend/js/back-event.js":"/**\r\n* Copyright \u00a9 Magento, Inc. All rights reserved.\r\n* See COPYING.txt for license details.\r\n*/\r\n\r\ndefine([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).on('click', function () {\r\n            history.back();\r\n\r\n            return false;\r\n        });\r\n    };\r\n});\r\n","Magento_Shipping/js/model/config.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return function () {\r\n        return window.checkoutConfig.shippingPolicy;\r\n    };\r\n});\r\n","Magento_Shipping/js/view/checkout/shipping/shipping-policy.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Shipping/js/model/config'\r\n\r\n], function (Component, config) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Shipping/checkout/shipping/shipping-policy'\r\n        },\r\n        config: config()\r\n    });\r\n});\r\n","Magento_Swatches/js/catalog-add-to-cart.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\nrequire([\r\n    'jquery'\r\n], function ($) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Add selected swatch attributes to redirect url\r\n     *\r\n     * @see Magento_Catalog/js/catalog-add-to-cart\r\n     */\r\n    $('body').on('catalogCategoryAddToCartRedirect', function (event, data) {\r\n        $(data.form).find('[name*=\"super\"]').each(function (index, item) {\r\n            var $item = $(item),\r\n                attr;\r\n\r\n            if ($item.attr('data-attr-name')) {\r\n                attr = $item.attr('data-attr-name');\r\n            } else {\r\n                attr = $item.parent().attr('attribute-code');\r\n            }\r\n            data.redirectParameters.push(attr + '=' + $item.val());\r\n\r\n        });\r\n    });\r\n});\r\n","Magento_Swatches/js/configurable-customer-data.js":"require([\r\n    'jquery',\r\n    'Magento_ConfigurableProduct/js/options-updater'\r\n], function ($, Updater) {\r\n    'use strict';\r\n\r\n    var selectors = {\r\n            formSelector: '#product_addtocart_form',\r\n            swatchSelector: '.swatch-opt'\r\n        },\r\n        swatchWidgetName = 'mageSwatchRenderer',\r\n        widgetInitEvent = 'swatch.initialized',\r\n\r\n    /**\r\n    * Sets all configurable swatch attribute's selected values\r\n    */\r\n    updateSwatchOptions = function () {\r\n        var swatchWidget = $(selectors.swatchSelector).data(swatchWidgetName);\r\n\r\n        if (!swatchWidget || !swatchWidget._EmulateSelectedByAttributeId) {\r\n            return;\r\n        }\r\n        swatchWidget._EmulateSelectedByAttributeId(this.productOptions);\r\n    },\r\n    updater = new Updater(widgetInitEvent, updateSwatchOptions);\r\n\r\n    updater.listen();\r\n});\r\n","Magento_Swatches/js/swatch-renderer.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mage/template',\r\n    'mage/smart-keyboard-handler',\r\n    'mage/translate',\r\n    'priceUtils',\r\n    'jquery-ui-modules/widget',\r\n    'jquery/jquery.parsequery',\r\n    'mage/validation/validation'\r\n], function ($, _, mageTemplate, keyboardHandler, $t, priceUtils) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Extend form validation to support swatch accessibility\r\n     */\r\n    $.widget('mage.validation', $.mage.validation, {\r\n        /**\r\n         * Handle form with swatches validation. Focus on first invalid swatch block.\r\n         *\r\n         * @param {jQuery.Event} event\r\n         * @param {Object} validation\r\n         */\r\n        listenFormValidateHandler: function (event, validation) {\r\n            var swatchWrapper, firstActive, swatches, swatch, successList, errorList, firstSwatch;\r\n\r\n            this._superApply(arguments);\r\n\r\n            swatchWrapper = '.swatch-attribute-options';\r\n            swatches = $(event.target).find(swatchWrapper);\r\n\r\n            if (!swatches.length) {\r\n                return;\r\n            }\r\n\r\n            swatch = '.swatch-attribute';\r\n            firstActive = $(validation.errorList[0].element || []);\r\n            successList = validation.successList;\r\n            errorList = validation.errorList;\r\n            firstSwatch = $(firstActive).parent(swatch).find(swatchWrapper);\r\n\r\n            keyboardHandler.focus(swatches);\r\n\r\n            $.each(successList, function (index, item) {\r\n                $(item).parent(swatch).find(swatchWrapper).attr('aria-invalid', false);\r\n            });\r\n\r\n            $.each(errorList, function (index, item) {\r\n                $(item.element).parent(swatch).find(swatchWrapper).attr('aria-invalid', true);\r\n            });\r\n\r\n            if (firstSwatch.length) {\r\n                $(firstSwatch).trigger('focus');\r\n            }\r\n        }\r\n    });\r\n\r\n    /**\r\n     * Render tooltips by attributes (only to up).\r\n     * Required element attributes:\r\n     *  - data-option-type (integer, 0-3)\r\n     *  - data-option-label (string)\r\n     *  - data-option-tooltip-thumb\r\n     *  - data-option-tooltip-value\r\n     *  - data-thumb-width\r\n     *  - data-thumb-height\r\n     */\r\n    $.widget('mage.SwatchRendererTooltip', {\r\n        options: {\r\n            delay: 200,                             //how much ms before tooltip to show\r\n            tooltipClass: 'swatch-option-tooltip'  //configurable, but remember about css\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _init: function () {\r\n            var $widget = this,\r\n                $this = this.element,\r\n                $element = $('.' + $widget.options.tooltipClass),\r\n                timer,\r\n                type = parseInt($this.data('option-type'), 10),\r\n                label = $this.data('option-label'),\r\n                thumb = $this.data('option-tooltip-thumb'),\r\n                value = $this.data('option-tooltip-value'),\r\n                width = $this.data('thumb-width'),\r\n                height = $this.data('thumb-height'),\r\n                $image,\r\n                $title,\r\n                $corner;\r\n\r\n            if (!$element.length) {\r\n                $element = $('<div class=\"' +\r\n                    $widget.options.tooltipClass +\r\n                    '\"><div class=\"image\"></div><div class=\"title\"></div><div class=\"corner\"></div></div>'\r\n                );\r\n                $('body').append($element);\r\n            }\r\n\r\n            $image = $element.find('.image');\r\n            $title = $element.find('.title');\r\n            $corner = $element.find('.corner');\r\n\r\n            $this.on('mouseenter', function () {\r\n                if (!$this.hasClass('disabled')) {\r\n                    timer = setTimeout(\r\n                        function () {\r\n                            var leftOpt = null,\r\n                                leftCorner = 0,\r\n                                left,\r\n                                $window;\r\n\r\n                            if (type === 2) {\r\n                                // Image\r\n                                $image.css({\r\n                                    'background': 'url(\"' + thumb + '\") no-repeat center', //Background case\r\n                                    'background-size': 'initial',\r\n                                    'width': width + 'px',\r\n                                    'height': height + 'px'\r\n                                });\r\n                                $image.show();\r\n                            } else if (type === 1) {\r\n                                // Color\r\n                                $image.css({\r\n                                    background: value\r\n                                });\r\n                                $image.show();\r\n                            } else if (type === 0 || type === 3) {\r\n                                // Default\r\n                                $image.hide();\r\n                            }\r\n\r\n                            $title.text(label);\r\n\r\n                            leftOpt = $this.offset().left;\r\n                            left = leftOpt + $this.width() / 2 - $element.width() / 2;\r\n                            $window = $(window);\r\n\r\n                            // the numbers (5 and 5) is magick constants for offset from left or right page\r\n                            if (left < 0) {\r\n                                left = 5;\r\n                            } else if (left + $element.width() > $window.width()) {\r\n                                left = $window.width() - $element.width() - 5;\r\n                            }\r\n\r\n                            // the numbers (6,  3 and 18) is magick constants for offset tooltip\r\n                            leftCorner = 0;\r\n\r\n                            if ($element.width() < $this.width()) {\r\n                                leftCorner = $element.width() / 2 - 3;\r\n                            } else {\r\n                                leftCorner = (leftOpt > left ? leftOpt - left : left - leftOpt) + $this.width() / 2 - 6;\r\n                            }\r\n\r\n                            $corner.css({\r\n                                left: leftCorner\r\n                            });\r\n                            $element.css({\r\n                                left: left,\r\n                                top: $this.offset().top - $element.height() - $corner.height() - 18\r\n                            }).show();\r\n                        },\r\n                        $widget.options.delay\r\n                    );\r\n                }\r\n            });\r\n\r\n            $this.on('mouseleave', function () {\r\n                $element.hide();\r\n                clearTimeout(timer);\r\n            });\r\n\r\n            $(document).on('tap', function () {\r\n                $element.hide();\r\n                clearTimeout(timer);\r\n            });\r\n\r\n            $this.on('tap', function (event) {\r\n                event.stopPropagation();\r\n            });\r\n        }\r\n    });\r\n\r\n    /**\r\n     * Render swatch controls with options and use tooltips.\r\n     * Required two json:\r\n     *  - jsonConfig (magento's option config)\r\n     *  - jsonSwatchConfig (swatch's option config)\r\n     *\r\n     *  Tuning:\r\n     *  - numberToShow (show \"more\" button if options are more)\r\n     *  - onlySwatches (hide selectboxes)\r\n     *  - moreButtonText (text for \"more\" button)\r\n     *  - selectorProduct (selector for product container)\r\n     *  - selectorProductPrice (selector for change price)\r\n     */\r\n    $.widget('mage.SwatchRenderer', {\r\n        options: {\r\n            classes: {\r\n                attributeClass: 'swatch-attribute',\r\n                attributeLabelClass: 'swatch-attribute-label',\r\n                attributeSelectedOptionLabelClass: 'swatch-attribute-selected-option',\r\n                attributeOptionsWrapper: 'swatch-attribute-options',\r\n                attributeInput: 'swatch-input',\r\n                optionClass: 'swatch-option',\r\n                selectClass: 'swatch-select',\r\n                moreButton: 'swatch-more',\r\n                loader: 'swatch-option-loading'\r\n            },\r\n            // option's json config\r\n            jsonConfig: {},\r\n\r\n            // swatch's json config\r\n            jsonSwatchConfig: {},\r\n\r\n            // selector of parental block of prices and swatches (need to know where to seek for price block)\r\n            selectorProduct: '.product-info-main',\r\n\r\n            // selector of price wrapper (need to know where set price)\r\n            selectorProductPrice: '[data-role=priceBox]',\r\n\r\n            //selector of product images gallery wrapper\r\n            mediaGallerySelector: '[data-gallery-role=gallery-placeholder]',\r\n\r\n            // selector of category product tile wrapper\r\n            selectorProductTile: '.product-item',\r\n\r\n            // number of controls to show (false or zero = show all)\r\n            numberToShow: false,\r\n\r\n            // show only swatch controls\r\n            onlySwatches: false,\r\n\r\n            // enable label for control\r\n            enableControlLabel: true,\r\n\r\n            // control label id\r\n            controlLabelId: '',\r\n\r\n            // text for more button\r\n            moreButtonText: $t('More'),\r\n\r\n            // Callback url for media\r\n            mediaCallback: '',\r\n\r\n            // Local media cache\r\n            mediaCache: {},\r\n\r\n            // Cache for BaseProduct images. Needed when option unset\r\n            mediaGalleryInitial: [{}],\r\n\r\n            // Use ajax to get image data\r\n            useAjax: false,\r\n\r\n            /**\r\n             * Defines the mechanism of how images of a gallery should be\r\n             * updated when user switches between configurations of a product.\r\n             *\r\n             * As for now value of this option can be either 'replace' or 'prepend'.\r\n             *\r\n             * @type {String}\r\n             */\r\n            gallerySwitchStrategy: 'replace',\r\n\r\n            // whether swatches are rendered in product list or on product page\r\n            inProductList: false,\r\n\r\n            // sly-old-price block selector\r\n            slyOldPriceSelector: '.sly-old-price',\r\n\r\n            // tier prise selectors start\r\n            tierPriceTemplateSelector: '#tier-prices-template',\r\n            tierPriceBlockSelector: '[data-role=\"tier-price-block\"]',\r\n            tierPriceTemplate: '',\r\n            // tier prise selectors end\r\n\r\n            // A price label selector\r\n            normalPriceLabelSelector: '.product-info-main .normal-price .price-label'\r\n        },\r\n\r\n        /**\r\n         * Get chosen product\r\n         *\r\n         * @returns int|null\r\n         */\r\n        getProduct: function () {\r\n            var products = this._CalcProducts();\r\n\r\n            return _.isArray(products) ? products[0] : null;\r\n        },\r\n\r\n        /**\r\n         * Get chosen product id\r\n         *\r\n         * @returns int|null\r\n         */\r\n        getProductId: function () {\r\n            var products = this._CalcProducts();\r\n\r\n            return _.isArray(products) && products.length === 1 ? products[0] : null;\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _init: function () {\r\n            // Don't render the same set of swatches twice\r\n            if ($(this.element).attr('data-rendered')) {\r\n                return;\r\n            }\r\n\r\n            $(this.element).attr('data-rendered', true);\r\n\r\n            if (_.isEmpty(this.options.jsonConfig.images)) {\r\n                this.options.useAjax = true;\r\n                // creates debounced variant of _LoadProductMedia()\r\n                // to use it in events handlers instead of _LoadProductMedia()\r\n                this._debouncedLoadProductMedia = _.debounce(this._LoadProductMedia.bind(this), 500);\r\n            }\r\n\r\n            this.options.tierPriceTemplate = $(this.options.tierPriceTemplateSelector).html();\r\n\r\n            if (this.options.jsonConfig !== '' && this.options.jsonSwatchConfig !== '') {\r\n                // store unsorted attributes\r\n                this.options.jsonConfig.mappedAttributes = _.clone(this.options.jsonConfig.attributes);\r\n                this._sortAttributes();\r\n                this._RenderControls();\r\n                this._setPreSelectedGallery();\r\n                $(this.element).trigger('swatch.initialized');\r\n            } else {\r\n                console.log('SwatchRenderer: No input data received');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _sortAttributes: function () {\r\n            this.options.jsonConfig.attributes = _.sortBy(this.options.jsonConfig.attributes, function (attribute) {\r\n                return parseInt(attribute.position, 10);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            var options = this.options,\r\n                gallery = $('[data-gallery-role=gallery-placeholder]', '.column.main'),\r\n                productData = this._determineProductData(),\r\n                $main = productData.isInProductView ?\r\n                    this.element.parents('.column.main') :\r\n                    this.element.parents('.product-item-info');\r\n\r\n            if (productData.isInProductView) {\r\n                gallery.data('gallery') ?\r\n                    this._onGalleryLoaded(gallery) :\r\n                    gallery.on('gallery:loaded', this._onGalleryLoaded.bind(this, gallery));\r\n            } else {\r\n                options.mediaGalleryInitial = [{\r\n                    'img': $main.find('.product-image-photo').attr('src')\r\n                }];\r\n            }\r\n\r\n            this.productForm = this.element.parents(this.options.selectorProductTile).find('form:first');\r\n            this.inProductList = this.productForm.length > 0;\r\n        },\r\n\r\n        /**\r\n         * Determine product id and related data\r\n         *\r\n         * @returns {{productId: *, isInProductView: bool}}\r\n         * @private\r\n         */\r\n        _determineProductData: function () {\r\n            // Check if product is in a list of products.\r\n            var productId,\r\n                isInProductView = false;\r\n\r\n            productId = this.element.parents('.product-item-details')\r\n                    .find('.price-box.price-final_price').attr('data-product-id');\r\n\r\n            if (!productId) {\r\n                // Check individual product.\r\n                productId = $('[name=product]').val();\r\n                isInProductView = productId > 0;\r\n            }\r\n\r\n            return {\r\n                productId: productId,\r\n                isInProductView: isInProductView\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Render controls\r\n         *\r\n         * @private\r\n         */\r\n        _RenderControls: function () {\r\n            var $widget = this,\r\n                container = this.element,\r\n                classes = this.options.classes,\r\n                chooseText = this.options.jsonConfig.chooseText,\r\n                showTooltip = this.options.showTooltip;\r\n\r\n            $widget.optionsMap = {};\r\n\r\n            $.each(this.options.jsonConfig.attributes, function () {\r\n                var item = this,\r\n                    controlLabelId = 'option-label-' + item.code + '-' + item.id,\r\n                    options = $widget._RenderSwatchOptions(item, controlLabelId),\r\n                    select = $widget._RenderSwatchSelect(item, chooseText),\r\n                    input = $widget._RenderFormInput(item),\r\n                    listLabel = '',\r\n                    label = '';\r\n\r\n                // Show only swatch controls\r\n                if ($widget.options.onlySwatches && !$widget.options.jsonSwatchConfig.hasOwnProperty(item.id)) {\r\n                    return;\r\n                }\r\n\r\n                if ($widget.options.enableControlLabel) {\r\n                    label +=\r\n                        '<span id=\"' + controlLabelId + '\" class=\"' + classes.attributeLabelClass + '\">' +\r\n                        $('<i></i>').text(item.label).html() +\r\n                        '</span>' +\r\n                        '<span class=\"' + classes.attributeSelectedOptionLabelClass + '\"></span>';\r\n                }\r\n\r\n                if ($widget.inProductList) {\r\n                    $widget.productForm.append(input);\r\n                    input = '';\r\n                    listLabel = 'aria-label=\"' + $('<i></i>').text(item.label).html() + '\"';\r\n                } else {\r\n                    listLabel = 'aria-labelledby=\"' + controlLabelId + '\"';\r\n                }\r\n\r\n                // Create new control\r\n                container.append(\r\n                    '<div class=\"' + classes.attributeClass + ' ' + item.code + '\" ' +\r\n                         'data-attribute-code=\"' + item.code + '\" ' +\r\n                         'data-attribute-id=\"' + item.id + '\">' +\r\n                        label +\r\n                        '<div aria-activedescendant=\"\" ' +\r\n                             'tabindex=\"0\" ' +\r\n                             'aria-invalid=\"false\" ' +\r\n                             'aria-required=\"true\" ' +\r\n                             'role=\"listbox\" ' + listLabel +\r\n                             'class=\"' + classes.attributeOptionsWrapper + ' clearfix\">' +\r\n                            options + select +\r\n                        '</div>' + input +\r\n                    '</div>'\r\n                );\r\n\r\n                $widget.optionsMap[item.id] = {};\r\n\r\n                // Aggregate options array to hash (key => value)\r\n                $.each(item.options, function () {\r\n                    if (this.products.length > 0) {\r\n                        $widget.optionsMap[item.id][this.id] = {\r\n                            price: parseInt(\r\n                                $widget.options.jsonConfig.optionPrices[this.products[0]].finalPrice.amount,\r\n                                10\r\n                            ),\r\n                            products: this.products\r\n                        };\r\n                    }\r\n                });\r\n            });\r\n\r\n            if (showTooltip === 1) {\r\n                // Connect Tooltip\r\n                container\r\n                    .find('[data-option-type=\"1\"], [data-option-type=\"2\"],' +\r\n                        ' [data-option-type=\"0\"], [data-option-type=\"3\"]')\r\n                    .SwatchRendererTooltip();\r\n            }\r\n\r\n            // Hide all elements below more button\r\n            $('.' + classes.moreButton).nextAll().hide();\r\n\r\n            // Handle events like click or change\r\n            $widget._EventListener();\r\n\r\n            // Rewind options\r\n            $widget._Rewind(container);\r\n\r\n            //Emulate click on all swatches from Request\r\n            $widget._EmulateSelected($.parseQuery());\r\n            $widget._EmulateSelected($widget._getSelectedAttributes());\r\n        },\r\n\r\n        /**\r\n         * Render swatch options by part of config\r\n         *\r\n         * @param {Object} config\r\n         * @param {String} controlId\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _RenderSwatchOptions: function (config, controlId) {\r\n            var optionConfig = this.options.jsonSwatchConfig[config.id],\r\n                optionClass = this.options.classes.optionClass,\r\n                sizeConfig = this.options.jsonSwatchImageSizeConfig,\r\n                moreLimit = parseInt(this.options.numberToShow, 10),\r\n                moreClass = this.options.classes.moreButton,\r\n                moreText = this.options.moreButtonText,\r\n                countAttributes = 0,\r\n                html = '';\r\n\r\n            if (!this.options.jsonSwatchConfig.hasOwnProperty(config.id)) {\r\n                return '';\r\n            }\r\n\r\n            $.each(config.options, function (index) {\r\n                var id,\r\n                    type,\r\n                    value,\r\n                    thumb,\r\n                    label,\r\n                    width,\r\n                    height,\r\n                    attr,\r\n                    swatchImageWidth,\r\n                    swatchImageHeight;\r\n\r\n                if (!optionConfig.hasOwnProperty(this.id)) {\r\n                    return '';\r\n                }\r\n\r\n                // Add more button\r\n                if (moreLimit === countAttributes++) {\r\n                    html += '<a href=\"#\" class=\"' + moreClass + '\"><span>' + moreText + '</span></a>';\r\n                }\r\n\r\n                id = this.id;\r\n                type = parseInt(optionConfig[id].type, 10);\r\n                value = optionConfig[id].hasOwnProperty('value') ?\r\n                    $('<i></i>').text(optionConfig[id].value).html() : '';\r\n                thumb = optionConfig[id].hasOwnProperty('thumb') ? optionConfig[id].thumb : '';\r\n                width = _.has(sizeConfig, 'swatchThumb') ? sizeConfig.swatchThumb.width : 110;\r\n                height = _.has(sizeConfig, 'swatchThumb') ? sizeConfig.swatchThumb.height : 90;\r\n                label = this.label ? $('<i></i>').text(this.label).html() : '';\r\n                attr =\r\n                    ' id=\"' + controlId + '-item-' + id + '\"' +\r\n                    ' index=\"' + index + '\"' +\r\n                    ' aria-checked=\"false\"' +\r\n                    ' aria-describedby=\"' + controlId + '\"' +\r\n                    ' tabindex=\"0\"' +\r\n                    ' data-option-type=\"' + type + '\"' +\r\n                    ' data-option-id=\"' + id + '\"' +\r\n                    ' data-option-label=\"' + label + '\"' +\r\n                    ' aria-label=\"' + label + '\"' +\r\n                    ' role=\"option\"' +\r\n                    ' data-thumb-width=\"' + width + '\"' +\r\n                    ' data-thumb-height=\"' + height + '\"';\r\n\r\n                attr += thumb !== '' ? ' data-option-tooltip-thumb=\"' + thumb + '\"' : '';\r\n                attr += value !== '' ? ' data-option-tooltip-value=\"' + value + '\"' : '';\r\n\r\n                swatchImageWidth = _.has(sizeConfig, 'swatchImage') ? sizeConfig.swatchImage.width : 30;\r\n                swatchImageHeight = _.has(sizeConfig, 'swatchImage') ? sizeConfig.swatchImage.height : 20;\r\n\r\n                if (!this.hasOwnProperty('products') || this.products.length <= 0) {\r\n                    attr += ' data-option-empty=\"true\"';\r\n                }\r\n\r\n                if (type === 0) {\r\n                    // Text\r\n                    html += '<div class=\"' + optionClass + ' text\" ' + attr + '>' + (value ? value : label) +\r\n                        '</div>';\r\n                } else if (type === 1) {\r\n                    // Color\r\n                    html += '<div class=\"' + optionClass + ' color\" ' + attr +\r\n                        ' style=\"background: ' + value +\r\n                        ' no-repeat center; background-size: initial;\">' + '' +\r\n                        '</div>';\r\n                } else if (type === 2) {\r\n                    // Image\r\n                    html += '<div class=\"' + optionClass + ' image\" ' + attr +\r\n                        ' style=\"background: url(' + value + ') no-repeat center; background-size: initial;width:' +\r\n                        swatchImageWidth + 'px; height:' + swatchImageHeight + 'px\">' + '' +\r\n                        '</div>';\r\n                } else if (type === 3) {\r\n                    // Clear\r\n                    html += '<div class=\"' + optionClass + '\" ' + attr + '></div>';\r\n                } else {\r\n                    // Default\r\n                    html += '<div class=\"' + optionClass + '\" ' + attr + '>' + label + '</div>';\r\n                }\r\n            });\r\n\r\n            return html;\r\n        },\r\n\r\n        /**\r\n         * Render select by part of config\r\n         *\r\n         * @param {Object} config\r\n         * @param {String} chooseText\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _RenderSwatchSelect: function (config, chooseText) {\r\n            var html;\r\n\r\n            if (this.options.jsonSwatchConfig.hasOwnProperty(config.id)) {\r\n                return '';\r\n            }\r\n\r\n            html =\r\n                '<select class=\"' + this.options.classes.selectClass + ' ' + config.code + '\">' +\r\n                '<option value=\"0\" data-option-id=\"0\">' + chooseText + '</option>';\r\n\r\n            $.each(config.options, function () {\r\n                var label = this.label,\r\n                    attr = ' value=\"' + this.id + '\" data-option-id=\"' + this.id + '\"';\r\n\r\n                if (!this.hasOwnProperty('products') || this.products.length <= 0) {\r\n                    attr += ' data-option-empty=\"true\"';\r\n                }\r\n\r\n                html += '<option ' + attr + '>' + label + '</option>';\r\n            });\r\n\r\n            html += '</select>';\r\n\r\n            return html;\r\n        },\r\n\r\n        /**\r\n         * Input for submit form.\r\n         * This control shouldn't have \"type=hidden\", \"display: none\" for validation work :(\r\n         *\r\n         * @param {Object} config\r\n         * @private\r\n         */\r\n        _RenderFormInput: function (config) {\r\n            return '<input class=\"' + this.options.classes.attributeInput + ' super-attribute-select\" ' +\r\n                'name=\"super_attribute[' + config.id + ']\" ' +\r\n                'type=\"text\" ' +\r\n                'value=\"\" ' +\r\n                'data-selector=\"super_attribute[' + config.id + ']\" ' +\r\n                'data-validate=\"{required: true}\" ' +\r\n                'aria-required=\"true\" ' +\r\n                'aria-invalid=\"false\">';\r\n        },\r\n\r\n        /**\r\n         * Event listener\r\n         *\r\n         * @private\r\n         */\r\n        _EventListener: function () {\r\n            var $widget = this,\r\n                options = this.options.classes,\r\n                target;\r\n\r\n            $widget.element.on('click', '.' + options.optionClass, function () {\r\n                return $widget._OnClick($(this), $widget);\r\n            });\r\n\r\n            $widget.element.on('change', '.' + options.selectClass, function () {\r\n                return $widget._OnChange($(this), $widget);\r\n            });\r\n\r\n            $widget.element.on('click', '.' + options.moreButton, function (e) {\r\n                e.preventDefault();\r\n\r\n                return $widget._OnMoreClick($(this));\r\n            });\r\n\r\n            $widget.element.on('keydown', function (e) {\r\n                if (e.which === 13) {\r\n                    target = $(e.target);\r\n\r\n                    if (target.is('.' + options.optionClass)) {\r\n                        return $widget._OnClick(target, $widget);\r\n                    } else if (target.is('.' + options.selectClass)) {\r\n                        return $widget._OnChange(target, $widget);\r\n                    } else if (target.is('.' + options.moreButton)) {\r\n                        e.preventDefault();\r\n\r\n                        return $widget._OnMoreClick(target);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Load media gallery using ajax or json config.\r\n         *\r\n         * @private\r\n         */\r\n        _loadMedia: function () {\r\n            var $main = this.inProductList ?\r\n                    this.element.parents('.product-item-info') :\r\n                    this.element.parents('.column.main'),\r\n                images;\r\n\r\n            if (this.options.useAjax) {\r\n                this._debouncedLoadProductMedia();\r\n            }  else {\r\n                images = this.options.jsonConfig.images[this.getProduct()];\r\n\r\n                if (!images) {\r\n                    images = this.options.mediaGalleryInitial;\r\n                }\r\n                this.updateBaseImage(this._sortImages(images), $main, !this.inProductList);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sorting images array\r\n         *\r\n         * @private\r\n         */\r\n        _sortImages: function (images) {\r\n            return _.sortBy(images, function (image) {\r\n                return parseInt(image.position, 10);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Event for swatch options\r\n         *\r\n         * @param {Object} $this\r\n         * @param {Object} $widget\r\n         * @private\r\n         */\r\n        _OnClick: function ($this, $widget) {\r\n            var $parent = $this.parents('.' + $widget.options.classes.attributeClass),\r\n                $wrapper = $this.parents('.' + $widget.options.classes.attributeOptionsWrapper),\r\n                $label = $parent.find('.' + $widget.options.classes.attributeSelectedOptionLabelClass),\r\n                attributeId = $parent.data('attribute-id'),\r\n                $input = $parent.find('.' + $widget.options.classes.attributeInput),\r\n                checkAdditionalData = JSON.parse(this.options.jsonSwatchConfig[attributeId]['additional_data']),\r\n                $priceBox = $widget.element.parents($widget.options.selectorProduct)\r\n                    .find(this.options.selectorProductPrice);\r\n\r\n            if ($widget.inProductList) {\r\n                $input = $widget.productForm.find(\r\n                    '.' + $widget.options.classes.attributeInput + '[name=\"super_attribute[' + attributeId + ']\"]'\r\n                );\r\n            }\r\n\r\n            if ($this.hasClass('disabled')) {\r\n                return;\r\n            }\r\n\r\n            if ($this.hasClass('selected')) {\r\n                $parent.removeAttr('data-option-selected').find('.selected').removeClass('selected');\r\n                $input.val('');\r\n                $label.text('');\r\n                $this.attr('aria-checked', false);\r\n            } else {\r\n                $parent.attr('data-option-selected', $this.data('option-id')).find('.selected').removeClass('selected');\r\n                $label.text($this.data('option-label'));\r\n                $input.val($this.data('option-id'));\r\n                $input.attr('data-attr-name', this._getAttributeCodeById(attributeId));\r\n                $this.addClass('selected');\r\n                $widget._toggleCheckedAttributes($this, $wrapper);\r\n            }\r\n\r\n            $widget._Rebuild();\r\n\r\n            if ($priceBox.is(':data(mage-priceBox)')) {\r\n                $widget._UpdatePrice();\r\n            }\r\n\r\n            $(document).trigger('updateMsrpPriceBlock',\r\n                [\r\n                    this._getSelectedOptionPriceIndex(),\r\n                    $widget.options.jsonConfig.optionPrices,\r\n                    $priceBox\r\n                ]);\r\n\r\n            if (parseInt(checkAdditionalData['update_product_preview_image'], 10) === 1) {\r\n                $widget._loadMedia();\r\n            }\r\n\r\n            $input.trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Get selected option price index\r\n         *\r\n         * @return {String|undefined}\r\n         * @private\r\n         */\r\n        _getSelectedOptionPriceIndex: function () {\r\n            var allowedProduct = this._getAllowedProductWithMinPrice(this._CalcProducts());\r\n\r\n            if (_.isEmpty(allowedProduct)) {\r\n                return undefined;\r\n            }\r\n\r\n            return allowedProduct;\r\n        },\r\n\r\n        /**\r\n         * Get human readable attribute code (eg. size, color) by it ID from configuration\r\n         *\r\n         * @param {Number} attributeId\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getAttributeCodeById: function (attributeId) {\r\n            var attribute = this.options.jsonConfig.mappedAttributes[attributeId];\r\n\r\n            return attribute ? attribute.code : attributeId;\r\n        },\r\n\r\n        /**\r\n         * Toggle accessibility attributes\r\n         *\r\n         * @param {Object} $this\r\n         * @param {Object} $wrapper\r\n         * @private\r\n         */\r\n        _toggleCheckedAttributes: function ($this, $wrapper) {\r\n            $wrapper.attr('aria-activedescendant', $this.attr('id'))\r\n                    .find('.' + this.options.classes.optionClass).attr('aria-checked', false);\r\n            $this.attr('aria-checked', true);\r\n        },\r\n\r\n        /**\r\n         * Event for select\r\n         *\r\n         * @param {Object} $this\r\n         * @param {Object} $widget\r\n         * @private\r\n         */\r\n        _OnChange: function ($this, $widget) {\r\n            var $parent = $this.parents('.' + $widget.options.classes.attributeClass),\r\n                attributeId = $parent.data('attribute-id'),\r\n                $input = $parent.find('.' + $widget.options.classes.attributeInput);\r\n\r\n            if ($widget.productForm.length > 0) {\r\n                $input = $widget.productForm.find(\r\n                    '.' + $widget.options.classes.attributeInput + '[name=\"super_attribute[' + attributeId + ']\"]'\r\n                );\r\n            }\r\n\r\n            if ($this.val() > 0) {\r\n                $parent.attr('data-option-selected', $this.val());\r\n                $input.val($this.val());\r\n            } else {\r\n                $parent.removeAttr('data-option-selected');\r\n                $input.val('');\r\n            }\r\n\r\n            $widget._Rebuild();\r\n            $widget._UpdatePrice();\r\n            $widget._loadMedia();\r\n            $input.trigger('change');\r\n        },\r\n\r\n        /**\r\n         * Event for more switcher\r\n         *\r\n         * @param {Object} $this\r\n         * @private\r\n         */\r\n        _OnMoreClick: function ($this) {\r\n            $this.nextAll().show();\r\n            $this.trigger('blur').remove();\r\n        },\r\n\r\n        /**\r\n         * Rewind options for controls\r\n         *\r\n         * @private\r\n         */\r\n        _Rewind: function (controls) {\r\n            controls.find('div[data-option-id], option[data-option-id]')\r\n                .removeClass('disabled')\r\n                .prop('disabled', false);\r\n            controls.find('div[data-option-empty], option[data-option-empty]')\r\n                .attr('disabled', true)\r\n                .addClass('disabled')\r\n                .attr('tabindex', '-1');\r\n        },\r\n\r\n        /**\r\n         * Rebuild container\r\n         *\r\n         * @private\r\n         */\r\n        _Rebuild: function () {\r\n            var $widget = this,\r\n                controls = $widget.element.find('.' + $widget.options.classes.attributeClass + '[data-attribute-id]'),\r\n                selected = controls.filter('[data-option-selected]');\r\n\r\n            // Enable all options\r\n            $widget._Rewind(controls);\r\n\r\n            // done if nothing selected\r\n            if (selected.length <= 0) {\r\n                return;\r\n            }\r\n\r\n            // Disable not available options\r\n            controls.each(function () {\r\n                var $this = $(this),\r\n                    id = $this.data('attribute-id'),\r\n                    products = $widget._CalcProducts(id);\r\n\r\n                if (selected.length === 1 && selected.first().data('attribute-id') === id) {\r\n                    return;\r\n                }\r\n\r\n                $this.find('[data-option-id]').each(function () {\r\n                    var $element = $(this),\r\n                        option = $element.data('option-id');\r\n\r\n                    if (!$widget.optionsMap.hasOwnProperty(id) || !$widget.optionsMap[id].hasOwnProperty(option) ||\r\n                        $element.hasClass('selected') ||\r\n                        $element.is(':selected')) {\r\n                        return;\r\n                    }\r\n\r\n                    if (_.intersection(products, $widget.optionsMap[id][option].products).length <= 0) {\r\n                        $element.attr('disabled', true).addClass('disabled');\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get selected product list\r\n         *\r\n         * @returns {Array}\r\n         * @private\r\n         */\r\n        _CalcProducts: function ($skipAttributeId) {\r\n            var $widget = this,\r\n                selectedOptions = '.' + $widget.options.classes.attributeClass + '[data-option-selected]',\r\n                products = [];\r\n\r\n            // Generate intersection of products\r\n            $widget.element.find(selectedOptions).each(function () {\r\n                var id = $(this).data('attribute-id'),\r\n                    option = $(this).attr('data-option-selected');\r\n\r\n                if ($skipAttributeId !== undefined && $skipAttributeId === id) {\r\n                    return;\r\n                }\r\n\r\n                if (!$widget.optionsMap.hasOwnProperty(id) || !$widget.optionsMap[id].hasOwnProperty(option)) {\r\n                    return;\r\n                }\r\n\r\n                if (products.length === 0) {\r\n                    products = $widget.optionsMap[id][option].products;\r\n                } else {\r\n                    products = _.intersection(products, $widget.optionsMap[id][option].products);\r\n                }\r\n            });\r\n\r\n            return products;\r\n        },\r\n\r\n        /**\r\n         * Update total price\r\n         *\r\n         * @private\r\n         */\r\n        _UpdatePrice: function () {\r\n            var $widget = this,\r\n                $product = $widget.element.parents($widget.options.selectorProduct),\r\n                $productPrice = $product.find(this.options.selectorProductPrice),\r\n                result = $widget._getNewPrices(),\r\n                tierPriceHtml,\r\n                isShow;\r\n\r\n            $productPrice.trigger(\r\n                'updatePrice',\r\n                {\r\n                    'prices': $widget._getPrices(result, $productPrice.priceBox('option').prices)\r\n                }\r\n            );\r\n\r\n            isShow = typeof result != 'undefined' && result.oldPrice.amount !== result.finalPrice.amount;\r\n\r\n            $productPrice.find('span:first').toggleClass('special-price', isShow);\r\n\r\n            $product.find(this.options.slyOldPriceSelector)[isShow ? 'show' : 'hide']();\r\n\r\n            if (typeof result != 'undefined' && result.tierPrices && result.tierPrices.length) {\r\n                if (this.options.tierPriceTemplate) {\r\n                    tierPriceHtml = mageTemplate(\r\n                        this.options.tierPriceTemplate,\r\n                        {\r\n                            'tierPrices': result.tierPrices,\r\n                            '$t': $t,\r\n                            'currencyFormat': this.options.jsonConfig.currencyFormat,\r\n                            'priceUtils': priceUtils\r\n                        }\r\n                    );\r\n                    $(this.options.tierPriceBlockSelector).html(tierPriceHtml).show();\r\n                }\r\n            } else {\r\n                $(this.options.tierPriceBlockSelector).hide();\r\n            }\r\n\r\n            $(this.options.normalPriceLabelSelector).hide();\r\n\r\n            _.each($('.' + this.options.classes.attributeOptionsWrapper), function (attribute) {\r\n                if ($(attribute).find('.' + this.options.classes.optionClass + '.selected').length === 0) {\r\n                    if ($(attribute).find('.' + this.options.classes.selectClass).length > 0) {\r\n                        _.each($(attribute).find('.' + this.options.classes.selectClass), function (dropdown) {\r\n                            if ($(dropdown).val() === '0') {\r\n                                $(this.options.normalPriceLabelSelector).show();\r\n                            }\r\n                        }.bind(this));\r\n                    } else {\r\n                        $(this.options.normalPriceLabelSelector).show();\r\n                    }\r\n                }\r\n            }.bind(this));\r\n        },\r\n\r\n        /**\r\n         * Get new prices for selected options\r\n         *\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getNewPrices: function () {\r\n            var $widget = this,\r\n                newPrices = $widget.options.jsonConfig.prices,\r\n                allowedProduct = this._getAllowedProductWithMinPrice(this._CalcProducts());\r\n\r\n            if (!_.isEmpty(allowedProduct)) {\r\n                newPrices = this.options.jsonConfig.optionPrices[allowedProduct];\r\n            }\r\n\r\n            return newPrices;\r\n        },\r\n\r\n        /**\r\n         * Get prices\r\n         *\r\n         * @param {Object} newPrices\r\n         * @param {Object} displayPrices\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _getPrices: function (newPrices, displayPrices) {\r\n            var $widget = this;\r\n\r\n            if (_.isEmpty(newPrices)) {\r\n                newPrices = $widget._getNewPrices();\r\n            }\r\n            _.each(displayPrices, function (price, code) {\r\n\r\n                if (newPrices[code]) {\r\n                    displayPrices[code].amount = newPrices[code].amount - displayPrices[code].amount;\r\n                }\r\n            });\r\n\r\n            return displayPrices;\r\n        },\r\n\r\n        /**\r\n         * Get product with minimum price from selected options.\r\n         *\r\n         * @param {Array} allowedProducts\r\n         * @returns {String}\r\n         * @private\r\n         */\r\n        _getAllowedProductWithMinPrice: function (allowedProducts) {\r\n            var optionPrices = this.options.jsonConfig.optionPrices,\r\n                product = {},\r\n                optionFinalPrice, optionMinPrice;\r\n\r\n            _.each(allowedProducts, function (allowedProduct) {\r\n                optionFinalPrice = parseFloat(optionPrices[allowedProduct].finalPrice.amount);\r\n\r\n                if (_.isEmpty(product) || optionFinalPrice < optionMinPrice) {\r\n                    optionMinPrice = optionFinalPrice;\r\n                    product = allowedProduct;\r\n                }\r\n            }, this);\r\n\r\n            return product;\r\n        },\r\n\r\n        /**\r\n         * Gets all product media and change current to the needed one\r\n         *\r\n         * @private\r\n         */\r\n        _LoadProductMedia: function () {\r\n            var $widget = this,\r\n                $this = $widget.element,\r\n                productData = this._determineProductData(),\r\n                mediaCallData,\r\n                mediaCacheKey,\r\n\r\n                /**\r\n                 * Processes product media data\r\n                 *\r\n                 * @param {Object} data\r\n                 * @returns void\r\n                 */\r\n                mediaSuccessCallback = function (data) {\r\n                    if (!(mediaCacheKey in $widget.options.mediaCache)) {\r\n                        $widget.options.mediaCache[mediaCacheKey] = data;\r\n                    }\r\n                    $widget._ProductMediaCallback($this, data, productData.isInProductView);\r\n                    setTimeout(function () {\r\n                        $widget._DisableProductMediaLoader($this);\r\n                    }, 300);\r\n                };\r\n\r\n            if (!$widget.options.mediaCallback) {\r\n                return;\r\n            }\r\n\r\n            mediaCallData = {\r\n                'product_id': this.getProduct()\r\n            };\r\n\r\n            mediaCacheKey = JSON.stringify(mediaCallData);\r\n\r\n            if (mediaCacheKey in $widget.options.mediaCache) {\r\n                $widget._XhrKiller();\r\n                $widget._EnableProductMediaLoader($this);\r\n                mediaSuccessCallback($widget.options.mediaCache[mediaCacheKey]);\r\n            } else {\r\n                mediaCallData.isAjax = true;\r\n                $widget._XhrKiller();\r\n                $widget._EnableProductMediaLoader($this);\r\n                $widget.xhr = $.ajax({\r\n                    url: $widget.options.mediaCallback,\r\n                    cache: true,\r\n                    type: 'GET',\r\n                    dataType: 'json',\r\n                    data: mediaCallData,\r\n                    success: mediaSuccessCallback\r\n                }).done(function () {\r\n                    $widget._XhrKiller();\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Enable loader\r\n         *\r\n         * @param {Object} $this\r\n         * @private\r\n         */\r\n        _EnableProductMediaLoader: function ($this) {\r\n            var $widget = this;\r\n\r\n            if ($('body.catalog-product-view').length > 0) {\r\n                $this.parents('.column.main').find('.photo.image')\r\n                    .addClass($widget.options.classes.loader);\r\n            } else {\r\n                //Category View\r\n                $this.parents('.product-item-info').find('.product-image-photo')\r\n                    .addClass($widget.options.classes.loader);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Disable loader\r\n         *\r\n         * @param {Object} $this\r\n         * @private\r\n         */\r\n        _DisableProductMediaLoader: function ($this) {\r\n            var $widget = this;\r\n\r\n            if ($('body.catalog-product-view').length > 0) {\r\n                $this.parents('.column.main').find('.photo.image')\r\n                    .removeClass($widget.options.classes.loader);\r\n            } else {\r\n                //Category View\r\n                $this.parents('.product-item-info').find('.product-image-photo')\r\n                    .removeClass($widget.options.classes.loader);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Callback for product media\r\n         *\r\n         * @param {Object} $this\r\n         * @param {String} response\r\n         * @param {Boolean} isInProductView\r\n         * @private\r\n         */\r\n        _ProductMediaCallback: function ($this, response, isInProductView) {\r\n            var $main = isInProductView ? $this.parents('.column.main') : $this.parents('.product-item-info'),\r\n                $widget = this,\r\n                images = [],\r\n\r\n                /**\r\n                 * Check whether object supported or not\r\n                 *\r\n                 * @param {Object} e\r\n                 * @returns {*|Boolean}\r\n                 */\r\n                support = function (e) {\r\n                    return e.hasOwnProperty('large') && e.hasOwnProperty('medium') && e.hasOwnProperty('small');\r\n                };\r\n\r\n            if (_.size($widget) < 1 || !support(response)) {\r\n                this.updateBaseImage(this.options.mediaGalleryInitial, $main, isInProductView);\r\n\r\n                return;\r\n            }\r\n\r\n            images.push({\r\n                full: response.large,\r\n                img: response.medium,\r\n                thumb: response.small,\r\n                isMain: true\r\n            });\r\n\r\n            if (response.hasOwnProperty('gallery')) {\r\n                $.each(response.gallery, function () {\r\n                    if (!support(this) || response.large === this.large) {\r\n                        return;\r\n                    }\r\n                    images.push({\r\n                        full: this.large,\r\n                        img: this.medium,\r\n                        thumb: this.small\r\n                    });\r\n                });\r\n            }\r\n\r\n            this.updateBaseImage(images, $main, isInProductView);\r\n        },\r\n\r\n        /**\r\n         * Check if images to update are initial and set their type\r\n         * @param {Array} images\r\n         */\r\n        _setImageType: function (images) {\r\n            var initial = this.options.mediaGalleryInitial[0].img;\r\n\r\n            if (images[0].img === initial) {\r\n                images = $.extend(true, [], this.options.mediaGalleryInitial);\r\n            } else {\r\n                images.map(function (img) {\r\n                    if (!img.type) {\r\n                        img.type = 'image';\r\n                    }\r\n                });\r\n            }\r\n\r\n            return images;\r\n        },\r\n\r\n        /**\r\n         * Update [gallery-placeholder] or [product-image-photo]\r\n         * @param {Array} images\r\n         * @param {jQuery} context\r\n         * @param {Boolean} isInProductView\r\n         */\r\n        updateBaseImage: function (images, context, isInProductView) {\r\n            var justAnImage = images[0],\r\n                initialImages = this.options.mediaGalleryInitial,\r\n                imagesToUpdate,\r\n                gallery = context.find(this.options.mediaGallerySelector).data('gallery'),\r\n                isInitial;\r\n\r\n            if (isInProductView) {\r\n                if (_.isUndefined(gallery)) {\r\n                    context.find(this.options.mediaGallerySelector).on('gallery:loaded', function () {\r\n                        this.updateBaseImage(images, context, isInProductView);\r\n                    }.bind(this));\r\n\r\n                    return;\r\n                }\r\n\r\n                imagesToUpdate = images.length ? this._setImageType($.extend(true, [], images)) : [];\r\n                isInitial = _.isEqual(imagesToUpdate, initialImages);\r\n\r\n                if (this.options.gallerySwitchStrategy === 'prepend' && !isInitial) {\r\n                    imagesToUpdate = imagesToUpdate.concat(initialImages);\r\n                }\r\n\r\n                imagesToUpdate = this._setImageIndex(imagesToUpdate);\r\n\r\n                gallery.updateData(imagesToUpdate);\r\n                this._addFotoramaVideoEvents(isInitial);\r\n            } else if (justAnImage && justAnImage.img) {\r\n                context.find('.product-image-photo').attr('src', justAnImage.img);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add video events\r\n         *\r\n         * @param {Boolean} isInitial\r\n         * @private\r\n         */\r\n        _addFotoramaVideoEvents: function (isInitial) {\r\n            if (_.isUndefined($.mage.AddFotoramaVideoEvents)) {\r\n                return;\r\n            }\r\n\r\n            if (isInitial) {\r\n                $(this.options.mediaGallerySelector).AddFotoramaVideoEvents();\r\n\r\n                return;\r\n            }\r\n\r\n            $(this.options.mediaGallerySelector).AddFotoramaVideoEvents({\r\n                selectedOption: this.getProduct(),\r\n                dataMergeStrategy: this.options.gallerySwitchStrategy\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set correct indexes for image set.\r\n         *\r\n         * @param {Array} images\r\n         * @private\r\n         */\r\n        _setImageIndex: function (images) {\r\n            var length = images.length,\r\n                i;\r\n\r\n            for (i = 0; length > i; i++) {\r\n                images[i].i = i + 1;\r\n            }\r\n\r\n            return images;\r\n        },\r\n\r\n        /**\r\n         * Kill doubled AJAX requests\r\n         *\r\n         * @private\r\n         */\r\n        _XhrKiller: function () {\r\n            var $widget = this;\r\n\r\n            if ($widget.xhr !== undefined && $widget.xhr !== null) {\r\n                $widget.xhr.abort();\r\n                $widget.xhr = null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Emulate mouse click on all swatches that should be selected\r\n         * @param {Object} [selectedAttributes]\r\n         * @private\r\n         */\r\n        _EmulateSelected: function (selectedAttributes) {\r\n            $.each(selectedAttributes, $.proxy(function (attributeCode, optionId) {\r\n                var elem = this.element.find('.' + this.options.classes.attributeClass +\r\n                    '[data-attribute-code=\"' + attributeCode + '\"] [data-option-id=\"' + optionId + '\"]'),\r\n                    parentInput = elem.parent();\r\n\r\n                if (elem.hasClass('selected')) {\r\n                    return;\r\n                }\r\n\r\n                if (parentInput.hasClass(this.options.classes.selectClass)) {\r\n                    parentInput.val(optionId);\r\n                    parentInput.trigger('change');\r\n                } else {\r\n                    elem.trigger('click');\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Emulate mouse click or selection change on all swatches that should be selected\r\n         * @param {Object} [selectedAttributes]\r\n         * @private\r\n         */\r\n        _EmulateSelectedByAttributeId: function (selectedAttributes) {\r\n            $.each(selectedAttributes, $.proxy(function (attributeId, optionId) {\r\n                var elem = this.element.find('.' + this.options.classes.attributeClass +\r\n                    '[data-attribute-id=\"' + attributeId + '\"] [data-option-id=\"' + optionId + '\"]'),\r\n                    parentInput = elem.parent();\r\n\r\n                if (elem.hasClass('selected')) {\r\n                    return;\r\n                }\r\n\r\n                if (parentInput.hasClass(this.options.classes.selectClass)) {\r\n                    parentInput.val(optionId);\r\n                    parentInput.trigger('change');\r\n                } else {\r\n                    elem.trigger('click');\r\n                }\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Get default options values settings with either URL query parameters\r\n         * @private\r\n         */\r\n        _getSelectedAttributes: function () {\r\n            var hashIndex = window.location.href.indexOf('#'),\r\n                selectedAttributes = {},\r\n                params;\r\n\r\n            if (hashIndex !== -1) {\r\n                params = $.parseQuery(window.location.href.substr(hashIndex + 1));\r\n\r\n                selectedAttributes = _.invert(_.mapObject(_.invert(params), function (attributeId) {\r\n                    var attribute = this.options.jsonConfig.mappedAttributes[attributeId];\r\n\r\n                    return attribute ? attribute.code : attributeId;\r\n                }.bind(this)));\r\n            }\r\n\r\n            return selectedAttributes;\r\n        },\r\n\r\n        /**\r\n         * Callback which fired after gallery gets initialized.\r\n         *\r\n         * @param {HTMLElement} element - DOM element associated with a gallery.\r\n         */\r\n        _onGalleryLoaded: function (element) {\r\n            var galleryObject = element.data('gallery');\r\n\r\n            this.options.mediaGalleryInitial = galleryObject.returnCurrentImages();\r\n        },\r\n\r\n        /**\r\n         * Sets mediaCache for cases when jsonConfig contains preSelectedGallery on layered navigation result pages\r\n         *\r\n         * @private\r\n         */\r\n        _setPreSelectedGallery: function () {\r\n            var mediaCallData;\r\n\r\n            if (this.options.jsonConfig.preSelectedGallery) {\r\n                mediaCallData = {\r\n                    'product_id': this.getProduct()\r\n                };\r\n\r\n                this.options.mediaCache[JSON.stringify(mediaCallData)] = this.options.jsonConfig.preSelectedGallery;\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.SwatchRenderer;\r\n});\r\n","Magento_Tax/js/price/adjustment.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'Magento_Ui/js/grid/columns/column',\r\n    'mage/translate'\r\n], function (Element, $t) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            bodyTmpl: 'Magento_Tax/price/adjustment',\r\n            taxPriceType: 'final_price',\r\n            taxPriceCssClass: 'price-including-tax',\r\n            bothPrices: 3,\r\n            inclTax: 2,\r\n            exclTax: 1,\r\n            modules: {\r\n                price: '${ $.parentName }'\r\n            },\r\n            listens: {\r\n                price: 'initializePriceAttributes'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * {@inheritdoc}\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initializePriceAttributes();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update parent price.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initializePriceAttributes: function () {\r\n            if (this.displayBothPrices && this.price()) {\r\n                this.price().priceWrapperCssClasses = this.taxPriceCssClass;\r\n                this.price().priceWrapperAttr = {\r\n                    'data-label': $t('Incl. Tax')\r\n                };\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get price tax adjustment.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} tax html\r\n         */\r\n        getTax: function (row) {\r\n            return row['price_info']['extension_attributes']['tax_adjustments']['formatted_prices'][this.taxPriceType];\r\n        },\r\n\r\n        /**\r\n         * UnsanitizedHtml version of getTax.\r\n         *\r\n         * @param {Object} row\r\n         * @return {HTMLElement} tax html\r\n         */\r\n        getTaxUnsanitizedHtml: function (row) {\r\n            return this.getTax(row);\r\n        },\r\n\r\n        /**\r\n         * Set price tax type.\r\n         *\r\n         * @param {String} priceType\r\n         * @return {Object}\r\n         */\r\n        setPriceType: function (priceType) {\r\n            this.taxPriceType = priceType;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Return whether display setting is to display\r\n         * both price including tax and price excluding tax.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        displayBothPrices: function () {\r\n            return +this.source.data.displayTaxes === this.bothPrices;\r\n        },\r\n\r\n        /**\r\n         * Return whether display setting is to display price including tax.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        displayPriceIncludeTax: function () {\r\n            return +this.source.data.displayTaxes === this.inclTax;\r\n        },\r\n\r\n        /**\r\n         * Return whether display setting is to display price excluding tax.\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        displayPriceExclTax: function () {\r\n            return +this.source.data.displayTaxes === this.exclTax;\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/cart/totals/grand-total.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Tax/js/view/checkout/summary/grand-total'\r\n], function (Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @override\r\n         */\r\n        isDisplayed: function () {\r\n            return true;\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/cart/totals/shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Tax/js/view/checkout/summary/shipping',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @override\r\n         */\r\n        isCalculated: function () {\r\n            return !!quote.shippingMethod();\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        getShippingMethodTitle: function () {\r\n            return '(' + this._super() + ')';\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/cart/totals/tax.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Tax/js/view/checkout/summary/tax',\r\n    'Magento_Checkout/js/model/totals'\r\n], function (Component, totals) {\r\n    'use strict';\r\n\r\n    var isFullTaxSummaryDisplayed = window.checkoutConfig.isFullTaxSummaryDisplayed,\r\n        isZeroTaxDisplayed = window.checkoutConfig.isZeroTaxDisplayed;\r\n\r\n    return Component.extend({\r\n        /**\r\n         * @override\r\n         */\r\n        ifShowValue: function () {\r\n            if (this.getPureValue() === 0) {\r\n                return isZeroTaxDisplayed;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        ifShowDetails: function () {\r\n            return this.getPureValue() > 0 && isFullTaxSummaryDisplayed;\r\n        },\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        isCalculated: function () {\r\n            return this.totals() && totals.getSegment('tax') !== null;\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/minicart/subtotal/totals.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data'\r\n], function (ko, Component, customerData) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        displaySubtotal: ko.observable(true),\r\n\r\n        /**\r\n         * @override\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            this.cart = customerData.get('cart');\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/shipping_method/price.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'uiComponent',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Catalog/js/price-utils'\r\n], function (Component, quote, priceUtils) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'Magento_Tax/checkout/shipping_method/price'\r\n        },\r\n        isDisplayShippingPriceExclTax: window.checkoutConfig.isDisplayShippingPriceExclTax,\r\n        isDisplayShippingBothPrices: window.checkoutConfig.isDisplayShippingBothPrices,\r\n\r\n        /**\r\n         * @param {Object} item\r\n         * @return {Boolean}\r\n         */\r\n        isPriceEqual: function (item) {\r\n            return item['price_excl_tax'] != item['price_incl_tax']; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @param {*} price\r\n         * @return {*|String}\r\n         */\r\n        getFormattedPrice: function (price) {\r\n            //todo add format data\r\n            return priceUtils.formatPrice(price, quote.getPriceFormat());\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/summary/grand-total.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Catalog/js/price-utils',\r\n    'Magento_Checkout/js/model/totals'\r\n], function (Component, quote, priceUtils, totals) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            isFullTaxSummaryDisplayed: window.checkoutConfig.isFullTaxSummaryDisplayed || false,\r\n            template: 'Magento_Tax/checkout/summary/grand-total'\r\n        },\r\n        totals: quote.getTotals(),\r\n        isTaxDisplayedInGrandTotal: window.checkoutConfig.includeTaxInGrandTotal || false,\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        isDisplayed: function () {\r\n            return this.isFullMode();\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            var price = 0;\r\n\r\n            if (this.totals()) {\r\n                price = totals.getSegment('grand_total').value;\r\n            }\r\n\r\n            return this.getFormattedPrice(price);\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getBaseValue: function () {\r\n            var price = 0;\r\n\r\n            if (this.totals()) {\r\n                price = this.totals()['base_grand_total'];\r\n            }\r\n\r\n            return priceUtils.formatPrice(price, quote.getBasePriceFormat());\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getGrandTotalExclTax: function () {\r\n            var total = this.totals();\r\n\r\n            if (!total) {\r\n                return 0;\r\n            }\r\n\r\n            return this.getFormattedPrice(total['grand_total']);\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isBaseGrandTotalDisplayNeeded: function () {\r\n            var total = this.totals();\r\n\r\n            if (!total) {\r\n                return false;\r\n            }\r\n\r\n            return total['base_currency_code'] != total['quote_currency_code']; //eslint-disable-line eqeqeq\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/summary/shipping.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'Magento_Checkout/js/view/summary/shipping',\r\n    'Magento_Checkout/js/model/quote'\r\n], function ($, Component, quote) {\r\n    'use strict';\r\n\r\n    var displayMode = window.checkoutConfig.reviewShippingDisplayMode;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            displayMode: displayMode,\r\n            template: 'Magento_Tax/checkout/summary/shipping'\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isBothPricesDisplayed: function () {\r\n            return this.displayMode == 'both'; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isIncludingDisplayed: function () {\r\n            return this.displayMode == 'including'; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isExcludingDisplayed: function () {\r\n            return this.displayMode == 'excluding'; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {*|Boolean}\r\n         */\r\n        isCalculated: function () {\r\n            return this.totals() && this.isFullMode() && quote.shippingMethod() != null;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getIncludingValue: function () {\r\n            var price;\r\n\r\n            if (!this.isCalculated()) {\r\n                return this.notCalculatedMessage;\r\n            }\r\n            price = this.totals()['shipping_incl_tax'];\r\n\r\n            return this.getFormattedPrice(price);\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getExcludingValue: function () {\r\n            var price;\r\n\r\n            if (!this.isCalculated()) {\r\n                return this.notCalculatedMessage;\r\n            }\r\n            price = this.totals()['shipping_amount'];\r\n\r\n            return this.getFormattedPrice(price);\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/summary/subtotal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote'\r\n], function (Component, quote) {\r\n    'use strict';\r\n\r\n    var displaySubtotalMode = window.checkoutConfig.reviewTotalsDisplayMode;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            displaySubtotalMode: displaySubtotalMode,\r\n            template: 'Magento_Tax/checkout/summary/subtotal'\r\n        },\r\n        totals: quote.getTotals(),\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValue: function () {\r\n            var price = 0;\r\n\r\n            if (this.totals()) {\r\n                price = this.totals().subtotal;\r\n            }\r\n\r\n            return this.getFormattedPrice(price);\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isBothPricesDisplayed: function () {\r\n            return this.displaySubtotalMode == 'both'; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isIncludingTaxDisplayed: function () {\r\n            return this.displaySubtotalMode == 'including'; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {*|String}\r\n         */\r\n        getValueInclTax: function () {\r\n            var price = 0;\r\n\r\n            if (this.totals()) {\r\n                price = this.totals()['subtotal_incl_tax'];\r\n            }\r\n\r\n            return this.getFormattedPrice(price);\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/summary/tax.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'Magento_Checkout/js/view/summary/abstract-total',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/totals',\r\n    'mage/translate',\r\n    'underscore'\r\n], function (ko, Component, quote, totals, $t, _) {\r\n    'use strict';\r\n\r\n    var isTaxDisplayedInGrandTotal = window.checkoutConfig.includeTaxInGrandTotal,\r\n        isFullTaxSummaryDisplayed = window.checkoutConfig.isFullTaxSummaryDisplayed,\r\n        isZeroTaxDisplayed = window.checkoutConfig.isZeroTaxDisplayed,\r\n        taxAmount = 0,\r\n        rates = 0;\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            isTaxDisplayedInGrandTotal: isTaxDisplayedInGrandTotal,\r\n            notCalculatedMessage: $t('Not yet calculated'),\r\n            template: 'Magento_Tax/checkout/summary/tax'\r\n        },\r\n        totals: quote.getTotals(),\r\n        isFullTaxSummaryDisplayed: isFullTaxSummaryDisplayed,\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        ifShowValue: function () {\r\n            if (this.isFullMode() && this.getPureValue() == 0) { //eslint-disable-line eqeqeq\r\n                return isZeroTaxDisplayed;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        ifShowDetails: function () {\r\n            if (!this.isFullMode()) {\r\n                return false;\r\n            }\r\n\r\n            return this.getPureValue() > 0 && isFullTaxSummaryDisplayed;\r\n        },\r\n\r\n        /**\r\n         * @return {Number}\r\n         */\r\n        getPureValue: function () {\r\n            var amount = 0,\r\n                taxTotal;\r\n\r\n            if (this.totals()) {\r\n                taxTotal = totals.getSegment('tax');\r\n\r\n                if (taxTotal) {\r\n                    amount = taxTotal.value;\r\n                }\r\n            }\r\n\r\n            return amount;\r\n        },\r\n\r\n        /**\r\n         * @return {*|Boolean}\r\n         */\r\n        isCalculated: function () {\r\n            return this.totals() && this.isFullMode() && totals.getSegment('tax') != null;\r\n        },\r\n\r\n        /**\r\n         * @return {*}\r\n         */\r\n        getValue: function () {\r\n            var amount;\r\n\r\n            if (!this.isCalculated()) {\r\n                return this.notCalculatedMessage;\r\n            }\r\n            amount = totals.getSegment('tax').value;\r\n\r\n            return this.getFormattedPrice(amount);\r\n        },\r\n\r\n        /**\r\n         * @param {*} amount\r\n         * @return {*|String}\r\n         */\r\n        formatPrice: function (amount) {\r\n            return this.getFormattedPrice(amount);\r\n        },\r\n\r\n        /**\r\n         * @param {*} parent\r\n         * @param {*} percentage\r\n         * @return {*|String}\r\n         */\r\n        getTaxAmount: function (parent, percentage) {\r\n            var totalPercentage = 0;\r\n\r\n            taxAmount = parent.amount;\r\n            rates = parent.rates;\r\n            _.each(rates, function (rate) {\r\n                totalPercentage += parseFloat(rate.percent);\r\n            });\r\n\r\n            return this.getFormattedPrice(this.getPercentAmount(taxAmount, totalPercentage, percentage));\r\n        },\r\n\r\n        /**\r\n         * @param {*} amount\r\n         * @param {*} totalPercentage\r\n         * @param {*} percentage\r\n         * @return {*|String}\r\n         */\r\n        getPercentAmount: function (amount, totalPercentage, percentage) {\r\n            return parseFloat(amount * percentage / totalPercentage);\r\n        },\r\n\r\n        /**\r\n         * @return {Array}\r\n         */\r\n        getDetails: function () {\r\n            var taxSegment = totals.getSegment('tax');\r\n\r\n            if (taxSegment && taxSegment['extension_attributes']) {\r\n                return taxSegment['extension_attributes']['tax_grandtotal_details'];\r\n            }\r\n\r\n            return [];\r\n        }\r\n    });\r\n});\r\n","Magento_Tax/js/view/checkout/summary/item/details/subtotal.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\n\r\ndefine([\r\n    'Magento_Checkout/js/view/summary/item/details/subtotal'\r\n], function (subtotal) {\r\n    'use strict';\r\n\r\n    var displayPriceMode = window.checkoutConfig.reviewItemPriceDisplayMode || 'including';\r\n\r\n    return subtotal.extend({\r\n        defaults: {\r\n            displayPriceMode: displayPriceMode,\r\n            template: 'Magento_Tax/checkout/summary/item/details/subtotal'\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isPriceInclTaxDisplayed: function () {\r\n            return displayPriceMode == 'both' || displayPriceMode == 'including'; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @return {Boolean}\r\n         */\r\n        isPriceExclTaxDisplayed: function () {\r\n            return displayPriceMode == 'both' || displayPriceMode == 'excluding'; //eslint-disable-line eqeqeq\r\n        },\r\n\r\n        /**\r\n         * @param {Object} quoteItem\r\n         * @return {*|String}\r\n         */\r\n        getValueInclTax: function (quoteItem) {\r\n            return this.getFormattedPrice(quoteItem['row_total_incl_tax']);\r\n        },\r\n\r\n        /**\r\n         * @param {Object} quoteItem\r\n         * @return {*|String}\r\n         */\r\n        getValueExclTax: function (quoteItem) {\r\n            return this.getFormattedPrice(quoteItem['row_total']);\r\n        }\r\n\r\n    });\r\n});\r\n","Magento_Theme/js/cookie-status.js":"define([\r\n    'jquery',\r\n    'Magento_Ui/js/modal/modal',\r\n    'mage/translate'\r\n], function ($, modal) {\r\n    'use strict';\r\n\r\n    $.widget('mage.cookieStatus', {\r\n        options: {\r\n            type: 'popup',\r\n            responsive: true,\r\n            innerScroll: true,\r\n            autoOpen: true,\r\n            buttons: [{\r\n                text: $.mage.__('Close'),\r\n                class: 'cookie-status',\r\n\r\n                /**\r\n                 * Callback for click event\r\n                 */\r\n                click: function () {\r\n                    this.closeModal();\r\n                }\r\n            }]\r\n        },\r\n\r\n        /**\r\n         * Init object\r\n         * @private\r\n         */\r\n        _init: function () {\r\n\r\n            if (!navigator.cookieEnabled) {\r\n                modal(this.options, $('#cookie-status'));\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.cookieStatus;\r\n});\r\n","Magento_Theme/js/row-builder.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * JQuery UI Widget declaration: 'mage.rowBuilder'\r\n *\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'jquery-ui-modules/widget'\r\n], function ($, mageTemplate) {\r\n    'use strict';\r\n\r\n    $.widget('mage.rowBuilder', {\r\n\r\n        /**\r\n         * options with default values for setting up the template\r\n         */\r\n        options: {\r\n            //Default template options\r\n            rowTemplate: '#template-registrant',\r\n            rowContainer: '#registrant-container',\r\n            //Row index used by the template rows.\r\n            rowIndex: 0,\r\n            //Row count: Should not be set externally\r\n            rowCount: 0,\r\n            rowParentElem: '<li></li>',\r\n            rowContainerClass: 'fields',\r\n            addRowBtn: '#add-registrant-button',\r\n            btnRemoveIdPrefix: 'btn-remove',\r\n            btnRemoveSelector: '.btn-remove',\r\n            rowIdPrefix: 'row',\r\n            //This class is added to rows added after the first one. Adds the dotted separator\r\n            additionalRowClass: 'add-row',\r\n\r\n            /*\r\n             This is provided during widget instantiation. eg :\r\n             formDataPost : {\"formData\":formData,\"templateFields\":['field1-name','field2-name'] }\r\n             -\"formData\" is the multi-dimensional array of form field values : [['a','b'],['c','b']]\r\n             received from the server and encoded\r\n             -\"templateFields\" are the input fields in the template with index suffixed after the field name\r\n             eg field1-name{index}\r\n             */\r\n            formDataPost: null,\r\n            //Default selectors for add element of a template\r\n            addEventSelector: 'button',\r\n            //Default selectors for remove markup elements of a template\r\n            remEventSelector: 'a',\r\n            //This option allows adding first row delete option and a row separator\r\n            hideFirstRowAddSeparator: true,\r\n            //Max rows - This option should be set when instantiating the widget\r\n            maxRows: 1000,\r\n            maxRowsMsg: '#max-registrant-message'\r\n        },\r\n\r\n        /**\r\n         * Initialize create\r\n         * @private\r\n         */\r\n        _create: function () {\r\n            this.rowTemplate = mageTemplate(this.options.rowTemplate);\r\n\r\n            this.options.rowCount = this.options.rowIndex = 0;\r\n\r\n            //On document ready related tasks\r\n            $($.proxy(this.ready, this));\r\n\r\n            //Binding template-wide events handlers for adding and removing rows\r\n            this.element.on(\r\n                'click',\r\n                this.options.addEventSelector + this.options.addRowBtn,\r\n                $.proxy(this.handleAdd, this)\r\n            );\r\n            this.element.on(\r\n                'click',\r\n                this.options.remEventSelector + this.options.btnRemoveSelector,\r\n                $.proxy(this.handleRemove, this)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Initialize template\r\n         * @public\r\n         */\r\n        ready: function () {\r\n            if (this.options.formDataPost &&\r\n                this.options.formDataPost.formData &&\r\n                this.options.formDataPost.formData.length\r\n            ) {\r\n                this.processFormDataArr(this.options.formDataPost);\r\n            } else if (this.options.rowIndex === 0 && this.options.maxRows !== 0) {\r\n                //If no form data , then add default row\r\n                this.addRow(0);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Process and loop through all row data to create preselected values. This is used for any error on submit.\r\n         * For complex implementations the inheriting widget can override this behavior\r\n         * @public\r\n         * @param {Object} formDataArr\r\n         */\r\n        processFormDataArr: function (formDataArr) {\r\n            var formData = formDataArr.formData,\r\n                templateFields = formDataArr.templateFields,\r\n                formRow,\r\n                i, j;\r\n\r\n            for (i = this.options.rowIndex = 0; i < formData.length; this.options.rowIndex = i++) {\r\n                this.addRow(i);\r\n\r\n                formRow = formData[i];\r\n\r\n                for (j = 0; j < formRow.length; j++) {\r\n                    this.setFieldById(templateFields[j] + i, formRow[j]);\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * Initialize and create markup for template row. Add it to the parent container.\r\n         * The template processing will substitute row index at all places marked with _index_ in the template\r\n         * using the template\r\n         * @public\r\n         * @param {Number} index - current index/count of the created template. This will be used as the id\r\n         * @return {*}\r\n         */\r\n        addRow: function (index) {\r\n            var row = $(this.options.rowParentElem),\r\n                tmpl;\r\n\r\n            row.addClass(this.options.rowContainerClass).attr('id', this.options.rowIdPrefix + index);\r\n\r\n            tmpl = this.rowTemplate({\r\n                data: {\r\n                    _index_: index\r\n                }\r\n            });\r\n\r\n            $(tmpl).appendTo(row);\r\n\r\n            $(this.options.rowContainer).append(row).trigger('contentUpdated');\r\n\r\n            row.addClass(this.options.additionalRowClass);\r\n\r\n            //Remove 'delete' link and additionalRowClass for first row\r\n            if (this.options.rowIndex === 0 && this.options.hideFirstRowAddSeparator) {\r\n                $('#' + this._esc(this.options.btnRemoveIdPrefix) + '0').remove();\r\n                $('#' + this._esc(this.options.rowIdPrefix) + '0').removeClass(this.options.additionalRowClass);\r\n            }\r\n\r\n            this.maxRowCheck(++this.options.rowCount);\r\n\r\n            return row;\r\n        },\r\n\r\n        /**\r\n         * Remove return item information row\r\n         * @public\r\n         * @param {*} rowIndex - return item information row index\r\n         * @return {Boolean}\r\n         */\r\n        removeRow: function (rowIndex) {\r\n            $('#' + this._esc(this.options.rowIdPrefix) + rowIndex).remove();\r\n            this.maxRowCheck(--this.options.rowCount);\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Function to check if maximum rows are exceeded and render/hide maxMsg and Add btn\r\n         * @public\r\n         * @param {Number} rowIndex\r\n         */\r\n        maxRowCheck: function (rowIndex) {\r\n            var addRowBtn = $(this.options.addRowBtn),\r\n                maxRowMsg = $(this.options.maxRowsMsg);\r\n\r\n            //liIndex starts from 0\r\n            if (rowIndex >= this.options.maxRows) {\r\n                addRowBtn.hide();\r\n                maxRowMsg.show();\r\n            } else if (addRowBtn.is(':hidden')) {\r\n                addRowBtn.show();\r\n                maxRowMsg.hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set the value on given element\r\n         * @public\r\n         * @param {String} domId\r\n         * @param {String} value\r\n         */\r\n        setFieldById: function (domId, value) {\r\n            var x = $('#' + this._esc(domId));\r\n\r\n            if (x.length) {\r\n\r\n                if (x.is(':checkbox')) {\r\n                    x.attr('checked', true);\r\n                } else if (x.is('option')) {\r\n                    x.attr('selected', 'selected');\r\n                } else {\r\n                    x.val(value);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Delegated handler for adding a row\r\n         * @public\r\n         * @return {Boolean}\r\n         */\r\n        handleAdd: function () {\r\n            this.addRow(++this.options.rowIndex);\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Delegated handler for removing a selected row\r\n         * @public\r\n         * @param {Object} e - Native event object\r\n         * @return {Boolean}\r\n         */\r\n        handleRemove: function (e) {\r\n            this.removeRow($(e.currentTarget).closest('[id^=\"' + this.options.btnRemoveIdPrefix + '\"]')\r\n                .attr('id').replace(this.options.btnRemoveIdPrefix, ''));\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Utility function to add escape chars for jquery selector strings\r\n         * @private\r\n         * @param {String} str - String to be processed\r\n         * @return {String}\r\n         */\r\n        _esc: function (str) {\r\n            return str ? str.replace(/([ ;&,.+*~\\':\"!\\^$\\[\\]()=>|\\/@])/g, '\\\\$1') : str;\r\n        }\r\n    });\r\n\r\n    return $.mage.rowBuilder;\r\n});\r\n","Magento_Theme/js/model/breadcrumb-list.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([], function () {\r\n    'use strict';\r\n\r\n    return [];\r\n});\r\n","Magento_Theme/js/view/add-home-breadcrumb.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/* eslint-disable max-nested-callbacks, no-undef */\r\ndefine([\r\n    'jquery',\r\n    'Magento_Theme/js/model/breadcrumb-list',\r\n    'mage/translate'\r\n], function ($, breadcrumbList) {\r\n    'use strict';\r\n\r\n    /**\r\n     * @return {Object}\r\n     */\r\n    var homeCrumb = function () {\r\n        return {\r\n            name: 'home',\r\n            label: $.mage.__('Home'),\r\n            title: $.mage.__('Go to Home Page'),\r\n            link: BASE_URL || ''\r\n        };\r\n    };\r\n\r\n    return function (breadcrumb) {\r\n\r\n        breadcrumbList.unshift(homeCrumb());\r\n\r\n        return breadcrumb;\r\n    };\r\n});\r\n","Magento_Theme/js/view/breadcrumbs.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'mage/template',\r\n    'Magento_Theme/js/model/breadcrumb-list',\r\n    'text!Magento_Theme/templates/breadcrumbs.html',\r\n    'jquery-ui-modules/widget'\r\n], function ($, mageTemplate, breadcrumbList, tpl) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Breadcrumb Widget.\r\n     */\r\n    $.widget('mage.breadcrumbs', {\r\n\r\n        /** @inheritdoc */\r\n        _init: function () {\r\n            this._super();\r\n            this._render();\r\n        },\r\n\r\n        /**\r\n         * Render breadcrumb.\r\n         *\r\n         * @private\r\n         */\r\n        _render: function () {\r\n            var html,\r\n                crumbs = breadcrumbList,\r\n                template = mageTemplate(tpl);\r\n\r\n            this._decorate(crumbs);\r\n\r\n            html = template({\r\n                'breadcrumbs': crumbs\r\n            });\r\n\r\n            if (html.length) {\r\n                $(this.element).html(html);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Decorate list.\r\n         *\r\n         * @param {Array} list\r\n         * @private\r\n         */\r\n        _decorate: function (list) {\r\n\r\n            if (list.length) {\r\n                list[0].first = true;\r\n            }\r\n\r\n            if (list.length > 1) {\r\n                list[list.length - 1].last = true;\r\n            }\r\n        }\r\n    });\r\n\r\n    return $.mage.breadcrumbs;\r\n});\r\n","Magento_Theme/js/view/messages.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'uiComponent',\r\n    'Magento_Customer/js/customer-data',\r\n    'underscore',\r\n    'escaper',\r\n    'jquery/jquery-storageapi'\r\n], function ($, Component, customerData, _, escaper) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            cookieMessages: [],\r\n            messages: [],\r\n            allowedTags: ['div', 'span', 'b', 'strong', 'i', 'em', 'u', 'a']\r\n        },\r\n\r\n        /**\r\n         * Extends Component object by storage observable messages.\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n\r\n            this.cookieMessages = _.unique($.cookieStorage.get('mage-messages'), 'text');\r\n            this.messages = customerData.get('messages').extend({\r\n                disposableCustomerData: 'messages'\r\n            });\r\n\r\n            // Force to clean obsolete messages\r\n            if (!_.isEmpty(this.messages().messages)) {\r\n                customerData.set('messages', {});\r\n            }\r\n\r\n            $.mage.cookies.set('mage-messages', '', {\r\n                samesite: 'strict',\r\n                domain: ''\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Prepare the given message to be rendered as HTML\r\n         *\r\n         * @param {String} message\r\n         * @return {String}\r\n         */\r\n        prepareMessageForHtml: function (message) {\r\n            return escaper.escapeHtml(message, this.allowedTags);\r\n        }\r\n    });\r\n});\r\n","Magento_Translation/js/add-class.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine(['jquery'], function ($) {\r\n    'use strict';\r\n\r\n    return function (config, element) {\r\n        $(element).addClass(config.class);\r\n    };\r\n});\r\n","Magento_Translation/js/i18n-config.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    require.config({\r\n        config: {\r\n            'Magento_Ui/js/lib/knockout/bindings/i18n': {\r\n                inlineTranslation: true\r\n            }\r\n        }\r\n    });\r\n})();\r\n","Magento_Translation/js/mage-translation-dictionary.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'text!js-translation.json'\r\n], function (dict) {\r\n    'use strict';\r\n\r\n    return JSON.parse(dict);\r\n});\r\n","Magento_Ui/js/block-loader.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'Magento_Ui/js/lib/knockout/template/loader',\r\n    'mage/template'\r\n], function (ko, $, templateLoader, template) {\r\n    'use strict';\r\n\r\n    var blockLoaderTemplatePath = 'ui/block-loader',\r\n        blockContentLoadingClass = '_block-content-loading',\r\n        blockLoader,\r\n        blockLoaderClass,\r\n        blockLoaderElement = $.Deferred(),\r\n        loaderImageHref = $.Deferred();\r\n\r\n    templateLoader.loadTemplate(blockLoaderTemplatePath).done(function (blockLoaderTemplate) {\r\n        loaderImageHref.done(function (loaderHref) {\r\n            blockLoader = template(blockLoaderTemplate.trim(), {\r\n                loaderImageHref: loaderHref\r\n            });\r\n            blockLoader = $(blockLoader);\r\n            blockLoaderClass = '.' + blockLoader.attr('class');\r\n            blockLoaderElement.resolve();\r\n        });\r\n    });\r\n\r\n    /**\r\n     * Helper function to check if blockContentLoading class should be applied.\r\n     * @param {Object} element\r\n     * @returns {Boolean}\r\n     */\r\n    function isLoadingClassRequired(element) {\r\n        var position = element.css('position');\r\n\r\n        if (position === 'absolute' || position === 'fixed') {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Add loader to block.\r\n     * @param {Object} element\r\n     */\r\n    function addBlockLoader(element) {\r\n        element.find(':focus').trigger('blur');\r\n        element.find('input:disabled, select:disabled').addClass('_disabled');\r\n        element.find('input, select').prop('disabled', true);\r\n\r\n        if (isLoadingClassRequired(element)) {\r\n            element.addClass(blockContentLoadingClass);\r\n        }\r\n        element.append(blockLoader.clone());\r\n    }\r\n\r\n    /**\r\n     * Remove loader from block.\r\n     * @param {Object} element\r\n     */\r\n    function removeBlockLoader(element) {\r\n        if (!element.has(blockLoaderClass).length) {\r\n            return;\r\n        }\r\n        element.find(blockLoaderClass).remove();\r\n        element.find('input:not(\"._disabled\"), select:not(\"._disabled\")').prop('disabled', false);\r\n        element.find('input:disabled, select:disabled').removeClass('_disabled');\r\n        element.removeClass(blockContentLoadingClass);\r\n    }\r\n\r\n    return function (loaderHref) {\r\n        loaderImageHref.resolve(loaderHref);\r\n        ko.bindingHandlers.blockLoader = {\r\n            /**\r\n             * Process loader for block\r\n             * @param {String} element\r\n             * @param {Boolean} displayBlockLoader\r\n             */\r\n            update: function (element, displayBlockLoader) {\r\n                element = $(element);\r\n\r\n                if (ko.unwrap(displayBlockLoader())) {\r\n                    blockLoaderElement.done(addBlockLoader(element));\r\n                } else {\r\n                    blockLoaderElement.done(removeBlockLoader(element));\r\n                }\r\n            }\r\n        };\r\n    };\r\n});\r\n","Magento_Ui/js/core/app.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    './renderer/types',\r\n    './renderer/layout',\r\n    '../lib/knockout/bootstrap'\r\n], function (types, layout) {\r\n    'use strict';\r\n\r\n    return function (data, merge) {\r\n        types.set(data.types);\r\n        layout(data.components, undefined, true, merge);\r\n    };\r\n});\r\n","Magento_Ui/js/core/renderer/layout.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'jquery',\r\n    'mageUtils',\r\n    'uiRegistry',\r\n    './types',\r\n    '../../lib/logger/console-logger'\r\n], function (_, $, utils, registry, types, consoleLogger) {\r\n    'use strict';\r\n\r\n    var templates = registry.create(),\r\n        layout = {},\r\n        cachedConfig = {};\r\n\r\n    /**\r\n     * Build name from parent name and node name\r\n     *\r\n     * @param {Object} parent\r\n     * @param {Object} node\r\n     * @param {String} [name]\r\n     * @returns {String}\r\n     */\r\n    function getNodeName(parent, node, name) {\r\n        var parentName = parent && parent.name;\r\n\r\n        if (typeof name !== 'string') {\r\n            name = node.name || name;\r\n        }\r\n\r\n        return utils.fullPath(parentName, name);\r\n    }\r\n\r\n    /**\r\n     * Get node type from node or parent.\r\n     *\r\n     * @param {Object} parent\r\n     * @param {Object} node\r\n     * @returns {String}\r\n     */\r\n    function getNodeType(parent, node) {\r\n        return node.type || parent && parent.childType;\r\n    }\r\n\r\n    /**\r\n     * Get data scope based on parent data scope and node data scope.\r\n     *\r\n     * @param {Object} parent\r\n     * @param {Object} node\r\n     * @returns {String}\r\n     */\r\n    function getDataScope(parent, node) {\r\n        var dataScope = node.dataScope,\r\n            parentScope = parent && parent.dataScope;\r\n\r\n        return !utils.isEmpty(parentScope) ?\r\n            !utils.isEmpty(dataScope) ?\r\n                parentScope + '.' + dataScope :\r\n                parentScope :\r\n            dataScope || '';\r\n    }\r\n\r\n    /**\r\n     * Load node dependencies on other instances.\r\n     *\r\n     * @param {Object} node\r\n     * @returns {jQueryPromise}\r\n     */\r\n    function loadDeps(node) {\r\n        var loaded = $.Deferred(),\r\n            loggerUtils = consoleLogger.utils;\r\n\r\n        if (node.deps) {\r\n            consoleLogger.utils.asyncLog(\r\n                loaded,\r\n                {\r\n                    data: {\r\n                        component: node.name,\r\n                        deps: node.deps\r\n                    },\r\n                    messages: loggerUtils.createMessages(\r\n                        'depsStartRequesting',\r\n                        'depsFinishRequesting',\r\n                        'depsLoadingFail'\r\n                    )\r\n                }\r\n            );\r\n        }\r\n\r\n        registry.get(node.deps, function (deps) {\r\n            node.provider = node.extendProvider ? deps && deps.name : node.provider;\r\n            loaded.resolve(node);\r\n        });\r\n\r\n        return loaded.promise();\r\n    }\r\n\r\n    /**\r\n     * Load node component file via requirejs.\r\n     *\r\n     * @param {Object} node\r\n     * @returns {jQueryPromise}\r\n     */\r\n    function loadSource(node) {\r\n        var loaded = $.Deferred(),\r\n            source = node.component;\r\n\r\n        consoleLogger.info('componentStartLoading', {\r\n            component: node.component\r\n        });\r\n\r\n        require([source], function (constr) {\r\n            consoleLogger.info('componentFinishLoading', {\r\n                component: node.component\r\n            });\r\n            loaded.resolve(node, constr);\r\n        }, function () {\r\n            consoleLogger.error('componentLoadingFail', {\r\n                component: node.component\r\n            });\r\n        });\r\n\r\n        return loaded.promise();\r\n    }\r\n\r\n    /**\r\n     * Create a new component instance and set it to the registry.\r\n     *\r\n     * @param {Object} node\r\n     * @param {Function} Constr\r\n     */\r\n    function initComponent(node, Constr) {\r\n        var component = new Constr(_.omit(node, 'children'));\r\n\r\n        consoleLogger.info('componentStartInitialization', {\r\n            component: node.component,\r\n            componentName: node.name\r\n        });\r\n\r\n        registry.set(node.name, component);\r\n    }\r\n\r\n    /**\r\n     * Application entry point.\r\n     *\r\n     * @param {Object} nodes\r\n     * @param {Object} parent\r\n     * @param {Boolean} cached\r\n     * @param {Boolean} merge\r\n     * @returns {Boolean|undefined}\r\n     */\r\n    function run(nodes, parent, cached, merge) {\r\n        if (_.isBoolean(merge) && merge) {\r\n            layout.merge(nodes);\r\n\r\n            return false;\r\n        }\r\n\r\n        if (cached) {\r\n            cachedConfig[_.keys(nodes)[0]] = JSON.parse(JSON.stringify(nodes));\r\n        }\r\n\r\n        _.each(nodes || [], layout.iterator.bind(layout, parent));\r\n    }\r\n\r\n    _.extend(layout, {\r\n        /**\r\n         * Determines if node ready to be added or process it.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object|String} node\r\n         */\r\n        iterator: function (parent, node) {\r\n            var action = _.isString(node) ?\r\n                this.addChild :\r\n                this.process;\r\n\r\n            action.apply(this, arguments);\r\n        },\r\n\r\n        /**\r\n         * Prepare component.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object} node\r\n         * @param {String} name\r\n         * @returns {Object}\r\n         */\r\n        process: function (parent, node, name) {\r\n            if (!parent && node.parent) {\r\n                return this.waitParent(node, name);\r\n            }\r\n\r\n            if (node.nodeTemplate) {\r\n                return this.waitTemplate.apply(this, arguments);\r\n            }\r\n\r\n            node = this.build.apply(this, arguments);\r\n\r\n            if (!registry.has(node.name)) {\r\n                this.addChild(parent, node)\r\n                    .manipulate(node)\r\n                    .initComponent(node);\r\n            }\r\n\r\n            if (node) {\r\n                run(node.children, node);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Detailed processing of component config.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object} node\r\n         * @param {String} name\r\n         * @returns {Boolean|Object}\r\n         */\r\n        build: function (parent, node, name) {\r\n            var defaults    = parent && parent.childDefaults || {},\r\n                children    = this.filterDisabledChildren(node.children),\r\n                type        = getNodeType(parent, node),\r\n                dataScope   = getDataScope(parent, node),\r\n                component,\r\n                extendDeps  = true,\r\n                nodeName;\r\n\r\n            node.children = false;\r\n            node.extendProvider = true;\r\n\r\n            if (node.config && node.config.provider || node.provider) {\r\n                node.extendProvider = false;\r\n            }\r\n\r\n            if (node.config && node.config.deps || node.deps) {\r\n                extendDeps = false;\r\n            }\r\n\r\n            node = utils.extend({\r\n            }, types.get(type), defaults, node);\r\n\r\n            nodeName = getNodeName(parent, node, name);\r\n\r\n            if (registry.has(nodeName)) {\r\n                component = registry.get(nodeName);\r\n                component.children = children;\r\n\r\n                return component;\r\n            }\r\n\r\n            if (extendDeps && parent && parent.deps && type) {\r\n                node.deps = parent.deps;\r\n            }\r\n\r\n            _.extend(node, node.config || {}, {\r\n                index: node.name || name,\r\n                name: nodeName,\r\n                dataScope: dataScope,\r\n                parentName: utils.getPart(nodeName, -2),\r\n                parentScope: utils.getPart(dataScope, -2)\r\n            });\r\n\r\n            node.children = children;\r\n            node.componentType = node.type;\r\n\r\n            delete node.type;\r\n            delete node.config;\r\n\r\n            if (children) {\r\n                node.initChildCount = _.size(children);\r\n            }\r\n\r\n            if (node.isTemplate) {\r\n                node.isTemplate = false;\r\n\r\n                templates.set(node.name, node);\r\n                registry.get(node.parentName, function (parentComp) {\r\n                    parentComp.childTemplate = node;\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            if (node.componentDisabled === true) {\r\n                return false;\r\n            }\r\n\r\n            return node;\r\n        },\r\n\r\n        /**\r\n         * Filter out all disabled components.\r\n         *\r\n         * @param {Object} children\r\n         * @returns {*}\r\n         */\r\n        filterDisabledChildren: function (children) {\r\n            var cIds;\r\n\r\n            //cleanup children config.componentDisabled = true\r\n            if (children && typeof children === 'object') {\r\n                cIds = Object.keys(children);\r\n\r\n                if (cIds) {\r\n                    _.each(cIds, function (cId) {\r\n                        if (typeof children[cId] === 'object' &&\r\n                            children[cId].hasOwnProperty('config') &&\r\n                            typeof children[cId].config === 'object' &&\r\n                            children[cId].config.hasOwnProperty('componentDisabled') &&\r\n                            children[cId].config.componentDisabled === true) {\r\n                            delete children[cId];\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            return children;\r\n        },\r\n\r\n        /**\r\n         * Init component.\r\n         *\r\n         * @param {Object} node\r\n         * @returns {Object}\r\n         */\r\n        initComponent: function (node) {\r\n            if (!node.component) {\r\n                return this;\r\n            }\r\n\r\n            loadDeps(node)\r\n                .then(loadSource)\r\n                .done(initComponent);\r\n\r\n            return this;\r\n        }\r\n    });\r\n\r\n    _.extend(layout, {\r\n        /**\r\n         * Loading component marked as isTemplate.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object} node\r\n         * @returns {Object}\r\n         */\r\n        waitTemplate: function (parent, node) {\r\n            var args = _.toArray(arguments);\r\n\r\n            templates.get(node.nodeTemplate, function () {\r\n                this.applyTemplate.apply(this, args);\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Waiting for parent component and process provided component.\r\n         *\r\n         * @param {Object} node\r\n         * @param {String} name\r\n         * @returns {Object}\r\n         */\r\n        waitParent: function (node, name) {\r\n            var process = this.process.bind(this);\r\n\r\n            registry.get(node.parent, function (parent) {\r\n                process(parent, node, name);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Processing component marked as isTemplate.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object} node\r\n         * @param {String} name\r\n         */\r\n        applyTemplate: function (parent, node, name) {\r\n            var template = templates.get(node.nodeTemplate);\r\n\r\n            node = utils.extend({}, template, node);\r\n\r\n            delete node.nodeTemplate;\r\n\r\n            this.process(parent, node, name);\r\n        }\r\n    });\r\n\r\n    _.extend(layout, {\r\n        /**\r\n         * Determines inserting strategy.\r\n         *\r\n         * @param {Object} node\r\n         * @returns {Object}\r\n         */\r\n        manipulate: function (node) {\r\n            var name = node.name;\r\n\r\n            if (node.appendTo) {\r\n                this.insert(name, node.appendTo, -1);\r\n            }\r\n\r\n            if (node.prependTo) {\r\n                this.insert(name, node.prependTo, 0);\r\n            }\r\n\r\n            if (node.insertTo) {\r\n                this.insertTo(name, node.insertTo);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Insert component to provide target and position.\r\n         *\r\n         * @param {Object|String} item\r\n         * @param {Object} target\r\n         * @param {Number} position\r\n         * @returns {Object}\r\n         */\r\n        insert: function (item, target, position) {\r\n            registry.get(target, function (container) {\r\n                container.insertChild(item, position);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Insert component into multiple targets.\r\n         *\r\n         * @param {Object} item\r\n         * @param {Array} targets\r\n         * @returns {Object}\r\n         */\r\n        insertTo: function (item, targets) {\r\n            _.each(targets, function (info, target) {\r\n                this.insert(item, target, info.position);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Add provided child to parent.\r\n         *\r\n         * @param {Object} parent\r\n         * @param {Object|String} child\r\n         * @returns {Object}\r\n         */\r\n        addChild: function (parent, child) {\r\n            var name;\r\n\r\n            if (parent && parent.component) {\r\n                name = child.name || child;\r\n\r\n                this.insert(name, parent.name, child.sortOrder);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Merge components configuration with cached configuration.\r\n         *\r\n         * @param {Array} components\r\n         */\r\n        merge: function (components) {\r\n            var cachedKey = _.keys(components)[0],\r\n                compared = utils.compare(cachedConfig[cachedKey], components),\r\n                remove = this.filterComponents(this.getByProperty(compared.changes, 'type', 'remove'), true),\r\n                update = this.getByProperty(compared.changes, 'type', 'update'),\r\n                dataSources = this.getDataSources(components),\r\n                names, index, name, component;\r\n\r\n            _.each(dataSources, function (val, key) {\r\n                name = key.replace(/\\.children|\\.config/g, '');\r\n                component = registry.get(name);\r\n\r\n                component.cacheData();\r\n                component.updateConfig(\r\n                    true,\r\n                    this.getFullConfig(key, components),\r\n                    this.getFullConfig(key, cachedConfig[cachedKey])\r\n                );\r\n            }, this);\r\n\r\n            _.each(remove, function (val) {\r\n                component = registry.get(val.path);\r\n\r\n                if (component) {\r\n                    component.destroy();\r\n                }\r\n            });\r\n\r\n            update = _.compact(_.filter(update, function (val) {\r\n                return !_.isEqual(val.oldValue, val.value);\r\n            }));\r\n\r\n            _.each(update, function (val) {\r\n                names = val.path.split('.');\r\n                index = Math.max(_.lastIndexOf(names, 'config'), _.lastIndexOf(names, 'children') + 2);\r\n                name = _.without(names.splice(0, index), 'children', 'config').join('.');\r\n                component = registry.get(name);\r\n\r\n                if (val.name === 'sortOrder' && component) {\r\n                    registry.get(component.parentName).insertChild(component, val.value);\r\n                } else if (component) {\r\n                    component.updateConfig(\r\n                        val.oldValue,\r\n                        val.value,\r\n                        val.path\r\n                    );\r\n                }\r\n            }, this);\r\n\r\n            run(components, undefined, true);\r\n        },\r\n\r\n        /**\r\n         * Recursive dataSource assignment.\r\n         *\r\n         * @param {Object} config\r\n         * @param {String} parentPath\r\n         * @returns {Object}\r\n         */\r\n        getDataSources: function (config, parentPath) {\r\n            var dataSources = {},\r\n                key, obj;\r\n\r\n            /* eslint-disable no-loop-func, max-depth */\r\n            for (key in config) {\r\n                if (config.hasOwnProperty(key)) {\r\n                    if (\r\n                        key === 'type' &&\r\n                        config[key] === 'dataSource' &&\r\n                        config.hasOwnProperty('config')\r\n                    ) {\r\n                        dataSources[parentPath + '.config'] = config.config;\r\n                    } else if (_.isObject(config[key])) {\r\n                        obj = this.getDataSources(config[key], utils.fullPath(parentPath, key));\r\n\r\n                        _.each(obj, function (value, path) {\r\n                            dataSources[path] = value;\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n            /* eslint-enable no-loop-func, max-depth */\r\n\r\n            return dataSources;\r\n        },\r\n\r\n        /**\r\n         * Configuration getter.\r\n         *\r\n         * @param {String} path\r\n         * @param {Object} config\r\n         * @returns {Boolean|Object}\r\n         */\r\n        getFullConfig: function (path, config) {\r\n            var index;\r\n\r\n            path = path.split('.');\r\n            index = _.lastIndexOf(path, 'config');\r\n\r\n            if (!~index) {\r\n                return false;\r\n            }\r\n            path = path.splice(0, index);\r\n\r\n            _.each(path, function (val) {\r\n                config = config[val];\r\n            });\r\n\r\n            return config.config;\r\n        },\r\n\r\n        /**\r\n         * Filter data by property and value.\r\n         *\r\n         * @param {Object} data\r\n         * @param {String} prop\r\n         * @param {*} propValue\r\n         */\r\n        getByProperty: function (data, prop, propValue) {\r\n            return _.filter(data, function (value) {\r\n                return value[prop] === propValue;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Filter components.\r\n         *\r\n         * @param {Array} data\r\n         * @param {Boolean} splitPath\r\n         * @param {Number} index\r\n         * @param {String} separator\r\n         * @param {String} keyName\r\n         * @returns {Array}\r\n         */\r\n        filterComponents: function (data, splitPath, index, separator, keyName) {\r\n            var result = [],\r\n                names, length;\r\n\r\n            index = -2;\r\n            separator = '.' || separator;\r\n            keyName = 'children' || keyName;\r\n\r\n            _.each(data, function (val) {\r\n                names = val.path.split(separator);\r\n                length  = names.length;\r\n\r\n                if (names[length + index] === keyName) {\r\n                    val.path = splitPath ? _.without(names, keyName).join(separator) : val.path;\r\n                    result.push(val);\r\n                }\r\n            });\r\n\r\n            return result;\r\n        }\r\n    });\r\n\r\n    return run;\r\n});\r\n","Magento_Ui/js/core/renderer/types.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'underscore',\r\n    'mageUtils'\r\n], function (_, utils) {\r\n    'use strict';\r\n\r\n    var store = {};\r\n\r\n    /**\r\n     * Flatten a nested data.\r\n     *\r\n     * @param {Object} data\r\n     * @returns {Object}\r\n     */\r\n    function flatten(data) {\r\n        var extender = data.extends || [],\r\n            result = {};\r\n\r\n        extender = utils.stringToArray(extender);\r\n\r\n        extender.push(data);\r\n\r\n        extender.forEach(function (item) {\r\n            if (_.isString(item)) {\r\n                item = store[item] || {};\r\n            }\r\n\r\n            utils.extend(result, item);\r\n        });\r\n\r\n        delete result.extends;\r\n\r\n        return result;\r\n    }\r\n\r\n    return {\r\n        /**\r\n         * Set types to store object.\r\n         *\r\n         * @param {Object} types\r\n         */\r\n        set: function (types) {\r\n            types = types || {};\r\n\r\n            utils.extend(store, types);\r\n\r\n            _.each(types, function (data, type) {\r\n                store[type] = flatten(data);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get type from store object.\r\n         *\r\n         * @param {String} type\r\n         * @returns {*|{}}\r\n         */\r\n        get: function (type) {\r\n            return store[type] || {};\r\n        }\r\n    };\r\n});\r\n","Magento_Ui/js/dynamic-rows/action-delete.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Ui/js/form/element/abstract'\r\n], function (Abstract) {\r\n    'use strict';\r\n\r\n    return Abstract.extend({\r\n        defaults: {\r\n            links: {\r\n                value: false\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Delete record handler.\r\n         *\r\n         * @param {Number} index\r\n         * @param {Number} id\r\n         */\r\n        deleteRecord: function (index, id) {\r\n            this.bubble('deleteRecord', index, id);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/dynamic-rows/dnd.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    'jquery',\r\n    'underscore',\r\n    'uiElement',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function (ko, $, _, Element) {\r\n    'use strict';\r\n\r\n    var transformProp;\r\n\r\n    /**\r\n     * Get element context\r\n     */\r\n    function getContext(elem) {\r\n        return ko.contextFor(elem);\r\n    }\r\n\r\n    /**\r\n     * Defines supported css 'transform' property.\r\n     *\r\n     * @returns {String|Undefined}\r\n     */\r\n    transformProp = (function () {\r\n        var style = document.createElement('div').style,\r\n            base = 'Transform',\r\n            vendors = ['webkit', 'moz', 'ms', 'o'],\r\n            vi = vendors.length,\r\n            property;\r\n\r\n        if (typeof style.transform !== 'undefined') {\r\n            return 'transform';\r\n        }\r\n\r\n        while (vi--) {\r\n            property = vendors[vi] + base;\r\n\r\n            if (typeof style[property] !== 'undefined') {\r\n                return property;\r\n            }\r\n        }\r\n    })();\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            separatorsClass: {\r\n                top: '_dragover-top',\r\n                bottom: '_dragover-bottom'\r\n            },\r\n            step: 'auto',\r\n            tableClass: 'table.admin__dynamic-rows',\r\n            recordsCache: [],\r\n            draggableElement: {},\r\n            draggableElementClass: '_dragged',\r\n            elemPositions: [],\r\n            listens: {\r\n                '${ $.recordsProvider }:elems': 'setCacheRecords'\r\n            },\r\n            modules: {\r\n                parentComponent: '${ $.recordsProvider }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize component\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(\r\n                this,\r\n                'mousemoveHandler',\r\n                'mouseupHandler'\r\n            );\r\n\r\n            this._super()\r\n                .body = $('body');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent, initializes 'options' and 'initialOptions'\r\n         *     properties, calls 'setOptions' passing options to it\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe([\r\n                    'recordsCache'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init listens to start drag\r\n         *\r\n         * @param {Object} elem - DOM element\r\n         * @param {Object} data - element data\r\n         */\r\n        initListeners: function (elem, data) {\r\n            $(elem).on('mousedown touchstart', this.mousedownHandler.bind(this, data, elem));\r\n        },\r\n\r\n        /**\r\n         * Mouse down handler\r\n         *\r\n         * @param {Object} data - element data\r\n         * @param {Object} elem - element\r\n         * @param {Object} event - key down event\r\n         */\r\n        mousedownHandler: function (data, elem, event) {\r\n            var recordNode = this.getRecordNode(elem),\r\n                originRecord = $(elem).parents('tr').eq(0),\r\n                drEl = this.draggableElement,\r\n                $table = $(elem).parents('table').eq(0),\r\n                $tableWrapper = $table.parent();\r\n\r\n            this.disableScroll();\r\n            $(recordNode).addClass(this.draggableElementClass);\r\n            $(originRecord).addClass(this.draggableElementClass);\r\n            this.step = this.step === 'auto' ? originRecord.height() / 2 : this.step;\r\n            drEl.originRow = originRecord;\r\n            drEl.instance = recordNode = this.processingStyles(recordNode, elem);\r\n            drEl.instanceCtx = this.getRecord(originRecord[0]);\r\n            drEl.eventMousedownY = this.getPageY(event);\r\n            drEl.minYpos =\r\n                $table.offset().top - originRecord.offset().top + $table.children('thead').outerHeight();\r\n            drEl.maxYpos = drEl.minYpos + $table.children('tbody').outerHeight() - originRecord.outerHeight();\r\n            $tableWrapper.append(recordNode);\r\n            this.body.on('mousemove touchmove', this.mousemoveHandler);\r\n            this.body.on('mouseup touchend', this.mouseupHandler);\r\n        },\r\n\r\n        /**\r\n         * Mouse move handler\r\n         *\r\n         * @param {Object} event - mouse move event\r\n         */\r\n        mousemoveHandler: function (event) {\r\n            var depEl = this.draggableElement,\r\n                pageY = this.getPageY(event),\r\n                positionY = pageY - depEl.eventMousedownY,\r\n                processingPositionY = positionY + 'px',\r\n                processingMaxYpos = depEl.maxYpos + 'px',\r\n                processingMinYpos = depEl.minYpos + 'px',\r\n                depElement = this.getDepElement(depEl.instance, positionY, depEl.originRow);\r\n\r\n            if (depElement) {\r\n                depEl.depElement ? depEl.depElement.elem.removeClass(depEl.depElement.className) : false;\r\n                depEl.depElement = depElement;\r\n                depEl.depElement.insert !== 'none' ? depEl.depElement.elem.addClass(depElement.className) : false;\r\n            } else if (depEl.depElement && depEl.depElement.insert !== 'none') {\r\n                depEl.depElement.elem.removeClass(depEl.depElement.className);\r\n                depEl.depElement.insert = 'none';\r\n            }\r\n\r\n            if (positionY > depEl.minYpos && positionY < depEl.maxYpos) {\r\n                $(depEl.instance)[0].style[transformProp] = 'translateY(' + processingPositionY + ')';\r\n            } else if (positionY < depEl.minYpos) {\r\n                $(depEl.instance)[0].style[transformProp] = 'translateY(' + processingMinYpos + ')';\r\n            } else if (positionY >= depEl.maxYpos) {\r\n                $(depEl.instance)[0].style[transformProp] = 'translateY(' + processingMaxYpos + ')';\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Mouse up handler\r\n         */\r\n        mouseupHandler: function (event) {\r\n            var depElementCtx,\r\n                drEl = this.draggableElement,\r\n                pageY = this.getPageY(event),\r\n                positionY = pageY - drEl.eventMousedownY;\r\n\r\n            this.enableScroll();\r\n            drEl.depElement = this.getDepElement(drEl.instance, positionY, this.draggableElement.originRow);\r\n\r\n            drEl.instance.remove();\r\n\r\n            if (drEl.depElement) {\r\n                depElementCtx = this.getRecord(drEl.depElement.elem[0]);\r\n                drEl.depElement.elem.removeClass(drEl.depElement.className);\r\n\r\n                if (drEl.depElement.insert !== 'none') {\r\n                    this.setPosition(drEl.depElement.elem, depElementCtx, drEl);\r\n                }\r\n            }\r\n\r\n            drEl.originRow.removeClass(this.draggableElementClass);\r\n\r\n            this.body.off('mousemove touchmove', this.mousemoveHandler);\r\n            this.body.off('mouseup touchend', this.mouseupHandler);\r\n\r\n            this.draggableElement = {};\r\n        },\r\n\r\n        /**\r\n         * Set position to element\r\n         *\r\n         * @param {Object} depElem - dep element\r\n         * @param {Object} depElementCtx - dep element context\r\n         * @param {Object} dragData - data draggable element\r\n         */\r\n        setPosition: function (depElem, depElementCtx, dragData) {\r\n            var depElemPosition = ~~depElementCtx.position;\r\n\r\n            if (dragData.depElement.insert === 'after') {\r\n                dragData.instanceCtx.position = depElemPosition + 1;\r\n            } else if (dragData.depElement.insert === 'before') {\r\n                dragData.instanceCtx.position = depElemPosition;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get dependency element\r\n         *\r\n         * @param {Object} curInstance - current element instance\r\n         * @param {Number} position\r\n         * @param {Object} row\r\n         */\r\n        getDepElement: function (curInstance, position, row) {\r\n            var tableSelector = this.tableClass + ' tr',\r\n                $table = $(row).parents('table').eq(0),\r\n                $curInstance = $(curInstance),\r\n                recordsCollection = $table.find('table').length ?\r\n                    $table.find('tbody > tr').filter(function (index, elem) {\r\n                        return !$(elem).parents(tableSelector).length;\r\n                    }) :\r\n                    $table.find('tbody > tr'),\r\n                curInstancePositionTop = $curInstance.position().top,\r\n                curInstancePositionBottom = curInstancePositionTop + $curInstance.height();\r\n\r\n            if (position < 0) {\r\n                return this._getDepElement(recordsCollection, 'before', curInstancePositionTop);\r\n            } else if (position > 0) {\r\n                return this._getDepElement(recordsCollection, 'after', curInstancePositionBottom);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get dependency element private\r\n         *\r\n         * @param {Array} collection - record collection\r\n         * @param {String} position - position to add\r\n         * @param {Number} dragPosition - position drag element\r\n         */\r\n        _getDepElement: function (collection, position, dragPosition) {\r\n            var rec,\r\n                rangeEnd,\r\n                rangeStart,\r\n                result,\r\n                className,\r\n                i = 0,\r\n                length = collection.length;\r\n\r\n            for (i; i < length; i++) {\r\n                rec = collection.eq(i);\r\n\r\n                if (position === 'before') {\r\n                    rangeStart = collection.eq(i).position().top - this.step;\r\n                    rangeEnd = rangeStart + this.step * 2;\r\n                    className = this.separatorsClass.top;\r\n                } else if (position === 'after') {\r\n                    rangeEnd = rec.position().top + rec.height() + this.step;\r\n                    rangeStart = rangeEnd - this.step * 2;\r\n                    className = this.separatorsClass.bottom;\r\n                }\r\n\r\n                if (dragPosition > rangeStart && dragPosition < rangeEnd) {\r\n                    result = {\r\n                        elem: rec,\r\n                        insert: rec[0] === this.draggableElement.originRow[0] ? 'none' : position,\r\n                        className: className\r\n                    };\r\n                }\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Set default position of draggable element\r\n         *\r\n         * @param {Object} elem - current element instance\r\n         * @param {Object} data - current element data\r\n         */\r\n        _setDefaultPosition: function (elem, data) {\r\n            var originRecord = $(elem).parents('tr').eq(0),\r\n                position = originRecord.position();\r\n\r\n            ++position.top;\r\n            $(data).css(position);\r\n        },\r\n\r\n        /**\r\n         * Set records to cache\r\n         *\r\n         * @param {Object} records - record instance\r\n         */\r\n        setCacheRecords: function (records) {\r\n            this.recordsCache(records);\r\n        },\r\n\r\n        /**\r\n         * Set styles to draggable element\r\n         *\r\n         * @param {Object} data - data\r\n         * @param {Object} elem - elem instance\r\n         * @returns {Object} instance data.\r\n         */\r\n        processingStyles: function (data, elem) {\r\n            var table = $(elem).parents('table').eq(0),\r\n                columns = table.find('th'),\r\n                recordColumns = $(data).find('td');\r\n\r\n            this._setDefaultPosition(elem, $(data));\r\n            this._setColumnsWidth(columns, recordColumns);\r\n            this._setTableWidth(table, $(data));\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Set table width.\r\n         *\r\n         * @param {Object} originalTable - original record instance\r\n         * @param {Object} recordTable - draggable record instance\r\n         */\r\n        _setTableWidth: function (originalTable, recordTable) {\r\n            recordTable.outerWidth(originalTable.outerWidth());\r\n        },\r\n\r\n        /**\r\n         * Set columns width.\r\n         *\r\n         * @param {Object} originColumns - original record instance\r\n         * @param {Object} recordColumns - draggable record instance\r\n         */\r\n        _setColumnsWidth: function (originColumns, recordColumns) {\r\n            var i = 0,\r\n                length = originColumns.length;\r\n\r\n            for (i; i < length; i++) {\r\n                recordColumns.eq(i).outerWidth(originColumns.eq(i).outerWidth());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get copy original record\r\n         *\r\n         * @param {Object} record - original record instance\r\n         * @returns {Object} draggable record instance\r\n         */\r\n        getRecordNode: function (record) {\r\n            var $record = $(record),\r\n                table = $record.parents('table')[0].cloneNode(true),\r\n                $table = $(table);\r\n\r\n            $table.find('tr').remove();\r\n            $table.append($record.parents('tr')[0].cloneNode(true));\r\n\r\n            return table;\r\n        },\r\n\r\n        /**\r\n         * Get record context by element\r\n         *\r\n         * @param {Object} elem - original element\r\n         * @returns {Object} draggable record context\r\n         */\r\n        getRecord: function (elem) {\r\n            var ctx = getContext(elem),\r\n                index = _.isFunction(ctx.$index) ? ctx.$index() : ctx.$index;\r\n\r\n            return this.recordsCache()[index];\r\n        },\r\n\r\n        /**\r\n         * Get correct page Y\r\n         *\r\n         * @param {Object} event - current event\r\n         * @returns {integer}\r\n         */\r\n        getPageY: function (event) {\r\n            var pageY;\r\n\r\n            if (event.type.indexOf('touch') >= 0) {\r\n                if (event.originalEvent.touches[0]) {\r\n                    pageY = event.originalEvent.touches[0].pageY;\r\n                } else {\r\n                    pageY = event.originalEvent.changedTouches[0].pageY;\r\n                }\r\n            } else {\r\n                pageY = event.pageY;\r\n            }\r\n\r\n            return pageY;\r\n        },\r\n\r\n        /**\r\n         * Disable page scrolling\r\n         */\r\n        disableScroll: function () {\r\n            document.body.addEventListener('touchmove', this.preventDefault, {\r\n                passive: false\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Enable page scrolling\r\n         */\r\n        enableScroll: function () {\r\n            document.body.removeEventListener('touchmove', this.preventDefault, {\r\n                passive: false\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Prevent default function\r\n         *\r\n         * @param {Object} event - event object\r\n         */\r\n        preventDefault: function (event) {\r\n            event.preventDefault();\r\n        }\r\n\r\n    });\r\n});\r\n","Magento_Ui/js/dynamic-rows/dynamic-rows-grid.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    './dynamic-rows'\r\n], function (_, dynamicRows) {\r\n    'use strict';\r\n\r\n    return dynamicRows.extend({\r\n        defaults: {\r\n            dataProvider: '',\r\n            insertData: [],\r\n            map: null,\r\n            cacheGridData: [],\r\n            deleteProperty: false,\r\n            positionProvider: 'position',\r\n            dataLength: 0,\r\n            identificationProperty: 'id',\r\n            identificationDRProperty: 'id',\r\n            listens: {\r\n                'insertData': 'processingInsertData',\r\n                'recordData': 'initElements setToInsertData'\r\n            },\r\n            mappingSettings: {\r\n                enabled: true,\r\n                distinct: true\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initialize: function () {\r\n            this.setToInsertData = _.debounce(this.setToInsertData, 200);\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe([\r\n                    'insertData'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set data from recordData to insertData\r\n         */\r\n        setToInsertData: function () {\r\n            var insertData = [],\r\n                obj;\r\n\r\n            if (this.recordData().length && !this.update) {\r\n                _.each(this.recordData(), function (recordData) {\r\n                    obj = {};\r\n                    obj[this.map[this.identificationProperty]] = recordData[this.identificationProperty];\r\n                    insertData.push(obj);\r\n                }, this);\r\n\r\n                if (insertData.length) {\r\n                    this.source.set(this.dataProvider, insertData);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize children\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            this.getChildItems().forEach(function (data, index) {\r\n                this.processingAddChild(data, this.startIndex + index, data[this.identificationDRProperty]);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize elements from grid\r\n         *\r\n         * @param {Array} data\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initElements: function (data) {\r\n            var newData = this.getNewData(data);\r\n\r\n            this.parsePagesData(data);\r\n\r\n            if (newData.length) {\r\n                if (this.insertData().length) {\r\n                    this.processingAddChild(newData[0], data.length - 1, newData[0][this.identificationProperty]);\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Delete record instance\r\n         * update data provider dataScope\r\n         *\r\n         * @param {String|Number} index - record index\r\n         * @param {String|Number} recordId\r\n         */\r\n        deleteRecord: function (index, recordId) {\r\n            this.updateInsertData(recordId);\r\n            this._super();\r\n        },\r\n\r\n        /**\r\n         * Updates insertData when record is deleted\r\n         *\r\n         * @param {String|Number} recordId\r\n         */\r\n        updateInsertData: function (recordId) {\r\n            var data = this.getElementData(this.insertData(), recordId),\r\n            prop = this.map[this.identificationDRProperty];\r\n\r\n            this.insertData(_.reject(this.source.get(this.dataProvider), function (recordData) {\r\n                return recordData[prop].toString() === data[prop].toString();\r\n            }, this));\r\n        },\r\n\r\n        /**\r\n         * Find data object by index\r\n         *\r\n         * @param {Array} array - data collection\r\n         * @param {Number} index - element index\r\n         * @param {String} property - to find by property\r\n         *\r\n         * @returns {Object} data object\r\n         */\r\n        getElementData: function (array, index, property) {\r\n            var obj = {},\r\n                result;\r\n\r\n            property ? obj[property] = index : obj[this.map[this.identificationDRProperty]] = index;\r\n            result = _.findWhere(array, obj);\r\n\r\n            if (!result) {\r\n                property ?\r\n                    obj[property] = index.toString() :\r\n                    obj[this.map[this.identificationDRProperty]] = index.toString();\r\n            }\r\n\r\n            result = _.findWhere(array, obj);\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Processing pages before addChild\r\n         *\r\n         * @param {Object} ctx - element context\r\n         * @param {Number|String} index - element index\r\n         * @param {Number|String} prop - additional property to element\r\n         */\r\n        processingAddChild: function (ctx, index, prop) {\r\n            if (this._elems.length > this.pageSize) {\r\n                return false;\r\n            }\r\n\r\n            this.showSpinner(true);\r\n            this.addChild(ctx, index, prop);\r\n        },\r\n\r\n        /**\r\n         * Contains old data with new\r\n         *\r\n         * @param {Array} data\r\n         *\r\n         * @returns {Array} changed data\r\n         */\r\n        getNewData: function (data) {\r\n            var changes = [],\r\n                tmpObj = {};\r\n\r\n            if (data.length !== this.relatedData.length) {\r\n                _.each(data, function (obj) {\r\n                    tmpObj[this.identificationDRProperty] = obj[this.identificationDRProperty];\r\n\r\n                    if (!_.findWhere(this.relatedData, tmpObj)) {\r\n                        changes.push(obj);\r\n                    }\r\n                }, this);\r\n            }\r\n\r\n            return changes;\r\n        },\r\n\r\n        /**\r\n         * Processing insert data\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        processingInsertData: function (data) {\r\n            var changes,\r\n                obj = {};\r\n\r\n            changes = this._checkGridData(data);\r\n            this.cacheGridData = data;\r\n\r\n            if (changes.length) {\r\n                obj[this.identificationDRProperty] = changes[0][this.map[this.identificationProperty]];\r\n\r\n                if (_.findWhere(this.recordData(), obj)) {\r\n                    return false;\r\n                }\r\n\r\n                changes.forEach(function (changedObject) {\r\n                    this.mappingValue(changedObject);\r\n                }, this);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Mapping value from grid\r\n         *\r\n         * @param {Array} data\r\n         */\r\n        mappingValue: function (data) {\r\n            var obj = {},\r\n                tmpObj = {};\r\n\r\n            if (this.mappingSettings.enabled) {\r\n                _.each(this.map, function (prop, index) {\r\n                    obj[index] = !_.isUndefined(data[prop]) ? data[prop] : '';\r\n                }, this);\r\n            } else {\r\n                obj = data;\r\n            }\r\n\r\n            if (this.mappingSettings.distinct) {\r\n                tmpObj[this.identificationDRProperty] = obj[this.identificationDRProperty];\r\n\r\n                if (_.findWhere(this.recordData(), tmpObj)) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            if (!obj.hasOwnProperty(this.positionProvider)) {\r\n                this.setMaxPosition();\r\n                obj[this.positionProvider] = this.maxPosition;\r\n            }\r\n\r\n            this.source.set(this.dataScope + '.' + this.index + '.' + this.recordData().length, obj);\r\n        },\r\n\r\n        /**\r\n         * Check changed records\r\n         *\r\n         * @param {Array} data - array with records data\r\n         * @returns {Array} Changed records\r\n         */\r\n        _checkGridData: function (data) {\r\n            var cacheLength = this.cacheGridData.length,\r\n                curData = data.length,\r\n                max = cacheLength > curData ? this.cacheGridData : data,\r\n                changes = [],\r\n                obj = {};\r\n\r\n            max.forEach(function (record, index) {\r\n                obj[this.map[this.identificationDRProperty]] = record[this.map[this.identificationDRProperty]];\r\n\r\n                if (!_.where(this.cacheGridData, obj).length) {\r\n                    changes.push(data[index]);\r\n                }\r\n            }, this);\r\n\r\n            return changes;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/dynamic-rows/dynamic-rows.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'ko',\r\n    'mageUtils',\r\n    'underscore',\r\n    'uiLayout',\r\n    'uiCollection',\r\n    'uiRegistry',\r\n    'mage/translate',\r\n    'jquery'\r\n], function (ko, utils, _, layout, uiCollection, registry, $t, $) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Checks value type and cast to boolean if needed\r\n     *\r\n     * @param {*} value\r\n     *\r\n     * @returns {Boolean|*} casted or origin value\r\n     */\r\n    function castValue(value) {\r\n        if (_.isUndefined(value) || value === '' || _.isNull(value)) {\r\n            return false;\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    /**\r\n     * Compares arrays.\r\n     *\r\n     * @param {Array} base - array as method bases its decision on first argument.\r\n     * @param {Array} current - second array\r\n     *\r\n     * @returns {Boolean} result - is current array equal to base array\r\n     */\r\n    function compareArrays(base, current) {\r\n        var index = 0,\r\n            length = base.length;\r\n\r\n        if (base.length !== current.length) {\r\n            return false;\r\n        }\r\n\r\n        /*eslint-disable max-depth, eqeqeq, no-use-before-define */\r\n        for (index; index < length; index++) {\r\n            if (_.isArray(base[index]) && _.isArray(current[index])) {\r\n                if (!compareArrays(base[index], current[index])) {\r\n                    return false;\r\n                }\r\n            } else if (typeof base[index] === 'object' && typeof current[index] === 'object') {\r\n                if (!compareObjects(base[index], current[index])) {\r\n                    return false;\r\n                }\r\n            } else if (castValue(base[index]) != castValue(current[index])) {\r\n                return false;\r\n            }\r\n        }/*eslint-enable max-depth, eqeqeq, no-use-before-define */\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Compares objects. Compares only properties from origin object,\r\n     * if current object has more properties - they are not considered\r\n     *\r\n     * @param {Object} base - first object\r\n     * @param {Object} current - second object\r\n     *\r\n     * @returns {Boolean} result - is current object equal to base object\r\n     */\r\n    function compareObjects(base, current) {\r\n        var prop;\r\n\r\n        /*eslint-disable max-depth, eqeqeq*/\r\n        for (prop in base) {\r\n            if (_.isArray(base[prop]) && _.isArray(current[prop])) {\r\n                if (!compareArrays(base[prop], current[prop])) {\r\n                    return false;\r\n                }\r\n            } else if (typeof base[prop] === 'object' && typeof current[prop] === 'object') {\r\n                if (!compareObjects(base[prop], current[prop])) {\r\n                    return false;\r\n                }\r\n            } else if (castValue(base[prop]) != castValue(current[prop])) {\r\n                return false;\r\n            }\r\n        }/*eslint-enable max-depth, eqeqeq */\r\n\r\n        return true;\r\n    }\r\n\r\n    return uiCollection.extend({\r\n        defaults: {\r\n            defaultRecord: false,\r\n            columnsHeader: true,\r\n            columnsHeaderAfterRender: false,\r\n            columnsHeaderClasses: '',\r\n            labels: [],\r\n            recordTemplate: 'record',\r\n            collapsibleHeader: false,\r\n            additionalClasses: {},\r\n            visible: true,\r\n            disabled: false,\r\n            fit: false,\r\n            addButton: true,\r\n            addButtonLabel: $t('Add'),\r\n            recordData: [],\r\n            maxPosition: 0,\r\n            deleteProperty: 'delete',\r\n            identificationProperty: 'record_id',\r\n            deleteValue: true,\r\n            showSpinner: true,\r\n            isDifferedFromDefault: false,\r\n            defaultState: [],\r\n            defaultPagesState: {},\r\n            pagesChanged: {},\r\n            hasInitialPagesState: {},\r\n            changed: false,\r\n            fallbackResetTpl: 'ui/form/element/helper/fallback-reset-link',\r\n            dndConfig: {\r\n                name: '${ $.name }_dnd',\r\n                component: 'Magento_Ui/js/dynamic-rows/dnd',\r\n                template: 'ui/dynamic-rows/cells/dnd',\r\n                recordsProvider: '${ $.name }',\r\n                enabled: true\r\n            },\r\n            templates: {\r\n                record: {\r\n                    parent: '${ $.$data.collection.name }',\r\n                    name: '${ $.$data.index }',\r\n                    dataScope: '${ $.$data.collection.index }.${ $.name }',\r\n                    nodeTemplate: '${ $.parent }.${ $.$data.collection.recordTemplate }'\r\n                }\r\n            },\r\n            links: {\r\n                recordData: '${ $.provider }:${ $.dataScope }.${ $.index }'\r\n            },\r\n            listens: {\r\n                visible: 'setVisible',\r\n                disabled: 'setDisabled',\r\n                childTemplate: 'initHeader',\r\n                recordTemplate: 'onUpdateRecordTemplate',\r\n                recordData: 'setDifferedFromDefault parsePagesData setRecordDataToCache',\r\n                currentPage: 'changePage',\r\n                elems: 'checkSpinner',\r\n                changed: 'updateTrigger'\r\n            },\r\n            modules: {\r\n                dnd: '${ $.dndConfig.name }'\r\n            },\r\n            pages: 1,\r\n            pageSize: 20,\r\n            relatedData: [],\r\n            currentPage: 1,\r\n            recordDataCache: [],\r\n            startIndex: 0\r\n        },\r\n\r\n        /**\r\n         * Sets record data to cache\r\n         */\r\n        setRecordDataToCache: function (data) {\r\n            this.recordDataCache = data;\r\n        },\r\n\r\n        /**\r\n         * Extends instance with default config, calls initialize of parent\r\n         * class, calls initChildren method, set observe variable.\r\n         * Use parent \"track\" method - wrapper observe array\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(this,\r\n                'processingDeleteRecord',\r\n                'onChildrenUpdate',\r\n                'checkDefaultState',\r\n                'renderColumnsHeader',\r\n                'deleteHandler',\r\n                'setDefaultState'\r\n            );\r\n\r\n            this._super()\r\n                .initChildren()\r\n                .initDnd()\r\n                .initDefaultRecord()\r\n                .setInitialProperty()\r\n                .setColumnsHeaderListener()\r\n                .checkSpinner();\r\n\r\n            this.on('recordData', this.checkDefaultState);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        bubble: function (event) {\r\n            if (event === 'deleteRecord' || event === 'update') {\r\n                return false;\r\n            }\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Inits DND module\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initDnd: function () {\r\n            if (this.dndConfig.enabled) {\r\n                layout([this.dndConfig]);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        destroy: function () {\r\n            if (this.dnd()) {\r\n                this.dnd().destroy();\r\n            }\r\n            this._super();\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .track('childTemplate')\r\n                .observe([\r\n                    'pages',\r\n                    'currentPage',\r\n                    'recordData',\r\n                    'columnsHeader',\r\n                    'visible',\r\n                    'disabled',\r\n                    'labels',\r\n                    'showSpinner',\r\n                    'isDifferedFromDefault',\r\n                    'changed'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * @inheritdoc\r\n         */\r\n        initElement: function (elem) {\r\n            this._super();\r\n            elem.on({\r\n                'deleteRecord': this.deleteHandler,\r\n                'update': this.onChildrenUpdate,\r\n                'addChild': this.setDefaultState\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handler for deleteRecord event\r\n         *\r\n         * @param {Number|String} index - element index\r\n         * @param {Number|String} id\r\n         */\r\n        deleteHandler: function (index, id) {\r\n            var defaultState;\r\n\r\n            this.setDefaultState();\r\n            defaultState = this.defaultPagesState[this.currentPage()];\r\n            this.processingDeleteRecord(index, id);\r\n            this.pagesChanged[this.currentPage()] =\r\n                !compareArrays(defaultState, this.arrayFilter(this.getChildItems()));\r\n            this.changed(_.some(this.pagesChanged));\r\n        },\r\n\r\n        /**\r\n         * Set initial property to records data\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        setInitialProperty: function () {\r\n            if (_.isArray(this.recordData())) {\r\n                this.recordData.each(function (data, index) {\r\n                    this.source.set(this.dataScope + '.' + this.index + '.' + index + '.initialize', true);\r\n                }, this);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handler for update event\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        onChildrenUpdate: function (state) {\r\n            var changed,\r\n                dataScope,\r\n                changedElemDataScope;\r\n\r\n            if (state && !this.hasInitialPagesState[this.currentPage()]) {\r\n                this.setDefaultState();\r\n                changed = this.getChangedElems(this.elems());\r\n                dataScope = this.elems()[0].dataScope.split('.');\r\n                dataScope.splice(dataScope.length - 1, 1);\r\n                changed.forEach(function (elem) {\r\n                    changedElemDataScope = elem.dataScope.split('.');\r\n                    changedElemDataScope.splice(0, dataScope.length);\r\n                    changedElemDataScope[0] =\r\n                        (parseInt(changedElemDataScope[0], 10) - this.pageSize * (this.currentPage() - 1)).toString();\r\n                    this.setValueByPath(\r\n                        this.defaultPagesState[this.currentPage()],\r\n                        changedElemDataScope, elem.initialValue\r\n                    );\r\n                }, this);\r\n            }\r\n\r\n            if (this.defaultPagesState[this.currentPage()]) {\r\n                this.setChangedForCurrentPage();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set default dynamic-rows state or state before changing data\r\n         *\r\n         * @param {Array} data - defaultState data\r\n         */\r\n        setDefaultState: function (data) {\r\n            var componentData,\r\n                childItems;\r\n\r\n            if (!this.hasInitialPagesState[this.currentPage()]) {\r\n                childItems = this.getChildItems();\r\n                componentData = childItems.length ?\r\n                    utils.copy(childItems) :\r\n                    utils.copy(this.getChildItems(this.recordDataCache));\r\n                componentData.forEach(function (dataObj) {\r\n                    if (dataObj.hasOwnProperty('initialize')) {\r\n                        delete dataObj.initialize;\r\n                    }\r\n                });\r\n\r\n                this.hasInitialPagesState[this.currentPage()] = true;\r\n                this.defaultPagesState[this.currentPage()] = data ? data : this.arrayFilter(componentData);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sets value to object by string path\r\n         *\r\n         * @param {Object} obj\r\n         * @param {Array|String} path\r\n         * @param {*} value\r\n         */\r\n        setValueByPath: function (obj, path, value) {\r\n            var prop;\r\n\r\n            if (_.isString(path)) {\r\n                path = path.split('.');\r\n            }\r\n\r\n            if (path.length - 1) {\r\n                prop = obj[path[0]];\r\n                path.splice(0, 1);\r\n                this.setValueByPath(prop, path, value);\r\n            } else if (path.length && obj) {\r\n                obj[path[0]] = value;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns elements which changed self state\r\n         *\r\n         * @param {Array} array - data array\r\n         * @param {Array} changed - array with changed elements\r\n         * @returns {Array} changed - array with changed elements\r\n         */\r\n        getChangedElems: function (array, changed) {\r\n            changed = changed || [];\r\n\r\n            array.forEach(function (elem) {\r\n                if (_.isFunction(elem.elems)) {\r\n                    this.getChangedElems(elem.elems(), changed);\r\n                } else if (_.isFunction(elem.hasChanged) && elem.hasChanged()) {\r\n                    changed.push(elem);\r\n                }\r\n            }, this);\r\n\r\n            return changed;\r\n        },\r\n\r\n        /**\r\n         * Checks columnsHeaderAfterRender property,\r\n         * and set listener on elems if needed\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        setColumnsHeaderListener: function () {\r\n            if (this.columnsHeaderAfterRender) {\r\n                this.on('recordData', this.renderColumnsHeader);\r\n\r\n                if (_.isArray(this.recordData()) && this.recordData().length) {\r\n                    this.renderColumnsHeader();\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Checks whether component's state is default or not\r\n         */\r\n        checkDefaultState: function () {\r\n            var isRecordDataArray = _.isArray(this.recordData()),\r\n                initialize,\r\n                hasNotDefaultRecords = isRecordDataArray ? !!this.recordData().filter(function (data) {\r\n                    return !data.initialize;\r\n                }).length : false;\r\n\r\n            if (!this.hasInitialPagesState[this.currentPage()] && isRecordDataArray && hasNotDefaultRecords) {\r\n                this.hasInitialPagesState[this.currentPage()] = true;\r\n                this.defaultPagesState[this.currentPage()] = utils.copy(this.getChildItems().filter(function (data) {\r\n                    initialize = data.initialize;\r\n                    delete data.initialize;\r\n\r\n                    return initialize;\r\n                }));\r\n\r\n                this.setChangedForCurrentPage();\r\n            } else if (this.hasInitialPagesState[this.currentPage()]) {\r\n                this.setChangedForCurrentPage();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Filters out deleted items from array\r\n         *\r\n         * @param {Array} data\r\n         *\r\n         * @returns {Array} filtered array\r\n         */\r\n        arrayFilter: function (data) {\r\n            var prop;\r\n\r\n            /*eslint-disable no-loop-func*/\r\n            data.forEach(function (elem) {\r\n                for (prop in elem) {\r\n                    if (_.isArray(elem[prop])) {\r\n                        elem[prop] = _.filter(elem[prop], function (elemProp) {\r\n                            return elemProp[this.deleteProperty] !== this.deleteValue;\r\n                        }, this);\r\n\r\n                        elem[prop].forEach(function (elemProp) {\r\n                            if (_.isArray(elemProp)) {\r\n                                elem[prop] = this.arrayFilter(elemProp);\r\n                            }\r\n                        }, this);\r\n                    }\r\n                }\r\n            }, this);\r\n\r\n            /*eslint-enable no-loop-func*/\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Triggers update event\r\n         *\r\n         * @param {Boolean} val\r\n         */\r\n        updateTrigger: function (val) {\r\n            this.trigger('update', val);\r\n        },\r\n\r\n        /**\r\n         * Returns component state\r\n         */\r\n        hasChanged: function () {\r\n            return this.changed();\r\n        },\r\n\r\n        /**\r\n         * Render column header\r\n         */\r\n        renderColumnsHeader: function () {\r\n            this.recordData().length ? this.columnsHeader(true) : this.columnsHeader(false);\r\n        },\r\n\r\n        /**\r\n         * Init default record\r\n         *\r\n         * @returns Chainable.\r\n         */\r\n        initDefaultRecord: function () {\r\n            if (this.defaultRecord && !this.recordData().length) {\r\n                this.addChild();\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create header template\r\n         *\r\n         * @param {Object} prop - instance obj\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        createHeaderTemplate: function (prop) {\r\n            var visible = prop.visible !== false,\r\n                disabled = _.isUndefined(prop.disabled) ? this.disabled() : prop.disabled;\r\n\r\n            return {\r\n                visible: ko.observable(visible),\r\n                disabled: ko.observable(disabled)\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Init header elements\r\n         */\r\n        initHeader: function () {\r\n            var labels = [],\r\n                data;\r\n\r\n            if (!this.labels().length) {\r\n                _.each(this.childTemplate.children, function (cell) {\r\n                    data = this.createHeaderTemplate(cell.config);\r\n                    cell.config.labelVisible = false;\r\n                    _.extend(data, {\r\n                        defaultLabelVisible: data.visible(),\r\n                        label: cell.config.label,\r\n                        name: cell.name,\r\n                        required: !!cell.config.validation,\r\n                        columnsHeaderClasses: cell.config.columnsHeaderClasses,\r\n                        sortOrder: cell.config.sortOrder\r\n                    });\r\n                    labels.push(data);\r\n                }, this);\r\n                this.labels(_.sortBy(labels, 'sortOrder'));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set max element position\r\n         *\r\n         * @param {Number} position - element position\r\n         * @param {Object} elem - instance\r\n         */\r\n        setMaxPosition: function (position, elem) {\r\n            if (position || position === 0) {\r\n                this.checkMaxPosition(position);\r\n                this.sort(position, elem);\r\n            } else {\r\n                this.maxPosition += 1;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sort element by position\r\n         *\r\n         * @param {Number} position - element position\r\n         * @param {Object} elem - instance\r\n         */\r\n        sort: function (position, elem) {\r\n            var that = this,\r\n                sorted,\r\n                updatedCollection;\r\n\r\n            if (this.elems().filter(function (el) {\r\n                    return el.position || el.position === 0;\r\n                }).length !== this.getChildItems().length) {\r\n\r\n                return false;\r\n            }\r\n\r\n            if (!elem.containers.length) {\r\n                registry.get(elem.name, function () {\r\n                    that.sort(position, elem);\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            sorted = this.elems().sort(function (propOne, propTwo) {\r\n                return ~~propOne.position - ~~propTwo.position;\r\n            });\r\n\r\n            updatedCollection = this.updatePosition(sorted, position, elem.name);\r\n            this.elems(updatedCollection);\r\n        },\r\n\r\n        /**\r\n         * Checking loader visibility\r\n         *\r\n         * @param {Array} elems\r\n         */\r\n        checkSpinner: function (elems) {\r\n            this.showSpinner(!(!this.recordData().length || elems && elems.length === this.getChildItems().length));\r\n        },\r\n\r\n        /**\r\n         * Filtering data and calculates the quantity of pages\r\n         *\r\n         * @param {Array} data\r\n         */\r\n        parsePagesData: function (data) {\r\n            this.relatedData = this.deleteProperty ?\r\n                _.filter(data, function (elem) {\r\n                    return elem && elem[this.deleteProperty] !== this.deleteValue;\r\n                }, this) : data;\r\n\r\n            this._updatePagesQuantity();\r\n        },\r\n\r\n        /**\r\n         * Reinit record data in order to remove deleted values\r\n         *\r\n         * @return void\r\n         */\r\n        reinitRecordData: function () {\r\n            this.recordData(\r\n                _.filter(this.recordData(), function (elem) {\r\n                    return elem && elem[this.deleteProperty] !== this.deleteValue;\r\n                }, this)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Get items to rendering on current page\r\n         *\r\n         * @returns {Array} data\r\n         */\r\n        getChildItems: function (data, page) {\r\n            var dataRecord = data || this.relatedData,\r\n                startIndex;\r\n\r\n            this.startIndex = (~~this.currentPage() - 1) * this.pageSize;\r\n\r\n            startIndex = page || this.startIndex;\r\n\r\n            return dataRecord.slice(startIndex, this.startIndex + parseInt(this.pageSize, 10));\r\n        },\r\n\r\n        /**\r\n         * Get record count with filtered delete property.\r\n         *\r\n         * @returns {Number} count\r\n         */\r\n        getRecordCount: function () {\r\n            return _.filter(this.recordData(), function (record) {\r\n                return record && record[this.deleteProperty] !== this.deleteValue;\r\n            }, this).length;\r\n        },\r\n\r\n        /**\r\n         * Get number of columns\r\n         *\r\n         * @returns {Number} columns\r\n         */\r\n        getColumnsCount: function () {\r\n            return this.labels().length + (this.dndConfig.enabled ? 1 : 0);\r\n        },\r\n\r\n        /**\r\n         * Processing pages before addChild\r\n         *\r\n         * @param {Object} ctx - element context\r\n         * @param {Number|String} index - element index\r\n         * @param {Number|String} prop - additional property to element\r\n         */\r\n        processingAddChild: function (ctx, index, prop) {\r\n            this.bubble('addChild', false);\r\n\r\n            if (this.relatedData.length && this.relatedData.length % this.pageSize === 0) {\r\n                this.pages(this.pages() + 1);\r\n                this.nextPage();\r\n            } else if (~~this.currentPage() !== this.pages()) {\r\n                this.currentPage(this.pages());\r\n            }\r\n\r\n            this.addChild(ctx, index, prop);\r\n        },\r\n\r\n        /**\r\n         * Processing pages before deleteRecord\r\n         *\r\n         * @param {Number|String} index - element index\r\n         * @param {Number|String} recordId\r\n         */\r\n        processingDeleteRecord: function (index, recordId) {\r\n            this.deleteRecord(index, recordId);\r\n        },\r\n\r\n        /**\r\n         * Change page\r\n         *\r\n         * @param {Number} page - current page\r\n         */\r\n        changePage: function (page) {\r\n            this.clear();\r\n\r\n            if (page === 1 && !this.recordData().length) {\r\n                return false;\r\n            }\r\n\r\n            if (~~page > this.pages()) {\r\n                this.currentPage(this.pages());\r\n\r\n                return false;\r\n            } else if (~~page < 1) {\r\n                this.currentPage(1);\r\n\r\n                return false;\r\n            }\r\n\r\n            this.initChildren();\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check page\r\n         *\r\n         * @returns {Boolean} is page first or not\r\n         */\r\n        isFirst: function () {\r\n            return this.currentPage() === 1;\r\n        },\r\n\r\n        /**\r\n         * Check page\r\n         *\r\n         * @returns {Boolean} is page last or not\r\n         */\r\n        isLast: function () {\r\n            return this.currentPage() === this.pages();\r\n        },\r\n\r\n        /**\r\n         * Change page to next\r\n         */\r\n        nextPage: function () {\r\n            this.currentPage(this.currentPage() + 1);\r\n        },\r\n\r\n        /**\r\n         * Change page to previous\r\n         */\r\n        previousPage: function () {\r\n            this.currentPage(this.currentPage() - 1);\r\n        },\r\n\r\n        /**\r\n         * Check dependency and set position to elements\r\n         *\r\n         * @param {Array} collection - elems\r\n         * @param {Number} position - current position\r\n         * @param {String} elemName - element name\r\n         *\r\n         * @returns {Array} collection\r\n         */\r\n        updatePosition: function (collection, position, elemName) {\r\n            var curPos,\r\n                parsePosition = ~~position,\r\n                result = _.filter(collection, function (record) {\r\n                    return ~~record.position === parsePosition;\r\n                });\r\n\r\n            if (result[1]) {\r\n                curPos = parsePosition + 1;\r\n                result[0].name === elemName ? result[1].position = curPos : result[0].position = curPos;\r\n                this.updatePosition(collection, curPos);\r\n            }\r\n\r\n            return collection;\r\n        },\r\n\r\n        /**\r\n         * Check max elements position and set if max\r\n         *\r\n         * @param {Number} position - current position\r\n         */\r\n        checkMaxPosition: function (position) {\r\n            var max = 0,\r\n                pos;\r\n\r\n            this.elems.each(function (record) {\r\n                pos = ~~record.position;\r\n                pos > max ? max = pos : false;\r\n            });\r\n\r\n            max < position ? max = position : false;\r\n            this.maxPosition = max;\r\n        },\r\n\r\n        /**\r\n         * Remove and set new max position\r\n         */\r\n        removeMaxPosition: function () {\r\n            this.maxPosition = 0;\r\n            this.elems.each(function (record) {\r\n                this.maxPosition < record.position ? this.maxPosition = ~~record.position : false;\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Update record template and rerender elems\r\n         *\r\n         * @param {String} recordName - record name\r\n         */\r\n        onUpdateRecordTemplate: function (recordName) {\r\n            if (recordName) {\r\n                this.recordTemplate = recordName;\r\n                this.reload();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Delete record\r\n         *\r\n         * @param {Number} index - row index\r\n         *\r\n         */\r\n        deleteRecord: function (index, recordId) {\r\n            var recordInstance,\r\n                lastRecord,\r\n                recordsData,\r\n                lastRecordIndex;\r\n\r\n            if (this.deleteProperty) {\r\n                recordsData = this.recordData();\r\n                recordInstance = _.find(this.elems(), function (elem) {\r\n                    return elem.index === index;\r\n                });\r\n                recordInstance.destroy();\r\n                this.elems([]);\r\n                this._updateCollection();\r\n                this.removeMaxPosition();\r\n                recordsData[recordInstance.index][this.deleteProperty] = this.deleteValue;\r\n                this.recordData(recordsData);\r\n                this.reinitRecordData();\r\n                this.reload();\r\n            } else {\r\n                this.update = true;\r\n\r\n                if (~~this.currentPage() === this.pages()) {\r\n                    lastRecordIndex = this.startIndex + this.getChildItems().length - 1;\r\n                    lastRecord =\r\n                        _.findWhere(this.elems(), {\r\n                            index: lastRecordIndex\r\n                        }) ||\r\n                        _.findWhere(this.elems(), {\r\n                            index: lastRecordIndex.toString()\r\n                        });\r\n\r\n                    lastRecord.destroy();\r\n                }\r\n\r\n                this.removeMaxPosition();\r\n                recordsData = this._getDataByProp(recordId);\r\n                this._updateData(recordsData);\r\n                this.update = false;\r\n            }\r\n\r\n            this._reducePages();\r\n            this._sort();\r\n        },\r\n\r\n        /**\r\n         * Update number of pages.\r\n         *\r\n         * @private\r\n         * @return void\r\n         */\r\n        _updatePagesQuantity: function () {\r\n            var pages = Math.ceil(this.relatedData.length / this.pageSize) || 1;\r\n\r\n            this.pages(pages);\r\n        },\r\n\r\n        /**\r\n         * Reduce the number of pages\r\n         *\r\n         * @private\r\n         * @return void\r\n         */\r\n        _reducePages: function () {\r\n            if (this.pages() < ~~this.currentPage()) {\r\n                this.currentPage(this.pages());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get data object by some property\r\n         *\r\n         * @param {Number} id - element id\r\n         * @param {String} prop - property\r\n         */\r\n        _getDataByProp: function (id, prop) {\r\n            prop = prop || this.identificationProperty;\r\n\r\n            return _.reject(this.getChildItems(), function (recordData) {\r\n                return recordData[prop].toString() === id.toString();\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Sort elems by position property\r\n         */\r\n        _sort: function () {\r\n            this.elems(this.elems().sort(function (propOne, propTwo) {\r\n                return ~~propOne.position - ~~propTwo.position;\r\n            }));\r\n        },\r\n\r\n        /**\r\n         * Set new data to dataSource,\r\n         * delete element\r\n         *\r\n         * @param {Array} data - record data\r\n         */\r\n        _updateData: function (data) {\r\n            var elems = _.clone(this.elems()),\r\n                path,\r\n                dataArr;\r\n\r\n            dataArr = this.recordData.splice(this.startIndex, this.recordData().length - this.startIndex);\r\n            dataArr.splice(0, this.pageSize);\r\n            elems = _.sortBy(this.elems(), function (elem) {\r\n                return ~~elem.index;\r\n            });\r\n\r\n            data.concat(dataArr).forEach(function (rec, idx) {\r\n                if (elems[idx]) {\r\n                    elems[idx].recordId = rec[this.identificationProperty];\r\n                }\r\n\r\n                if (!rec.position) {\r\n                    rec.position = this.maxPosition;\r\n                    this.setMaxPosition();\r\n                }\r\n\r\n                path = this.dataScope + '.' + this.index + '.' + (this.startIndex + idx);\r\n                this.source.set(path, rec);\r\n            }, this);\r\n\r\n            this.elems(elems);\r\n        },\r\n\r\n        /**\r\n         * Rerender dynamic-rows elems\r\n         */\r\n        reload: function () {\r\n            this.clear();\r\n            this.initChildren(false, true);\r\n            this._updatePagesQuantity();\r\n\r\n            /* After change page size need to check existing current page */\r\n            this._reducePages();\r\n        },\r\n\r\n        /**\r\n         * Update page size based on select change event.\r\n         * The value needs to be retrieved from select as ko value handler is executed after the event handler.\r\n         *\r\n         * @param {Object} component\r\n         * @param {jQuery.Event} event\r\n         */\r\n        updatePageSize: function (component, event) {\r\n            this.pageSize = $(event.target).val();\r\n            this.reload();\r\n        },\r\n\r\n        /**\r\n         * Destroy all dynamic-rows elems\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        clear: function () {\r\n            this.destroyChildren();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Reset data to initial value.\r\n         * Call method reset on child elements.\r\n         */\r\n        reset: function () {\r\n            var elems = this.elems();\r\n\r\n            _.each(elems, function (elem) {\r\n                if (_.isFunction(elem.reset)) {\r\n                    elem.reset();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set classes\r\n         *\r\n         * @param {Object} data\r\n         *\r\n         * @returns {Object} Classes\r\n         */\r\n        setClasses: function (data) {\r\n            var additional;\r\n\r\n            if (_.isString(data.additionalClasses)) {\r\n                additional = data.additionalClasses.split(' ');\r\n                data.additionalClasses = {};\r\n\r\n                additional.forEach(function (name) {\r\n                    data.additionalClasses[name] = true;\r\n                });\r\n            }\r\n\r\n            if (!data.additionalClasses) {\r\n                data.additionalClasses = {};\r\n            }\r\n\r\n            _.extend(data.additionalClasses, {\r\n                '_fit': data.fit,\r\n                '_required': data.required,\r\n                '_error': data.error,\r\n                '_empty': !this.elems().length,\r\n                '_no-header': this.columnsHeaderAfterRender || this.collapsibleHeader\r\n            });\r\n\r\n            return data.additionalClasses;\r\n        },\r\n\r\n        /**\r\n         * Initialize children\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            this.showSpinner(true);\r\n            this.getChildItems().forEach(function (data, index) {\r\n                this.addChild(data, this.startIndex + index);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set visibility to dynamic-rows child\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        setVisible: function (state) {\r\n            this.elems.each(function (record) {\r\n                record.setVisible(state);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Set disabled property to dynamic-rows child\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        setDisabled: function (state) {\r\n            this.elems.each(function (record) {\r\n                record.setDisabled(state);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Set visibility to column\r\n         *\r\n         * @param {Number} index - column index\r\n         * @param {Boolean} state\r\n         */\r\n        setVisibilityColumn: function (index, state) {\r\n            this.elems.each(function (record) {\r\n                record.setVisibilityColumn(index, state);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Set disabled property to column\r\n         *\r\n         * @param {Number} index - column index\r\n         * @param {Boolean} state\r\n         */\r\n        setDisabledColumn: function (index, state) {\r\n            this.elems.each(function (record) {\r\n                record.setDisabledColumn(index, state);\r\n            }, this);\r\n        },\r\n\r\n        /**\r\n         * Add child components\r\n         *\r\n         * @param {Object} data - component data\r\n         * @param {Number} index - record(row) index\r\n         * @param {Number|String} prop - custom identify property\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        addChild: function (data, index, prop) {\r\n            var template = this.templates.record,\r\n                child;\r\n\r\n            index = index || _.isNumber(index) ? index : this.recordData().length;\r\n            prop = prop || _.isNumber(prop) ? prop : index;\r\n\r\n            _.extend(this.templates.record, {\r\n                recordId: prop\r\n            });\r\n\r\n            child = utils.template(template, {\r\n                collection: this,\r\n                index: index\r\n            });\r\n\r\n            layout([child]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Restore value to default\r\n         */\r\n        restoreToDefault: function () {\r\n            this.recordData(utils.copy(this.default));\r\n            this.reload();\r\n        },\r\n\r\n        /**\r\n         * Update whether value differs from default value\r\n         */\r\n        setDifferedFromDefault: function () {\r\n            var recordData;\r\n\r\n            if (this.default) {\r\n                recordData = utils.copy(this.recordData());\r\n\r\n                Array.isArray(recordData) && recordData.forEach(function (item) {\r\n                    delete item['record_id'];\r\n                });\r\n\r\n                this.isDifferedFromDefault(!_.isEqual(recordData, this.default));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set the changed property if the current page is different\r\n         * than the default state\r\n         *\r\n         * @return void\r\n         */\r\n        setChangedForCurrentPage: function () {\r\n            this.pagesChanged[this.currentPage()] =\r\n                !compareArrays(this.defaultPagesState[this.currentPage()], this.arrayFilter(this.getChildItems()));\r\n            this.changed(_.some(this.pagesChanged));\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/dynamic-rows/record.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiCollection',\r\n    'uiRegistry'\r\n], function (_, uiCollection, registry) {\r\n    'use strict';\r\n\r\n    return uiCollection.extend({\r\n        defaults: {\r\n            visible: true,\r\n            disabled: true,\r\n            headerLabel: '',\r\n            label: '',\r\n            positionProvider: 'position',\r\n            imports: {\r\n                data: '${ $.provider }:${ $.dataScope }'\r\n            },\r\n            listens: {\r\n                position: 'initPosition',\r\n                elems: 'setColumnVisibleListener'\r\n            },\r\n            links: {\r\n                position: '${ $.name }.${ $.positionProvider }:value'\r\n            },\r\n            exports: {\r\n                recordId: '${ $.provider }:${ $.dataScope }.record_id'\r\n            },\r\n            modules: {\r\n                parentComponent: '${ $.parentName }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Extends instance with default config, calls initialize of parent\r\n         * class, calls initChildren method, set observe variable.\r\n         * Use parent \"track\" method - wrapper observe array\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            var self = this;\r\n\r\n            this._super();\r\n\r\n            registry.async(this.name + '.' + this.positionProvider)(function (component) {\r\n\r\n                /**\r\n                 * Overwrite hasChanged method\r\n                 *\r\n                 * @returns {Boolean}\r\n                 */\r\n                component.hasChanged = function () {\r\n\r\n                    /* eslint-disable eqeqeq */\r\n                    return this.value().toString() != this.initialValue.toString();\r\n\r\n                    /* eslint-enable eqeqeq */\r\n                };\r\n\r\n                if (!component.initialValue) {\r\n                    component.initialValue = self.parentComponent().maxPosition;\r\n                    component.bubble('update', component.hasChanged());\r\n                }\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init config\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            this.label = this.label || this.headerLabel;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' of parent\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .track('position')\r\n                .observe([\r\n                    'visible',\r\n                    'disabled',\r\n                    'data',\r\n                    'label'\r\n                ]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Init element position\r\n         *\r\n         * @param {Number} position - element position\r\n         */\r\n        initPosition: function (position) {\r\n            var pos = parseInt(position, 10);\r\n\r\n            this.parentComponent().setMaxPosition(pos, this);\r\n\r\n            if (!pos && pos !== 0) {\r\n                this.position = this.parentComponent().maxPosition;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set column visibility listener\r\n         */\r\n        setColumnVisibleListener: function () {\r\n            var elem = _.find(this.elems(), function (curElem) {\r\n                return !curElem.hasOwnProperty('visibleListener');\r\n            });\r\n\r\n            if (!elem) {\r\n                return;\r\n            }\r\n\r\n            this.childVisibleListener(elem);\r\n\r\n            if (!elem.visibleListener) {\r\n                elem.on('visible', this.childVisibleListener.bind(this, elem));\r\n            }\r\n\r\n            elem.visibleListener = true;\r\n        },\r\n\r\n        /**\r\n         * Child visibility listener\r\n         *\r\n         * @param {Object} data\r\n         */\r\n        childVisibleListener: function (data) {\r\n            this.setVisibilityColumn(data.index, data.visible());\r\n        },\r\n\r\n        /**\r\n         * Reset data to initial value.\r\n         * Call method reset on child elements.\r\n         */\r\n        reset: function () {\r\n            var elems = this.elems(),\r\n                nameIsEqual,\r\n                dataScopeIsEqual;\r\n\r\n            _.each(elems, function (elem) {\r\n                nameIsEqual = this.name + '.' + this.positionProvider === elem.name;\r\n                dataScopeIsEqual = this.dataScope === elem.dataScope;\r\n\r\n                if (!(nameIsEqual || dataScopeIsEqual) && _.isFunction(elem.reset)) {\r\n                    elem.reset();\r\n                }\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Clear data\r\n         *\r\n         * @returns {Collection} Chainable.\r\n         */\r\n        clear: function () {\r\n            var elems = this.elems(),\r\n                nameIsEqual,\r\n                dataScopeIsEqual;\r\n\r\n            _.each(elems, function (elem) {\r\n                nameIsEqual = this.name + '.' + this.positionProvider === elem.name;\r\n                dataScopeIsEqual = this.dataScope === elem.dataScope;\r\n\r\n                if (!(nameIsEqual || dataScopeIsEqual) && _.isFunction(elem.reset)) {\r\n                    elem.clear();\r\n                }\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Get label for collapsible header\r\n         *\r\n         * @param {String} label\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getLabel: function (label) {\r\n            if (_.isString(label)) {\r\n                this.label(label);\r\n            } else if (label && this.label()) {\r\n                return this.label();\r\n            } else {\r\n                this.label(this.headerLabel);\r\n            }\r\n\r\n            return this.label();\r\n        },\r\n\r\n        /**\r\n         * Set visibility to record child\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        setVisible: function (state) {\r\n            this.elems.each(function (cell) {\r\n                cell.visible(state);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set visibility to child by index\r\n         *\r\n         * @param {Number} index\r\n         * @param {Boolean} state\r\n         */\r\n        setVisibilityColumn: function (index, state) {\r\n            var elems = this.elems(),\r\n                curElem = parseInt(index, 10),\r\n                label;\r\n\r\n            if (!this.parentComponent()) {\r\n                return false;\r\n            }\r\n\r\n            if (_.isNaN(curElem)) {\r\n                _.findWhere(elems, {\r\n                    index: index\r\n                }).visible(state);\r\n                label = _.findWhere(this.parentComponent().labels(), {\r\n                    name: index\r\n                });\r\n                label.defaultLabelVisible && label.visible(state);\r\n            } else {\r\n                elems[curElem].visible(state);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Set disabled to child\r\n         *\r\n         * @param {Boolean} state\r\n         */\r\n        setDisabled: function (state) {\r\n            this.elems.each(function (cell) {\r\n                cell.disabled(state);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Set disabled to child by index\r\n         *\r\n         * @param {Number} index\r\n         * @param {Boolean} state\r\n         */\r\n        setDisabledColumn: function (index, state) {\r\n            index = ~~index;\r\n            this.elems()[index].disabled(state);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/adapter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'Magento_Ui/js/form/adapter/buttons'\r\n], function ($, _, buttons) {\r\n    'use strict';\r\n\r\n    var selectorPrefix = '',\r\n        eventPrefix;\r\n\r\n    /**\r\n     * Initialize listener.\r\n     *\r\n     * @param {Function} callback\r\n     * @param {String} action\r\n     */\r\n    function initListener(callback, action) {\r\n        var selector    = selectorPrefix ? selectorPrefix + ' ' + buttons[action] : buttons[action],\r\n            elem        = $(selector)[0];\r\n\r\n        if (!elem) {\r\n            return;\r\n        }\r\n\r\n        if (elem.onclick) {\r\n            elem.onclick = null;\r\n        }\r\n\r\n        $(elem).on('click' + eventPrefix, callback);\r\n    }\r\n\r\n    /**\r\n     * Destroy listener.\r\n     *\r\n     * @param {String} action\r\n     */\r\n    function destroyListener(action) {\r\n        var selector    = selectorPrefix ? selectorPrefix + ' ' + buttons[action] : buttons[action],\r\n            elem        = $(selector)[0];\r\n\r\n        if (!elem) {\r\n            return;\r\n        }\r\n\r\n        if (elem.onclick) {\r\n            elem.onclick = null;\r\n        }\r\n\r\n        $(elem).off('click' + eventPrefix);\r\n    }\r\n\r\n    return {\r\n\r\n        /**\r\n         * Attaches events handlers.\r\n         *\r\n         * @param {Object} handlers\r\n         * @param {String} selectorPref\r\n         * @param {String} eventPref\r\n         */\r\n        on: function (handlers, selectorPref, eventPref) {\r\n            selectorPrefix = selectorPrefix || selectorPref;\r\n            eventPrefix = eventPref;\r\n            _.each(handlers, initListener);\r\n            selectorPrefix = '';\r\n        },\r\n\r\n        /**\r\n         * Removes events handlers.\r\n         *\r\n         * @param {Object} handlers\r\n         * @param {String} eventPref\r\n         */\r\n        off: function (handlers, eventPref) {\r\n            eventPrefix = eventPref;\r\n            _.each(handlers, destroyListener);\r\n        }\r\n    };\r\n});\r\n","Magento_Ui/js/form/button-adapter.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'uiClass',\r\n    'jquery',\r\n    'underscore',\r\n    'uiRegistry'\r\n], function (Class, $, _, registry) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n\r\n        /**\r\n         * Initialize actions and adapter.\r\n         *\r\n         * @param {Object} config\r\n         * @param {Element} elem\r\n         * @returns {Object}\r\n         */\r\n        initialize: function (config, elem) {\r\n            return this._super()\r\n                .initActions()\r\n                .initAdapter(elem);\r\n        },\r\n\r\n        /**\r\n         * Creates callback from declared actions.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        initActions: function () {\r\n            var callbacks = [];\r\n\r\n            _.each(this.actions, function (action) {\r\n                callbacks.push({\r\n                    action: registry.async(action.targetName),\r\n                    args: _.union([action.actionName], action.params)\r\n                });\r\n            });\r\n\r\n            /**\r\n             * Callback function.\r\n             */\r\n            this.callback = function () {\r\n                _.each(callbacks, function (callback) {\r\n                    callback.action.apply(callback.action, callback.args);\r\n                });\r\n            };\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Attach callback handler on button.\r\n         *\r\n         * @param {Element} elem\r\n         */\r\n        initAdapter: function (elem) {\r\n            $(elem).on('click', this.callback);\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/client.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'mageUtils',\r\n    'uiClass'\r\n], function ($, _, utils, Class) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Before save validate request.\r\n     *\r\n     * @param {Object} data\r\n     * @param {String} url\r\n     * @param {String} selectorPrefix\r\n     * @param {String} messagesClass\r\n     * @returns {*}\r\n     */\r\n    function beforeSave(data, url, selectorPrefix, messagesClass) {\r\n        var save = $.Deferred();\r\n\r\n        data = utils.serialize(utils.filterFormData(data));\r\n        data['form_key'] = window.FORM_KEY;\r\n\r\n        if (!url || url === 'undefined') {\r\n            return save.resolve();\r\n        }\r\n\r\n        $('body').trigger('processStart');\r\n\r\n        $.ajax({\r\n            url: url,\r\n            data: data,\r\n\r\n            /**\r\n             * Success callback.\r\n             * @param {Object} resp\r\n             * @returns {Boolean}\r\n             */\r\n            success: function (resp) {\r\n                if (!resp.error) {\r\n                    save.resolve();\r\n\r\n                    return true;\r\n                }\r\n\r\n                $('body').notification('clear');\r\n                $.each(resp.messages || [resp.message] || [], function (key, message) {\r\n                    $('body').notification('add', {\r\n                        error: resp.error,\r\n                        message: message,\r\n\r\n                        /**\r\n                         * Insert method.\r\n                         *\r\n                         * @param {String} msg\r\n                         */\r\n                        insertMethod: function (msg) {\r\n                            var $wrapper = $('<div></div>').addClass(messagesClass).html(msg);\r\n\r\n                            $('.page-main-actions', selectorPrefix).after($wrapper);\r\n                            $('html, body').animate({\r\n                                scrollTop: $('.page-main-actions', selectorPrefix).offset().top\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            },\r\n\r\n            /**\r\n             * Complete callback.\r\n             */\r\n            complete: function () {\r\n                $('body').trigger('processStop');\r\n            }\r\n        });\r\n\r\n        return save.promise();\r\n    }\r\n\r\n    return Class.extend({\r\n\r\n        /**\r\n         * Assembles data and submits it using 'utils.submit' method\r\n         */\r\n        save: function (data, options) {\r\n            var url = this.urls.beforeSave,\r\n                save = this._save.bind(this, data, options);\r\n\r\n            beforeSave(data, url, this.selectorPrefix, this.messagesClass).then(save);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Save data.\r\n         *\r\n         * @param {Object} data\r\n         * @param {Object} options\r\n         * @returns {Object}\r\n         * @private\r\n         */\r\n        _save: function (data, options) {\r\n            var url = this.urls.save;\r\n\r\n            $('body').trigger('processStart');\r\n            options = options || {};\r\n\r\n            if (!options.redirect) {\r\n                url += 'back/edit';\r\n            }\r\n\r\n            if (options.ajaxSave) {\r\n                utils.ajaxSubmit({\r\n                    url: url,\r\n                    data: data\r\n                }, options);\r\n\r\n                $('body').trigger('processStop');\r\n\r\n                return this;\r\n            }\r\n\r\n            utils.submit({\r\n                url: url,\r\n                data: data\r\n            }, options.attributes);\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/form.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'Magento_Ui/js/lib/spinner',\r\n    'rjsResolver',\r\n    './adapter',\r\n    'uiCollection',\r\n    'mageUtils',\r\n    'jquery',\r\n    'Magento_Ui/js/core/app',\r\n    'mage/validation'\r\n], function (_, loader, resolver, adapter, Collection, utils, $, app) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Format params\r\n     *\r\n     * @param {Object} params\r\n     * @returns {Array}\r\n     */\r\n    function prepareParams(params) {\r\n        var result = '?';\r\n\r\n        _.each(params, function (value, key) {\r\n            result += key + '=' + value + '&';\r\n        });\r\n\r\n        return result.slice(0, -1);\r\n    }\r\n\r\n    /**\r\n     * Collect form data.\r\n     *\r\n     * @param {Array} items\r\n     * @returns {Object}\r\n     */\r\n    function collectData(items) {\r\n        var result = {},\r\n            name;\r\n\r\n        items = Array.prototype.slice.call(items);\r\n\r\n        items.forEach(function (item) {\r\n            switch (item.type) {\r\n                case 'checkbox':\r\n                    result[item.name] = +!!item.checked;\r\n                    break;\r\n\r\n                case 'radio':\r\n                    if (item.checked) {\r\n                        result[item.name] = item.value;\r\n                    }\r\n                    break;\r\n\r\n                case 'select-multiple':\r\n                    name = item.name.substring(0, item.name.length - 2); //remove [] from the name ending\r\n                    result[name] = _.pluck(item.selectedOptions, 'value');\r\n                    break;\r\n\r\n                default:\r\n                    result[item.name] = item.value;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Makes ajax request\r\n     *\r\n     * @param {Object} params\r\n     * @param {Object} data\r\n     * @param {String} url\r\n     * @returns {*}\r\n     */\r\n    function makeRequest(params, data, url) {\r\n        var save = $.Deferred();\r\n\r\n        data = utils.serialize(data);\r\n        data['form_key'] = window.FORM_KEY;\r\n\r\n        if (!url) {\r\n            save.resolve();\r\n        }\r\n\r\n        $('body').trigger('processStart');\r\n\r\n        $.ajax({\r\n            url: url + prepareParams(params),\r\n            data: data,\r\n            dataType: 'json',\r\n\r\n            /**\r\n             * Success callback.\r\n             * @param {Object} resp\r\n             * @returns {Boolean}\r\n             */\r\n            success: function (resp) {\r\n                if (resp.ajaxExpired) {\r\n                    window.location.href = resp.ajaxRedirect;\r\n                }\r\n\r\n                if (!resp.error) {\r\n                    save.resolve(resp);\r\n\r\n                    return true;\r\n                }\r\n\r\n                $('body').notification('clear');\r\n                $.each(resp.messages, function (key, message) {\r\n                    $('body').notification('add', {\r\n                        error: resp.error,\r\n                        message: message,\r\n\r\n                        /**\r\n                         * Inserts message on page\r\n                         * @param {String} msg\r\n                         */\r\n                        insertMethod: function (msg) {\r\n                            $('.page-main-actions').after(msg);\r\n                        }\r\n                    });\r\n                });\r\n            },\r\n\r\n            /**\r\n             * Complete callback.\r\n             */\r\n            complete: function () {\r\n                $('body').trigger('processStop');\r\n            }\r\n        });\r\n\r\n        return save.promise();\r\n    }\r\n\r\n    /**\r\n     * Check if fields is valid.\r\n     *\r\n     * @param {Array}items\r\n     * @returns {Boolean}\r\n     */\r\n    function isValidFields(items) {\r\n        var result = true;\r\n\r\n        _.each(items, function (item) {\r\n            if (!$.validator.validateSingleElement(item)) {\r\n                result = false;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    return Collection.extend({\r\n        defaults: {\r\n            additionalFields: [],\r\n            additionalInvalid: false,\r\n            selectorPrefix: '.page-content',\r\n            messagesClass: 'messages',\r\n            errorClass: '.admin__field._error',\r\n            eventPrefix: '.${ $.index }',\r\n            ajaxSave: false,\r\n            ajaxSaveType: 'default',\r\n            imports: {\r\n                reloadUrl: '${ $.provider}:reloadUrl'\r\n            },\r\n            listens: {\r\n                selectorPrefix: 'destroyAdapter initAdapter',\r\n                '${ $.name }.${ $.reloadItem }': 'params.set reload'\r\n            },\r\n            exports: {\r\n                selectorPrefix: '${ $.provider }:client.selectorPrefix',\r\n                messagesClass: '${ $.provider }:client.messagesClass'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super()\r\n                .initAdapter();\r\n\r\n            resolver(this.hideLoader, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe([\r\n                    'responseData',\r\n                    'responseStatus'\r\n                ]);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function () {\r\n            this._super();\r\n\r\n            this.selector = '[data-form-part=' + this.namespace + ']';\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize adapter handlers.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        initAdapter: function () {\r\n            adapter.on({\r\n                'reset': this.reset.bind(this),\r\n                'save': this.save.bind(this, true, {}),\r\n                'saveAndContinue': this.save.bind(this, false, {})\r\n            }, this.selectorPrefix, this.eventPrefix);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Destroy adapter handlers.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        destroyAdapter: function () {\r\n            adapter.off([\r\n                'reset',\r\n                'save',\r\n                'saveAndContinue'\r\n            ], this.eventPrefix);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Hide loader.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        hideLoader: function () {\r\n            loader.get(this.name).hide();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Validate and save form.\r\n         *\r\n         * @param {String} redirect\r\n         * @param {Object} data\r\n         */\r\n        save: function (redirect, data) {\r\n            this.validate();\r\n\r\n            if (!this.additionalInvalid && !this.source.get('params.invalid')) {\r\n                this.setAdditionalData(data)\r\n                    .submit(redirect);\r\n            } else {\r\n                this.focusInvalid();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Tries to set focus on first invalid form field.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        focusInvalid: function () {\r\n            var invalidField = _.find(this.delegate('checkInvalid'));\r\n\r\n            if (!_.isUndefined(invalidField) && _.isFunction(invalidField.focused)) {\r\n                invalidField.focused(true);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Set additional data to source before form submit and after validation.\r\n         *\r\n         * @param {Object} data\r\n         * @returns {Object}\r\n         */\r\n        setAdditionalData: function (data) {\r\n            _.each(data, function (value, name) {\r\n                this.source.set('data.' + name, value);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Submits form\r\n         *\r\n         * @param {String} redirect\r\n         */\r\n        submit: function (redirect) {\r\n            var additional = collectData(this.additionalFields),\r\n                source = this.source;\r\n\r\n            _.each(additional, function (value, name) {\r\n                source.set('data.' + name, value);\r\n            });\r\n\r\n            source.save({\r\n                redirect: redirect,\r\n                ajaxSave: this.ajaxSave,\r\n                ajaxSaveType: this.ajaxSaveType,\r\n                response: {\r\n                    data: this.responseData,\r\n                    status: this.responseStatus\r\n                },\r\n                attributes: {\r\n                    id: this.namespace\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Validates each element and returns true, if all elements are valid.\r\n         */\r\n        validate: function () {\r\n            this.additionalFields = document.querySelectorAll(this.selector);\r\n            this.source.set('params.invalid', false);\r\n            this.source.trigger('data.validate');\r\n            this.set('additionalInvalid', !isValidFields(this.additionalFields));\r\n        },\r\n\r\n        /**\r\n         * Trigger reset form data.\r\n         */\r\n        reset: function () {\r\n            this.source.trigger('data.reset');\r\n            $('[data-bind*=datepicker]').val('');\r\n        },\r\n\r\n        /**\r\n         * Trigger overload form data.\r\n         */\r\n        overload: function () {\r\n            this.source.trigger('data.overload');\r\n        },\r\n\r\n        /**\r\n         * Updates data from server.\r\n         */\r\n        reload: function () {\r\n            makeRequest(this.params, this.data, this.reloadUrl).then(function (data) {\r\n                app(data, true);\r\n            });\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/provider.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiElement',\r\n    './client',\r\n    'mageUtils'\r\n], function (_, Element, Client, utils) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            clientConfig: {\r\n                urls: {\r\n                    save: '${ $.submit_url }',\r\n                    beforeSave: '${ $.validate_url }'\r\n                }\r\n            },\r\n            ignoreTmpls: {\r\n                data: true\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initializes provider component.\r\n         *\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initClient();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes client component.\r\n         *\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        initClient: function () {\r\n            this.client = new Client(this.clientConfig);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Saves currently available data.\r\n         *\r\n         * @param {Object} [options] - Addtitional request options.\r\n         * @returns {Provider} Chainable.\r\n         */\r\n        save: function (options) {\r\n            var data = this.get('data');\r\n\r\n            this.client.save(data, options);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Update data that stored in provider.\r\n         *\r\n         * @param {Boolean} isProvider\r\n         * @param {Object} newData\r\n         * @param {Object} oldData\r\n         *\r\n         * @returns {Provider}\r\n         */\r\n        updateConfig: function (isProvider, newData, oldData) {\r\n            if (isProvider === true) {\r\n                this.setData(oldData, newData, this);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *  Set data to provider based on current data.\r\n         *\r\n         * @param {Object} oldData\r\n         * @param {Object} newData\r\n         * @param {Provider} current\r\n         * @param {String} parentPath\r\n         */\r\n        setData: function (oldData, newData, current, parentPath) {\r\n            _.each(newData, function (val, key) {\r\n                if (_.isObject(val) || _.isArray(val)) {\r\n                    this.setData(oldData[key], val, current[key], utils.fullPath(parentPath, key));\r\n                } else if (val != oldData[key] && oldData[key] == current[key]) {//eslint-disable-line eqeqeq\r\n                    this.set(utils.fullPath(parentPath, key), val);\r\n                }\r\n            }, this);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/switcher.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiRegistry',\r\n    'uiClass'\r\n], function (_, registry, Class) {\r\n    'use strict';\r\n\r\n    return Class.extend({\r\n        defaults: {\r\n            rules: []\r\n        },\r\n\r\n        /**\r\n         * Initializes instance of a DataSwitcher.\r\n         *\r\n         * @returns {DataSwitcher} Chainable.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initRules();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {DataSwitcher} Chainable.\r\n         */\r\n        initRules: function () {\r\n            this.rules.forEach(this.initRule, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} rule - Rule definition.\r\n         * @returns {DataSwitcher} Chainable.\r\n         */\r\n        initRule: function (rule) {\r\n            var handler = this.onValueChange.bind(this, rule);\r\n\r\n            if (!rule.target) {\r\n                rule.target = this.target;\r\n            }\r\n\r\n            if (!rule.property) {\r\n                rule.property = this.property;\r\n            }\r\n\r\n            registry.get(rule.target, function (target) {\r\n                this.applyRule(rule, target.get(rule.property));\r\n                target.on(rule.property, handler);\r\n            }.bind(this));\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} rule - Rule definition.\r\n         * @returns {DataSwitcher} Chainable.\r\n         */\r\n        addRule: function (rule) {\r\n            this.rules.push(rule);\r\n            this.initRule(rule);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} rule - Rule object.\r\n         * @param {*} value - Current value associated with a rule.\r\n         */\r\n        applyRule: function (rule, value) {\r\n            var actions = rule.actions;\r\n\r\n            //TODO Refactor this logic in scope of MAGETWO-48585\r\n            /* eslint-disable eqeqeq */\r\n            if (rule.value != value) {\r\n                return;\r\n            } else if (rule.strict) {\r\n                return;\r\n            }\r\n\r\n            /* eslint-enable eqeqeq */\r\n            actions.forEach(this.applyAction, this);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} action - Action object.\r\n         */\r\n        applyAction: function (action) {\r\n            registry.get(action.target, function (target) {\r\n                var callback = target[action.callback];\r\n\r\n                callback.apply(target, action.params || []);\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param {Object} rule - Rules object.\r\n         * @param {*} value - Current value associated with a rule.\r\n         */\r\n        onValueChange: function (rule, value) {\r\n            this.applyRule(rule, value);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/adapter/buttons.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine(function () {\r\n    'use strict';\r\n\r\n    return {\r\n        'reset': '#reset',\r\n        'save': '#save',\r\n        'saveAndContinue': '#save_and_continue'\r\n    };\r\n});\r\n","Magento_Ui/js/form/components/area.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    './tab'\r\n], function (_, Tab) {\r\n    'use strict';\r\n\r\n    return Tab.extend({\r\n        defaults: {\r\n            uniqueNs:   'params.activeArea',\r\n            template:   'ui/area',\r\n            changed:    false,\r\n            loading:    false\r\n        },\r\n\r\n        /**\r\n         * Extends instance with defaults. Invokes parent initialize method.\r\n         * Calls initListeners and pushParams methods.\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(this, 'onChildrenUpdate', 'onContentLoading');\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Calls initObservable of parent class.\r\n         * Defines observable properties of instance.\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('changed loading');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls parent's initElement method.\r\n         * Assigns callbacks on various events of incoming element.\r\n         * @param  {Object} elem\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initElement: function (elem) {\r\n            this._super();\r\n\r\n            elem.on({\r\n                'update':   this.onChildrenUpdate,\r\n                'loading':  this.onContentLoading\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Is being invoked on children update.\r\n         * Sets changed property to one incoming.\r\n         * Invokes setActive method if settings\r\n         * contain makeVisible property set to true.\r\n         *\r\n         * @param  {Boolean} hasChanged\r\n         */\r\n        onChildrenUpdate: function (hasChanged) {\r\n            if (!hasChanged) {\r\n                hasChanged = _.some(this.delegate('hasChanged'));\r\n            }\r\n\r\n            this.changed(hasChanged);\r\n        },\r\n\r\n        /**\r\n         * Callback that sets loading property to true.\r\n         */\r\n        onContentLoading: function (isLoading) {\r\n            this.loading(isLoading);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/button.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'uiElement',\r\n    'uiRegistry',\r\n    'uiLayout',\r\n    'mageUtils',\r\n    'underscore'\r\n], function (Element, registry, layout, utils, _) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            buttonClasses: {},\r\n            additionalClasses: {},\r\n            displayArea: 'outsideGroup',\r\n            displayAsLink: false,\r\n            elementTmpl: 'ui/form/element/button',\r\n            template: 'ui/form/components/button/simple',\r\n            visible: true,\r\n            disabled: false,\r\n            title: ''\r\n        },\r\n\r\n        /**\r\n         * Initializes component.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        initialize: function () {\r\n            return this._super()\r\n                ._setClasses()\r\n                ._setButtonClasses();\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe([\r\n                    'visible',\r\n                    'disabled',\r\n                    'title',\r\n                    'childError'\r\n                ]);\r\n        },\r\n\r\n        /**\r\n         * Performs configured actions\r\n         */\r\n        action: function () {\r\n            this.actions.forEach(this.applyAction, this);\r\n        },\r\n\r\n        /**\r\n         * Apply action on target component,\r\n         * but previously create this component from template if it is not existed\r\n         *\r\n         * @param {Object} action - action configuration\r\n         */\r\n        applyAction: function (action) {\r\n            var targetName = action.targetName,\r\n                params = utils.copy(action.params) || [],\r\n                actionName = action.actionName,\r\n                target;\r\n\r\n            if (!registry.has(targetName)) {\r\n                this.getFromTemplate(targetName);\r\n            }\r\n            target = registry.async(targetName);\r\n\r\n            if (target && typeof target === 'function' && actionName) {\r\n                params.unshift(actionName);\r\n                target.apply(target, params);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Create target component from template\r\n         *\r\n         * @param {Object} targetName - name of component,\r\n         * that supposed to be a template and need to be initialized\r\n         */\r\n        getFromTemplate: function (targetName) {\r\n            var parentName = targetName.split('.'),\r\n                index = parentName.pop(),\r\n                child;\r\n\r\n            parentName = parentName.join('.');\r\n            child = utils.template({\r\n                parent: parentName,\r\n                name: index,\r\n                nodeTemplate: targetName\r\n            });\r\n            layout([child]);\r\n        },\r\n\r\n        /**\r\n         * Extends 'additionalClasses' object.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        _setClasses: function () {\r\n            if (typeof this.additionalClasses === 'string') {\r\n                if (this.additionalClasses === '') {\r\n                    this.additionalClasses = {};\r\n\r\n                    return this;\r\n                }\r\n\r\n                this.additionalClasses = this.additionalClasses\r\n                    .trim()\r\n                    .split(' ')\r\n                    .reduce(function (classes, name) {\r\n                        classes[name] = true;\r\n\r\n                        return classes;\r\n                    }, {}\r\n                );\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Extends 'buttonClasses' object.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         */\r\n        _setButtonClasses: function () {\r\n            var additional = this.buttonClasses;\r\n\r\n            if (_.isString(additional)) {\r\n                this.buttonClasses = {};\r\n\r\n                if (additional.trim().length) {\r\n                    additional = additional.trim().split(' ');\r\n\r\n                    additional.forEach(function (name) {\r\n                        if (name.length) {\r\n                            this.buttonClasses[name] = true;\r\n                        }\r\n                    }, this);\r\n                }\r\n            }\r\n\r\n            _.extend(this.buttonClasses, {\r\n                'action-basic': !this.displayAsLink,\r\n                'action-additional': this.displayAsLink\r\n            });\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/collection.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'mageUtils',\r\n    'uiRegistry',\r\n    'uiComponent',\r\n    'uiLayout',\r\n    'Magento_Ui/js/modal/confirm'\r\n], function (_, utils, registry, Component, layout, confirm) {\r\n    'use strict';\r\n\r\n    var childTemplate = {\r\n        parent: '${ $.$data.name }',\r\n        name: '${ $.$data.childIndex }',\r\n        dataScope: '${ $.name }',\r\n        nodeTemplate: '${ $.$data.name }.${ $.$data.itemTemplate }'\r\n    };\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            lastIndex: 0,\r\n            template: 'ui/form/components/collection'\r\n        },\r\n\r\n        /**\r\n         * Extends instance with default config, calls initialize of parent\r\n         * class, calls initChildren method.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .initChildren();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Activates the incoming child and triggers the update event.\r\n         *\r\n         * @param {Object} elem - Incoming child.\r\n         */\r\n        initElement: function (elem) {\r\n            this._super();\r\n\r\n            elem.activate();\r\n\r\n            this.bubble('update');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Loops over corresponding data in data storage,\r\n         * creates child for each and pushes it's identifier to initialItems array.\r\n         *\r\n         * @returns {Collection} Chainable.\r\n         */\r\n        initChildren: function () {\r\n            var children = this.source.get(this.dataScope),\r\n                initial = this.initialItems = [];\r\n\r\n            _.each(children, function (item, index) {\r\n                initial.push(index);\r\n                this.addChild(index);\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Creates new item of collection, based on incoming 'index'.\r\n         * If not passed creates one with 'new_' prefix.\r\n         *\r\n         * @param {String|Object} [index] - Index of a child.\r\n         * @returns {Collection} Chainable.\r\n         */\r\n        addChild: function (index) {\r\n            this.childIndex = !_.isString(index) ?\r\n                'new_' + this.lastIndex++ :\r\n                index;\r\n\r\n            layout([utils.template(childTemplate, this)]);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Returns true if current set of items differ from initial one,\r\n         * or if some child has been changed.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        hasChanged: function () {\r\n            var initial = this.initialItems,\r\n                current = this.elems.pluck('index'),\r\n                changed = !utils.equalArrays(initial, current);\r\n\r\n            return changed || this.elems.some(function (elem) {\r\n                return _.some(elem.delegate('hasChanged'));\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Initiates validation of its' children components.\r\n         *\r\n         * @returns {Array} An array of validation results.\r\n         */\r\n        validate: function () {\r\n            var elems;\r\n\r\n            this.allValid = true;\r\n\r\n            elems = this.elems.sortBy(function (elem) {\r\n                return !elem.active();\r\n            });\r\n\r\n            elems = elems.map(this._validate, this);\r\n\r\n            return _.flatten(elems);\r\n        },\r\n\r\n        /**\r\n         * Iterator function for components validation.\r\n         * Activates first invalid child component.\r\n         *\r\n         * @param {Object} elem - Element to run validation on.\r\n         * @returns {Array} An array of validation results.\r\n         */\r\n        _validate: function (elem) {\r\n            var result = elem.delegate('validate'),\r\n                invalid;\r\n\r\n            invalid = _.some(result, function (item) {\r\n                return !item.valid;\r\n            });\r\n\r\n            if (this.allValid && invalid) {\r\n                this.allValid = false;\r\n\r\n                elem.activate();\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Creates function that removes element\r\n         * from collection using '_removeChild' method.\r\n         * @param  {Object} elem - Element that should be removed.\r\n         * @deprecated Not used anymore\r\n         */\r\n        removeAddress: function (elem) {\r\n            var self = this;\r\n\r\n            confirm({\r\n                content: this.removeMessage,\r\n                actions: {\r\n                    /** @inheritdoc */\r\n                    confirm: function () {\r\n                        self._removeAddress(elem);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Removes element from both collection and data storage,\r\n         * activates first element if removed one was active,\r\n         * triggers 'update' event.\r\n         *\r\n         * @param {Object} elem - Element to remove.\r\n         */\r\n        _removeAddress: function (elem) {\r\n            var isActive = elem.active(),\r\n                first;\r\n\r\n            elem.destroy();\r\n\r\n            first = this.elems.first();\r\n\r\n            if (first && isActive) {\r\n                first.activate();\r\n            }\r\n\r\n            this.bubble('update');\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/fieldset.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'Magento_Ui/js/lib/collapsible',\r\n    'underscore'\r\n], function (Collapsible, _) {\r\n    'use strict';\r\n\r\n    return Collapsible.extend({\r\n        defaults: {\r\n            template: 'ui/form/fieldset',\r\n            collapsible: false,\r\n            changed: false,\r\n            loading: false,\r\n            error: false,\r\n            opened: false,\r\n            level: 0,\r\n            visible: true,\r\n            initializeFieldsetDataByDefault: false, /* Data in some fieldsets should be initialized before open */\r\n            disabled: false,\r\n            listens: {\r\n                'opened': 'onVisibilityChange'\r\n            },\r\n            additionalClasses: {}\r\n        },\r\n\r\n        /**\r\n         * Extends instance with defaults. Invokes parent initialize method.\r\n         * Calls initListeners and pushParams methods.\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(this, 'onChildrenUpdate', 'onChildrenError', 'onContentLoading');\r\n\r\n            return this._super()\r\n                ._setClasses();\r\n        },\r\n\r\n        /**\r\n         * Initializes components' configuration.\r\n         *\r\n         * @returns {Fieldset} Chainable.\r\n         */\r\n        initConfig: function () {\r\n            this._super();\r\n            this._wasOpened = this.opened || !this.collapsible;\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls initObservable of parent class.\r\n         * Defines observable properties of instance.\r\n         *\r\n         * @returns {Object} Reference to instance\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('changed loading error visible');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls parent's initElement method.\r\n         * Assigns callbacks on various events of incoming element.\r\n         *\r\n         * @param  {Object} elem\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initElement: function (elem) {\r\n            elem.initContainer(this);\r\n\r\n            elem.on({\r\n                'update': this.onChildrenUpdate,\r\n                'loading': this.onContentLoading,\r\n                'error': this.onChildrenError\r\n            });\r\n\r\n            if (this.disabled) {\r\n                try {\r\n                    elem.disabled(true);\r\n                }\r\n                catch (e) {\r\n\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Is being invoked on children update.\r\n         * Sets changed property to one incoming.\r\n         *\r\n         * @param  {Boolean} hasChanged\r\n         */\r\n        onChildrenUpdate: function (hasChanged) {\r\n            if (!hasChanged) {\r\n                hasChanged = _.some(this.delegate('hasChanged'));\r\n            }\r\n\r\n            this.bubble('update', hasChanged);\r\n            this.changed(hasChanged);\r\n        },\r\n\r\n        /**\r\n         * Extends 'additionalClasses' object.\r\n         *\r\n         * @returns {Group} Chainable.\r\n         */\r\n        _setClasses: function () {\r\n            var additional = this.additionalClasses,\r\n                classes;\r\n\r\n            if (_.isString(additional)) {\r\n                additional = this.additionalClasses.split(' ');\r\n                classes = this.additionalClasses = {};\r\n\r\n                additional.forEach(function (name) {\r\n                    classes[name] = true;\r\n                }, this);\r\n            }\r\n\r\n            _.extend(this.additionalClasses, {\r\n                'admin__collapsible-block-wrapper': this.collapsible,\r\n                _show: this.opened,\r\n                _hide: !this.opened,\r\n                _disabled: this.disabled\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Handler of the \"opened\" property changes.\r\n         *\r\n         * @param {Boolean} isOpened\r\n         */\r\n        onVisibilityChange: function (isOpened) {\r\n            if (!this._wasOpened) {\r\n                this._wasOpened = isOpened;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Is being invoked on children validation error.\r\n         * Sets error property to one incoming.\r\n         *\r\n         * @param {String} message - error message.\r\n         */\r\n        onChildrenError: function (message) {\r\n            var hasErrors = false;\r\n\r\n            if (!message) {\r\n                hasErrors = this._isChildrenHasErrors(hasErrors, this);\r\n            }\r\n\r\n            this.error(hasErrors || message);\r\n\r\n            if (hasErrors || message) {\r\n                this.open();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns errors of children if exist\r\n         *\r\n         * @param {Boolean} hasErrors\r\n         * @param {*} container\r\n         * @return {Boolean}\r\n         * @private\r\n         */\r\n        _isChildrenHasErrors: function (hasErrors, container) {\r\n            var self = this;\r\n\r\n            if (hasErrors === false && container.hasOwnProperty('elems')) {\r\n                hasErrors = container.elems.some('error');\r\n\r\n                if (hasErrors === false && container.hasOwnProperty('_elems')) {\r\n                    container._elems.forEach(function (child) {\r\n\r\n                        if (hasErrors === false) {\r\n                            hasErrors = self._isChildrenHasErrors(hasErrors, child);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            return hasErrors;\r\n        },\r\n\r\n        /**\r\n         * Callback that sets loading property to true.\r\n         */\r\n        onContentLoading: function (isLoading) {\r\n            this.loading(isLoading);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/group.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'underscore',\r\n    'uiCollection'\r\n], function (_, Collection) {\r\n    'use strict';\r\n\r\n    return Collection.extend({\r\n        defaults: {\r\n            visible: true,\r\n            label: '',\r\n            showLabel: true,\r\n            required: false,\r\n            template: 'ui/group/group',\r\n            fieldTemplate: 'ui/form/field',\r\n            breakLine: true,\r\n            validateWholeGroup: false,\r\n            additionalClasses: {}\r\n        },\r\n\r\n        /**\r\n         * Extends this with defaults and config.\r\n         * Then calls initObservable, iniListenes and extractData methods.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                ._setClasses();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls initObservable of parent class.\r\n         * Defines observable properties of instance.\r\n         *\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('visible')\r\n                .observe({\r\n                    required: !!+this.required\r\n                });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Extends 'additionalClasses' object.\r\n         *\r\n         * @returns {Group} Chainable.\r\n         */\r\n        _setClasses: function () {\r\n            var additional = this.additionalClasses,\r\n                classes;\r\n\r\n            if (_.isString(additional)) {\r\n                additional = this.additionalClasses.split(' ');\r\n                classes = this.additionalClasses = {};\r\n\r\n                additional.forEach(function (name) {\r\n                    classes[name] = true;\r\n                }, this);\r\n            }\r\n\r\n            _.extend(this.additionalClasses, {\r\n                'admin__control-grouped': !this.breakLine,\r\n                'admin__control-fields': this.breakLine,\r\n                required:   this.required,\r\n                _error:     this.error,\r\n                _disabled:  this.disabled\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Defines if group has only one element.\r\n         * @return {Boolean}\r\n         */\r\n        isSingle: function () {\r\n            return this.elems.getLength() === 1;\r\n        },\r\n\r\n        /**\r\n         * Defines if group has multiple elements.\r\n         * @return {Boolean}\r\n         */\r\n        isMultiple: function () {\r\n            return this.elems.getLength() > 1;\r\n        },\r\n\r\n        /**\r\n         * Returns an array of child components previews.\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        getPreview: function () {\r\n            return this.elems.map('getPreview');\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/html.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    'underscore',\r\n    'uiComponent'\r\n], function ($, _, Component) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            content:        '',\r\n            showSpinner:    false,\r\n            loading:        false,\r\n            visible:        true,\r\n            template:       'ui/content/content',\r\n            additionalClasses: {},\r\n            ignoreTmpls: {\r\n                content: true\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Extends instance with default config, calls 'initialize' method of\r\n         *     parent, calls 'initAjaxConfig'\r\n         */\r\n        initialize: function () {\r\n            _.bindAll(this, 'onContainerToggle', 'onDataLoaded');\r\n\r\n            this._super()\r\n                ._setClasses()\r\n                .initAjaxConfig();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls 'initObservable' method of parent, initializes observable\r\n         * properties of instance\r\n         *\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('content loading visible');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Extends 'additionalClasses' object.\r\n         *\r\n         * @returns {Group} Chainable.\r\n         */\r\n        _setClasses: function () {\r\n            var additional = this.additionalClasses,\r\n                classes;\r\n\r\n            if (_.isString(additional)) {\r\n                additional = this.additionalClasses.split(' ');\r\n                classes = this.additionalClasses = {};\r\n\r\n                additional.forEach(function (name) {\r\n                    classes[name] = true;\r\n                }, this);\r\n            }\r\n\r\n            _.extend(this.additionalClasses, {\r\n                'admin__scope-old': !!additional\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initContainer: function (parent) {\r\n            this._super();\r\n\r\n            parent.on('active', this.onContainerToggle);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initializes default ajax config on instance\r\n         *\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initAjaxConfig: function () {\r\n            this.ajaxConfig = {\r\n                url: this.url,\r\n                data: {\r\n                    FORM_KEY: window.FORM_KEY\r\n                },\r\n                success:    this.onDataLoaded\r\n            };\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Calls 'loadData' if both 'active' variable and 'shouldLoad'\r\n         * property are truthy\r\n         *\r\n         * @param  {Boolean} active\r\n         */\r\n        onContainerToggle: function (active) {\r\n            if (active && this.shouldLoad()) {\r\n                this.loadData();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Defines if instance has 'content' property defined.\r\n         *\r\n         * @return {Boolean} [description]\r\n         */\r\n        hasData: function () {\r\n            return !!this.content();\r\n        },\r\n\r\n        /**\r\n         * Defines if instance should load external data\r\n         *\r\n         * @return {Boolean}\r\n         */\r\n        shouldLoad: function () {\r\n            return this.url && !this.hasData() && !this.loading();\r\n        },\r\n\r\n        /**\r\n         * Sets loading property to true, makes ajax call\r\n         *\r\n         * @return {Object} - reference to instance\r\n         */\r\n        loadData: function () {\r\n            this.loading(true);\r\n\r\n            $.ajax(this.ajaxConfig);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Ajax's request success handler. Calls 'updateContent' passing 'data'\r\n         * to it, then sets 'loading' property to false.\r\n         *\r\n         * @param  {String} data\r\n         */\r\n        onDataLoaded: function (data) {\r\n            this.updateContent(data)\r\n                .loading(false);\r\n        },\r\n\r\n        /**\r\n         * Sets incoming data 'content' property's value\r\n         *\r\n         * @param  {String} content\r\n         * @return {Object} - reference to instance\r\n         */\r\n        updateContent: function (content) {\r\n            this.content(content);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Content getter\r\n         *\r\n         * @returns {String}\r\n         */\r\n        getContentUnsanitizedHtml: function () {\r\n            return this.content();\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/insert-form.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    './insert',\r\n    'mageUtils',\r\n    'jquery'\r\n], function (Insert, utils, $) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Get page actions element.\r\n     *\r\n     * @param {String} elem\r\n     * @param {String} actionsClass\r\n     * @returns {String}\r\n     */\r\n    function getPageActions(elem, actionsClass) {\r\n        var el = document.createElement('div');\r\n\r\n        el.innerHTML = elem;\r\n\r\n        return el.getElementsByClassName(actionsClass)[0];\r\n    }\r\n\r\n    /**\r\n     * Return element without page actions toolbar\r\n     *\r\n     * @param {String} elem\r\n     * @param {String} actionsClass\r\n     * @returns {String}\r\n     */\r\n    function removePageActions(elem, actionsClass) {\r\n        var el = document.createElement('div'),\r\n            actions;\r\n\r\n        el.innerHTML = elem;\r\n        actions = el.getElementsByClassName(actionsClass)[0];\r\n\r\n        if (actions) {\r\n            el.removeChild(actions);\r\n        }\r\n\r\n        return el.innerHTML;\r\n    }\r\n\r\n    return Insert.extend({\r\n        defaults: {\r\n            externalFormName: '${ $.ns }.${ $.ns }',\r\n            pageActionsClass: 'page-actions',\r\n            actionsContainerClass: 'page-main-actions',\r\n            exports: {\r\n                prefix: '${ $.externalFormName }:selectorPrefix'\r\n            },\r\n            imports: {\r\n                toolbarSection: '${ $.toolbarContainer }:toolbarSection',\r\n                prefix: '${ $.toolbarContainer }:rootSelector',\r\n                messagesClass: '${ $.externalFormName }:messagesClass'\r\n            },\r\n            settings: {\r\n                ajax: {\r\n                    ajaxSave: true,\r\n                    exports: {\r\n                        ajaxSave: '${ $.externalFormName }:ajaxSave'\r\n                    },\r\n                    imports: {\r\n                        responseStatus: '${ $.externalFormName }:responseStatus',\r\n                        responseData: '${ $.externalFormName }:responseData'\r\n                    }\r\n                }\r\n            },\r\n            modules: {\r\n                externalForm: '${ $.externalFormName }'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe('responseStatus');\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function (config) {\r\n            var defaults = this.constructor.defaults;\r\n\r\n            utils.extend(defaults, defaults.settings[config.formSubmitType] || {});\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /** @inheritdoc*/\r\n        destroyInserted: function () {\r\n            if (this.isRendered && this.externalForm()) {\r\n                this.externalForm().delegate('destroy');\r\n                this.removeActions();\r\n                this.responseStatus(undefined);\r\n                this.responseData = {};\r\n            }\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        onRender: function (data) {\r\n            var actions = getPageActions(data, this.pageActionsClass);\r\n\r\n            if (!data.length) {\r\n                return this;\r\n            }\r\n            data = removePageActions(data, this.pageActionsClass);\r\n            this.renderActions(actions);\r\n            this._super(data);\r\n        },\r\n\r\n        /**\r\n         * Insert actions in toolbar.\r\n         *\r\n         * @param {String} actions\r\n         */\r\n        renderActions: function (actions) {\r\n            var $container = $('<div></div>');\r\n\r\n            $container\r\n                .addClass(this.actionsContainerClass)\r\n                .append(actions);\r\n\r\n            this.formHeader = $container;\r\n\r\n            $(this.toolbarSection).append(this.formHeader);\r\n        },\r\n\r\n        /**\r\n         * Remove actions toolbar.\r\n         */\r\n        removeActions: function () {\r\n            $(this.formHeader).siblings('.' + this.messagesClass).remove();\r\n            $(this.formHeader).remove();\r\n            this.formHeader = $();\r\n        },\r\n\r\n        /**\r\n         * Reset external form data.\r\n         */\r\n        resetForm: function () {\r\n            if (this.externalSource()) {\r\n                this.externalSource().trigger('data.reset');\r\n                this.responseStatus(undefined);\r\n            }\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/insert-listing.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'jquery',\r\n    './insert',\r\n    'mageUtils',\r\n    'underscore'\r\n], function ($, Insert, utils, _) {\r\n    'use strict';\r\n\r\n    return Insert.extend({\r\n        defaults: {\r\n            externalListingName: '${ $.ns }.${ $.ns }',\r\n            behaviourType: 'simple',\r\n            externalFilterMode: false,\r\n            requestConfig: {\r\n                method: 'POST'\r\n            },\r\n            externalCondition: 'nin',\r\n            settings: {\r\n                edit: {\r\n                    imports: {\r\n                        'onChangeRecord': '${ $.editorProvider }:changed'\r\n                    }\r\n                },\r\n                filter: {\r\n                    exports: {\r\n                        'requestConfig': '${ $.externalProvider }:requestConfig'\r\n                    }\r\n                }\r\n            },\r\n            imports: {\r\n                onSelectedChange: '${ $.selectionsProvider }:selected',\r\n                'update_url': '${ $.externalProvider }:update_url',\r\n                'indexField': '${ $.selectionsProvider }:indexField'\r\n            },\r\n            exports: {\r\n                externalFiltersModifier: '${ $.externalProvider }:params.filters_modifier'\r\n            },\r\n            listens: {\r\n                externalValue: 'updateExternalFiltersModifier updateSelections',\r\n                indexField: 'initialUpdateListing'\r\n            },\r\n            modules: {\r\n                selections: '${ $.selectionsProvider }',\r\n                externalListing: '${ $.externalListingName }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Invokes initialize method of parent class,\r\n         * contains initialization logic\r\n         */\r\n        initialize: function () {\r\n            this._super();\r\n            _.bindAll(this, 'updateValue', 'updateExternalValueByEditableData');\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function (config) {\r\n            var defaults = this.constructor.defaults;\r\n\r\n            if (config.behaviourType === 'edit') {\r\n                defaults.editableData = {};\r\n                _.map(defaults.settings.edit.imports, function (value, key) {\r\n                    this.imports[key] = value;\r\n                }, defaults);\r\n            }\r\n\r\n            if (config.externalFilterMode === true) {\r\n                _.map(defaults.settings.filter.exports, function (value, key) {\r\n                    this.exports[key] = value;\r\n                }, defaults);\r\n            }\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe([\r\n                    'externalValue'\r\n                ]);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        destroyInserted: function () {\r\n            if (this.isRendered && this.externalListing()) {\r\n                this.externalListing().source.storage().clearRequests();\r\n                this.externalListing().delegate('destroy');\r\n            }\r\n\r\n            return this._super();\r\n        },\r\n\r\n        /**\r\n         * Store data from edited record\r\n         *\r\n         * @param {Object} record\r\n         */\r\n        onChangeRecord: function (record) {\r\n            this.updateEditableData(record);\r\n\r\n            if (!this.dataLinks.imports) {\r\n                return;\r\n            }\r\n\r\n            this.updateExternalValueByEditableData();\r\n        },\r\n\r\n        /**\r\n         * Updates externalValue every time row is selected,\r\n         * if it is configured by 'dataLinks.imports'\r\n         * Also suppress dataLinks so import/export of selections will not activate each other in circle\r\n         *\r\n         */\r\n        onSelectedChange: function () {\r\n            if (!this.dataLinks.imports ||\r\n                this.suppressDataLinks ||\r\n                _.isBoolean(this.initialExportDone) && !this.initialExportDone\r\n            ) {\r\n                this.suppressDataLinks = false;\r\n\r\n                return;\r\n            }\r\n\r\n            this.suppressDataLinks = true;\r\n            this.updateExternalValue();\r\n        },\r\n\r\n        /**\r\n         * Stores data from editor in editableData\r\n         * @param {Object} record\r\n         *\r\n         */\r\n        updateEditableData: function (record) {\r\n            var id = _.keys(record[0])[0];\r\n\r\n            this.editableData[id] = record[0][id];\r\n        },\r\n\r\n        /**\r\n         * Updates externalValue by data from editor (already stored in editableData)\r\n         *\r\n         */\r\n        updateExternalValueByEditableData: function () {\r\n            var updatedExtValue;\r\n\r\n            if (!(this.behaviourType === 'edit') || _.isEmpty(this.editableData) || _.isEmpty(this.externalValue())) {\r\n                return;\r\n            }\r\n\r\n            updatedExtValue = this.externalValue();\r\n            updatedExtValue.map(function (item) {\r\n                _.extend(item, this.editableData[item[this.indexField]]);\r\n            }, this);\r\n            this.setExternalValue(updatedExtValue);\r\n        },\r\n\r\n        /**\r\n         * Updates externalValue, from selectionsProvider data (if it is enough)\r\n         * or ajax request to server\r\n         *\r\n         * @returns {Object} result - deferred that will be resolved when value is updated\r\n         */\r\n        updateExternalValue: function () {\r\n            var result = $.Deferred(),\r\n                provider = this.selections(),\r\n                selections,\r\n                totalSelected,\r\n                itemsType,\r\n                rows;\r\n\r\n            if (!provider) {\r\n                return result;\r\n            }\r\n\r\n            selections = provider && provider.getSelections();\r\n            totalSelected = provider.totalSelected();\r\n            itemsType = selections && selections.excludeMode ? 'excluded' : 'selected';\r\n            rows = provider && provider.rows();\r\n\r\n            if (this.canUpdateFromClientData(totalSelected, selections.selected, rows)) {\r\n                this.updateFromClientData(selections.selected, rows);\r\n                this.updateExternalValueByEditableData();\r\n                result.resolve();\r\n            } else {\r\n                this.updateFromServerData(selections, itemsType).done(function () {\r\n                    this.updateExternalValueByEditableData();\r\n                    result.resolve();\r\n                }.bind(this));\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Check if the selected rows data can be taken from selectionsProvider data\r\n         * (which only stores data of the current page rows)\r\n         *  + from already saved data\r\n         *\r\n         * @param {Boolean} totalSelected - total rows selected (include rows that were filtered out)\r\n         * @param {Array} selected - ids of selected rows\r\n         * @param {Object} rows\r\n         */\r\n        canUpdateFromClientData: function (totalSelected, selected, rows) {\r\n            var alreadySavedSelectionsIds = _.pluck(this.externalValue(), this.indexField),\r\n                rowsOnCurrentPageIds = _.pluck(rows, this.indexField);\r\n\r\n            return totalSelected === selected.length &&\r\n                _.intersection(_.union(alreadySavedSelectionsIds, rowsOnCurrentPageIds), selected).length ===\r\n                selected.length;\r\n        },\r\n\r\n        /**\r\n         * Updates externalValue, from selectionsProvider data\r\n         * (which only stores data of the current page rows)\r\n         *  + from already saved data\r\n         *  so we can avoid request to server\r\n         *\r\n         * @param {Array} selected - ids of selected rows\r\n         * @param {Object} rows\r\n         */\r\n        updateFromClientData: function (selected, rows) {\r\n            var value,\r\n                rowIds,\r\n                valueIds;\r\n\r\n            if (!selected || !selected.length) {\r\n                this.setExternalValue([]);\r\n\r\n                return;\r\n            }\r\n\r\n            value = this.externalValue();\r\n            rowIds = _.pluck(rows, this.indexField);\r\n            valueIds = _.pluck(value, this.indexField);\r\n\r\n            value = _.map(selected, function (item) {\r\n                if (_.contains(rowIds, item)) {\r\n                    return _.find(rows, function (row) {\r\n                        return row[this.indexField] === item;\r\n                    }, this);\r\n                } else if (_.contains(valueIds, item)) {\r\n                    return _.find(value, function (row) {\r\n                        return row[this.indexField] === item;\r\n                    }, this);\r\n                }\r\n            }, this);\r\n\r\n            this.setExternalValue(value);\r\n        },\r\n\r\n        /**\r\n         * Updates externalValue, from ajax request to grab selected rows data\r\n         *\r\n         * @param {Object} selections\r\n         * @param {String} itemsType\r\n         *\r\n         * @returns {Object} request - deferred that will be resolved when ajax is done\r\n         */\r\n        updateFromServerData: function (selections, itemsType) {\r\n            var filterType = selections && selections.excludeMode ? 'nin' : 'in',\r\n                selectionsData = {},\r\n                request;\r\n\r\n            _.extend(selectionsData, this.params || {}, selections.params);\r\n\r\n            if (selections[itemsType] && selections[itemsType].length) {\r\n                selectionsData.filters = {};\r\n                selectionsData['filters_modifier'] = {};\r\n                selectionsData['filters_modifier'][this.indexField] = {\r\n                    'condition_type': filterType,\r\n                    value: selections[itemsType]\r\n                };\r\n            }\r\n\r\n            selectionsData.paging = {\r\n                notLimits: 1\r\n            };\r\n\r\n            request = this.requestData(selectionsData, {\r\n                method: this.requestConfig.method\r\n            });\r\n            request\r\n                .done(function (data) {\r\n                    this.setExternalValue(data.items || data);\r\n                    this.loading(false);\r\n                }.bind(this))\r\n                .fail(this.onError);\r\n\r\n            return request;\r\n        },\r\n\r\n        /**\r\n         * Set listing rows data to the externalValue,\r\n         * or if externalData is configured with the names of particular columns,\r\n         * filter rows data to have only these columns, and then set to the externalValue\r\n         *\r\n         * @param {Object} newValue - rows data\r\n         *\r\n         */\r\n        setExternalValue: function (newValue) {\r\n            var keys = this.externalData,\r\n                value = this.externalValue(),\r\n                selectedIds = _.pluck(newValue, this.indexField);\r\n\r\n            if (_.isArray(keys) && !_.isEmpty(keys)) {\r\n                newValue = _.map(newValue, function (item) {\r\n                    return _.pick(item, keys);\r\n                }, this);\r\n            } else if (keys && _.isString(keys) && !_.isEmpty(newValue)) {\r\n                newValue = newValue[0][keys];\r\n            }\r\n\r\n            if (this.externalFilterMode) {\r\n                newValue = _.union(newValue, _.filter(value,\r\n                    function (item) {\r\n                        return !_.contains(selectedIds, item[this.indexField]);\r\n                    }, this));\r\n            }\r\n\r\n            this.set('externalValue', newValue);\r\n        },\r\n\r\n        /**\r\n         * Updates external filter (if externalFilterMode is on)\r\n         * every time, when value is updated,\r\n         * so grid is re-filtered to exclude or include selected rows only\r\n         *\r\n         * @param {Object} items\r\n         */\r\n        updateExternalFiltersModifier: function (items) {\r\n            var provider,\r\n                filter = {};\r\n\r\n            if (!this.externalFilterMode) {\r\n                return;\r\n            }\r\n\r\n            provider = this.selections();\r\n\r\n            if (!provider) {\r\n                this.needInitialListingUpdate = true;\r\n\r\n                return;\r\n            }\r\n\r\n            filter[this.indexField] = {\r\n                'condition_type': this.externalCondition,\r\n                value: _.pluck(items, this.indexField)\r\n            };\r\n            this.set('externalFiltersModifier', filter);\r\n        },\r\n\r\n        /**\r\n         * Updates grid selections\r\n         * every time, when extenalValue is updated,\r\n         * so grid is re-selected according to externalValue updated\r\n         * Also suppress dataLinks so import/export of selections will not activate each other in circle\r\n         *\r\n         * @param {Object} items\r\n         */\r\n        updateSelections: function (items) {\r\n            var provider,\r\n                ids;\r\n\r\n            if (!this.dataLinks.exports || this.suppressDataLinks) {\r\n                this.suppressDataLinks = false;\r\n                this.initialExportDone = true;\r\n\r\n                return;\r\n            }\r\n\r\n            provider = this.selections();\r\n\r\n            if (!provider) {\r\n                this.needInitialListingUpdate = true;\r\n\r\n                return;\r\n            }\r\n\r\n            this.suppressDataLinks = true;\r\n            provider.deselectAll();\r\n\r\n            if (_.isString(items)) {\r\n                provider.selected([items] || []);\r\n            } else {\r\n                ids = _.pluck(items || [], this.indexField)\r\n                    .map(function (item) {\r\n                        return item.toString();\r\n                    });\r\n\r\n                provider.selected(ids || []);\r\n            }\r\n            this.initialExportDone = true;\r\n        },\r\n\r\n        /**\r\n         * initial update of the listing\r\n         * with rows that must be checked/filtered\r\n         * by the indexes\r\n         */\r\n        initialUpdateListing: function () {\r\n            var items = this.externalValue();\r\n\r\n            if (this.needInitialListingUpdate && items) {\r\n                this.updateExternalFiltersModifier(items);\r\n                this.updateSelections(items);\r\n                this.needInitialListingUpdate = false;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reload source\r\n         */\r\n        reload: function () {\r\n            this.externalSource().set('params.t', new Date().getTime());\r\n        },\r\n\r\n        /**\r\n         * Updates value from external value\r\n         *\r\n         */\r\n        updateValue: function () {\r\n            this.set('value', this.externalValue());\r\n        },\r\n\r\n        /**\r\n         * Updates external value, then updates value from external value\r\n         *\r\n         */\r\n        save: function () {\r\n            this.updateExternalValue().done(\r\n                function () {\r\n                    if (!this.realTimeLink) {\r\n                        this.updateValue();\r\n                    }\r\n                }.bind(this)\r\n            );\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/insert.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'uiElement',\r\n    'jquery',\r\n    'mage/translate',\r\n    'mageUtils',\r\n    'underscore',\r\n    'Magento_Ui/js/modal/alert',\r\n    'Magento_Ui/js/lib/view/utils/bindings',\r\n    'Magento_Ui/js/lib/view/utils/async'\r\n], function (Element, $, $t, utils, _, alert) {\r\n    'use strict';\r\n\r\n    return Element.extend({\r\n        defaults: {\r\n            content: '',\r\n            template: 'ui/form/insert',\r\n            showSpinner: true,\r\n            loading: false,\r\n            autoRender: true,\r\n            visible: true,\r\n            contentSelector: '${$.name}',\r\n            externalData: [],\r\n            params: {\r\n                namespace: '${ $.ns }'\r\n            },\r\n            renderSettings: {\r\n                url: '${ $.render_url }',\r\n                dataType: 'html'\r\n            },\r\n            updateSettings: {\r\n                url: '${ $.update_url }',\r\n                dataType: 'json'\r\n            },\r\n            imports: {},\r\n            exports: {},\r\n            listens: {},\r\n            links: {\r\n                value: '${ $.provider }:${ $.dataScope}'\r\n            },\r\n            modules: {\r\n                externalSource: '${ $.externalProvider }'\r\n            }\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initialize: function () {\r\n            this._super();\r\n            _.bindAll(this, 'onRender', 'onUpdate');\r\n\r\n            if (this.autoRender) {\r\n                this.render();\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initObservable: function () {\r\n            return this._super()\r\n                .observe([\r\n                    'visible',\r\n                    'content',\r\n                    'value',\r\n                    'loading'\r\n                ]);\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        initConfig: function (config) {\r\n            this.initDataLink(config)._super();\r\n            this.contentSelector = this.contentSelector.replace(/\\./g, '_');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Sync data with external provider.\r\n         *\r\n         * @param {Object} config\r\n         * @returns {Object}\r\n         */\r\n        initDataLink: function (config) {\r\n            var key, value;\r\n\r\n            if (config.dataLinks) {\r\n                _.each(config.externalData, function (val) {\r\n                    value = val;\r\n                    key = 'externalValue.' + val.replace('data.', '');\r\n\r\n                    if (config.dataLinks.imports) {\r\n                        this.imports[key] = '${ $.externalProvider }:' + value;\r\n                    }\r\n\r\n                    if (config.dataLinks.exports) {\r\n                        this.exports[key] = '${ $.externalProvider }:' + value;\r\n                    }\r\n                    this.links[key] = '${ $.externalProvider }:' + value;\r\n                }, this.constructor.defaults);\r\n            }\r\n\r\n            if (config.realTimeLink) {\r\n                this.constructor.defaults.links.externalValue = 'value';\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Request for render content.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        render: function (params) {\r\n            var self = this,\r\n                request;\r\n\r\n            if (this.isRendered) {\r\n                return this;\r\n            }\r\n\r\n            self.previousParams = params || {};\r\n\r\n            $.async({\r\n                component: this.name,\r\n                ctx: '.' + this.contentSelector\r\n            }, function (el) {\r\n                self.contentEl = $(el);\r\n                self.startRender = true;\r\n                params = _.extend({}, self.params, params || {});\r\n                request = self.requestData(params, self.renderSettings);\r\n                request\r\n                    .done(self.onRender)\r\n                    .fail(self.onError);\r\n            });\r\n\r\n            return this;\r\n        },\r\n\r\n        /** @inheritdoc */\r\n        destroy: function () {\r\n            this.destroyInserted()\r\n                ._super();\r\n        },\r\n\r\n        /**\r\n         * Destroy inserted components.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        destroyInserted: function () {\r\n            if (this.isRendered) {\r\n                this.isRendered = false;\r\n                this.content('');\r\n\r\n                if (this.externalSource()) {\r\n                    this.externalSource().destroy();\r\n                }\r\n                this.initExternalLinks();\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Initialize links on external components.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        initExternalLinks: function () {\r\n            var imports = this.filterExternalLinks(this.imports, this.ns),\r\n                exports = this.filterExternalLinks(this.exports, this.ns),\r\n                links = this.filterExternalLinks(this.links, this.ns);\r\n\r\n            this.setLinks(links, 'imports')\r\n                .setLinks(links, 'exports');\r\n\r\n            _.each({\r\n                exports: exports,\r\n                imports: imports\r\n            }, this.setLinks, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Filter external links.\r\n         *\r\n         * @param {Object} data\r\n         * @param {String }ns\r\n         * @returns {Object}\r\n         */\r\n        filterExternalLinks: function (data, ns) {\r\n            var links  = {};\r\n\r\n            _.each(data, function (value, key) {\r\n                if (typeof value === 'string' && value.split('.')[0] === ns) {\r\n                    links[key] = value;\r\n                }\r\n            });\r\n\r\n            return links;\r\n        },\r\n\r\n        /**\r\n         * Request with configurable params and settings.\r\n         *\r\n         * @param {Object} params\r\n         * @param {Object} ajaxSettings\r\n         * @returns {Object}\r\n         */\r\n        requestData: function (params, ajaxSettings) {\r\n            var query = utils.copy(params);\r\n\r\n            ajaxSettings = _.extend({\r\n                url: this['update_url'],\r\n                method: 'GET',\r\n                data: query,\r\n                dataType: 'json'\r\n            }, ajaxSettings);\r\n\r\n            this.loading(true);\r\n\r\n            return $.ajax(ajaxSettings);\r\n        },\r\n\r\n        /**\r\n         * Callback that render content.\r\n         *\r\n         * @param {*} data\r\n         */\r\n        onRender: function (data) {\r\n            var resp;\r\n\r\n            this.loading(false);\r\n\r\n            try {\r\n                resp = JSON.parse(data);\r\n\r\n                if (resp.ajaxExpired) {\r\n                    window.location.href = resp.ajaxRedirect;\r\n                }\r\n            } catch (e) {\r\n                this.set('content', data);\r\n                this.isRendered = true;\r\n                this.startRender = false;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Error callback.\r\n         *\r\n         * @param {Object} xhr\r\n         */\r\n        onError: function (xhr) {\r\n            if (xhr.statusText === 'abort') {\r\n                return;\r\n            }\r\n\r\n            alert({\r\n                content: $t('Something went wrong.')\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Getter for external data.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        getExternalData: function () {\r\n            var data = {};\r\n\r\n            _.each(this.externalData, function (path) {\r\n                utils.nested(data, path.replace('data.', ''), this.externalSource().get(path));\r\n            }, this);\r\n\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * Request for update data.\r\n         *\r\n         * @returns {*|Object}\r\n         */\r\n        updateData: function (params) {\r\n            var request;\r\n\r\n            params = _.extend(params || {}, this.params);\r\n\r\n            if (!this.startRender && !this.isRendered) {\r\n                return this.render(params);\r\n            }\r\n\r\n            request = this.requestData(params, this.updateSettings);\r\n            request\r\n                .done(this.onUpdate)\r\n                .fail(this.onError);\r\n\r\n            return request;\r\n        },\r\n\r\n        /**\r\n         * Set data to external provider, clear changes.\r\n         *\r\n         * @param {*} data\r\n         */\r\n        onUpdate: function (data) {\r\n            this.externalSource().set('data', data);\r\n            this.externalSource().trigger('data.overload');\r\n            this.loading(false);\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/multiline.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    './group'\r\n], function (Group) {\r\n    'use strict';\r\n\r\n    return Group.extend({\r\n        defaults: {\r\n            links: {\r\n                value: '${ $.provider }:${ $.dataScope }'\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize Multiline component.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        initialize: function () {\r\n            return this._super()\r\n                ._prepareValue();\r\n        },\r\n\r\n        /**\r\n         * {@inheritdoc}\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('value');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Prepare value for Multiline options.\r\n         *\r\n         * @returns {Object} Chainable.\r\n         * @private\r\n         */\r\n        _prepareValue: function () {\r\n            var value = this.value();\r\n\r\n            if (typeof value === 'string') {\r\n                this.value(value.split('\\n'));\r\n            }\r\n\r\n            return this;\r\n        }\r\n    });\r\n});\r\n","Magento_Ui/js/form/components/tab.js":"/**\r\n * Copyright \u00a9 Magento, Inc. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * @api\r\n */\r\ndefine([\r\n    'uiCollection'\r\n], function (Collection) {\r\n    'use strict';\r\n\r\n    return Collection.extend({\r\n        defaults: {\r\n            uniqueProp:     'active',\r\n            active:         false,\r\n            wasActivated:   false\r\n        },\r\n\r\n        /**\r\n         * Extends instance with defaults. Invokes parent initialize method.\r\n         * Calls initListeners and pushParams methods.\r\n         */\r\n        initialize: function () {\r\n            this._super()\r\n                .setUnique();\r\n        },\r\n\r\n        /**\r\n         * Calls initObservable of parent class.\r\n         * Defines observable properties of instance.\r\n         * @return {Object} - reference to instance\r\n         */\r\n        initObservable: function () {\r\n            this._super()\r\n                .observe('active wasActivated');\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Sets active property to true, then invokes pushParams method.\r\n         */\r\n        activate: function () {\r\n            this.active(true);\r\n            this.wasActivated(true);\r\n\r\n            this.setUnique();\r\n\r\n            return true;\r\n        }\r\n    });\r\n});\r\n"}
}});
